var O8=Object.defineProperty;var AD=t=>{throw TypeError(t)};var D8=(t,e,n)=>e in t?O8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Te=(t,e,n)=>D8(t,typeof e!="symbol"?e+"":e,n),Z1=(t,e,n)=>e.has(t)||AD("Cannot "+n);var d=(t,e,n)=>(Z1(t,e,"read from private field"),n?n.call(t):e.get(t)),R=(t,e,n)=>e.has(t)?AD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),S=(t,e,n,r)=>(Z1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),N=(t,e,n)=>(Z1(t,e,"access private method"),n);var Lr=(t,e,n,r)=>({set _(i){S(t,e,i,n)},get _(){return d(t,e,r)}});function M8(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ou(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xV={exports:{}},rE={},AV={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0=Symbol.for("react.element"),L8=Symbol.for("react.portal"),j8=Symbol.for("react.fragment"),F8=Symbol.for("react.strict_mode"),V8=Symbol.for("react.profiler"),U8=Symbol.for("react.provider"),B8=Symbol.for("react.context"),$8=Symbol.for("react.forward_ref"),z8=Symbol.for("react.suspense"),H8=Symbol.for("react.memo"),W8=Symbol.for("react.lazy"),ED=Symbol.iterator;function G8(t){return t===null||typeof t!="object"?null:(t=ED&&t[ED]||t["@@iterator"],typeof t=="function"?t:null)}var EV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SV=Object.assign,TV={};function Em(t,e,n){this.props=t,this.context=e,this.refs=TV,this.updater=n||EV}Em.prototype.isReactComponent={};Em.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Em.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function PV(){}PV.prototype=Em.prototype;function ik(t,e,n){this.props=t,this.context=e,this.refs=TV,this.updater=n||EV}var sk=ik.prototype=new PV;sk.constructor=ik;SV(sk,Em.prototype);sk.isPureReactComponent=!0;var SD=Array.isArray,IV=Object.prototype.hasOwnProperty,ak={current:null},CV={key:!0,ref:!0,__self:!0,__source:!0};function kV(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)IV.call(e,r)&&!CV.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:z0,type:t,key:s,ref:a,props:i,_owner:ak.current}}function q8(t,e){return{$$typeof:z0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ok(t){return typeof t=="object"&&t!==null&&t.$$typeof===z0}function K8(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var TD=/\/+/g;function eS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?K8(""+t.key):e.toString(36)}function X_(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case z0:case L8:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+eS(a,0):r,SD(i)?(n="",t!=null&&(n=t.replace(TD,"$&/")+"/"),X_(i,e,n,"",function(c){return c})):i!=null&&(ok(i)&&(i=q8(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(TD,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",SD(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+eS(s,o);a+=X_(s,e,n,l,i)}else if(l=G8(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+eS(s,o++),a+=X_(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function r_(t,e,n){if(t==null)return t;var r=[],i=0;return X_(t,r,"","",function(s){return e.call(n,s,i++)}),r}function X8(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zr={current:null},Y_={transition:null},Y8={ReactCurrentDispatcher:Zr,ReactCurrentBatchConfig:Y_,ReactCurrentOwner:ak};function RV(){throw Error("act(...) is not supported in production builds of React.")}qe.Children={map:r_,forEach:function(t,e,n){r_(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return r_(t,function(){e++}),e},toArray:function(t){return r_(t,function(e){return e})||[]},only:function(t){if(!ok(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};qe.Component=Em;qe.Fragment=j8;qe.Profiler=V8;qe.PureComponent=ik;qe.StrictMode=F8;qe.Suspense=z8;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y8;qe.act=RV;qe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=SV({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=ak.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)IV.call(e,l)&&!CV.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:z0,type:t.type,key:i,ref:s,props:r,_owner:a}};qe.createContext=function(t){return t={$$typeof:B8,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:U8,_context:t},t.Consumer=t};qe.createElement=kV;qe.createFactory=function(t){var e=kV.bind(null,t);return e.type=t,e};qe.createRef=function(){return{current:null}};qe.forwardRef=function(t){return{$$typeof:$8,render:t}};qe.isValidElement=ok;qe.lazy=function(t){return{$$typeof:W8,_payload:{_status:-1,_result:t},_init:X8}};qe.memo=function(t,e){return{$$typeof:H8,type:t,compare:e===void 0?null:e}};qe.startTransition=function(t){var e=Y_.transition;Y_.transition={};try{t()}finally{Y_.transition=e}};qe.unstable_act=RV;qe.useCallback=function(t,e){return Zr.current.useCallback(t,e)};qe.useContext=function(t){return Zr.current.useContext(t)};qe.useDebugValue=function(){};qe.useDeferredValue=function(t){return Zr.current.useDeferredValue(t)};qe.useEffect=function(t,e){return Zr.current.useEffect(t,e)};qe.useId=function(){return Zr.current.useId()};qe.useImperativeHandle=function(t,e,n){return Zr.current.useImperativeHandle(t,e,n)};qe.useInsertionEffect=function(t,e){return Zr.current.useInsertionEffect(t,e)};qe.useLayoutEffect=function(t,e){return Zr.current.useLayoutEffect(t,e)};qe.useMemo=function(t,e){return Zr.current.useMemo(t,e)};qe.useReducer=function(t,e,n){return Zr.current.useReducer(t,e,n)};qe.useRef=function(t){return Zr.current.useRef(t)};qe.useState=function(t){return Zr.current.useState(t)};qe.useSyncExternalStore=function(t,e,n){return Zr.current.useSyncExternalStore(t,e,n)};qe.useTransition=function(){return Zr.current.useTransition()};qe.version="18.3.1";AV.exports=qe;var E=AV.exports;const NV=ou(E),Q8=M8({__proto__:null,default:NV},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J8=E,Z8=Symbol.for("react.element"),eG=Symbol.for("react.fragment"),tG=Object.prototype.hasOwnProperty,nG=J8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rG={key:!0,ref:!0,__self:!0,__source:!0};function OV(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)tG.call(e,r)&&!rG.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Z8,type:t,key:s,ref:a,props:i,_owner:nG.current}}rE.Fragment=eG;rE.jsx=OV;rE.jsxs=OV;xV.exports=rE;var _=xV.exports,xT={},DV={exports:{}},Zi={},MV={exports:{}},LV={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,X){var te=H.length;H.push(X);e:for(;0<te;){var ce=te-1>>>1,ue=H[ce];if(0<i(ue,X))H[ce]=X,H[te]=ue,te=ce;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var X=H[0],te=H.pop();if(te!==X){H[0]=te;e:for(var ce=0,ue=H.length,ve=ue>>>1;ce<ve;){var Ue=2*(ce+1)-1,et=H[Ue],Ye=Ue+1,me=H[Ye];if(0>i(et,te))Ye<ue&&0>i(me,et)?(H[ce]=me,H[Ye]=te,ce=Ye):(H[ce]=et,H[Ue]=te,ce=Ue);else if(Ye<ue&&0>i(me,te))H[ce]=me,H[Ye]=te,ce=Ye;else break e}}return X}function i(H,X){var te=H.sortIndex-X.sortIndex;return te!==0?te:H.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,f=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(H){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=H)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(c)}}function I(H){if(v=!1,A(H),!g)if(n(l)!==null)g=!0,K(k);else{var X=n(c);X!==null&&q(I,X.startTime-H)}}function k(H,X){g=!1,v&&(v=!1,w(C),C=-1),m=!0;var te=f;try{for(A(X),h=n(l);h!==null&&(!(h.expirationTime>X)||H&&!D());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,f=h.priorityLevel;var ue=ce(h.expirationTime<=X);X=t.unstable_now(),typeof ue=="function"?h.callback=ue:h===n(l)&&r(l),A(X)}else r(l);h=n(l)}if(h!==null)var ve=!0;else{var Ue=n(c);Ue!==null&&q(I,Ue.startTime-X),ve=!1}return ve}finally{h=null,f=te,m=!1}}var M=!1,P=null,C=-1,O=5,j=-1;function D(){return!(t.unstable_now()-j<O)}function F(){if(P!==null){var H=t.unstable_now();j=H;var X=!0;try{X=P(!0,H)}finally{X?V():(M=!1,P=null)}}else M=!1}var V;if(typeof b=="function")V=function(){b(F)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,re=Y.port2;Y.port1.onmessage=F,V=function(){re.postMessage(null)}}else V=function(){y(F,0)};function K(H){P=H,M||(M=!0,V())}function q(H,X){C=y(function(){H(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,K(k))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var te=f;f=X;try{return H()}finally{f=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=f;f=H;try{return X()}finally{f=te}},t.unstable_scheduleCallback=function(H,X,te){var ce=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ce+te:ce):te=ce,H){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=te+ue,H={id:u++,callback:X,priorityLevel:H,startTime:te,expirationTime:ue,sortIndex:-1},te>ce?(H.sortIndex=te,e(c,H),n(l)===null&&H===n(c)&&(v?(w(C),C=-1):v=!0,q(I,te-ce))):(H.sortIndex=ue,e(l,H),g||m||(g=!0,K(k))),H},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(H){var X=f;return function(){var te=f;f=X;try{return H.apply(this,arguments)}finally{f=te}}}})(LV);MV.exports=LV;var iG=MV.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sG=E,Xi=iG;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jV=new Set,Tv={};function Rd(t,e){tm(t,e),tm(t+"Capture",e)}function tm(t,e){for(Tv[t]=e,t=0;t<e.length;t++)jV.add(e[t])}var rl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),AT=Object.prototype.hasOwnProperty,aG=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,PD={},ID={};function oG(t){return AT.call(ID,t)?!0:AT.call(PD,t)?!1:aG.test(t)?ID[t]=!0:(PD[t]=!0,!1)}function lG(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cG(t,e,n,r){if(e===null||typeof e>"u"||lG(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ei(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var cr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cr[t]=new ei(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cr[e]=new ei(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cr[t]=new ei(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cr[t]=new ei(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cr[t]=new ei(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cr[t]=new ei(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cr[t]=new ei(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cr[t]=new ei(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cr[t]=new ei(t,5,!1,t.toLowerCase(),null,!1,!1)});var lk=/[\-:]([a-z])/g;function ck(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lk,ck);cr[e]=new ei(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lk,ck);cr[e]=new ei(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lk,ck);cr[e]=new ei(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cr[t]=new ei(t,1,!1,t.toLowerCase(),null,!1,!1)});cr.xlinkHref=new ei("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cr[t]=new ei(t,1,!1,t.toLowerCase(),null,!0,!0)});function uk(t,e,n,r){var i=cr.hasOwnProperty(e)?cr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cG(e,n,i,r)&&(n=null),r||i===null?oG(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var _l=sG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,i_=Symbol.for("react.element"),gf=Symbol.for("react.portal"),vf=Symbol.for("react.fragment"),hk=Symbol.for("react.strict_mode"),ET=Symbol.for("react.profiler"),FV=Symbol.for("react.provider"),VV=Symbol.for("react.context"),dk=Symbol.for("react.forward_ref"),ST=Symbol.for("react.suspense"),TT=Symbol.for("react.suspense_list"),fk=Symbol.for("react.memo"),Vl=Symbol.for("react.lazy"),UV=Symbol.for("react.offscreen"),CD=Symbol.iterator;function ug(t){return t===null||typeof t!="object"?null:(t=CD&&t[CD]||t["@@iterator"],typeof t=="function"?t:null)}var Ht=Object.assign,tS;function Og(t){if(tS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);tS=e&&e[1]||""}return`
`+tS+t}var nS=!1;function rS(t,e){if(!t||nS)return"";nS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{nS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Og(t):""}function uG(t){switch(t.tag){case 5:return Og(t.type);case 16:return Og("Lazy");case 13:return Og("Suspense");case 19:return Og("SuspenseList");case 0:case 2:case 15:return t=rS(t.type,!1),t;case 11:return t=rS(t.type.render,!1),t;case 1:return t=rS(t.type,!0),t;default:return""}}function PT(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vf:return"Fragment";case gf:return"Portal";case ET:return"Profiler";case hk:return"StrictMode";case ST:return"Suspense";case TT:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case VV:return(t.displayName||"Context")+".Consumer";case FV:return(t._context.displayName||"Context")+".Provider";case dk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fk:return e=t.displayName||null,e!==null?e:PT(t.type)||"Memo";case Vl:e=t._payload,t=t._init;try{return PT(t(e))}catch{}}return null}function hG(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return PT(e);case 8:return e===hk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function BV(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dG(t){var e=BV(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function s_(t){t._valueTracker||(t._valueTracker=dG(t))}function $V(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=BV(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function IT(t,e){var n=e.checked;return Ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kD(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zV(t,e){e=e.checked,e!=null&&uk(t,"checked",e,!1)}function CT(t,e){zV(t,e);var n=Kc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?kT(t,e.type,n):e.hasOwnProperty("defaultValue")&&kT(t,e.type,Kc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function RD(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function kT(t,e,n){(e!=="number"||Zb(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Dg=Array.isArray;function Df(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kc(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function RT(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ND(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ie(92));if(Dg(n)){if(1<n.length)throw Error(ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kc(n)}}function HV(t,e){var n=Kc(e.value),r=Kc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function OD(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function WV(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function NT(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?WV(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var a_,GV=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(a_=a_||document.createElement("div"),a_.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=a_.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pv(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ov={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fG=["Webkit","ms","Moz","O"];Object.keys(ov).forEach(function(t){fG.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ov[e]=ov[t]})});function qV(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ov.hasOwnProperty(t)&&ov[t]?(""+e).trim():e+"px"}function KV(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=qV(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var pG=Ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function OT(t,e){if(e){if(pG[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function DT(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var MT=null;function pk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var LT=null,Mf=null,Lf=null;function DD(t){if(t=G0(t)){if(typeof LT!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=lE(e),LT(t.stateNode,t.type,e))}}function XV(t){Mf?Lf?Lf.push(t):Lf=[t]:Mf=t}function YV(){if(Mf){var t=Mf,e=Lf;if(Lf=Mf=null,DD(t),e)for(t=0;t<e.length;t++)DD(e[t])}}function QV(t,e){return t(e)}function JV(){}var iS=!1;function ZV(t,e,n){if(iS)return t(e,n);iS=!0;try{return QV(t,e,n)}finally{iS=!1,(Mf!==null||Lf!==null)&&(JV(),YV())}}function Iv(t,e){var n=t.stateNode;if(n===null)return null;var r=lE(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ie(231,e,typeof n));return n}var jT=!1;if(rl)try{var hg={};Object.defineProperty(hg,"passive",{get:function(){jT=!0}}),window.addEventListener("test",hg,hg),window.removeEventListener("test",hg,hg)}catch{jT=!1}function mG(t,e,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var lv=!1,ex=null,tx=!1,FT=null,gG={onError:function(t){lv=!0,ex=t}};function vG(t,e,n,r,i,s,a,o,l){lv=!1,ex=null,mG.apply(gG,arguments)}function yG(t,e,n,r,i,s,a,o,l){if(vG.apply(this,arguments),lv){if(lv){var c=ex;lv=!1,ex=null}else throw Error(ie(198));tx||(tx=!0,FT=c)}}function Nd(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function e4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function MD(t){if(Nd(t)!==t)throw Error(ie(188))}function wG(t){var e=t.alternate;if(!e){if(e=Nd(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return MD(i),t;if(s===r)return MD(i),e;s=s.sibling}throw Error(ie(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?t:e}function t4(t){return t=wG(t),t!==null?n4(t):null}function n4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=n4(t);if(e!==null)return e;t=t.sibling}return null}var r4=Xi.unstable_scheduleCallback,LD=Xi.unstable_cancelCallback,_G=Xi.unstable_shouldYield,bG=Xi.unstable_requestPaint,an=Xi.unstable_now,xG=Xi.unstable_getCurrentPriorityLevel,mk=Xi.unstable_ImmediatePriority,i4=Xi.unstable_UserBlockingPriority,nx=Xi.unstable_NormalPriority,AG=Xi.unstable_LowPriority,s4=Xi.unstable_IdlePriority,iE=null,$a=null;function EG(t){if($a&&typeof $a.onCommitFiberRoot=="function")try{$a.onCommitFiberRoot(iE,t,void 0,(t.current.flags&128)===128)}catch{}}var ta=Math.clz32?Math.clz32:PG,SG=Math.log,TG=Math.LN2;function PG(t){return t>>>=0,t===0?32:31-(SG(t)/TG|0)|0}var o_=64,l_=4194304;function Mg(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rx(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Mg(o):(s&=a,s!==0&&(r=Mg(s)))}else a=n&~i,a!==0?r=Mg(a):s!==0&&(r=Mg(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ta(e),i=1<<n,r|=t[n],e&=~i;return r}function IG(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CG(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ta(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=IG(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function VT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function a4(){var t=o_;return o_<<=1,!(o_&4194240)&&(o_=64),t}function sS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function H0(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ta(e),t[e]=n}function kG(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ta(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function gk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ta(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ft=0;function o4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var l4,vk,c4,u4,h4,UT=!1,c_=[],Dc=null,Mc=null,Lc=null,Cv=new Map,kv=new Map,Hl=[],RG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jD(t,e){switch(t){case"focusin":case"focusout":Dc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Lc=null;break;case"pointerover":case"pointerout":Cv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kv.delete(e.pointerId)}}function dg(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=G0(e),e!==null&&vk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function NG(t,e,n,r,i){switch(e){case"focusin":return Dc=dg(Dc,t,e,n,r,i),!0;case"dragenter":return Mc=dg(Mc,t,e,n,r,i),!0;case"mouseover":return Lc=dg(Lc,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Cv.set(s,dg(Cv.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,kv.set(s,dg(kv.get(s)||null,t,e,n,r,i)),!0}return!1}function d4(t){var e=Wu(t.target);if(e!==null){var n=Nd(e);if(n!==null){if(e=n.tag,e===13){if(e=e4(n),e!==null){t.blockedOn=e,h4(t.priority,function(){c4(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Q_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=BT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);MT=r,n.target.dispatchEvent(r),MT=null}else return e=G0(n),e!==null&&vk(e),t.blockedOn=n,!1;e.shift()}return!0}function FD(t,e,n){Q_(t)&&n.delete(e)}function OG(){UT=!1,Dc!==null&&Q_(Dc)&&(Dc=null),Mc!==null&&Q_(Mc)&&(Mc=null),Lc!==null&&Q_(Lc)&&(Lc=null),Cv.forEach(FD),kv.forEach(FD)}function fg(t,e){t.blockedOn===e&&(t.blockedOn=null,UT||(UT=!0,Xi.unstable_scheduleCallback(Xi.unstable_NormalPriority,OG)))}function Rv(t){function e(i){return fg(i,t)}if(0<c_.length){fg(c_[0],t);for(var n=1;n<c_.length;n++){var r=c_[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dc!==null&&fg(Dc,t),Mc!==null&&fg(Mc,t),Lc!==null&&fg(Lc,t),Cv.forEach(e),kv.forEach(e),n=0;n<Hl.length;n++)r=Hl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hl.length&&(n=Hl[0],n.blockedOn===null);)d4(n),n.blockedOn===null&&Hl.shift()}var jf=_l.ReactCurrentBatchConfig,ix=!0;function DG(t,e,n,r){var i=ft,s=jf.transition;jf.transition=null;try{ft=1,yk(t,e,n,r)}finally{ft=i,jf.transition=s}}function MG(t,e,n,r){var i=ft,s=jf.transition;jf.transition=null;try{ft=4,yk(t,e,n,r)}finally{ft=i,jf.transition=s}}function yk(t,e,n,r){if(ix){var i=BT(t,e,n,r);if(i===null)mS(t,e,r,sx,n),jD(t,r);else if(NG(i,t,e,n,r))r.stopPropagation();else if(jD(t,r),e&4&&-1<RG.indexOf(t)){for(;i!==null;){var s=G0(i);if(s!==null&&l4(s),s=BT(t,e,n,r),s===null&&mS(t,e,r,sx,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else mS(t,e,r,null,n)}}var sx=null;function BT(t,e,n,r){if(sx=null,t=pk(r),t=Wu(t),t!==null)if(e=Nd(t),e===null)t=null;else if(n=e.tag,n===13){if(t=e4(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sx=t,null}function f4(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xG()){case mk:return 1;case i4:return 4;case nx:case AG:return 16;case s4:return 536870912;default:return 16}default:return 16}}var Cc=null,wk=null,J_=null;function p4(){if(J_)return J_;var t,e=wk,n=e.length,r,i="value"in Cc?Cc.value:Cc.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return J_=i.slice(t,1<r?1-r:void 0)}function Z_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function u_(){return!0}function VD(){return!1}function es(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?u_:VD,this.isPropagationStopped=VD,this}return Ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=u_)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=u_)},persist:function(){},isPersistent:u_}),e}var Sm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_k=es(Sm),W0=Ht({},Sm,{view:0,detail:0}),LG=es(W0),aS,oS,pg,sE=Ht({},W0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pg&&(pg&&t.type==="mousemove"?(aS=t.screenX-pg.screenX,oS=t.screenY-pg.screenY):oS=aS=0,pg=t),aS)},movementY:function(t){return"movementY"in t?t.movementY:oS}}),UD=es(sE),jG=Ht({},sE,{dataTransfer:0}),FG=es(jG),VG=Ht({},W0,{relatedTarget:0}),lS=es(VG),UG=Ht({},Sm,{animationName:0,elapsedTime:0,pseudoElement:0}),BG=es(UG),$G=Ht({},Sm,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zG=es($G),HG=Ht({},Sm,{data:0}),BD=es(HG),WG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KG(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qG[t])?!!e[t]:!1}function bk(){return KG}var XG=Ht({},W0,{key:function(t){if(t.key){var e=WG[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Z_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GG[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bk,charCode:function(t){return t.type==="keypress"?Z_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Z_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YG=es(XG),QG=Ht({},sE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$D=es(QG),JG=Ht({},W0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bk}),ZG=es(JG),eq=Ht({},Sm,{propertyName:0,elapsedTime:0,pseudoElement:0}),tq=es(eq),nq=Ht({},sE,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rq=es(nq),iq=[9,13,27,32],xk=rl&&"CompositionEvent"in window,cv=null;rl&&"documentMode"in document&&(cv=document.documentMode);var sq=rl&&"TextEvent"in window&&!cv,m4=rl&&(!xk||cv&&8<cv&&11>=cv),zD=" ",HD=!1;function g4(t,e){switch(t){case"keyup":return iq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yf=!1;function aq(t,e){switch(t){case"compositionend":return v4(e);case"keypress":return e.which!==32?null:(HD=!0,zD);case"textInput":return t=e.data,t===zD&&HD?null:t;default:return null}}function oq(t,e){if(yf)return t==="compositionend"||!xk&&g4(t,e)?(t=p4(),J_=wk=Cc=null,yf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return m4&&e.locale!=="ko"?null:e.data;default:return null}}var lq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function WD(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lq[t.type]:e==="textarea"}function y4(t,e,n,r){XV(r),e=ax(e,"onChange"),0<e.length&&(n=new _k("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var uv=null,Nv=null;function cq(t){C4(t,0)}function aE(t){var e=bf(t);if($V(e))return t}function uq(t,e){if(t==="change")return e}var w4=!1;if(rl){var cS;if(rl){var uS="oninput"in document;if(!uS){var GD=document.createElement("div");GD.setAttribute("oninput","return;"),uS=typeof GD.oninput=="function"}cS=uS}else cS=!1;w4=cS&&(!document.documentMode||9<document.documentMode)}function qD(){uv&&(uv.detachEvent("onpropertychange",_4),Nv=uv=null)}function _4(t){if(t.propertyName==="value"&&aE(Nv)){var e=[];y4(e,Nv,t,pk(t)),ZV(cq,e)}}function hq(t,e,n){t==="focusin"?(qD(),uv=e,Nv=n,uv.attachEvent("onpropertychange",_4)):t==="focusout"&&qD()}function dq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return aE(Nv)}function fq(t,e){if(t==="click")return aE(e)}function pq(t,e){if(t==="input"||t==="change")return aE(e)}function mq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sa=typeof Object.is=="function"?Object.is:mq;function Ov(t,e){if(sa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!AT.call(e,i)||!sa(t[i],e[i]))return!1}return!0}function KD(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function XD(t,e){var n=KD(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=KD(n)}}function b4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?b4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function x4(){for(var t=window,e=Zb();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zb(t.document)}return e}function Ak(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gq(t){var e=x4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&b4(n.ownerDocument.documentElement,n)){if(r!==null&&Ak(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=XD(n,s);var a=XD(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vq=rl&&"documentMode"in document&&11>=document.documentMode,wf=null,$T=null,hv=null,zT=!1;function YD(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zT||wf==null||wf!==Zb(r)||(r=wf,"selectionStart"in r&&Ak(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hv&&Ov(hv,r)||(hv=r,r=ax($T,"onSelect"),0<r.length&&(e=new _k("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wf)))}function h_(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _f={animationend:h_("Animation","AnimationEnd"),animationiteration:h_("Animation","AnimationIteration"),animationstart:h_("Animation","AnimationStart"),transitionend:h_("Transition","TransitionEnd")},hS={},A4={};rl&&(A4=document.createElement("div").style,"AnimationEvent"in window||(delete _f.animationend.animation,delete _f.animationiteration.animation,delete _f.animationstart.animation),"TransitionEvent"in window||delete _f.transitionend.transition);function oE(t){if(hS[t])return hS[t];if(!_f[t])return t;var e=_f[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in A4)return hS[t]=e[n];return t}var E4=oE("animationend"),S4=oE("animationiteration"),T4=oE("animationstart"),P4=oE("transitionend"),I4=new Map,QD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lu(t,e){I4.set(t,e),Rd(e,[t])}for(var dS=0;dS<QD.length;dS++){var fS=QD[dS],yq=fS.toLowerCase(),wq=fS[0].toUpperCase()+fS.slice(1);lu(yq,"on"+wq)}lu(E4,"onAnimationEnd");lu(S4,"onAnimationIteration");lu(T4,"onAnimationStart");lu("dblclick","onDoubleClick");lu("focusin","onFocus");lu("focusout","onBlur");lu(P4,"onTransitionEnd");tm("onMouseEnter",["mouseout","mouseover"]);tm("onMouseLeave",["mouseout","mouseover"]);tm("onPointerEnter",["pointerout","pointerover"]);tm("onPointerLeave",["pointerout","pointerover"]);Rd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_q=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lg));function JD(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,yG(r,e,void 0,t),t.currentTarget=null}function C4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;JD(i,o,c),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;JD(i,o,c),s=l}}}if(tx)throw t=FT,tx=!1,FT=null,t}function It(t,e){var n=e[KT];n===void 0&&(n=e[KT]=new Set);var r=t+"__bubble";n.has(r)||(k4(e,t,2,!1),n.add(r))}function pS(t,e,n){var r=0;e&&(r|=4),k4(n,t,r,e)}var d_="_reactListening"+Math.random().toString(36).slice(2);function Dv(t){if(!t[d_]){t[d_]=!0,jV.forEach(function(n){n!=="selectionchange"&&(_q.has(n)||pS(n,!1,t),pS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[d_]||(e[d_]=!0,pS("selectionchange",!1,e))}}function k4(t,e,n,r){switch(f4(e)){case 1:var i=DG;break;case 4:i=MG;break;default:i=yk}n=i.bind(null,e,n,t),i=void 0,!jT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function mS(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Wu(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}ZV(function(){var c=s,u=pk(n),h=[];e:{var f=I4.get(t);if(f!==void 0){var m=_k,g=t;switch(t){case"keypress":if(Z_(n)===0)break e;case"keydown":case"keyup":m=YG;break;case"focusin":g="focus",m=lS;break;case"focusout":g="blur",m=lS;break;case"beforeblur":case"afterblur":m=lS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=UD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=FG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=ZG;break;case E4:case S4:case T4:m=BG;break;case P4:m=tq;break;case"scroll":m=LG;break;case"wheel":m=rq;break;case"copy":case"cut":case"paste":m=zG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=$D}var v=(e&4)!==0,y=!v&&t==="scroll",w=v?f!==null?f+"Capture":null:f;v=[];for(var b=c,A;b!==null;){A=b;var I=A.stateNode;if(A.tag===5&&I!==null&&(A=I,w!==null&&(I=Iv(b,w),I!=null&&v.push(Mv(b,I,A)))),y)break;b=b.return}0<v.length&&(f=new m(f,g,null,n,u),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==MT&&(g=n.relatedTarget||n.fromElement)&&(Wu(g)||g[il]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?Wu(g):null,g!==null&&(y=Nd(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(v=UD,I="onMouseLeave",w="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(v=$D,I="onPointerLeave",w="onPointerEnter",b="pointer"),y=m==null?f:bf(m),A=g==null?f:bf(g),f=new v(I,b+"leave",m,n,u),f.target=y,f.relatedTarget=A,I=null,Wu(u)===c&&(v=new v(w,b+"enter",g,n,u),v.target=A,v.relatedTarget=y,I=v),y=I,m&&g)t:{for(v=m,w=g,b=0,A=v;A;A=Qd(A))b++;for(A=0,I=w;I;I=Qd(I))A++;for(;0<b-A;)v=Qd(v),b--;for(;0<A-b;)w=Qd(w),A--;for(;b--;){if(v===w||w!==null&&v===w.alternate)break t;v=Qd(v),w=Qd(w)}v=null}else v=null;m!==null&&ZD(h,f,m,v,!1),g!==null&&y!==null&&ZD(h,y,g,v,!0)}}e:{if(f=c?bf(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var k=uq;else if(WD(f))if(w4)k=pq;else{k=dq;var M=hq}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=fq);if(k&&(k=k(t,c))){y4(h,k,n,u);break e}M&&M(t,f,c),t==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&kT(f,"number",f.value)}switch(M=c?bf(c):window,t){case"focusin":(WD(M)||M.contentEditable==="true")&&(wf=M,$T=c,hv=null);break;case"focusout":hv=$T=wf=null;break;case"mousedown":zT=!0;break;case"contextmenu":case"mouseup":case"dragend":zT=!1,YD(h,n,u);break;case"selectionchange":if(vq)break;case"keydown":case"keyup":YD(h,n,u)}var P;if(xk)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else yf?g4(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(m4&&n.locale!=="ko"&&(yf||C!=="onCompositionStart"?C==="onCompositionEnd"&&yf&&(P=p4()):(Cc=u,wk="value"in Cc?Cc.value:Cc.textContent,yf=!0)),M=ax(c,C),0<M.length&&(C=new BD(C,t,null,n,u),h.push({event:C,listeners:M}),P?C.data=P:(P=v4(n),P!==null&&(C.data=P)))),(P=sq?aq(t,n):oq(t,n))&&(c=ax(c,"onBeforeInput"),0<c.length&&(u=new BD("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=P))}C4(h,e)})}function Mv(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ax(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Iv(t,n),s!=null&&r.unshift(Mv(t,s,i)),s=Iv(t,e),s!=null&&r.push(Mv(t,s,i))),t=t.return}return r}function Qd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ZD(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,i?(l=Iv(n,s),l!=null&&a.unshift(Mv(n,l,o))):i||(l=Iv(n,s),l!=null&&a.push(Mv(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var bq=/\r\n?/g,xq=/\u0000|\uFFFD/g;function eM(t){return(typeof t=="string"?t:""+t).replace(bq,`
`).replace(xq,"")}function f_(t,e,n){if(e=eM(e),eM(t)!==e&&n)throw Error(ie(425))}function ox(){}var HT=null,WT=null;function GT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qT=typeof setTimeout=="function"?setTimeout:void 0,Aq=typeof clearTimeout=="function"?clearTimeout:void 0,tM=typeof Promise=="function"?Promise:void 0,Eq=typeof queueMicrotask=="function"?queueMicrotask:typeof tM<"u"?function(t){return tM.resolve(null).then(t).catch(Sq)}:qT;function Sq(t){setTimeout(function(){throw t})}function gS(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Rv(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Rv(e)}function jc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nM(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Tm=Math.random().toString(36).slice(2),Va="__reactFiber$"+Tm,Lv="__reactProps$"+Tm,il="__reactContainer$"+Tm,KT="__reactEvents$"+Tm,Tq="__reactListeners$"+Tm,Pq="__reactHandles$"+Tm;function Wu(t){var e=t[Va];if(e)return e;for(var n=t.parentNode;n;){if(e=n[il]||n[Va]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nM(t);t!==null;){if(n=t[Va])return n;t=nM(t)}return e}t=n,n=t.parentNode}return null}function G0(t){return t=t[Va]||t[il],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function lE(t){return t[Lv]||null}var XT=[],xf=-1;function cu(t){return{current:t}}function Rt(t){0>xf||(t.current=XT[xf],XT[xf]=null,xf--)}function Et(t,e){xf++,XT[xf]=t.current,t.current=e}var Xc={},Or=cu(Xc),vi=cu(!1),dd=Xc;function nm(t,e){var n=t.type.contextTypes;if(!n)return Xc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function yi(t){return t=t.childContextTypes,t!=null}function lx(){Rt(vi),Rt(Or)}function rM(t,e,n){if(Or.current!==Xc)throw Error(ie(168));Et(Or,e),Et(vi,n)}function R4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ie(108,hG(t)||"Unknown",i));return Ht({},n,r)}function cx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xc,dd=Or.current,Et(Or,t),Et(vi,vi.current),!0}function iM(t,e,n){var r=t.stateNode;if(!r)throw Error(ie(169));n?(t=R4(t,e,dd),r.__reactInternalMemoizedMergedChildContext=t,Rt(vi),Rt(Or),Et(Or,t)):Rt(vi),Et(vi,n)}var fo=null,cE=!1,vS=!1;function N4(t){fo===null?fo=[t]:fo.push(t)}function Iq(t){cE=!0,N4(t)}function uu(){if(!vS&&fo!==null){vS=!0;var t=0,e=ft;try{var n=fo;for(ft=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fo=null,cE=!1}catch(i){throw fo!==null&&(fo=fo.slice(t+1)),r4(mk,uu),i}finally{ft=e,vS=!1}}return null}var Af=[],Ef=0,ux=null,hx=0,ms=[],gs=0,fd=null,zo=1,Ho="";function Pu(t,e){Af[Ef++]=hx,Af[Ef++]=ux,ux=t,hx=e}function O4(t,e,n){ms[gs++]=zo,ms[gs++]=Ho,ms[gs++]=fd,fd=t;var r=zo;t=Ho;var i=32-ta(r)-1;r&=~(1<<i),n+=1;var s=32-ta(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,zo=1<<32-ta(e)+i|n<<i|r,Ho=s+t}else zo=1<<s|n<<i|r,Ho=t}function Ek(t){t.return!==null&&(Pu(t,1),O4(t,1,0))}function Sk(t){for(;t===ux;)ux=Af[--Ef],Af[Ef]=null,hx=Af[--Ef],Af[Ef]=null;for(;t===fd;)fd=ms[--gs],ms[gs]=null,Ho=ms[--gs],ms[gs]=null,zo=ms[--gs],ms[gs]=null}var Wi=null,$i=null,Lt=!1,Ys=null;function D4(t,e){var n=ws(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sM(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wi=t,$i=jc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wi=t,$i=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fd!==null?{id:zo,overflow:Ho}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ws(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wi=t,$i=null,!0):!1;default:return!1}}function YT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function QT(t){if(Lt){var e=$i;if(e){var n=e;if(!sM(t,e)){if(YT(t))throw Error(ie(418));e=jc(n.nextSibling);var r=Wi;e&&sM(t,e)?D4(r,n):(t.flags=t.flags&-4097|2,Lt=!1,Wi=t)}}else{if(YT(t))throw Error(ie(418));t.flags=t.flags&-4097|2,Lt=!1,Wi=t}}}function aM(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wi=t}function p_(t){if(t!==Wi)return!1;if(!Lt)return aM(t),Lt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!GT(t.type,t.memoizedProps)),e&&(e=$i)){if(YT(t))throw M4(),Error(ie(418));for(;e;)D4(t,e),e=jc(e.nextSibling)}if(aM(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$i=jc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$i=null}}else $i=Wi?jc(t.stateNode.nextSibling):null;return!0}function M4(){for(var t=$i;t;)t=jc(t.nextSibling)}function rm(){$i=Wi=null,Lt=!1}function Tk(t){Ys===null?Ys=[t]:Ys.push(t)}var Cq=_l.ReactCurrentBatchConfig;function mg(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,t))}return t}function m_(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function oM(t){var e=t._init;return e(t._payload)}function L4(t){function e(w,b){if(t){var A=w.deletions;A===null?(w.deletions=[b],w.flags|=16):A.push(b)}}function n(w,b){if(!t)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function i(w,b){return w=Bc(w,b),w.index=0,w.sibling=null,w}function s(w,b,A){return w.index=A,t?(A=w.alternate,A!==null?(A=A.index,A<b?(w.flags|=2,b):A):(w.flags|=2,b)):(w.flags|=1048576,b)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,b,A,I){return b===null||b.tag!==6?(b=ES(A,w.mode,I),b.return=w,b):(b=i(b,A),b.return=w,b)}function l(w,b,A,I){var k=A.type;return k===vf?u(w,b,A.props.children,I,A.key):b!==null&&(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Vl&&oM(k)===b.type)?(I=i(b,A.props),I.ref=mg(w,b,A),I.return=w,I):(I=ab(A.type,A.key,A.props,null,w.mode,I),I.ref=mg(w,b,A),I.return=w,I)}function c(w,b,A,I){return b===null||b.tag!==4||b.stateNode.containerInfo!==A.containerInfo||b.stateNode.implementation!==A.implementation?(b=SS(A,w.mode,I),b.return=w,b):(b=i(b,A.children||[]),b.return=w,b)}function u(w,b,A,I,k){return b===null||b.tag!==7?(b=id(A,w.mode,I,k),b.return=w,b):(b=i(b,A),b.return=w,b)}function h(w,b,A){if(typeof b=="string"&&b!==""||typeof b=="number")return b=ES(""+b,w.mode,A),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case i_:return A=ab(b.type,b.key,b.props,null,w.mode,A),A.ref=mg(w,null,b),A.return=w,A;case gf:return b=SS(b,w.mode,A),b.return=w,b;case Vl:var I=b._init;return h(w,I(b._payload),A)}if(Dg(b)||ug(b))return b=id(b,w.mode,A,null),b.return=w,b;m_(w,b)}return null}function f(w,b,A,I){var k=b!==null?b.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return k!==null?null:o(w,b,""+A,I);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case i_:return A.key===k?l(w,b,A,I):null;case gf:return A.key===k?c(w,b,A,I):null;case Vl:return k=A._init,f(w,b,k(A._payload),I)}if(Dg(A)||ug(A))return k!==null?null:u(w,b,A,I,null);m_(w,A)}return null}function m(w,b,A,I,k){if(typeof I=="string"&&I!==""||typeof I=="number")return w=w.get(A)||null,o(b,w,""+I,k);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case i_:return w=w.get(I.key===null?A:I.key)||null,l(b,w,I,k);case gf:return w=w.get(I.key===null?A:I.key)||null,c(b,w,I,k);case Vl:var M=I._init;return m(w,b,A,M(I._payload),k)}if(Dg(I)||ug(I))return w=w.get(A)||null,u(b,w,I,k,null);m_(b,I)}return null}function g(w,b,A,I){for(var k=null,M=null,P=b,C=b=0,O=null;P!==null&&C<A.length;C++){P.index>C?(O=P,P=null):O=P.sibling;var j=f(w,P,A[C],I);if(j===null){P===null&&(P=O);break}t&&P&&j.alternate===null&&e(w,P),b=s(j,b,C),M===null?k=j:M.sibling=j,M=j,P=O}if(C===A.length)return n(w,P),Lt&&Pu(w,C),k;if(P===null){for(;C<A.length;C++)P=h(w,A[C],I),P!==null&&(b=s(P,b,C),M===null?k=P:M.sibling=P,M=P);return Lt&&Pu(w,C),k}for(P=r(w,P);C<A.length;C++)O=m(P,w,C,A[C],I),O!==null&&(t&&O.alternate!==null&&P.delete(O.key===null?C:O.key),b=s(O,b,C),M===null?k=O:M.sibling=O,M=O);return t&&P.forEach(function(D){return e(w,D)}),Lt&&Pu(w,C),k}function v(w,b,A,I){var k=ug(A);if(typeof k!="function")throw Error(ie(150));if(A=k.call(A),A==null)throw Error(ie(151));for(var M=k=null,P=b,C=b=0,O=null,j=A.next();P!==null&&!j.done;C++,j=A.next()){P.index>C?(O=P,P=null):O=P.sibling;var D=f(w,P,j.value,I);if(D===null){P===null&&(P=O);break}t&&P&&D.alternate===null&&e(w,P),b=s(D,b,C),M===null?k=D:M.sibling=D,M=D,P=O}if(j.done)return n(w,P),Lt&&Pu(w,C),k;if(P===null){for(;!j.done;C++,j=A.next())j=h(w,j.value,I),j!==null&&(b=s(j,b,C),M===null?k=j:M.sibling=j,M=j);return Lt&&Pu(w,C),k}for(P=r(w,P);!j.done;C++,j=A.next())j=m(P,w,C,j.value,I),j!==null&&(t&&j.alternate!==null&&P.delete(j.key===null?C:j.key),b=s(j,b,C),M===null?k=j:M.sibling=j,M=j);return t&&P.forEach(function(F){return e(w,F)}),Lt&&Pu(w,C),k}function y(w,b,A,I){if(typeof A=="object"&&A!==null&&A.type===vf&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case i_:e:{for(var k=A.key,M=b;M!==null;){if(M.key===k){if(k=A.type,k===vf){if(M.tag===7){n(w,M.sibling),b=i(M,A.props.children),b.return=w,w=b;break e}}else if(M.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Vl&&oM(k)===M.type){n(w,M.sibling),b=i(M,A.props),b.ref=mg(w,M,A),b.return=w,w=b;break e}n(w,M);break}else e(w,M);M=M.sibling}A.type===vf?(b=id(A.props.children,w.mode,I,A.key),b.return=w,w=b):(I=ab(A.type,A.key,A.props,null,w.mode,I),I.ref=mg(w,b,A),I.return=w,w=I)}return a(w);case gf:e:{for(M=A.key;b!==null;){if(b.key===M)if(b.tag===4&&b.stateNode.containerInfo===A.containerInfo&&b.stateNode.implementation===A.implementation){n(w,b.sibling),b=i(b,A.children||[]),b.return=w,w=b;break e}else{n(w,b);break}else e(w,b);b=b.sibling}b=SS(A,w.mode,I),b.return=w,w=b}return a(w);case Vl:return M=A._init,y(w,b,M(A._payload),I)}if(Dg(A))return g(w,b,A,I);if(ug(A))return v(w,b,A,I);m_(w,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,b!==null&&b.tag===6?(n(w,b.sibling),b=i(b,A),b.return=w,w=b):(n(w,b),b=ES(A,w.mode,I),b.return=w,w=b),a(w)):n(w,b)}return y}var im=L4(!0),j4=L4(!1),dx=cu(null),fx=null,Sf=null,Pk=null;function Ik(){Pk=Sf=fx=null}function Ck(t){var e=dx.current;Rt(dx),t._currentValue=e}function JT(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ff(t,e){fx=t,Pk=Sf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mi=!0),t.firstContext=null)}function Ss(t){var e=t._currentValue;if(Pk!==t)if(t={context:t,memoizedValue:e,next:null},Sf===null){if(fx===null)throw Error(ie(308));Sf=t,fx.dependencies={lanes:0,firstContext:t}}else Sf=Sf.next=t;return e}var Gu=null;function kk(t){Gu===null?Gu=[t]:Gu.push(t)}function F4(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,kk(e)):(n.next=i.next,i.next=n),e.interleaved=n,sl(t,r)}function sl(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ul=!1;function Rk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function V4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,nt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,sl(t,n)}return i=r.interleaved,i===null?(e.next=e,kk(r)):(e.next=i.next,i.next=e),r.interleaved=e,sl(t,n)}function eb(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gk(t,n)}}function lM(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function px(t,e,n,r){var i=t.updateQueue;Ul=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;a=0,u=c=l=null,o=s;do{var f=o.lane,m=o.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,v=o;switch(f=e,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(m,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,f=typeof g=="function"?g.call(m,h,f):g,f==null)break e;h=Ht({},h,f);break e;case 2:Ul=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=m,l=h):u=u.next=m,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);md|=a,t.lanes=a,t.memoizedState=h}}function cM(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ie(191,i));i.call(r)}}}var q0={},za=cu(q0),jv=cu(q0),Fv=cu(q0);function qu(t){if(t===q0)throw Error(ie(174));return t}function Nk(t,e){switch(Et(Fv,e),Et(jv,t),Et(za,q0),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:NT(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=NT(e,t)}Rt(za),Et(za,e)}function sm(){Rt(za),Rt(jv),Rt(Fv)}function U4(t){qu(Fv.current);var e=qu(za.current),n=NT(e,t.type);e!==n&&(Et(jv,t),Et(za,n))}function Ok(t){jv.current===t&&(Rt(za),Rt(jv))}var Bt=cu(0);function mx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yS=[];function Dk(){for(var t=0;t<yS.length;t++)yS[t]._workInProgressVersionPrimary=null;yS.length=0}var tb=_l.ReactCurrentDispatcher,wS=_l.ReactCurrentBatchConfig,pd=0,zt=null,xn=null,Hn=null,gx=!1,dv=!1,Vv=0,kq=0;function pr(){throw Error(ie(321))}function Mk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sa(t[n],e[n]))return!1;return!0}function Lk(t,e,n,r,i,s){if(pd=s,zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tb.current=t===null||t.memoizedState===null?Dq:Mq,t=n(r,i),dv){s=0;do{if(dv=!1,Vv=0,25<=s)throw Error(ie(301));s+=1,Hn=xn=null,e.updateQueue=null,tb.current=Lq,t=n(r,i)}while(dv)}if(tb.current=vx,e=xn!==null&&xn.next!==null,pd=0,Hn=xn=zt=null,gx=!1,e)throw Error(ie(300));return t}function jk(){var t=Vv!==0;return Vv=0,t}function wa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?zt.memoizedState=Hn=t:Hn=Hn.next=t,Hn}function Ts(){if(xn===null){var t=zt.alternate;t=t!==null?t.memoizedState:null}else t=xn.next;var e=Hn===null?zt.memoizedState:Hn.next;if(e!==null)Hn=e,xn=t;else{if(t===null)throw Error(ie(310));xn=t,t={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},Hn===null?zt.memoizedState=Hn=t:Hn=Hn.next=t}return Hn}function Uv(t,e){return typeof e=="function"?e(t):e}function _S(t){var e=Ts(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=xn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,c=s;do{var u=c.lane;if((pd&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=h,a=r):l=l.next=h,zt.lanes|=u,md|=u}c=c.next}while(c!==null&&c!==s);l===null?a=r:l.next=o,sa(r,e.memoizedState)||(mi=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,zt.lanes|=s,md|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bS(t){var e=Ts(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);sa(s,e.memoizedState)||(mi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function B4(){}function $4(t,e){var n=zt,r=Ts(),i=e(),s=!sa(r.memoizedState,i);if(s&&(r.memoizedState=i,mi=!0),r=r.queue,Fk(W4.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Hn!==null&&Hn.memoizedState.tag&1){if(n.flags|=2048,Bv(9,H4.bind(null,n,r,i,e),void 0,null),Wn===null)throw Error(ie(349));pd&30||z4(n,e,i)}return i}function z4(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=zt.updateQueue,e===null?(e={lastEffect:null,stores:null},zt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function H4(t,e,n,r){e.value=n,e.getSnapshot=r,G4(e)&&q4(t)}function W4(t,e,n){return n(function(){G4(e)&&q4(t)})}function G4(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sa(t,n)}catch{return!0}}function q4(t){var e=sl(t,1);e!==null&&na(e,t,1,-1)}function uM(t){var e=wa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uv,lastRenderedState:t},e.queue=t,t=t.dispatch=Oq.bind(null,zt,t),[e.memoizedState,t]}function Bv(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=zt.updateQueue,e===null?(e={lastEffect:null,stores:null},zt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function K4(){return Ts().memoizedState}function nb(t,e,n,r){var i=wa();zt.flags|=t,i.memoizedState=Bv(1|e,n,void 0,r===void 0?null:r)}function uE(t,e,n,r){var i=Ts();r=r===void 0?null:r;var s=void 0;if(xn!==null){var a=xn.memoizedState;if(s=a.destroy,r!==null&&Mk(r,a.deps)){i.memoizedState=Bv(e,n,s,r);return}}zt.flags|=t,i.memoizedState=Bv(1|e,n,s,r)}function hM(t,e){return nb(8390656,8,t,e)}function Fk(t,e){return uE(2048,8,t,e)}function X4(t,e){return uE(4,2,t,e)}function Y4(t,e){return uE(4,4,t,e)}function Q4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function J4(t,e,n){return n=n!=null?n.concat([t]):null,uE(4,4,Q4.bind(null,e,t),n)}function Vk(){}function Z4(t,e){var n=Ts();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mk(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function eU(t,e){var n=Ts();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mk(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function tU(t,e,n){return pd&21?(sa(n,e)||(n=a4(),zt.lanes|=n,md|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mi=!0),t.memoizedState=n)}function Rq(t,e){var n=ft;ft=n!==0&&4>n?n:4,t(!0);var r=wS.transition;wS.transition={};try{t(!1),e()}finally{ft=n,wS.transition=r}}function nU(){return Ts().memoizedState}function Nq(t,e,n){var r=Uc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rU(t))iU(e,n);else if(n=F4(t,e,n,r),n!==null){var i=qr();na(n,t,r,i),sU(n,e,r)}}function Oq(t,e,n){var r=Uc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rU(t))iU(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,sa(o,a)){var l=e.interleaved;l===null?(i.next=i,kk(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=F4(t,e,i,r),n!==null&&(i=qr(),na(n,t,r,i),sU(n,e,r))}}function rU(t){var e=t.alternate;return t===zt||e!==null&&e===zt}function iU(t,e){dv=gx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sU(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gk(t,n)}}var vx={readContext:Ss,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useInsertionEffect:pr,useLayoutEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useMutableSource:pr,useSyncExternalStore:pr,useId:pr,unstable_isNewReconciler:!1},Dq={readContext:Ss,useCallback:function(t,e){return wa().memoizedState=[t,e===void 0?null:e],t},useContext:Ss,useEffect:hM,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nb(4194308,4,Q4.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nb(4194308,4,t,e)},useInsertionEffect:function(t,e){return nb(4,2,t,e)},useMemo:function(t,e){var n=wa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wa();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Nq.bind(null,zt,t),[r.memoizedState,t]},useRef:function(t){var e=wa();return t={current:t},e.memoizedState=t},useState:uM,useDebugValue:Vk,useDeferredValue:function(t){return wa().memoizedState=t},useTransition:function(){var t=uM(!1),e=t[0];return t=Rq.bind(null,t[1]),wa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=zt,i=wa();if(Lt){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=e(),Wn===null)throw Error(ie(349));pd&30||z4(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,hM(W4.bind(null,r,s,t),[t]),r.flags|=2048,Bv(9,H4.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=wa(),e=Wn.identifierPrefix;if(Lt){var n=Ho,r=zo;n=(r&~(1<<32-ta(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vv++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kq++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Mq={readContext:Ss,useCallback:Z4,useContext:Ss,useEffect:Fk,useImperativeHandle:J4,useInsertionEffect:X4,useLayoutEffect:Y4,useMemo:eU,useReducer:_S,useRef:K4,useState:function(){return _S(Uv)},useDebugValue:Vk,useDeferredValue:function(t){var e=Ts();return tU(e,xn.memoizedState,t)},useTransition:function(){var t=_S(Uv)[0],e=Ts().memoizedState;return[t,e]},useMutableSource:B4,useSyncExternalStore:$4,useId:nU,unstable_isNewReconciler:!1},Lq={readContext:Ss,useCallback:Z4,useContext:Ss,useEffect:Fk,useImperativeHandle:J4,useInsertionEffect:X4,useLayoutEffect:Y4,useMemo:eU,useReducer:bS,useRef:K4,useState:function(){return bS(Uv)},useDebugValue:Vk,useDeferredValue:function(t){var e=Ts();return xn===null?e.memoizedState=t:tU(e,xn.memoizedState,t)},useTransition:function(){var t=bS(Uv)[0],e=Ts().memoizedState;return[t,e]},useMutableSource:B4,useSyncExternalStore:$4,useId:nU,unstable_isNewReconciler:!1};function Ms(t,e){if(t&&t.defaultProps){e=Ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ZT(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hE={isMounted:function(t){return(t=t._reactInternals)?Nd(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qr(),i=Uc(t),s=Qo(r,i);s.payload=e,n!=null&&(s.callback=n),e=Fc(t,s,i),e!==null&&(na(e,t,i,r),eb(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qr(),i=Uc(t),s=Qo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Fc(t,s,i),e!==null&&(na(e,t,i,r),eb(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qr(),r=Uc(t),i=Qo(n,r);i.tag=2,e!=null&&(i.callback=e),e=Fc(t,i,r),e!==null&&(na(e,t,r,n),eb(e,t,r))}};function dM(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Ov(n,r)||!Ov(i,s):!0}function aU(t,e,n){var r=!1,i=Xc,s=e.contextType;return typeof s=="object"&&s!==null?s=Ss(s):(i=yi(e)?dd:Or.current,r=e.contextTypes,s=(r=r!=null)?nm(t,i):Xc),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hE,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function fM(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hE.enqueueReplaceState(e,e.state,null)}function eP(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Rk(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ss(s):(s=yi(e)?dd:Or.current,i.context=nm(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ZT(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&hE.enqueueReplaceState(i,i.state,null),px(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function am(t,e){try{var n="",r=e;do n+=uG(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function xS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tP(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jq=typeof WeakMap=="function"?WeakMap:Map;function oU(t,e,n){n=Qo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wx||(wx=!0,hP=r),tP(t,e)},n}function lU(t,e,n){n=Qo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){tP(t,e),typeof r!="function"&&(Vc===null?Vc=new Set([this]):Vc.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function pM(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jq;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Qq.bind(null,t,e,n),e.then(t,t))}function mM(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gM(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qo(-1,1),e.tag=2,Fc(n,e,1))),n.lanes|=1),t)}var Fq=_l.ReactCurrentOwner,mi=!1;function zr(t,e,n,r){e.child=t===null?j4(e,null,n,r):im(e,t.child,n,r)}function vM(t,e,n,r,i){n=n.render;var s=e.ref;return Ff(e,i),r=Lk(t,e,n,r,s,i),n=jk(),t!==null&&!mi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,al(t,e,i)):(Lt&&n&&Ek(e),e.flags|=1,zr(t,e,r,i),e.child)}function yM(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!qk(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,cU(t,e,s,r,i)):(t=ab(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ov,n(a,r)&&t.ref===e.ref)return al(t,e,i)}return e.flags|=1,t=Bc(s,r),t.ref=e.ref,t.return=e,e.child=t}function cU(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ov(s,r)&&t.ref===e.ref)if(mi=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(mi=!0);else return e.lanes=t.lanes,al(t,e,i)}return nP(t,e,n,r,i)}function uU(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(Pf,ji),ji|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Et(Pf,ji),ji|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Et(Pf,ji),ji|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Et(Pf,ji),ji|=r;return zr(t,e,i,n),e.child}function hU(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nP(t,e,n,r,i){var s=yi(n)?dd:Or.current;return s=nm(e,s),Ff(e,i),n=Lk(t,e,n,r,s,i),r=jk(),t!==null&&!mi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,al(t,e,i)):(Lt&&r&&Ek(e),e.flags|=1,zr(t,e,n,i),e.child)}function wM(t,e,n,r,i){if(yi(n)){var s=!0;cx(e)}else s=!1;if(Ff(e,i),e.stateNode===null)rb(t,e),aU(e,n,r),eP(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ss(c):(c=yi(n)?dd:Or.current,c=nm(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&fM(e,a,r,c),Ul=!1;var f=e.memoizedState;a.state=f,px(e,r,a,i),l=e.memoizedState,o!==r||f!==l||vi.current||Ul?(typeof u=="function"&&(ZT(e,n,u,r),l=e.memoizedState),(o=Ul||dM(e,n,o,r,f,l,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,V4(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Ms(e.type,o),a.props=c,h=e.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ss(l):(l=yi(n)?dd:Or.current,l=nm(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==l)&&fM(e,a,r,l),Ul=!1,f=e.memoizedState,a.state=f,px(e,r,a,i);var g=e.memoizedState;o!==h||f!==g||vi.current||Ul?(typeof m=="function"&&(ZT(e,n,m,r),g=e.memoizedState),(c=Ul||dM(e,n,c,r,f,g,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),a.props=r,a.state=g,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return rP(t,e,n,r,s,i)}function rP(t,e,n,r,i,s){hU(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&iM(e,n,!1),al(t,e,s);r=e.stateNode,Fq.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=im(e,t.child,null,s),e.child=im(e,null,o,s)):zr(t,e,o,s),e.memoizedState=r.state,i&&iM(e,n,!0),e.child}function dU(t){var e=t.stateNode;e.pendingContext?rM(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rM(t,e.context,!1),Nk(t,e.containerInfo)}function _M(t,e,n,r,i){return rm(),Tk(i),e.flags|=256,zr(t,e,n,r),e.child}var iP={dehydrated:null,treeContext:null,retryLane:0};function sP(t){return{baseLanes:t,cachePool:null,transitions:null}}function fU(t,e,n){var r=e.pendingProps,i=Bt.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Et(Bt,i&1),t===null)return QT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=pE(a,r,0,null),t=id(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=sP(n),e.memoizedState=iP,t):Uk(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Vq(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Bc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Bc(o,s):(s=id(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?sP(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=iP,r}return s=t.child,t=s.sibling,r=Bc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Uk(t,e){return e=pE({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function g_(t,e,n,r){return r!==null&&Tk(r),im(e,t.child,null,n),t=Uk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Vq(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=xS(Error(ie(422))),g_(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=pE({mode:"visible",children:r.children},i,0,null),s=id(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&im(e,t.child,null,a),e.child.memoizedState=sP(a),e.memoizedState=iP,s);if(!(e.mode&1))return g_(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(ie(419)),r=xS(s,r,void 0),g_(t,e,a,r)}if(o=(a&t.childLanes)!==0,mi||o){if(r=Wn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,sl(t,i),na(r,t,i,-1))}return Gk(),r=xS(Error(ie(421))),g_(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Jq.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,$i=jc(i.nextSibling),Wi=e,Lt=!0,Ys=null,t!==null&&(ms[gs++]=zo,ms[gs++]=Ho,ms[gs++]=fd,zo=t.id,Ho=t.overflow,fd=e),e=Uk(e,r.children),e.flags|=4096,e)}function bM(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),JT(t.return,e,n)}function AS(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function pU(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(zr(t,e,r.children,n),r=Bt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bM(t,n,e);else if(t.tag===19)bM(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Et(Bt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&mx(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),AS(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&mx(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}AS(e,!0,n,null,s);break;case"together":AS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rb(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function al(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),md|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,n=Bc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Bc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Uq(t,e,n){switch(e.tag){case 3:dU(e),rm();break;case 5:U4(e);break;case 1:yi(e.type)&&cx(e);break;case 4:Nk(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Et(dx,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Et(Bt,Bt.current&1),e.flags|=128,null):n&e.child.childLanes?fU(t,e,n):(Et(Bt,Bt.current&1),t=al(t,e,n),t!==null?t.sibling:null);Et(Bt,Bt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return pU(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Et(Bt,Bt.current),r)break;return null;case 22:case 23:return e.lanes=0,uU(t,e,n)}return al(t,e,n)}var mU,aP,gU,vU;mU=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};aP=function(){};gU=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,qu(za.current);var s=null;switch(n){case"input":i=IT(t,i),r=IT(t,r),s=[];break;case"select":i=Ht({},i,{value:void 0}),r=Ht({},r,{value:void 0}),s=[];break;case"textarea":i=RT(t,i),r=RT(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ox)}OT(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Tv.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Tv.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&It("scroll",t),s||o===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};vU=function(t,e,n,r){n!==r&&(e.flags|=4)};function gg(t,e){if(!Lt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Bq(t,e,n){var r=e.pendingProps;switch(Sk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(e),null;case 1:return yi(e.type)&&lx(),mr(e),null;case 3:return r=e.stateNode,sm(),Rt(vi),Rt(Or),Dk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(p_(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ys!==null&&(pP(Ys),Ys=null))),aP(t,e),mr(e),null;case 5:Ok(e);var i=qu(Fv.current);if(n=e.type,t!==null&&e.stateNode!=null)gU(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ie(166));return mr(e),null}if(t=qu(za.current),p_(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Va]=e,r[Lv]=s,t=(e.mode&1)!==0,n){case"dialog":It("cancel",r),It("close",r);break;case"iframe":case"object":case"embed":It("load",r);break;case"video":case"audio":for(i=0;i<Lg.length;i++)It(Lg[i],r);break;case"source":It("error",r);break;case"img":case"image":case"link":It("error",r),It("load",r);break;case"details":It("toggle",r);break;case"input":kD(r,s),It("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},It("invalid",r);break;case"textarea":ND(r,s),It("invalid",r)}OT(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&f_(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&f_(r.textContent,o,t),i=["children",""+o]):Tv.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&It("scroll",r)}switch(n){case"input":s_(r),RD(r,s,!0);break;case"textarea":s_(r),OD(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ox)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=WV(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Va]=e,t[Lv]=r,mU(t,e,!1,!1),e.stateNode=t;e:{switch(a=DT(n,r),n){case"dialog":It("cancel",t),It("close",t),i=r;break;case"iframe":case"object":case"embed":It("load",t),i=r;break;case"video":case"audio":for(i=0;i<Lg.length;i++)It(Lg[i],t);i=r;break;case"source":It("error",t),i=r;break;case"img":case"image":case"link":It("error",t),It("load",t),i=r;break;case"details":It("toggle",t),i=r;break;case"input":kD(t,r),i=IT(t,r),It("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ht({},r,{value:void 0}),It("invalid",t);break;case"textarea":ND(t,r),i=RT(t,r),It("invalid",t);break;default:i=r}OT(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?KV(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&GV(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Pv(t,l):typeof l=="number"&&Pv(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Tv.hasOwnProperty(s)?l!=null&&s==="onScroll"&&It("scroll",t):l!=null&&uk(t,s,l,a))}switch(n){case"input":s_(t),RD(t,r,!1);break;case"textarea":s_(t),OD(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kc(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Df(t,!!r.multiple,s,!1):r.defaultValue!=null&&Df(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ox)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mr(e),null;case 6:if(t&&e.stateNode!=null)vU(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ie(166));if(n=qu(Fv.current),qu(za.current),p_(e)){if(r=e.stateNode,n=e.memoizedProps,r[Va]=e,(s=r.nodeValue!==n)&&(t=Wi,t!==null))switch(t.tag){case 3:f_(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&f_(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Va]=e,e.stateNode=r}return mr(e),null;case 13:if(Rt(Bt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Lt&&$i!==null&&e.mode&1&&!(e.flags&128))M4(),rm(),e.flags|=98560,s=!1;else if(s=p_(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ie(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ie(317));s[Va]=e}else rm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mr(e),s=!1}else Ys!==null&&(pP(Ys),Ys=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Bt.current&1?Sn===0&&(Sn=3):Gk())),e.updateQueue!==null&&(e.flags|=4),mr(e),null);case 4:return sm(),aP(t,e),t===null&&Dv(e.stateNode.containerInfo),mr(e),null;case 10:return Ck(e.type._context),mr(e),null;case 17:return yi(e.type)&&lx(),mr(e),null;case 19:if(Rt(Bt),s=e.memoizedState,s===null)return mr(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)gg(s,!1);else{if(Sn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=mx(t),a!==null){for(e.flags|=128,gg(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Et(Bt,Bt.current&1|2),e.child}t=t.sibling}s.tail!==null&&an()>om&&(e.flags|=128,r=!0,gg(s,!1),e.lanes=4194304)}else{if(!r)if(t=mx(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gg(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Lt)return mr(e),null}else 2*an()-s.renderingStartTime>om&&n!==1073741824&&(e.flags|=128,r=!0,gg(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=an(),e.sibling=null,n=Bt.current,Et(Bt,r?n&1|2:n&1),e):(mr(e),null);case 22:case 23:return Wk(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ji&1073741824&&(mr(e),e.subtreeFlags&6&&(e.flags|=8192)):mr(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function $q(t,e){switch(Sk(e),e.tag){case 1:return yi(e.type)&&lx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return sm(),Rt(vi),Rt(Or),Dk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ok(e),null;case 13:if(Rt(Bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));rm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Rt(Bt),null;case 4:return sm(),null;case 10:return Ck(e.type._context),null;case 22:case 23:return Wk(),null;case 24:return null;default:return null}}var v_=!1,Pr=!1,zq=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Tf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Yt(t,e,r)}else n.current=null}function oP(t,e,n){try{n()}catch(r){Yt(t,e,r)}}var xM=!1;function Hq(t,e){if(HT=ix,t=x4(),Ak(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(o=a+i),h!==s||r!==0&&h.nodeType!==3||(l=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===i&&(o=a),f===s&&++u===r&&(l=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(WT={focusedElem:t,selectionRange:n},ix=!1,fe=e;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:Ms(e.type,v),y);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(I){Yt(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return g=xM,xM=!1,g}function fv(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&oP(e,n,s)}i=i.next}while(i!==r)}}function dE(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function lP(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yU(t){var e=t.alternate;e!==null&&(t.alternate=null,yU(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Va],delete e[Lv],delete e[KT],delete e[Tq],delete e[Pq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wU(t){return t.tag===5||t.tag===3||t.tag===4}function AM(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wU(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cP(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ox));else if(r!==4&&(t=t.child,t!==null))for(cP(t,e,n),t=t.sibling;t!==null;)cP(t,e,n),t=t.sibling}function uP(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(uP(t,e,n),t=t.sibling;t!==null;)uP(t,e,n),t=t.sibling}var tr=null,Xs=!1;function Ml(t,e,n){for(n=n.child;n!==null;)_U(t,e,n),n=n.sibling}function _U(t,e,n){if($a&&typeof $a.onCommitFiberUnmount=="function")try{$a.onCommitFiberUnmount(iE,n)}catch{}switch(n.tag){case 5:Pr||Tf(n,e);case 6:var r=tr,i=Xs;tr=null,Ml(t,e,n),tr=r,Xs=i,tr!==null&&(Xs?(t=tr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tr.removeChild(n.stateNode));break;case 18:tr!==null&&(Xs?(t=tr,n=n.stateNode,t.nodeType===8?gS(t.parentNode,n):t.nodeType===1&&gS(t,n),Rv(t)):gS(tr,n.stateNode));break;case 4:r=tr,i=Xs,tr=n.stateNode.containerInfo,Xs=!0,Ml(t,e,n),tr=r,Xs=i;break;case 0:case 11:case 14:case 15:if(!Pr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&oP(n,e,a),i=i.next}while(i!==r)}Ml(t,e,n);break;case 1:if(!Pr&&(Tf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Yt(n,e,o)}Ml(t,e,n);break;case 21:Ml(t,e,n);break;case 22:n.mode&1?(Pr=(r=Pr)||n.memoizedState!==null,Ml(t,e,n),Pr=r):Ml(t,e,n);break;default:Ml(t,e,n)}}function EM(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zq),e.forEach(function(r){var i=Zq.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Os(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:tr=o.stateNode,Xs=!1;break e;case 3:tr=o.stateNode.containerInfo,Xs=!0;break e;case 4:tr=o.stateNode.containerInfo,Xs=!0;break e}o=o.return}if(tr===null)throw Error(ie(160));_U(s,a,i),tr=null,Xs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Yt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bU(e,t),e=e.sibling}function bU(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Os(e,t),ma(t),r&4){try{fv(3,t,t.return),dE(3,t)}catch(v){Yt(t,t.return,v)}try{fv(5,t,t.return)}catch(v){Yt(t,t.return,v)}}break;case 1:Os(e,t),ma(t),r&512&&n!==null&&Tf(n,n.return);break;case 5:if(Os(e,t),ma(t),r&512&&n!==null&&Tf(n,n.return),t.flags&32){var i=t.stateNode;try{Pv(i,"")}catch(v){Yt(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&zV(i,s),DT(o,a);var c=DT(o,s);for(a=0;a<l.length;a+=2){var u=l[a],h=l[a+1];u==="style"?KV(i,h):u==="dangerouslySetInnerHTML"?GV(i,h):u==="children"?Pv(i,h):uk(i,u,h,c)}switch(o){case"input":CT(i,s);break;case"textarea":HV(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Df(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Df(i,!!s.multiple,s.defaultValue,!0):Df(i,!!s.multiple,s.multiple?[]:"",!1))}i[Lv]=s}catch(v){Yt(t,t.return,v)}}break;case 6:if(Os(e,t),ma(t),r&4){if(t.stateNode===null)throw Error(ie(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Yt(t,t.return,v)}}break;case 3:if(Os(e,t),ma(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Rv(e.containerInfo)}catch(v){Yt(t,t.return,v)}break;case 4:Os(e,t),ma(t);break;case 13:Os(e,t),ma(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(zk=an())),r&4&&EM(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Pr=(c=Pr)||u,Os(e,t),Pr=c):Os(e,t),ma(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(fe=t,u=t.child;u!==null;){for(h=fe=u;fe!==null;){switch(f=fe,m=f.child,f.tag){case 0:case 11:case 14:case 15:fv(4,f,f.return);break;case 1:Tf(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Yt(r,n,v)}}break;case 5:Tf(f,f.return);break;case 22:if(f.memoizedState!==null){TM(h);continue}}m!==null?(m.return=f,fe=m):TM(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=qV("display",a))}catch(v){Yt(t,t.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){Yt(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Os(e,t),ma(t),r&4&&EM(t);break;case 21:break;default:Os(e,t),ma(t)}}function ma(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wU(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pv(i,""),r.flags&=-33);var s=AM(t);uP(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=AM(t);cP(t,o,a);break;default:throw Error(ie(161))}}catch(l){Yt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Wq(t,e,n){fe=t,xU(t)}function xU(t,e,n){for(var r=(t.mode&1)!==0;fe!==null;){var i=fe,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||v_;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Pr;o=v_;var c=Pr;if(v_=a,(Pr=l)&&!c)for(fe=i;fe!==null;)a=fe,l=a.child,a.tag===22&&a.memoizedState!==null?PM(i):l!==null?(l.return=a,fe=l):PM(i);for(;s!==null;)fe=s,xU(s),s=s.sibling;fe=i,v_=o,Pr=c}SM(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,fe=s):SM(t)}}function SM(t){for(;fe!==null;){var e=fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pr||dE(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ms(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&cM(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cM(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Rv(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}Pr||e.flags&512&&lP(e)}catch(f){Yt(e,e.return,f)}}if(e===t){fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,fe=n;break}fe=e.return}}function TM(t){for(;fe!==null;){var e=fe;if(e===t){fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,fe=n;break}fe=e.return}}function PM(t){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dE(4,e)}catch(l){Yt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Yt(e,i,l)}}var s=e.return;try{lP(e)}catch(l){Yt(e,s,l)}break;case 5:var a=e.return;try{lP(e)}catch(l){Yt(e,a,l)}}}catch(l){Yt(e,e.return,l)}if(e===t){fe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,fe=o;break}fe=e.return}}var Gq=Math.ceil,yx=_l.ReactCurrentDispatcher,Bk=_l.ReactCurrentOwner,xs=_l.ReactCurrentBatchConfig,nt=0,Wn=null,hn=null,ar=0,ji=0,Pf=cu(0),Sn=0,$v=null,md=0,fE=0,$k=0,pv=null,fi=null,zk=0,om=1/0,co=null,wx=!1,hP=null,Vc=null,y_=!1,kc=null,_x=0,mv=0,dP=null,ib=-1,sb=0;function qr(){return nt&6?an():ib!==-1?ib:ib=an()}function Uc(t){return t.mode&1?nt&2&&ar!==0?ar&-ar:Cq.transition!==null?(sb===0&&(sb=a4()),sb):(t=ft,t!==0||(t=window.event,t=t===void 0?16:f4(t.type)),t):1}function na(t,e,n,r){if(50<mv)throw mv=0,dP=null,Error(ie(185));H0(t,n,r),(!(nt&2)||t!==Wn)&&(t===Wn&&(!(nt&2)&&(fE|=n),Sn===4&&Wl(t,ar)),wi(t,r),n===1&&nt===0&&!(e.mode&1)&&(om=an()+500,cE&&uu()))}function wi(t,e){var n=t.callbackNode;CG(t,e);var r=rx(t,t===Wn?ar:0);if(r===0)n!==null&&LD(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&LD(n),e===1)t.tag===0?Iq(IM.bind(null,t)):N4(IM.bind(null,t)),Eq(function(){!(nt&6)&&uu()}),n=null;else{switch(o4(r)){case 1:n=mk;break;case 4:n=i4;break;case 16:n=nx;break;case 536870912:n=s4;break;default:n=nx}n=kU(n,AU.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function AU(t,e){if(ib=-1,sb=0,nt&6)throw Error(ie(327));var n=t.callbackNode;if(Vf()&&t.callbackNode!==n)return null;var r=rx(t,t===Wn?ar:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bx(t,r);else{e=r;var i=nt;nt|=2;var s=SU();(Wn!==t||ar!==e)&&(co=null,om=an()+500,rd(t,e));do try{Xq();break}catch(o){EU(t,o)}while(!0);Ik(),yx.current=s,nt=i,hn!==null?e=0:(Wn=null,ar=0,e=Sn)}if(e!==0){if(e===2&&(i=VT(t),i!==0&&(r=i,e=fP(t,i))),e===1)throw n=$v,rd(t,0),Wl(t,r),wi(t,an()),n;if(e===6)Wl(t,r);else{if(i=t.current.alternate,!(r&30)&&!qq(i)&&(e=bx(t,r),e===2&&(s=VT(t),s!==0&&(r=s,e=fP(t,s))),e===1))throw n=$v,rd(t,0),Wl(t,r),wi(t,an()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ie(345));case 2:Iu(t,fi,co);break;case 3:if(Wl(t,r),(r&130023424)===r&&(e=zk+500-an(),10<e)){if(rx(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){qr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=qT(Iu.bind(null,t,fi,co),e);break}Iu(t,fi,co);break;case 4:if(Wl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-ta(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=an()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gq(r/1960))-r,10<r){t.timeoutHandle=qT(Iu.bind(null,t,fi,co),r);break}Iu(t,fi,co);break;case 5:Iu(t,fi,co);break;default:throw Error(ie(329))}}}return wi(t,an()),t.callbackNode===n?AU.bind(null,t):null}function fP(t,e){var n=pv;return t.current.memoizedState.isDehydrated&&(rd(t,e).flags|=256),t=bx(t,e),t!==2&&(e=fi,fi=n,e!==null&&pP(e)),t}function pP(t){fi===null?fi=t:fi.push.apply(fi,t)}function qq(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!sa(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wl(t,e){for(e&=~$k,e&=~fE,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ta(e),r=1<<n;t[n]=-1,e&=~r}}function IM(t){if(nt&6)throw Error(ie(327));Vf();var e=rx(t,0);if(!(e&1))return wi(t,an()),null;var n=bx(t,e);if(t.tag!==0&&n===2){var r=VT(t);r!==0&&(e=r,n=fP(t,r))}if(n===1)throw n=$v,rd(t,0),Wl(t,e),wi(t,an()),n;if(n===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Iu(t,fi,co),wi(t,an()),null}function Hk(t,e){var n=nt;nt|=1;try{return t(e)}finally{nt=n,nt===0&&(om=an()+500,cE&&uu())}}function gd(t){kc!==null&&kc.tag===0&&!(nt&6)&&Vf();var e=nt;nt|=1;var n=xs.transition,r=ft;try{if(xs.transition=null,ft=1,t)return t()}finally{ft=r,xs.transition=n,nt=e,!(nt&6)&&uu()}}function Wk(){ji=Pf.current,Rt(Pf)}function rd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Aq(n)),hn!==null)for(n=hn.return;n!==null;){var r=n;switch(Sk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lx();break;case 3:sm(),Rt(vi),Rt(Or),Dk();break;case 5:Ok(r);break;case 4:sm();break;case 13:Rt(Bt);break;case 19:Rt(Bt);break;case 10:Ck(r.type._context);break;case 22:case 23:Wk()}n=n.return}if(Wn=t,hn=t=Bc(t.current,null),ar=ji=e,Sn=0,$v=null,$k=fE=md=0,fi=pv=null,Gu!==null){for(e=0;e<Gu.length;e++)if(n=Gu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Gu=null}return t}function EU(t,e){do{var n=hn;try{if(Ik(),tb.current=vx,gx){for(var r=zt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gx=!1}if(pd=0,Hn=xn=zt=null,dv=!1,Vv=0,Bk.current=null,n===null||n.return===null){Sn=1,$v=e,hn=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=ar,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=mM(a);if(m!==null){m.flags&=-257,gM(m,a,o,s,e),m.mode&1&&pM(s,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){pM(s,c,e),Gk();break e}l=Error(ie(426))}}else if(Lt&&o.mode&1){var y=mM(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),gM(y,a,o,s,e),Tk(am(l,o));break e}}s=l=am(l,o),Sn!==4&&(Sn=2),pv===null?pv=[s]:pv.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=oU(s,l,e);lM(s,w);break e;case 1:o=l;var b=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Vc===null||!Vc.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=lU(s,o,e);lM(s,I);break e}}s=s.return}while(s!==null)}PU(n)}catch(k){e=k,hn===n&&n!==null&&(hn=n=n.return);continue}break}while(!0)}function SU(){var t=yx.current;return yx.current=vx,t===null?vx:t}function Gk(){(Sn===0||Sn===3||Sn===2)&&(Sn=4),Wn===null||!(md&268435455)&&!(fE&268435455)||Wl(Wn,ar)}function bx(t,e){var n=nt;nt|=2;var r=SU();(Wn!==t||ar!==e)&&(co=null,rd(t,e));do try{Kq();break}catch(i){EU(t,i)}while(!0);if(Ik(),nt=n,yx.current=r,hn!==null)throw Error(ie(261));return Wn=null,ar=0,Sn}function Kq(){for(;hn!==null;)TU(hn)}function Xq(){for(;hn!==null&&!_G();)TU(hn)}function TU(t){var e=CU(t.alternate,t,ji);t.memoizedProps=t.pendingProps,e===null?PU(t):hn=e,Bk.current=null}function PU(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$q(n,e),n!==null){n.flags&=32767,hn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Sn=6,hn=null;return}}else if(n=Bq(n,e,ji),n!==null){hn=n;return}if(e=e.sibling,e!==null){hn=e;return}hn=e=t}while(e!==null);Sn===0&&(Sn=5)}function Iu(t,e,n){var r=ft,i=xs.transition;try{xs.transition=null,ft=1,Yq(t,e,n,r)}finally{xs.transition=i,ft=r}return null}function Yq(t,e,n,r){do Vf();while(kc!==null);if(nt&6)throw Error(ie(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(kG(t,s),t===Wn&&(hn=Wn=null,ar=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||y_||(y_=!0,kU(nx,function(){return Vf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=xs.transition,xs.transition=null;var a=ft;ft=1;var o=nt;nt|=4,Bk.current=null,Hq(t,n),bU(n,t),gq(WT),ix=!!HT,WT=HT=null,t.current=n,Wq(n),bG(),nt=o,ft=a,xs.transition=s}else t.current=n;if(y_&&(y_=!1,kc=t,_x=i),s=t.pendingLanes,s===0&&(Vc=null),EG(n.stateNode),wi(t,an()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wx)throw wx=!1,t=hP,hP=null,t;return _x&1&&t.tag!==0&&Vf(),s=t.pendingLanes,s&1?t===dP?mv++:(mv=0,dP=t):mv=0,uu(),null}function Vf(){if(kc!==null){var t=o4(_x),e=xs.transition,n=ft;try{if(xs.transition=null,ft=16>t?16:t,kc===null)var r=!1;else{if(t=kc,kc=null,_x=0,nt&6)throw Error(ie(331));var i=nt;for(nt|=4,fe=t.current;fe!==null;){var s=fe,a=s.child;if(fe.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(fe=c;fe!==null;){var u=fe;switch(u.tag){case 0:case 11:case 15:fv(8,u,s)}var h=u.child;if(h!==null)h.return=u,fe=h;else for(;fe!==null;){u=fe;var f=u.sibling,m=u.return;if(yU(u),u===c){fe=null;break}if(f!==null){f.return=m,fe=f;break}fe=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}fe=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,fe=a;else e:for(;fe!==null;){if(s=fe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fv(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,fe=w;break e}fe=s.return}}var b=t.current;for(fe=b;fe!==null;){a=fe;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,fe=A;else e:for(a=b;fe!==null;){if(o=fe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:dE(9,o)}}catch(k){Yt(o,o.return,k)}if(o===a){fe=null;break e}var I=o.sibling;if(I!==null){I.return=o.return,fe=I;break e}fe=o.return}}if(nt=i,uu(),$a&&typeof $a.onPostCommitFiberRoot=="function")try{$a.onPostCommitFiberRoot(iE,t)}catch{}r=!0}return r}finally{ft=n,xs.transition=e}}return!1}function CM(t,e,n){e=am(n,e),e=oU(t,e,1),t=Fc(t,e,1),e=qr(),t!==null&&(H0(t,1,e),wi(t,e))}function Yt(t,e,n){if(t.tag===3)CM(t,t,n);else for(;e!==null;){if(e.tag===3){CM(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vc===null||!Vc.has(r))){t=am(n,t),t=lU(e,t,1),e=Fc(e,t,1),t=qr(),e!==null&&(H0(e,1,t),wi(e,t));break}}e=e.return}}function Qq(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qr(),t.pingedLanes|=t.suspendedLanes&n,Wn===t&&(ar&n)===n&&(Sn===4||Sn===3&&(ar&130023424)===ar&&500>an()-zk?rd(t,0):$k|=n),wi(t,e)}function IU(t,e){e===0&&(t.mode&1?(e=l_,l_<<=1,!(l_&130023424)&&(l_=4194304)):e=1);var n=qr();t=sl(t,e),t!==null&&(H0(t,e,n),wi(t,n))}function Jq(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),IU(t,n)}function Zq(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(e),IU(t,n)}var CU;CU=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vi.current)mi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mi=!1,Uq(t,e,n);mi=!!(t.flags&131072)}else mi=!1,Lt&&e.flags&1048576&&O4(e,hx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rb(t,e),t=e.pendingProps;var i=nm(e,Or.current);Ff(e,n),i=Lk(null,e,r,t,i,n);var s=jk();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yi(r)?(s=!0,cx(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Rk(e),i.updater=hE,e.stateNode=i,i._reactInternals=e,eP(e,r,t,n),e=rP(null,e,r,!0,s,n)):(e.tag=0,Lt&&s&&Ek(e),zr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rb(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=tK(r),t=Ms(r,t),i){case 0:e=nP(null,e,r,t,n);break e;case 1:e=wM(null,e,r,t,n);break e;case 11:e=vM(null,e,r,t,n);break e;case 14:e=yM(null,e,r,Ms(r.type,t),n);break e}throw Error(ie(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),nP(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),wM(t,e,r,i,n);case 3:e:{if(dU(e),t===null)throw Error(ie(387));r=e.pendingProps,s=e.memoizedState,i=s.element,V4(t,e),px(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=am(Error(ie(423)),e),e=_M(t,e,r,n,i);break e}else if(r!==i){i=am(Error(ie(424)),e),e=_M(t,e,r,n,i);break e}else for($i=jc(e.stateNode.containerInfo.firstChild),Wi=e,Lt=!0,Ys=null,n=j4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rm(),r===i){e=al(t,e,n);break e}zr(t,e,r,n)}e=e.child}return e;case 5:return U4(e),t===null&&QT(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,GT(r,i)?a=null:s!==null&&GT(r,s)&&(e.flags|=32),hU(t,e),zr(t,e,a,n),e.child;case 6:return t===null&&QT(e),null;case 13:return fU(t,e,n);case 4:return Nk(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=im(e,null,r,n):zr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),vM(t,e,r,i,n);case 7:return zr(t,e,e.pendingProps,n),e.child;case 8:return zr(t,e,e.pendingProps.children,n),e.child;case 12:return zr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Et(dx,r._currentValue),r._currentValue=a,s!==null)if(sa(s.value,a)){if(s.children===i.children&&!vi.current){e=al(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Qo(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),JT(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ie(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),JT(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}zr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ff(e,n),i=Ss(i),r=r(i),e.flags|=1,zr(t,e,r,n),e.child;case 14:return r=e.type,i=Ms(r,e.pendingProps),i=Ms(r.type,i),yM(t,e,r,i,n);case 15:return cU(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),rb(t,e),e.tag=1,yi(r)?(t=!0,cx(e)):t=!1,Ff(e,n),aU(e,r,i),eP(e,r,i,n),rP(null,e,r,!0,t,n);case 19:return pU(t,e,n);case 22:return uU(t,e,n)}throw Error(ie(156,e.tag))};function kU(t,e){return r4(t,e)}function eK(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ws(t,e,n,r){return new eK(t,e,n,r)}function qk(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tK(t){if(typeof t=="function")return qk(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dk)return 11;if(t===fk)return 14}return 2}function Bc(t,e){var n=t.alternate;return n===null?(n=ws(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ab(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")qk(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case vf:return id(n.children,i,s,e);case hk:a=8,i|=8;break;case ET:return t=ws(12,n,e,i|2),t.elementType=ET,t.lanes=s,t;case ST:return t=ws(13,n,e,i),t.elementType=ST,t.lanes=s,t;case TT:return t=ws(19,n,e,i),t.elementType=TT,t.lanes=s,t;case UV:return pE(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case FV:a=10;break e;case VV:a=9;break e;case dk:a=11;break e;case fk:a=14;break e;case Vl:a=16,r=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=ws(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function id(t,e,n,r){return t=ws(7,t,r,e),t.lanes=n,t}function pE(t,e,n,r){return t=ws(22,t,r,e),t.elementType=UV,t.lanes=n,t.stateNode={isHidden:!1},t}function ES(t,e,n){return t=ws(6,t,null,e),t.lanes=n,t}function SS(t,e,n){return e=ws(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nK(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sS(0),this.expirationTimes=sS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kk(t,e,n,r,i,s,a,o,l){return t=new nK(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ws(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rk(s),t}function rK(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gf,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function RU(t){if(!t)return Xc;t=t._reactInternals;e:{if(Nd(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var n=t.type;if(yi(n))return R4(t,n,e)}return e}function NU(t,e,n,r,i,s,a,o,l){return t=Kk(n,r,!0,t,i,s,a,o,l),t.context=RU(null),n=t.current,r=qr(),i=Uc(n),s=Qo(r,i),s.callback=e??null,Fc(n,s,i),t.current.lanes=i,H0(t,i,r),wi(t,r),t}function mE(t,e,n,r){var i=e.current,s=qr(),a=Uc(i);return n=RU(n),e.context===null?e.context=n:e.pendingContext=n,e=Qo(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fc(i,e,a),t!==null&&(na(t,i,a,s),eb(t,i,a)),a}function xx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kM(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xk(t,e){kM(t,e),(t=t.alternate)&&kM(t,e)}function iK(){return null}var OU=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yk(t){this._internalRoot=t}gE.prototype.render=Yk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));mE(t,e,null,null)};gE.prototype.unmount=Yk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gd(function(){mE(null,t,null,null)}),e[il]=null}};function gE(t){this._internalRoot=t}gE.prototype.unstable_scheduleHydration=function(t){if(t){var e=u4();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hl.length&&e!==0&&e<Hl[n].priority;n++);Hl.splice(n,0,t),n===0&&d4(t)}};function Qk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function RM(){}function sK(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=xx(a);s.call(c)}}var a=NU(e,r,t,0,null,!1,!1,"",RM);return t._reactRootContainer=a,t[il]=a.current,Dv(t.nodeType===8?t.parentNode:t),gd(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=xx(l);o.call(c)}}var l=Kk(t,0,!1,null,null,!1,!1,"",RM);return t._reactRootContainer=l,t[il]=l.current,Dv(t.nodeType===8?t.parentNode:t),gd(function(){mE(e,l,n,r)}),l}function yE(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=xx(a);o.call(l)}}mE(e,a,t,i)}else a=sK(n,e,t,i,r);return xx(a)}l4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Mg(e.pendingLanes);n!==0&&(gk(e,n|1),wi(e,an()),!(nt&6)&&(om=an()+500,uu()))}break;case 13:gd(function(){var r=sl(t,1);if(r!==null){var i=qr();na(r,t,1,i)}}),Xk(t,1)}};vk=function(t){if(t.tag===13){var e=sl(t,134217728);if(e!==null){var n=qr();na(e,t,134217728,n)}Xk(t,134217728)}};c4=function(t){if(t.tag===13){var e=Uc(t),n=sl(t,e);if(n!==null){var r=qr();na(n,t,e,r)}Xk(t,e)}};u4=function(){return ft};h4=function(t,e){var n=ft;try{return ft=t,e()}finally{ft=n}};LT=function(t,e,n){switch(e){case"input":if(CT(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=lE(r);if(!i)throw Error(ie(90));$V(r),CT(r,i)}}}break;case"textarea":HV(t,n);break;case"select":e=n.value,e!=null&&Df(t,!!n.multiple,e,!1)}};QV=Hk;JV=gd;var aK={usingClientEntryPoint:!1,Events:[G0,bf,lE,XV,YV,Hk]},vg={findFiberByHostInstance:Wu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oK={bundleType:vg.bundleType,version:vg.version,rendererPackageName:vg.rendererPackageName,rendererConfig:vg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_l.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=t4(t),t===null?null:t.stateNode},findFiberByHostInstance:vg.findFiberByHostInstance||iK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var w_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!w_.isDisabled&&w_.supportsFiber)try{iE=w_.inject(oK),$a=w_}catch{}}Zi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aK;Zi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qk(e))throw Error(ie(200));return rK(t,e,null,n)};Zi.createRoot=function(t,e){if(!Qk(t))throw Error(ie(299));var n=!1,r="",i=OU;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Kk(t,1,!1,null,null,n,!1,r,i),t[il]=e.current,Dv(t.nodeType===8?t.parentNode:t),new Yk(e)};Zi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=t4(e),t=t===null?null:t.stateNode,t};Zi.flushSync=function(t){return gd(t)};Zi.hydrate=function(t,e,n){if(!vE(e))throw Error(ie(200));return yE(null,t,e,!0,n)};Zi.hydrateRoot=function(t,e,n){if(!Qk(t))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=OU;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=NU(e,null,t,1,n??null,i,!1,s,a),t[il]=e.current,Dv(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new gE(e)};Zi.render=function(t,e,n){if(!vE(e))throw Error(ie(200));return yE(null,t,e,!1,n)};Zi.unmountComponentAtNode=function(t){if(!vE(t))throw Error(ie(40));return t._reactRootContainer?(gd(function(){yE(null,null,t,!1,function(){t._reactRootContainer=null,t[il]=null})}),!0):!1};Zi.unstable_batchedUpdates=Hk;Zi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vE(n))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return yE(t,e,n,!1,r)};Zi.version="18.3.1-next-f1338f8080-20240426";function DU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DU)}catch(t){console.error(t)}}DU(),DV.exports=Zi;var Jk=DV.exports,NM=Jk;xT.createRoot=NM.createRoot,xT.hydrateRoot=NM.hydrateRoot;function lK(t){return/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/.test(t)}function wE(t,e="font-arabic"){t.children.length===0&&t.textContent&&lK(t.textContent)?t.classList.add(e):Array.from(t.children).forEach(n=>{wE(n,e)})}function cK(t="font-arabic"){new MutationObserver(n=>{for(const r of n)r.type==="childList"&&r.addedNodes.length>0&&r.addedNodes.forEach(i=>{i.nodeType===Node.ELEMENT_NODE&&wE(i,t)})}).observe(document.body,{childList:!0,subtree:!0})}const Zk="font-arabic";document.addEventListener("DOMContentLoaded",()=>{wE(document.body,Zk)});cK(Zk);wE(document.body,Zk);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uK=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MU=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dK=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>E.createElement("svg",{ref:l,...hK,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:MU("lucide",i),...o},[...a.map(([c,u])=>E.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(t,e)=>{const n=E.forwardRef(({className:r,...i},s)=>E.createElement(dK,{ref:s,iconNode:e,className:MU(`lucide-${uK(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=Xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fK=Xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=Xe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=Xe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=Xe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=Xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pK=Xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mK=Xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=Xe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gK=Xe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vK=Xe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=Xe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=Xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=Xe("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=Xe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=Xe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=Xe("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=Xe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yK=Xe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=Xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wK=Xe("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=Xe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=Xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _K=Xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bK=Xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xK=Xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=Xe("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=Xe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=Xe("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=Xe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=Xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AK=Xe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EK=Xe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=Xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SK=Xe("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=Xe("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var jM={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},PK=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},UU={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|o>>4;let f=(o&15)<<2|c>>6,m=c&63;l||(m=64,a||(f=64)),r.push(n[u],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PK(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||c==null||h==null)throw new IK;const f=s<<2|o>>4;if(r.push(f),c!==64){const m=o<<4&240|c>>2;if(r.push(m),h!==64){const g=c<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class IK extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CK=function(t){const e=VU(t);return UU.encodeByteArray(e,!0)},Ex=function(t){return CK(t).replace(/\./g,"")},BU=function(t){try{return UU.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kK(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK=()=>kK().__FIREBASE_DEFAULTS__,NK=()=>{if(typeof process>"u"||typeof jM>"u")return;const t=jM.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OK=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&BU(t[1]);return e&&JSON.parse(e)},_E=()=>{try{return RK()||NK()||OK()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$U=t=>{var e,n;return(n=(e=_E())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},eR=t=>{const e=$U(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zU=()=>{var t;return(t=_E())===null||t===void 0?void 0:t.config},HU=t=>{var e;return(e=_E())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ex(JSON.stringify(n)),Ex(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MK(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dr())}function LK(){var t;const e=(t=_E())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jK(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FK(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VK(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UK(){const t=Dr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BK(){return!LK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $K(){try{return typeof indexedDB=="object"}catch{return!1}}function zK(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HK="FirebaseError";class da extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=HK,Object.setPrototypeOf(this,da.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K0.prototype.create)}}class K0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?WK(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new da(i,o,r)}}function WK(t,e){return t.replace(GK,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const GK=/\{\$([^}]+)}/g;function qK(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sx(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(FM(s)&&FM(a)){if(!Sx(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function FM(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jg(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Fg(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function KK(t,e){const n=new XK(t,e);return n.subscribe.bind(n)}class XK{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");YK(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=CS),i.error===void 0&&(i.error=CS),i.complete===void 0&&(i.complete=CS);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YK(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function CS(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t){return t&&t._delegate?t._delegate:t}class ol{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QK=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new DK;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZK(e))try{this.getOrInitializeService({instanceIdentifier:Cu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Cu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cu){return this.instances.has(e)}getOptions(e=Cu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JK(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cu){return this.component?this.component.multipleInstances?e:Cu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function JK(t){return t===Cu?void 0:t}function ZK(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QK(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const t7={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},n7=Qe.INFO,r7={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},i7=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=r7[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tR{constructor(e){this.name=e,this._logLevel=n7,this._logHandler=i7,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?t7[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const s7=(t,e)=>e.some(n=>t instanceof n);let VM,UM;function a7(){return VM||(VM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o7(){return UM||(UM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GU=new WeakMap,yP=new WeakMap,qU=new WeakMap,kS=new WeakMap,nR=new WeakMap;function l7(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n($c(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&GU.set(n,t)}).catch(()=>{}),nR.set(e,t),e}function c7(t){if(yP.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});yP.set(t,e)}let wP={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yP.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qU.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $c(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function u7(t){wP=t(wP)}function h7(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(RS(this),e,...n);return qU.set(r,e.sort?e.sort():[e]),$c(r)}:o7().includes(t)?function(...e){return t.apply(RS(this),e),$c(GU.get(this))}:function(...e){return $c(t.apply(RS(this),e))}}function d7(t){return typeof t=="function"?h7(t):(t instanceof IDBTransaction&&c7(t),s7(t,a7())?new Proxy(t,wP):t)}function $c(t){if(t instanceof IDBRequest)return l7(t);if(kS.has(t))return kS.get(t);const e=d7(t);return e!==t&&(kS.set(t,e),nR.set(e,t)),e}const RS=t=>nR.get(t);function f7(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=$c(a);return r&&a.addEventListener("upgradeneeded",l=>{r($c(a.result),l.oldVersion,l.newVersion,$c(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const p7=["get","getKey","getAll","getAllKeys","count"],m7=["put","add","delete","clear"],NS=new Map;function BM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(NS.get(e))return NS.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=m7.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||p7.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),i&&l.done]))[0]};return NS.set(e,s),s}u7(t=>({...t,get:(e,n,r)=>BM(e,n)||t.get(e,n,r),has:(e,n)=>!!BM(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(v7(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function v7(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _P="@firebase/app",$M="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=new tR("@firebase/app"),y7="@firebase/app-compat",w7="@firebase/analytics-compat",_7="@firebase/analytics",b7="@firebase/app-check-compat",x7="@firebase/app-check",A7="@firebase/auth",E7="@firebase/auth-compat",S7="@firebase/database",T7="@firebase/data-connect",P7="@firebase/database-compat",I7="@firebase/functions",C7="@firebase/functions-compat",k7="@firebase/installations",R7="@firebase/installations-compat",N7="@firebase/messaging",O7="@firebase/messaging-compat",D7="@firebase/performance",M7="@firebase/performance-compat",L7="@firebase/remote-config",j7="@firebase/remote-config-compat",F7="@firebase/storage",V7="@firebase/storage-compat",U7="@firebase/firestore",B7="@firebase/vertexai-preview",$7="@firebase/firestore-compat",z7="firebase",H7="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="[DEFAULT]",W7={[_P]:"fire-core",[y7]:"fire-core-compat",[_7]:"fire-analytics",[w7]:"fire-analytics-compat",[x7]:"fire-app-check",[b7]:"fire-app-check-compat",[A7]:"fire-auth",[E7]:"fire-auth-compat",[S7]:"fire-rtdb",[T7]:"fire-data-connect",[P7]:"fire-rtdb-compat",[I7]:"fire-fn",[C7]:"fire-fn-compat",[k7]:"fire-iid",[R7]:"fire-iid-compat",[N7]:"fire-fcm",[O7]:"fire-fcm-compat",[D7]:"fire-perf",[M7]:"fire-perf-compat",[L7]:"fire-rc",[j7]:"fire-rc-compat",[F7]:"fire-gcs",[V7]:"fire-gcs-compat",[U7]:"fire-fst",[$7]:"fire-fst-compat",[B7]:"fire-vertex","fire-js":"fire-js",[z7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new Map,G7=new Map,xP=new Map;function zM(t,e){try{t.container.addComponent(e)}catch(n){ll.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yc(t){const e=t.name;if(xP.has(e))return ll.debug(`There were multiple attempts to register component ${e}.`),!1;xP.set(e,t);for(const n of Tx.values())zM(n,t);for(const n of G7.values())zM(n,t);return!0}function Y0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Wo(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zc=new K0("app","Firebase",q7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ol("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=H7;function KU(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:bP,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw zc.create("bad-app-name",{appName:String(i)});if(n||(n=zU()),!n)throw zc.create("no-options");const s=Tx.get(i);if(s){if(Sx(n,s.options)&&Sx(r,s.config))return s;throw zc.create("duplicate-app",{appName:i})}const a=new e7(i);for(const l of xP.values())a.addComponent(l);const o=new K7(n,r,a);return Tx.set(i,o),o}function bE(t=bP){const e=Tx.get(t);if(!e&&t===bP&&zU())return KU();if(!e)throw zc.create("no-app",{appName:t});return e}function As(t,e,n){var r;let i=(r=W7[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ll.warn(o.join(" "));return}Yc(new ol(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7="firebase-heartbeat-database",Y7=1,Hv="firebase-heartbeat-store";let OS=null;function XU(){return OS||(OS=f7(X7,Y7,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hv)}catch(n){console.warn(n)}}}}).catch(t=>{throw zc.create("idb-open",{originalErrorMessage:t.message})})),OS}async function Q7(t){try{const n=(await XU()).transaction(Hv),r=await n.objectStore(Hv).get(YU(t));return await n.done,r}catch(e){if(e instanceof da)ll.warn(e.message);else{const n=zc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ll.warn(n.message)}}}async function HM(t,e){try{const r=(await XU()).transaction(Hv,"readwrite");await r.objectStore(Hv).put(e,YU(t)),await r.done}catch(n){if(n instanceof da)ll.warn(n.message);else{const r=zc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ll.warn(r.message)}}}function YU(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7=1024,Z7=30*24*60*60*1e3;class eX{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nX(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=WM();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=Z7}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ll.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=WM(),{heartbeatsToSend:r,unsentEntries:i}=tX(this._heartbeatsCache.heartbeats),s=Ex(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ll.warn(n),""}}}function WM(){return new Date().toISOString().substring(0,10)}function tX(t,e=J7){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),GM(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),GM(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class nX{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $K()?zK().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Q7(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return HM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return HM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function GM(t){return Ex(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rX(t){Yc(new ol("platform-logger",e=>new g7(e),"PRIVATE")),Yc(new ol("heartbeat",e=>new eX(e),"PRIVATE")),As(_P,$M,t),As(_P,$M,"esm2017"),As("fire-js","")}rX("");var iX="firebase",sX="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As(iX,sX,"app");function rR(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function QU(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aX=QU,JU=new K0("auth","Firebase",QU());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new tR("@firebase/auth");function oX(t,...e){Px.logLevel<=Qe.WARN&&Px.warn(`Auth (${Od}): ${t}`,...e)}function lb(t,...e){Px.logLevel<=Qe.ERROR&&Px.error(`Auth (${Od}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t,...e){throw iR(t,...e)}function Ha(t,...e){return iR(t,...e)}function ZU(t,e,n){const r=Object.assign(Object.assign({},aX()),{[e]:n});return new K0("auth","Firebase",r).create(e,{appName:t.name})}function Hc(t){return ZU(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iR(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return JU.create(t,...e)}function Re(t,e,...n){if(!t)throw iR(e,...n)}function Go(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lb(e),new Error(e)}function cl(t,e){t||Go(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function lX(){return qM()==="http:"||qM()==="https:"}function qM(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cX(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lX()||FK()||"connection"in navigator)?navigator.onLine:!0}function uX(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,n){this.shortDelay=e,this.longDelay=n,cl(n>e,"Short delay should be less than long delay!"),this.isMobile=MK()||VK()}get(){return cX()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t,e){cl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Go("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Go("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Go("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dX=new Q0(3e4,6e4);function Dd(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function hu(t,e,n,r,i={}){return tB(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=X0(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return jK()||(c.referrerPolicy="no-referrer"),eB.fetch()(nB(t,t.config.apiHost,n,o),c)})}async function tB(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},hX),e);try{const i=new pX(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw b_(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw b_(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw b_(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw b_(t,"user-disabled",a);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ZU(t,u,c);aa(t,u)}}catch(i){if(i instanceof da)throw i;aa(t,"network-request-failed",{message:String(i)})}}async function xE(t,e,n,r,i={}){const s=await hu(t,e,n,r,i);return"mfaPendingCredential"in s&&aa(t,"multi-factor-auth-required",{_serverResponse:s}),s}function nB(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?sR(t.config,i):`${t.config.apiScheme}://${i}`}function fX(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pX{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ha(this.auth,"network-request-failed")),dX.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function b_(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ha(t,e,r);return i.customData._tokenResponse=n,i}function KM(t){return t!==void 0&&t.enterprise!==void 0}class mX{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return fX(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function gX(t,e){return hu(t,"GET","/v2/recaptchaConfig",Dd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vX(t,e){return hu(t,"POST","/v1/accounts:delete",e)}async function rB(t,e){return hu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yX(t,e=!1){const n=mt(t),r=await n.getIdToken(e),i=aR(r);Re(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:gv(DS(i.auth_time)),issuedAtTime:gv(DS(i.iat)),expirationTime:gv(DS(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function DS(t){return Number(t)*1e3}function aR(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return lb("JWT malformed, contained fewer than 3 sections"),null;try{const i=BU(n);return i?JSON.parse(i):(lb("Failed to decode base64 JWT payload"),null)}catch(i){return lb("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function XM(t){const e=aR(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wv(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof da&&wX(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wX({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _X{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gv(this.lastLoginAt),this.creationTime=gv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ix(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Wv(t,rB(n,{idToken:r}));Re(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?iB(s.providerUserInfo):[],o=xX(t.providerData,a),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new EP(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function bX(t){const e=mt(t);await Ix(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xX(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iB(t){return t.map(e=>{var{providerId:n}=e,r=rR(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AX(t,e){const n=await tB(t,{},async()=>{const r=X0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=nB(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",eB.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function EX(t,e){return hu(t,"POST","/v2/accounts:revokeToken",Dd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=XM(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await AX(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Bf;return r&&(Re(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Re(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Re(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bf,this.toJSON())}_performRefresh(){return Go("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=rR(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _X(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new EP(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Wv(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yX(this,e)}reload(){return bX(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ix(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wo(this.auth.app))return Promise.reject(Hc(this.auth));const e=await this.getIdToken();return await Wv(this,vX(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,o,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(a=n.photoURL)!==null&&a!==void 0?a:void 0,v=(o=n.tenantId)!==null&&o!==void 0?o:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,b=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:A,emailVerified:I,isAnonymous:k,providerData:M,stsTokenManager:P}=n;Re(A&&P,e,"internal-error");const C=Bf.fromJSON(this.name,P);Re(typeof A=="string",e,"internal-error"),Ll(h,e.name),Ll(f,e.name),Re(typeof I=="boolean",e,"internal-error"),Re(typeof k=="boolean",e,"internal-error"),Ll(m,e.name),Ll(g,e.name),Ll(v,e.name),Ll(y,e.name),Ll(w,e.name),Ll(b,e.name);const O=new qo({uid:A,auth:e,email:f,emailVerified:I,displayName:h,isAnonymous:k,photoURL:g,phoneNumber:m,tenantId:v,stsTokenManager:C,createdAt:w,lastLoginAt:b});return M&&Array.isArray(M)&&(O.providerData=M.map(j=>Object.assign({},j))),y&&(O._redirectEventId=y),O}static async _fromIdTokenResponse(e,n,r=!1){const i=new Bf;i.updateFromServerResponse(n);const s=new qo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ix(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Re(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?iB(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Bf;o.updateFromIdToken(r);const l=new qo({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new EP(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=new Map;function Ko(t){cl(t instanceof Function,"Expected a class definition");let e=YM.get(t);return e?(cl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,YM.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sB.type="NONE";const QM=sB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t,e,n){return`firebase:${t}:${e}:${n}`}class $f{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=cb(this.userKey,i.apiKey,s),this.fullPersistenceKey=cb("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $f(Ko(QM),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ko(QM);const a=cb(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const u=await c._get(a);if(u){const h=qo._fromJSON(e,u);c!==s&&(o=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new $f(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new $f(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cB(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hB(e))return"Blackberry";if(dB(e))return"Webos";if(oB(e))return"Safari";if((e.includes("chrome/")||lB(e))&&!e.includes("edge/"))return"Chrome";if(uB(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aB(t=Dr()){return/firefox\//i.test(t)}function oB(t=Dr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lB(t=Dr()){return/crios\//i.test(t)}function cB(t=Dr()){return/iemobile/i.test(t)}function uB(t=Dr()){return/android/i.test(t)}function hB(t=Dr()){return/blackberry/i.test(t)}function dB(t=Dr()){return/webos/i.test(t)}function oR(t=Dr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SX(t=Dr()){var e;return oR(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TX(){return UK()&&document.documentMode===10}function fB(t=Dr()){return oR(t)||uB(t)||dB(t)||hB(t)||/windows phone/i.test(t)||cB(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pB(t,e=[]){let n;switch(t){case"Browser":n=JM(Dr());break;case"Worker":n=`${JM(Dr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Od}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PX{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IX(t,e={}){return hu(t,"GET","/v2/passwordPolicy",Dd(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CX=6;class kX{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:CX,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RX{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ZM(this),this.idTokenSubscription=new ZM(this),this.beforeStateQueue=new PX(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JU,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ko(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await $f.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rB(this,{idToken:e}),r=await qo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Wo(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ix(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uX()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wo(this.app))return Promise.reject(Hc(this));const n=e?mt(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wo(this.app)?Promise.reject(Hc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wo(this.app)?Promise.reject(Hc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ko(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IX(this),n=new kX(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new K0("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await EX(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ko(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await $f.create(this,[Ko(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&oX(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Pm(t){return mt(t)}class ZM{constructor(e){this.auth=e,this.observer=null,this.addObserver=KK(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NX(t){AE=t}function mB(t){return AE.loadJS(t)}function OX(){return AE.recaptchaEnterpriseScript}function DX(){return AE.gapiScript}function MX(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const LX="recaptcha-enterprise",jX="NO_RECAPTCHA";class FX{constructor(e){this.type=LX,this.auth=Pm(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{gX(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new mX(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;KM(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(jX)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(o=>{if(!n&&KM(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=OX();l.length!==0&&(l+=o),mB(l).then(()=>{i(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function e2(t,e,n,r=!1){const i=new FX(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function t2(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await e2(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await e2(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VX(t,e){const n=Y0(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Sx(s,e??{}))return i;aa(i,"already-initialized")}return n.initialize({options:e})}function UX(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ko);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function BX(t,e,n){const r=Pm(t);Re(r._canInitEmulator,r,"emulator-config-failed"),Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=gB(e),{host:a,port:o}=$X(e),l=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),zX()}function gB(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $X(t){const e=gB(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:n2(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:n2(a)}}}function n2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zX(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Go("not implemented")}_getIdTokenResponse(e){return Go("not implemented")}_linkToIdToken(e,n){return Go("not implemented")}_getReauthenticationResolver(e){return Go("not implemented")}}async function HX(t,e){return hu(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WX(t,e){return xE(t,"POST","/v1/accounts:signInWithPassword",Dd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GX(t,e){return xE(t,"POST","/v1/accounts:signInWithEmailLink",Dd(t,e))}async function qX(t,e){return xE(t,"POST","/v1/accounts:signInWithEmailLink",Dd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv extends lR{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Gv(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Gv(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return t2(e,n,"signInWithPassword",WX);case"emailLink":return GX(e,{email:this._email,oobCode:this._password});default:aa(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return t2(e,r,"signUpPassword",HX);case"emailLink":return qX(e,{idToken:n,email:this._email,oobCode:this._password});default:aa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zf(t,e){return xE(t,"POST","/v1/accounts:signInWithIdp",Dd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KX="http://localhost";class vd extends lR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):aa("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=rR(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new vd(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return zf(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zf(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zf(e,n)}buildRequest(){const e={requestUri:KX,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=X0(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XX(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YX(t){const e=jg(Fg(t)).link,n=e?jg(Fg(e)).deep_link_id:null,r=jg(Fg(t)).deep_link_id;return(r?jg(Fg(r)).link:null)||r||n||e||t}class cR{constructor(e){var n,r,i,s,a,o;const l=jg(Fg(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=XX((i=l.mode)!==null&&i!==void 0?i:null);Re(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=YX(e);try{return new cR(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this.providerId=Im.PROVIDER_ID}static credential(e,n){return Gv._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=cR.parseLink(n);return Re(r,"argument-error"),Gv._fromEmailAndCode(e,r.code,r.tenantId)}}Im.PROVIDER_ID="password";Im.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Im.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0 extends vB{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends J0{constructor(){super("facebook.com")}static credential(e){return vd._fromParams({providerId:Gl.PROVIDER_ID,signInMethod:Gl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gl.credentialFromTaggedObject(e)}static credentialFromError(e){return Gl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gl.credential(e.oauthAccessToken)}catch{return null}}}Gl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends J0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vd._fromParams({providerId:ql.PROVIDER_ID,signInMethod:ql.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ql.credentialFromTaggedObject(e)}static credentialFromError(e){return ql.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ql.credential(n,r)}catch{return null}}}ql.GOOGLE_SIGN_IN_METHOD="google.com";ql.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends J0{constructor(){super("github.com")}static credential(e){return vd._fromParams({providerId:Kl.PROVIDER_ID,signInMethod:Kl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kl.credentialFromTaggedObject(e)}static credentialFromError(e){return Kl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kl.credential(e.oauthAccessToken)}catch{return null}}}Kl.GITHUB_SIGN_IN_METHOD="github.com";Kl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends J0{constructor(){super("twitter.com")}static credential(e,n){return vd._fromParams({providerId:Xl.PROVIDER_ID,signInMethod:Xl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xl.credentialFromTaggedObject(e)}static credentialFromError(e){return Xl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Xl.credential(n,r)}catch{return null}}}Xl.TWITTER_SIGN_IN_METHOD="twitter.com";Xl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await qo._fromIdTokenResponse(e,r,i),a=r2(r);return new lm({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=r2(r);return new lm({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function r2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx extends da{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Cx.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Cx(e,n,r,i)}}function yB(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Cx._fromErrorAndOperation(t,s,e,r):s})}async function QX(t,e,n=!1){const r=await Wv(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return lm._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JX(t,e,n=!1){const{auth:r}=t;if(Wo(r.app))return Promise.reject(Hc(r));const i="reauthenticate";try{const s=await Wv(t,yB(r,i,e,t),n);Re(s.idToken,r,"internal-error");const a=aR(s.idToken);Re(a,r,"internal-error");const{sub:o}=a;return Re(t.uid===o,r,"user-mismatch"),lm._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&aa(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wB(t,e,n=!1){if(Wo(t.app))return Promise.reject(Hc(t));const r="signIn",i=await yB(t,r,e),s=await lm._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function ZX(t,e){return wB(Pm(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eY(t){const e=Pm(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function SP(t,e,n){return Wo(t.app)?Promise.reject(Hc(t)):ZX(mt(t),Im.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&eY(t),r})}function tY(t,e,n,r){return mt(t).onIdTokenChanged(e,n,r)}function nY(t,e,n){return mt(t).beforeAuthStateChanged(e,n)}function rY(t,e,n,r){return mt(t).onAuthStateChanged(e,n,r)}function _B(t){return mt(t).signOut()}const kx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kx,"1"),this.storage.removeItem(kx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iY=1e3,sY=10;class xB extends bB{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);TX()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,sY):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},iY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xB.type="LOCAL";const aY=xB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB extends bB{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}AB.type="SESSION";const EB=AB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oY(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new EE(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async c=>c(n.origin,s)),l=await oY(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}EE.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=uR("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(){return window}function cY(t){Wa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(){return typeof Wa().WorkerGlobalScope<"u"&&typeof Wa().importScripts=="function"}async function uY(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hY(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dY(){return SB()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB="firebaseLocalStorageDb",fY=1,Rx="firebaseLocalStorage",PB="fbase_key";class Z0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function SE(t,e){return t.transaction([Rx],e?"readwrite":"readonly").objectStore(Rx)}function pY(){const t=indexedDB.deleteDatabase(TB);return new Z0(t).toPromise()}function TP(){const t=indexedDB.open(TB,fY);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Rx,{keyPath:PB})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Rx)?e(r):(r.close(),await pY(),e(await TP()))})})}async function i2(t,e,n){const r=SE(t,!0).put({[PB]:e,value:n});return new Z0(r).toPromise()}async function mY(t,e){const n=SE(t,!1).get(e),r=await new Z0(n).toPromise();return r===void 0?null:r.value}function s2(t,e){const n=SE(t,!0).delete(e);return new Z0(n).toPromise()}const gY=800,vY=3;class IB{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await TP(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vY)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SB()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=EE._getInstance(dY()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await uY(),!this.activeServiceWorker)return;this.sender=new lY(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await TP();return await i2(e,kx,"1"),await s2(e,kx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>i2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>mY(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>s2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=SE(i,!1).getAll();return new Z0(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IB.type="LOCAL";const yY=IB;new Q0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wY(t,e){return e?Ko(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR extends lR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zf(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zf(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zf(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _Y(t){return wB(t.auth,new hR(t),t.bypassAuthState)}function bY(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),JX(n,new hR(t),t.bypassAuthState)}async function xY(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),QX(n,new hR(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _Y;case"linkViaPopup":case"linkViaRedirect":return xY;case"reauthViaPopup":case"reauthViaRedirect":return bY;default:aa(this.auth,"internal-error")}}resolve(e){cl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AY=new Q0(2e3,1e4);class If extends CB{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,If.currentPopupAction&&If.currentPopupAction.cancel(),If.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){cl(this.filter.length===1,"Popup operations only handle one event");const e=uR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ha(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ha(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,If.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ha(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AY.get())};e()}}If.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EY="pendingRedirect",ub=new Map;class SY extends CB{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ub.get(this.auth._key());if(!e){try{const r=await TY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ub.set(this.auth._key(),e)}return this.bypassAuthState||ub.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TY(t,e){const n=CY(e),r=IY(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function PY(t,e){ub.set(t._key(),e)}function IY(t){return Ko(t._redirectPersistence)}function CY(t){return cb(EY,t.config.apiKey,t.name)}async function kY(t,e,n=!1){if(Wo(t.app))return Promise.reject(Hc(t));const r=Pm(t),i=wY(r,e),a=await new SY(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RY=10*60*1e3;class NY{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OY(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!kB(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ha(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RY&&this.cachedEventUids.clear(),this.cachedEventUids.has(a2(e))}saveEventToCache(e){this.cachedEventUids.add(a2(e)),this.lastProcessedEventTime=Date.now()}}function a2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kB({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function OY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kB(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DY(t,e={}){return hu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LY=/^https?/;async function jY(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DY(t);for(const n of e)try{if(FY(n))return}catch{}aa(t,"unauthorized-domain")}function FY(t){const e=AP(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!LY.test(n))return!1;if(MY.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VY=new Q0(3e4,6e4);function o2(){const t=Wa().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function UY(t){return new Promise((e,n)=>{var r,i,s;function a(){o2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{o2(),n(Ha(t,"network-request-failed"))},timeout:VY.get()})}if(!((i=(r=Wa().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Wa().gapi)===null||s===void 0)&&s.load)a();else{const o=MX("iframefcb");return Wa()[o]=()=>{gapi.load?a():n(Ha(t,"network-request-failed"))},mB(`${DX()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw hb=null,e})}let hb=null;function BY(t){return hb=hb||UY(t),hb}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Y=new Q0(5e3,15e3),zY="__/auth/iframe",HY="emulator/auth/iframe",WY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qY(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?sR(e,HY):`https://${t.config.authDomain}/${zY}`,r={apiKey:e.apiKey,appName:t.name,v:Od},i=GY.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${X0(r).slice(1)}`}async function KY(t){const e=await BY(t),n=Wa().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:qY(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WY,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Ha(t,"network-request-failed"),o=Wa().setTimeout(()=>{s(a)},$Y.get());function l(){Wa().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YY=500,QY=600,JY="_blank",ZY="http://localhost";class l2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eQ(t,e,n,r=YY,i=QY){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},XY),{width:r.toString(),height:i.toString(),top:s,left:a}),c=Dr().toLowerCase();n&&(o=lB(c)?JY:n),aB(c)&&(e=e||ZY,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[m,g])=>`${f}${m}=${g},`,"");if(SX(c)&&o!=="_self")return tQ(e||"",o),new l2(null);const h=window.open(e||"",o,u);Re(h,t,"popup-blocked");try{h.focus()}catch{}return new l2(h)}function tQ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nQ="__/auth/handler",rQ="emulator/auth/handler",iQ=encodeURIComponent("fac");async function c2(t,e,n,r,i,s){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Od,eventId:i};if(e instanceof vB){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",qK(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))a[u]=h}if(e instanceof J0){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),c=l?`#${iQ}=${encodeURIComponent(l)}`:"";return`${sQ(t)}?${X0(o).slice(1)}${c}`}function sQ({config:t}){return t.emulator?sR(t,rQ):`https://${t.authDomain}/${nQ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="webStorageSupport";class aQ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EB,this._completeRedirectFn=kY,this._overrideRedirectResult=PY}async _openPopup(e,n,r,i){var s;cl((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await c2(e,n,r,AP(),i);return eQ(e,a,uR())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await c2(e,n,r,AP(),i);return cY(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(cl(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await KY(e),r=new NY(e);return n.register("authEvent",i=>(Re(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(MS,{type:MS},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[MS];a!==void 0&&n(!!a),aa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=jY(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fB()||oB()||oR()}}const oQ=aQ;var u2="@firebase/auth",h2="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cQ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uQ(t){Yc(new ol("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Re(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pB(t)},c=new RX(r,i,s,l);return UX(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Yc(new ol("auth-internal",e=>{const n=Pm(e.getProvider("auth").getImmediate());return(r=>new lQ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),As(u2,h2,cQ(t)),As(u2,h2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hQ=5*60,dQ=HU("authIdTokenMaxAge")||hQ;let d2=null;const fQ=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>dQ)return;const i=n==null?void 0:n.token;d2!==i&&(d2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pQ(t=bE()){const e=Y0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=VX(t,{popupRedirectResolver:oQ,persistence:[yY,aY,EB]}),r=HU("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=fQ(s.toString());nY(n,a,()=>a(n.currentUser)),tY(n,o=>a(o))}}const i=$U("auth");return i&&BX(n,`http://${i}`),n}function mQ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NX({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ha("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",mQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uQ("Browser");var f2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sd,RB;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,C){function O(){}O.prototype=C.prototype,P.D=C.prototype,P.prototype=new O,P.prototype.constructor=P,P.C=function(j,D,F){for(var V=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)V[Y-2]=arguments[Y];return C.prototype[D].apply(j,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,C,O){O||(O=0);var j=Array(16);if(typeof C=="string")for(var D=0;16>D;++D)j[D]=C.charCodeAt(O++)|C.charCodeAt(O++)<<8|C.charCodeAt(O++)<<16|C.charCodeAt(O++)<<24;else for(D=0;16>D;++D)j[D]=C[O++]|C[O++]<<8|C[O++]<<16|C[O++]<<24;C=P.g[0],O=P.g[1],D=P.g[2];var F=P.g[3],V=C+(F^O&(D^F))+j[0]+3614090360&4294967295;C=O+(V<<7&4294967295|V>>>25),V=F+(D^C&(O^D))+j[1]+3905402710&4294967295,F=C+(V<<12&4294967295|V>>>20),V=D+(O^F&(C^O))+j[2]+606105819&4294967295,D=F+(V<<17&4294967295|V>>>15),V=O+(C^D&(F^C))+j[3]+3250441966&4294967295,O=D+(V<<22&4294967295|V>>>10),V=C+(F^O&(D^F))+j[4]+4118548399&4294967295,C=O+(V<<7&4294967295|V>>>25),V=F+(D^C&(O^D))+j[5]+1200080426&4294967295,F=C+(V<<12&4294967295|V>>>20),V=D+(O^F&(C^O))+j[6]+2821735955&4294967295,D=F+(V<<17&4294967295|V>>>15),V=O+(C^D&(F^C))+j[7]+4249261313&4294967295,O=D+(V<<22&4294967295|V>>>10),V=C+(F^O&(D^F))+j[8]+1770035416&4294967295,C=O+(V<<7&4294967295|V>>>25),V=F+(D^C&(O^D))+j[9]+2336552879&4294967295,F=C+(V<<12&4294967295|V>>>20),V=D+(O^F&(C^O))+j[10]+4294925233&4294967295,D=F+(V<<17&4294967295|V>>>15),V=O+(C^D&(F^C))+j[11]+2304563134&4294967295,O=D+(V<<22&4294967295|V>>>10),V=C+(F^O&(D^F))+j[12]+1804603682&4294967295,C=O+(V<<7&4294967295|V>>>25),V=F+(D^C&(O^D))+j[13]+4254626195&4294967295,F=C+(V<<12&4294967295|V>>>20),V=D+(O^F&(C^O))+j[14]+2792965006&4294967295,D=F+(V<<17&4294967295|V>>>15),V=O+(C^D&(F^C))+j[15]+1236535329&4294967295,O=D+(V<<22&4294967295|V>>>10),V=C+(D^F&(O^D))+j[1]+4129170786&4294967295,C=O+(V<<5&4294967295|V>>>27),V=F+(O^D&(C^O))+j[6]+3225465664&4294967295,F=C+(V<<9&4294967295|V>>>23),V=D+(C^O&(F^C))+j[11]+643717713&4294967295,D=F+(V<<14&4294967295|V>>>18),V=O+(F^C&(D^F))+j[0]+3921069994&4294967295,O=D+(V<<20&4294967295|V>>>12),V=C+(D^F&(O^D))+j[5]+3593408605&4294967295,C=O+(V<<5&4294967295|V>>>27),V=F+(O^D&(C^O))+j[10]+38016083&4294967295,F=C+(V<<9&4294967295|V>>>23),V=D+(C^O&(F^C))+j[15]+3634488961&4294967295,D=F+(V<<14&4294967295|V>>>18),V=O+(F^C&(D^F))+j[4]+3889429448&4294967295,O=D+(V<<20&4294967295|V>>>12),V=C+(D^F&(O^D))+j[9]+568446438&4294967295,C=O+(V<<5&4294967295|V>>>27),V=F+(O^D&(C^O))+j[14]+3275163606&4294967295,F=C+(V<<9&4294967295|V>>>23),V=D+(C^O&(F^C))+j[3]+4107603335&4294967295,D=F+(V<<14&4294967295|V>>>18),V=O+(F^C&(D^F))+j[8]+1163531501&4294967295,O=D+(V<<20&4294967295|V>>>12),V=C+(D^F&(O^D))+j[13]+2850285829&4294967295,C=O+(V<<5&4294967295|V>>>27),V=F+(O^D&(C^O))+j[2]+4243563512&4294967295,F=C+(V<<9&4294967295|V>>>23),V=D+(C^O&(F^C))+j[7]+1735328473&4294967295,D=F+(V<<14&4294967295|V>>>18),V=O+(F^C&(D^F))+j[12]+2368359562&4294967295,O=D+(V<<20&4294967295|V>>>12),V=C+(O^D^F)+j[5]+4294588738&4294967295,C=O+(V<<4&4294967295|V>>>28),V=F+(C^O^D)+j[8]+2272392833&4294967295,F=C+(V<<11&4294967295|V>>>21),V=D+(F^C^O)+j[11]+1839030562&4294967295,D=F+(V<<16&4294967295|V>>>16),V=O+(D^F^C)+j[14]+4259657740&4294967295,O=D+(V<<23&4294967295|V>>>9),V=C+(O^D^F)+j[1]+2763975236&4294967295,C=O+(V<<4&4294967295|V>>>28),V=F+(C^O^D)+j[4]+1272893353&4294967295,F=C+(V<<11&4294967295|V>>>21),V=D+(F^C^O)+j[7]+4139469664&4294967295,D=F+(V<<16&4294967295|V>>>16),V=O+(D^F^C)+j[10]+3200236656&4294967295,O=D+(V<<23&4294967295|V>>>9),V=C+(O^D^F)+j[13]+681279174&4294967295,C=O+(V<<4&4294967295|V>>>28),V=F+(C^O^D)+j[0]+3936430074&4294967295,F=C+(V<<11&4294967295|V>>>21),V=D+(F^C^O)+j[3]+3572445317&4294967295,D=F+(V<<16&4294967295|V>>>16),V=O+(D^F^C)+j[6]+76029189&4294967295,O=D+(V<<23&4294967295|V>>>9),V=C+(O^D^F)+j[9]+3654602809&4294967295,C=O+(V<<4&4294967295|V>>>28),V=F+(C^O^D)+j[12]+3873151461&4294967295,F=C+(V<<11&4294967295|V>>>21),V=D+(F^C^O)+j[15]+530742520&4294967295,D=F+(V<<16&4294967295|V>>>16),V=O+(D^F^C)+j[2]+3299628645&4294967295,O=D+(V<<23&4294967295|V>>>9),V=C+(D^(O|~F))+j[0]+4096336452&4294967295,C=O+(V<<6&4294967295|V>>>26),V=F+(O^(C|~D))+j[7]+1126891415&4294967295,F=C+(V<<10&4294967295|V>>>22),V=D+(C^(F|~O))+j[14]+2878612391&4294967295,D=F+(V<<15&4294967295|V>>>17),V=O+(F^(D|~C))+j[5]+4237533241&4294967295,O=D+(V<<21&4294967295|V>>>11),V=C+(D^(O|~F))+j[12]+1700485571&4294967295,C=O+(V<<6&4294967295|V>>>26),V=F+(O^(C|~D))+j[3]+2399980690&4294967295,F=C+(V<<10&4294967295|V>>>22),V=D+(C^(F|~O))+j[10]+4293915773&4294967295,D=F+(V<<15&4294967295|V>>>17),V=O+(F^(D|~C))+j[1]+2240044497&4294967295,O=D+(V<<21&4294967295|V>>>11),V=C+(D^(O|~F))+j[8]+1873313359&4294967295,C=O+(V<<6&4294967295|V>>>26),V=F+(O^(C|~D))+j[15]+4264355552&4294967295,F=C+(V<<10&4294967295|V>>>22),V=D+(C^(F|~O))+j[6]+2734768916&4294967295,D=F+(V<<15&4294967295|V>>>17),V=O+(F^(D|~C))+j[13]+1309151649&4294967295,O=D+(V<<21&4294967295|V>>>11),V=C+(D^(O|~F))+j[4]+4149444226&4294967295,C=O+(V<<6&4294967295|V>>>26),V=F+(O^(C|~D))+j[11]+3174756917&4294967295,F=C+(V<<10&4294967295|V>>>22),V=D+(C^(F|~O))+j[2]+718787259&4294967295,D=F+(V<<15&4294967295|V>>>17),V=O+(F^(D|~C))+j[9]+3951481745&4294967295,P.g[0]=P.g[0]+C&4294967295,P.g[1]=P.g[1]+(D+(V<<21&4294967295|V>>>11))&4294967295,P.g[2]=P.g[2]+D&4294967295,P.g[3]=P.g[3]+F&4294967295}r.prototype.u=function(P,C){C===void 0&&(C=P.length);for(var O=C-this.blockSize,j=this.B,D=this.h,F=0;F<C;){if(D==0)for(;F<=O;)i(this,P,F),F+=this.blockSize;if(typeof P=="string"){for(;F<C;)if(j[D++]=P.charCodeAt(F++),D==this.blockSize){i(this,j),D=0;break}}else for(;F<C;)if(j[D++]=P[F++],D==this.blockSize){i(this,j),D=0;break}}this.h=D,this.o+=C},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var C=1;C<P.length-8;++C)P[C]=0;var O=8*this.o;for(C=P.length-8;C<P.length;++C)P[C]=O&255,O/=256;for(this.u(P),P=Array(16),C=O=0;4>C;++C)for(var j=0;32>j;j+=8)P[O++]=this.g[C]>>>j&255;return P};function s(P,C){var O=o;return Object.prototype.hasOwnProperty.call(O,P)?O[P]:O[P]=C(P)}function a(P,C){this.h=C;for(var O=[],j=!0,D=P.length-1;0<=D;D--){var F=P[D]|0;j&&F==C||(O[D]=F,j=!1)}this.g=O}var o={};function l(P){return-128<=P&&128>P?s(P,function(C){return new a([C|0],0>C?-1:0)}):new a([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return h;if(0>P)return y(c(-P));for(var C=[],O=1,j=0;P>=O;j++)C[j]=P/O|0,O*=4294967296;return new a(C,0)}function u(P,C){if(P.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(P.charAt(0)=="-")return y(u(P.substring(1),C));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=c(Math.pow(C,8)),j=h,D=0;D<P.length;D+=8){var F=Math.min(8,P.length-D),V=parseInt(P.substring(D,D+F),C);8>F?(F=c(Math.pow(C,F)),j=j.j(F).add(c(V))):(j=j.j(O),j=j.add(c(V)))}return j}var h=l(0),f=l(1),m=l(16777216);t=a.prototype,t.m=function(){if(v(this))return-y(this).m();for(var P=0,C=1,O=0;O<this.g.length;O++){var j=this.i(O);P+=(0<=j?j:4294967296+j)*C,C*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(g(this))return"0";if(v(this))return"-"+y(this).toString(P);for(var C=c(Math.pow(P,6)),O=this,j="";;){var D=I(O,C).g;O=w(O,D.j(C));var F=((0<O.g.length?O.g[0]:O.h)>>>0).toString(P);if(O=D,g(O))return F+j;for(;6>F.length;)F="0"+F;j=F+j}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function g(P){if(P.h!=0)return!1;for(var C=0;C<P.g.length;C++)if(P.g[C]!=0)return!1;return!0}function v(P){return P.h==-1}t.l=function(P){return P=w(this,P),v(P)?-1:g(P)?0:1};function y(P){for(var C=P.g.length,O=[],j=0;j<C;j++)O[j]=~P.g[j];return new a(O,~P.h).add(f)}t.abs=function(){return v(this)?y(this):this},t.add=function(P){for(var C=Math.max(this.g.length,P.g.length),O=[],j=0,D=0;D<=C;D++){var F=j+(this.i(D)&65535)+(P.i(D)&65535),V=(F>>>16)+(this.i(D)>>>16)+(P.i(D)>>>16);j=V>>>16,F&=65535,V&=65535,O[D]=V<<16|F}return new a(O,O[O.length-1]&-2147483648?-1:0)};function w(P,C){return P.add(y(C))}t.j=function(P){if(g(this)||g(P))return h;if(v(this))return v(P)?y(this).j(y(P)):y(y(this).j(P));if(v(P))return y(this.j(y(P)));if(0>this.l(m)&&0>P.l(m))return c(this.m()*P.m());for(var C=this.g.length+P.g.length,O=[],j=0;j<2*C;j++)O[j]=0;for(j=0;j<this.g.length;j++)for(var D=0;D<P.g.length;D++){var F=this.i(j)>>>16,V=this.i(j)&65535,Y=P.i(D)>>>16,re=P.i(D)&65535;O[2*j+2*D]+=V*re,b(O,2*j+2*D),O[2*j+2*D+1]+=F*re,b(O,2*j+2*D+1),O[2*j+2*D+1]+=V*Y,b(O,2*j+2*D+1),O[2*j+2*D+2]+=F*Y,b(O,2*j+2*D+2)}for(j=0;j<C;j++)O[j]=O[2*j+1]<<16|O[2*j];for(j=C;j<2*C;j++)O[j]=0;return new a(O,0)};function b(P,C){for(;(P[C]&65535)!=P[C];)P[C+1]+=P[C]>>>16,P[C]&=65535,C++}function A(P,C){this.g=P,this.h=C}function I(P,C){if(g(C))throw Error("division by zero");if(g(P))return new A(h,h);if(v(P))return C=I(y(P),C),new A(y(C.g),y(C.h));if(v(C))return C=I(P,y(C)),new A(y(C.g),C.h);if(30<P.g.length){if(v(P)||v(C))throw Error("slowDivide_ only works with positive integers.");for(var O=f,j=C;0>=j.l(P);)O=k(O),j=k(j);var D=M(O,1),F=M(j,1);for(j=M(j,2),O=M(O,2);!g(j);){var V=F.add(j);0>=V.l(P)&&(D=D.add(O),F=V),j=M(j,1),O=M(O,1)}return C=w(P,D.j(C)),new A(D,C)}for(D=h;0<=P.l(C);){for(O=Math.max(1,Math.floor(P.m()/C.m())),j=Math.ceil(Math.log(O)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),F=c(O),V=F.j(C);v(V)||0<V.l(P);)O-=j,F=c(O),V=F.j(C);g(F)&&(F=f),D=D.add(F),P=w(P,V)}return new A(D,P)}t.A=function(P){return I(this,P).h},t.and=function(P){for(var C=Math.max(this.g.length,P.g.length),O=[],j=0;j<C;j++)O[j]=this.i(j)&P.i(j);return new a(O,this.h&P.h)},t.or=function(P){for(var C=Math.max(this.g.length,P.g.length),O=[],j=0;j<C;j++)O[j]=this.i(j)|P.i(j);return new a(O,this.h|P.h)},t.xor=function(P){for(var C=Math.max(this.g.length,P.g.length),O=[],j=0;j<C;j++)O[j]=this.i(j)^P.i(j);return new a(O,this.h^P.h)};function k(P){for(var C=P.g.length+1,O=[],j=0;j<C;j++)O[j]=P.i(j)<<1|P.i(j-1)>>>31;return new a(O,P.h)}function M(P,C){var O=C>>5;C%=32;for(var j=P.g.length-O,D=[],F=0;F<j;F++)D[F]=0<C?P.i(F+O)>>>C|P.i(F+O+1)<<32-C:P.i(F+O);return new a(D,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,RB=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,sd=a}).apply(typeof f2<"u"?f2:typeof self<"u"?self:typeof window<"u"?window:{});var x_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NB,Vg,OB,db,PP,DB,MB,LB;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,x,T){return p==Array.prototype||p==Object.prototype||(p[x]=T.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof x_=="object"&&x_];for(var x=0;x<p.length;++x){var T=p[x];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function i(p,x){if(x)e:{var T=r;p=p.split(".");for(var L=0;L<p.length-1;L++){var B=p[L];if(!(B in T))break e;T=T[B]}p=p[p.length-1],L=T[p],x=x(L),x!=L&&x!=null&&e(T,p,{configurable:!0,writable:!0,value:x})}}function s(p,x){p instanceof String&&(p+="");var T=0,L=!1,B={next:function(){if(!L&&T<p.length){var $=T++;return{value:x($,p[$]),done:!1}}return L=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}i("Array.prototype.values",function(p){return p||function(){return s(this,function(x,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(p){var x=typeof p;return x=x!="object"?x:p?Array.isArray(p)?"array":x:"null",x=="array"||x=="object"&&typeof p.length=="number"}function c(p){var x=typeof p;return x=="object"&&p!=null||x=="function"}function u(p,x,T){return p.call.apply(p.bind,arguments)}function h(p,x,T){if(!p)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,L),p.apply(x,B)}}return function(){return p.apply(x,arguments)}}function f(p,x,T){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function m(p,x){var T=Array.prototype.slice.call(arguments,1);return function(){var L=T.slice();return L.push.apply(L,arguments),p.apply(this,L)}}function g(p,x){function T(){}T.prototype=x.prototype,p.aa=x.prototype,p.prototype=new T,p.prototype.constructor=p,p.Qb=function(L,B,$){for(var se=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)se[_t-2]=arguments[_t];return x.prototype[B].apply(L,se)}}function v(p){const x=p.length;if(0<x){const T=Array(x);for(let L=0;L<x;L++)T[L]=p[L];return T}return[]}function y(p,x){for(let T=1;T<arguments.length;T++){const L=arguments[T];if(l(L)){const B=p.length||0,$=L.length||0;p.length=B+$;for(let se=0;se<$;se++)p[B+se]=L[se]}else p.push(L)}}class w{constructor(x,T){this.i=x,this.j=T,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function b(p){return/^[\s\xa0]*$/.test(p)}function A(){var p=o.navigator;return p&&(p=p.userAgent)?p:""}function I(p){return I[" "](p),p}I[" "]=function(){};var k=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function M(p,x,T){for(const L in p)x.call(T,p[L],L,p)}function P(p,x){for(const T in p)x.call(void 0,p[T],T,p)}function C(p){const x={};for(const T in p)x[T]=p[T];return x}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(p,x){let T,L;for(let B=1;B<arguments.length;B++){L=arguments[B];for(T in L)p[T]=L[T];for(let $=0;$<O.length;$++)T=O[$],Object.prototype.hasOwnProperty.call(L,T)&&(p[T]=L[T])}}function D(p){var x=1;p=p.split(":");const T=[];for(;0<x&&p.length;)T.push(p.shift()),x--;return p.length&&T.push(p.join(":")),T}function F(p){o.setTimeout(()=>{throw p},0)}function V(){var p=X;let x=null;return p.g&&(x=p.g,p.g=p.g.next,p.g||(p.h=null),x.next=null),x}class Y{constructor(){this.h=this.g=null}add(x,T){const L=re.get();L.set(x,T),this.h?this.h.next=L:this.g=L,this.h=L}}var re=new w(()=>new K,p=>p.reset());class K{constructor(){this.next=this.g=this.h=null}set(x,T){this.h=x,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let q,H=!1,X=new Y,te=()=>{const p=o.Promise.resolve(void 0);q=()=>{p.then(ce)}};var ce=()=>{for(var p;p=V();){try{p.h.call(p.g)}catch(T){F(T)}var x=re;x.j(p),100>x.h&&(x.h++,p.next=x.g,x.g=p)}H=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(p,x){this.type=p,this.g=this.target=x,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Ue=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var p=!1,x=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const T=()=>{};o.addEventListener("test",T,x),o.removeEventListener("test",T,x)}catch{}return p}();function et(p,x){if(ve.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var T=this.type=p.type,L=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=x,x=p.relatedTarget){if(k){e:{try{I(x.nodeName);var B=!0;break e}catch{}B=!1}B||(x=null)}}else T=="mouseover"?x=p.fromElement:T=="mouseout"&&(x=p.toElement);this.relatedTarget=x,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Ye[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&et.aa.h.call(this)}}g(et,ve);var Ye={2:"touch",3:"pen",4:"mouse"};et.prototype.h=function(){et.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),qn=0;function Q(p,x,T,L,B){this.listener=p,this.proxy=null,this.src=x,this.type=T,this.capture=!!L,this.ha=B,this.key=++qn,this.da=this.fa=!1}function ne(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function J(p){this.src=p,this.g={},this.h=0}J.prototype.add=function(p,x,T,L,B){var $=p.toString();p=this.g[$],p||(p=this.g[$]=[],this.h++);var se=Ee(p,x,L,B);return-1<se?(x=p[se],T||(x.fa=!1)):(x=new Q(x,this.src,$,!!L,B),x.fa=T,p.push(x)),x};function W(p,x){var T=x.type;if(T in p.g){var L=p.g[T],B=Array.prototype.indexOf.call(L,x,void 0),$;($=0<=B)&&Array.prototype.splice.call(L,B,1),$&&(ne(x),p.g[T].length==0&&(delete p.g[T],p.h--))}}function Ee(p,x,T,L){for(var B=0;B<p.length;++B){var $=p[B];if(!$.da&&$.listener==x&&$.capture==!!T&&$.ha==L)return B}return-1}var le="closure_lm_"+(1e6*Math.random()|0),Ce={};function ct(p,x,T,L,B){if(Array.isArray(x)){for(var $=0;$<x.length;$++)ct(p,x[$],T,L,B);return null}return T=Bd(T),p&&p[me]?p.K(x,T,c(L)?!!L.capture:!1,B):tt(p,x,T,!1,L,B)}function tt(p,x,T,L,B,$){if(!x)throw Error("Invalid event type");var se=c(B)?!!B.capture:!!B,_t=Bm(p);if(_t||(p[le]=_t=new J(p)),T=_t.add(x,T,L,se,$),T.proxy)return T;if(L=Mr(),T.proxy=L,L.src=p,L.listener=T,p.addEventListener)Ue||(B=se),B===void 0&&(B=!1),p.addEventListener(x.toString(),L,B);else if(p.attachEvent)p.attachEvent(B1(x.toString()),L);else if(p.addListener&&p.removeListener)p.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Mr(){function p(T){return x.call(p.src,p.listener,T)}const x=tD;return p}function Tl(p,x,T,L,B){if(Array.isArray(x))for(var $=0;$<x.length;$++)Tl(p,x[$],T,L,B);else L=c(L)?!!L.capture:!!L,T=Bd(T),p&&p[me]?(p=p.i,x=String(x).toString(),x in p.g&&($=p.g[x],T=Ee($,T,L,B),-1<T&&(ne($[T]),Array.prototype.splice.call($,T,1),$.length==0&&(delete p.g[x],p.h--)))):p&&(p=Bm(p))&&(x=p.g[x.toString()],p=-1,x&&(p=Ee(x,T,L,B)),(T=-1<p?x[p]:null)&&vu(T))}function vu(p){if(typeof p!="number"&&p&&!p.da){var x=p.src;if(x&&x[me])W(x.i,p);else{var T=p.type,L=p.proxy;x.removeEventListener?x.removeEventListener(T,L,p.capture):x.detachEvent?x.detachEvent(B1(T),L):x.addListener&&x.removeListener&&x.removeListener(L),(T=Bm(x))?(W(T,p),T.h==0&&(T.src=null,x[le]=null)):ne(p)}}}function B1(p){return p in Ce?Ce[p]:Ce[p]="on"+p}function tD(p,x){if(p.da)p=!0;else{x=new et(x,this);var T=p.listener,L=p.ha||p.src;p.fa&&vu(p),p=T.call(L,x)}return p}function Bm(p){return p=p[le],p instanceof J?p:null}var Pl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bd(p){return typeof p=="function"?p:(p[Pl]||(p[Pl]=function(x){return p.handleEvent(x)}),p[Pl])}function mn(){ue.call(this),this.i=new J(this),this.M=this,this.F=null}g(mn,ue),mn.prototype[me]=!0,mn.prototype.removeEventListener=function(p,x,T,L){Tl(this,p,x,T,L)};function On(p,x){var T,L=p.F;if(L)for(T=[];L;L=L.F)T.push(L);if(p=p.M,L=x.type||x,typeof x=="string")x=new ve(x,p);else if(x instanceof ve)x.target=x.target||p;else{var B=x;x=new ve(L,p),j(x,B)}if(B=!0,T)for(var $=T.length-1;0<=$;$--){var se=x.g=T[$];B=$d(se,L,!0,x)&&B}if(se=x.g=p,B=$d(se,L,!0,x)&&B,B=$d(se,L,!1,x)&&B,T)for($=0;$<T.length;$++)se=x.g=T[$],B=$d(se,L,!1,x)&&B}mn.prototype.N=function(){if(mn.aa.N.call(this),this.i){var p=this.i,x;for(x in p.g){for(var T=p.g[x],L=0;L<T.length;L++)ne(T[L]);delete p.g[x],p.h--}}this.F=null},mn.prototype.K=function(p,x,T,L){return this.i.add(String(p),x,!1,T,L)},mn.prototype.L=function(p,x,T,L){return this.i.add(String(p),x,!0,T,L)};function $d(p,x,T,L){if(x=p.i.g[String(x)],!x)return!0;x=x.concat();for(var B=!0,$=0;$<x.length;++$){var se=x[$];if(se&&!se.da&&se.capture==T){var _t=se.listener,Kn=se.ha||se.src;se.fa&&W(p.i,se),B=_t.call(Kn,L)!==!1&&B}}return B&&!L.defaultPrevented}function yu(p,x,T){if(typeof p=="function")T&&(p=f(p,T));else if(p&&typeof p.handleEvent=="function")p=f(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:o.setTimeout(p,x||0)}function Ow(p){p.g=yu(()=>{p.g=null,p.i&&(p.i=!1,Ow(p))},p.l);const x=p.h;p.h=null,p.m.apply(null,x)}class $1 extends ue{constructor(x,T){super(),this.m=x,this.l=T,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Ow(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wu(p){ue.call(this),this.h=p,this.g={}}g(wu,ue);var Dw=[];function Rs(p){M(p.g,function(x,T){this.g.hasOwnProperty(T)&&vu(x)},p),p.g={}}wu.prototype.N=function(){wu.aa.N.call(this),Rs(this)},wu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gt=o.JSON.stringify,$m=o.JSON.parse,zm=class{stringify(p){return o.JSON.stringify(p,void 0)}parse(p){return o.JSON.parse(p,void 0)}};function Mw(){}Mw.prototype.h=null;function Lw(p){return p.h||(p.h=p.i())}function zd(){}var Il={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gt(){ve.call(this,"d")}g(gt,ve);function Hm(){ve.call(this,"c")}g(Hm,ve);var ts={},Wm=null;function _u(){return Wm=Wm||new mn}ts.La="serverreachability";function Gm(p){ve.call(this,ts.La,p)}g(Gm,ve);function ri(p){const x=_u();On(x,new Gm(x))}ts.STAT_EVENT="statevent";function jw(p,x){ve.call(this,ts.STAT_EVENT,p),this.stat=x}g(jw,ve);function gn(p){const x=_u();On(x,new jw(x,p))}ts.Ma="timingevent";function qm(p,x){ve.call(this,ts.Ma,p),this.size=x}g(qm,ve);function ro(p,x){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){p()},x)}function Cl(){this.g=!0}Cl.prototype.xa=function(){this.g=!1};function ii(p,x,T,L,B,$){p.info(function(){if(p.g)if($)for(var se="",_t=$.split("&"),Kn=0;Kn<_t.length;Kn++){var it=_t[Kn].split("=");if(1<it.length){var dr=it[0];it=it[1];var fr=dr.split("_");se=2<=fr.length&&fr[1]=="type"?se+(dr+"="+it+"&"):se+(dr+"=redacted&")}}else se=null;else se=$;return"XMLHTTP REQ ("+L+") [attempt "+B+"]: "+x+`
`+T+`
`+se})}function z1(p,x,T,L,B,$,se){p.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+B+"]: "+x+`
`+T+`
`+$+" "+se})}function kl(p,x,T,L){p.info(function(){return"XMLHTTP TEXT ("+x+"): "+W1(p,T)+(L?" "+L:"")})}function H1(p,x){p.info(function(){return"TIMEOUT: "+x})}Cl.prototype.info=function(){};function W1(p,x){if(!p.g)return x;if(!x)return null;try{var T=JSON.parse(x);if(T){for(p=0;p<T.length;p++)if(Array.isArray(T[p])){var L=T[p];if(!(2>L.length)){var B=L[1];if(Array.isArray(B)&&!(1>B.length)){var $=B[0];if($!="noop"&&$!="stop"&&$!="close")for(var se=1;se<B.length;se++)B[se]=""}}}}return Gt(T)}catch{return x}}var Hd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Km;function Wd(){}g(Wd,Mw),Wd.prototype.g=function(){return new XMLHttpRequest},Wd.prototype.i=function(){return{}},Km=new Wd;function fa(p,x,T,L){this.j=p,this.i=x,this.l=T,this.R=L||1,this.U=new wu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vw}function Vw(){this.i=null,this.g="",this.h=!1}var Uw={},Xm={};function Ym(p,x,T){p.L=1,p.v=Su(ns(x)),p.m=T,p.P=!0,Bw(p,null)}function Bw(p,x){p.F=Date.now(),Gd(p),p.A=ns(p.v);var T=p.A,L=p.R;Array.isArray(L)||(L=[String(L)]),Ol(T.i,"t",L),p.C=0,T=p.j.J,p.h=new Vw,p.g=wD(p.j,T?x:null,!p.m),0<p.O&&(p.M=new $1(f(p.Y,p,p.g),p.O)),x=p.U,T=p.g,L=p.ca;var B="readystatechange";Array.isArray(B)||(B&&(Dw[0]=B.toString()),B=Dw);for(var $=0;$<B.length;$++){var se=ct(T,B[$],L||x.handleEvent,!1,x.h||x);if(!se)break;x.g[se.key]=se}x=p.H?C(p.H):{},p.m?(p.u||(p.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,x)):(p.u="GET",p.g.ea(p.A,p.u,null,x)),ri(),ii(p.i,p.u,p.A,p.l,p.R,p.m)}fa.prototype.ca=function(p){p=p.target;const x=this.M;x&&so(p)==3?x.j():this.Y(p)},fa.prototype.Y=function(p){try{if(p==this.g)e:{const fr=so(this.g);var x=this.g.Ba();const Yd=this.g.Z();if(!(3>fr)&&(fr!=3||this.g&&(this.h.h||this.g.oa()||lD(this.g)))){this.J||fr!=4||x==7||(x==8||0>=Yd?ri(3):ri(2)),qd(this);var T=this.g.Z();this.X=T;t:if($w(this)){var L=lD(this.g);p="";var B=L.length,$=so(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){io(this),xu(this);var se="";break t}this.h.i=new o.TextDecoder}for(x=0;x<B;x++)this.h.h=!0,p+=this.h.i.decode(L[x],{stream:!($&&x==B-1)});L.length=0,this.h.g+=p,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=T==200,z1(this.i,this.u,this.A,this.l,this.R,fr,T),this.o){if(this.T&&!this.K){t:{if(this.g){var _t,Kn=this.g;if((_t=Kn.g?Kn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(_t)){var it=_t;break t}}it=null}if(T=it)kl(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qm(this,T);else{this.o=!1,this.s=3,gn(12),io(this),xu(this);break e}}if(this.P){T=!0;let Ns;for(;!this.J&&this.C<se.length;)if(Ns=G1(this,se),Ns==Xm){fr==4&&(this.s=4,gn(14),T=!1),kl(this.i,this.l,null,"[Incomplete Response]");break}else if(Ns==Uw){this.s=4,gn(15),kl(this.i,this.l,se,"[Invalid Chunk]"),T=!1;break}else kl(this.i,this.l,Ns,null),Qm(this,Ns);if($w(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fr!=4||se.length!=0||this.h.h||(this.s=1,gn(16),T=!1),this.o=this.o&&T,!T)kl(this.i,this.l,se,"[Invalid Chunked Response]"),io(this),xu(this);else if(0<se.length&&!this.W){this.W=!0;var dr=this.j;dr.g==this&&dr.ba&&!dr.M&&(dr.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Q1(dr),dr.M=!0,gn(11))}}else kl(this.i,this.l,se,null),Qm(this,se);fr==4&&io(this),this.o&&!this.J&&(fr==4?mD(this.j,this):(this.o=!1,Gd(this)))}else R8(this.g),T==400&&0<se.indexOf("Unknown SID")?(this.s=3,gn(12)):(this.s=0,gn(13)),io(this),xu(this)}}}catch{}finally{}};function $w(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function G1(p,x){var T=p.C,L=x.indexOf(`
`,T);return L==-1?Xm:(T=Number(x.substring(T,L)),isNaN(T)?Uw:(L+=1,L+T>x.length?Xm:(x=x.slice(L,L+T),p.C=L+T,x)))}fa.prototype.cancel=function(){this.J=!0,io(this)};function Gd(p){p.S=Date.now()+p.I,bu(p,p.I)}function bu(p,x){if(p.B!=null)throw Error("WatchDog timer not null");p.B=ro(f(p.ba,p),x)}function qd(p){p.B&&(o.clearTimeout(p.B),p.B=null)}fa.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(H1(this.i,this.A),this.L!=2&&(ri(),gn(17)),io(this),this.s=2,xu(this)):bu(this,this.S-p)};function xu(p){p.j.G==0||p.J||mD(p.j,p)}function io(p){qd(p);var x=p.M;x&&typeof x.ma=="function"&&x.ma(),p.M=null,Rs(p.U),p.g&&(x=p.g,p.g=null,x.abort(),x.ma())}function Qm(p,x){try{var T=p.j;if(T.G!=0&&(T.g==p||eg(T.h,p))){if(!p.K&&eg(T.h,p)&&T.G==3){try{var L=T.Da.g.parse(x)}catch{L=null}if(Array.isArray(L)&&L.length==3){var B=L;if(B[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<p.F)e_(T),Jw(T);else break e;Y1(T),gn(18)}}else T.za=B[1],0<T.za-T.T&&37500>B[2]&&T.F&&T.v==0&&!T.C&&(T.C=ro(f(T.Za,T),6e3));if(1>=Zm(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Tu(T,11)}else if((p.K||T.g==p)&&e_(T),!b(x))for(B=T.Da.g.parse(x),x=0;x<B.length;x++){let it=B[x];if(T.T=it[0],it=it[1],T.G==2)if(it[0]=="c"){T.K=it[1],T.ia=it[2];const dr=it[3];dr!=null&&(T.la=dr,T.j.info("VER="+T.la));const fr=it[4];fr!=null&&(T.Aa=fr,T.j.info("SVER="+T.Aa));const Yd=it[5];Yd!=null&&typeof Yd=="number"&&0<Yd&&(L=1.5*Yd,T.L=L,T.j.info("backChannelRequestTimeoutMs_="+L)),L=T;const Ns=p.g;if(Ns){const n_=Ns.g?Ns.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(n_){var $=L.h;$.g||n_.indexOf("spdy")==-1&&n_.indexOf("quic")==-1&&n_.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(tg($,$.h),$.h=null))}if(L.D){const J1=Ns.g?Ns.g.getResponseHeader("X-HTTP-Session-Id"):null;J1&&(L.ya=J1,vt(L.I,L.D,J1))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-p.F,T.j.info("Handshake RTT: "+T.R+"ms")),L=T;var se=p;if(L.qa=yD(L,L.J?L.ia:null,L.W),se.K){Hw(L.h,se);var _t=se,Kn=L.L;Kn&&(_t.I=Kn),_t.B&&(qd(_t),Gd(_t)),L.g=se}else fD(L);0<T.i.length&&Zw(T)}else it[0]!="stop"&&it[0]!="close"||Tu(T,7);else T.G==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?Tu(T,7):X1(T):it[0]!="noop"&&T.l&&T.l.ta(it),T.v=0)}}ri(4)}catch{}}var q1=class{constructor(p,x){this.g=p,this.map=x}};function Jm(p){this.l=p||10,o.PerformanceNavigationTiming?(p=o.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zw(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Zm(p){return p.h?1:p.g?p.g.size:0}function eg(p,x){return p.h?p.h==x:p.g?p.g.has(x):!1}function tg(p,x){p.g?p.g.add(x):p.h=x}function Hw(p,x){p.h&&p.h==x?p.h=null:p.g&&p.g.has(x)&&p.g.delete(x)}Jm.prototype.cancel=function(){if(this.i=ng(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function ng(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let x=p.i;for(const T of p.g.values())x=x.concat(T.D);return x}return v(p.i)}function Ww(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(l(p)){for(var x=[],T=p.length,L=0;L<T;L++)x.push(p[L]);return x}x=[],T=0;for(L in p)x[T++]=p[L];return x}function Gw(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||typeof p=="string"){var x=[];p=p.length;for(var T=0;T<p;T++)x.push(T);return x}x=[],T=0;for(const L in p)x[T++]=L;return x}}}function rg(p,x){if(p.forEach&&typeof p.forEach=="function")p.forEach(x,void 0);else if(l(p)||typeof p=="string")Array.prototype.forEach.call(p,x,void 0);else for(var T=Gw(p),L=Ww(p),B=L.length,$=0;$<B;$++)x.call(void 0,L[$],T&&T[$],p)}var ig=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qw(p,x){if(p){p=p.split("&");for(var T=0;T<p.length;T++){var L=p[T].indexOf("="),B=null;if(0<=L){var $=p[T].substring(0,L);B=p[T].substring(L+1)}else $=p[T];x($,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function pa(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof pa){this.h=p.h,Au(this,p.j),this.o=p.o,this.g=p.g,Eu(this,p.s),this.l=p.l;var x=p.i,T=new je;T.i=x.i,x.g&&(T.g=new Map(x.g),T.h=x.h),sg(this,T),this.m=p.m}else p&&(x=String(p).match(ig))?(this.h=!1,Au(this,x[1]||"",!0),this.o=Rl(x[2]||""),this.g=Rl(x[3]||"",!0),Eu(this,x[4]),this.l=Rl(x[5]||"",!0),sg(this,x[6]||"",!0),this.m=Rl(x[7]||"")):(this.h=!1,this.i=new je(null,this.h))}pa.prototype.toString=function(){var p=[],x=this.j;x&&p.push(Nl(x,U,!0),":");var T=this.g;return(T||x=="file")&&(p.push("//"),(x=this.o)&&p.push(Nl(x,U,!0),"@"),p.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&p.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&p.push("/"),p.push(Nl(T,T.charAt(0)=="/"?ae:G,!0))),(T=this.i.toString())&&p.push("?",T),(T=this.m)&&p.push("#",Nl(T,Se)),p.join("")};function ns(p){return new pa(p)}function Au(p,x,T){p.j=T?Rl(x,!0):x,p.j&&(p.j=p.j.replace(/:$/,""))}function Eu(p,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);p.s=x}else p.s=null}function sg(p,x,T){x instanceof je?(p.i=x,Kd(p.i,p.h)):(T||(x=Nl(x,Le)),p.i=new je(x,p.h))}function vt(p,x,T){p.i.set(x,T)}function Su(p){return vt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Rl(p,x){return p?x?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Nl(p,x,T){return typeof p=="string"?(p=encodeURI(p).replace(x,Kw),T&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Kw(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var U=/[#\/\?@]/g,G=/[#\?:]/g,ae=/[#\?]/g,Le=/[#\?@]/g,Se=/#/g;function je(p,x){this.h=this.g=null,this.i=p||null,this.j=!!x}function He(p){p.g||(p.g=new Map,p.h=0,p.i&&qw(p.i,function(x,T){p.add(decodeURIComponent(x.replace(/\+/g," ")),T)}))}t=je.prototype,t.add=function(p,x){He(this),this.i=null,p=xi(this,p);var T=this.g.get(p);return T||this.g.set(p,T=[]),T.push(x),this.h+=1,this};function vn(p,x){He(p),x=xi(p,x),p.g.has(x)&&(p.i=null,p.h-=p.g.get(x).length,p.g.delete(x))}function rs(p,x){return He(p),x=xi(p,x),p.g.has(x)}t.forEach=function(p,x){He(this),this.g.forEach(function(T,L){T.forEach(function(B){p.call(x,B,L,this)},this)},this)},t.na=function(){He(this);const p=Array.from(this.g.values()),x=Array.from(this.g.keys()),T=[];for(let L=0;L<x.length;L++){const B=p[L];for(let $=0;$<B.length;$++)T.push(x[L])}return T},t.V=function(p){He(this);let x=[];if(typeof p=="string")rs(this,p)&&(x=x.concat(this.g.get(xi(this,p))));else{p=Array.from(this.g.values());for(let T=0;T<p.length;T++)x=x.concat(p[T])}return x},t.set=function(p,x){return He(this),this.i=null,p=xi(this,p),rs(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[x]),this.h+=1,this},t.get=function(p,x){return p?(p=this.V(p),0<p.length?String(p[0]):x):x};function Ol(p,x,T){vn(p,x),0<T.length&&(p.i=null,p.g.set(xi(p,x),v(T)),p.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],x=Array.from(this.g.keys());for(var T=0;T<x.length;T++){var L=x[T];const $=encodeURIComponent(String(L)),se=this.V(L);for(L=0;L<se.length;L++){var B=$;se[L]!==""&&(B+="="+encodeURIComponent(String(se[L]))),p.push(B)}}return this.i=p.join("&")};function xi(p,x){return x=String(x),p.j&&(x=x.toLowerCase()),x}function Kd(p,x){x&&!p.j&&(He(p),p.i=null,p.g.forEach(function(T,L){var B=L.toLowerCase();L!=B&&(vn(this,L),Ol(this,B,T))},p)),p.j=x}function Zt(p,x){const T=new Cl;if(o.Image){const L=new Image;L.onload=m(Dl,T,"TestLoadImage: loaded",!0,x,L),L.onerror=m(Dl,T,"TestLoadImage: error",!1,x,L),L.onabort=m(Dl,T,"TestLoadImage: abort",!1,x,L),L.ontimeout=m(Dl,T,"TestLoadImage: timeout",!1,x,L),o.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=p}else x(!1)}function en(p,x){const T=new Cl,L=new AbortController,B=setTimeout(()=>{L.abort(),Dl(T,"TestPingServer: timeout",!1,x)},1e4);fetch(p,{signal:L.signal}).then($=>{clearTimeout(B),$.ok?Dl(T,"TestPingServer: ok",!0,x):Dl(T,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(B),Dl(T,"TestPingServer: error",!1,x)})}function Dl(p,x,T,L,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),L(T)}catch{}}function P8(){this.g=new zm}function I8(p,x,T){const L=T||"";try{rg(p,function(B,$){let se=B;c(B)&&(se=Gt(B)),x.push(L+$+"="+encodeURIComponent(se))})}catch(B){throw x.push(L+"type="+encodeURIComponent("_badmap")),B}}function Xw(p){this.l=p.Ub||null,this.j=p.eb||!1}g(Xw,Mw),Xw.prototype.g=function(){return new Yw(this.l,this.j)},Xw.prototype.i=function(p){return function(){return p}}({});function Yw(p,x){mn.call(this),this.D=p,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Yw,mn),t=Yw.prototype,t.open=function(p,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=x,this.readyState=1,og(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(x.body=p),(this.D||o).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ag(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,og(this)),this.g&&(this.readyState=3,og(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nD(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function nD(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var x=p.value?p.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!p.done}))&&(this.response=this.responseText+=x)}p.done?ag(this):og(this),this.readyState==3&&nD(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,ag(this))},t.Qa=function(p){this.g&&(this.response=p,ag(this))},t.ga=function(){this.g&&ag(this)};function ag(p){p.readyState=4,p.l=null,p.j=null,p.v=null,og(p)}t.setRequestHeader=function(p,x){this.u.append(p,x)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],x=this.h.entries();for(var T=x.next();!T.done;)T=T.value,p.push(T[0]+": "+T[1]),T=x.next();return p.join(`\r
`)};function og(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Yw.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function rD(p){let x="";return M(p,function(T,L){x+=L,x+=":",x+=T,x+=`\r
`}),x}function K1(p,x,T){e:{for(L in T){var L=!1;break e}L=!0}L||(T=rD(T),typeof p=="string"?T!=null&&encodeURIComponent(String(T)):vt(p,x,T))}function qt(p){mn.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(qt,mn);var C8=/^https?$/i,k8=["POST","PUT"];t=qt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,x,T,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);x=x?x.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Km.g(),this.v=this.o?Lw(this.o):Lw(Km),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(x,String(p),!0),this.B=!1}catch($){iD(this,$);return}if(p=T||"",T=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var B in L)T.set(B,L[B]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const $ of L.keys())T.set($,L.get($));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(T.keys()).find($=>$.toLowerCase()=="content-type"),B=o.FormData&&p instanceof o.FormData,!(0<=Array.prototype.indexOf.call(k8,x,void 0))||L||B||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,se]of T)this.g.setRequestHeader($,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oD(this),this.u=!0,this.g.send(p),this.u=!1}catch($){iD(this,$)}};function iD(p,x){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=x,p.m=5,sD(p),Qw(p)}function sD(p){p.A||(p.A=!0,On(p,"complete"),On(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,On(this,"complete"),On(this,"abort"),Qw(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qw(this,!0)),qt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?aD(this):this.bb())},t.bb=function(){aD(this)};function aD(p){if(p.h&&typeof a<"u"&&(!p.v[1]||so(p)!=4||p.Z()!=2)){if(p.u&&so(p)==4)yu(p.Ea,0,p);else if(On(p,"readystatechange"),so(p)==4){p.h=!1;try{const se=p.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var T;if(!(T=x)){var L;if(L=se===0){var B=String(p.D).match(ig)[1]||null;!B&&o.self&&o.self.location&&(B=o.self.location.protocol.slice(0,-1)),L=!C8.test(B?B.toLowerCase():"")}T=L}if(T)On(p,"complete"),On(p,"success");else{p.m=6;try{var $=2<so(p)?p.g.statusText:""}catch{$=""}p.l=$+" ["+p.Z()+"]",sD(p)}}finally{Qw(p)}}}}function Qw(p,x){if(p.g){oD(p);const T=p.g,L=p.v[0]?()=>{}:null;p.g=null,p.v=null,x||On(p,"ready");try{T.onreadystatechange=L}catch{}}}function oD(p){p.I&&(o.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function so(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<so(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var x=this.g.responseText;return p&&x.indexOf(p)==0&&(x=x.substring(p.length)),$m(x)}};function lD(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function R8(p){const x={};p=(p.g&&2<=so(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<p.length;L++){if(b(p[L]))continue;var T=D(p[L]);const B=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const $=x[B]||[];x[B]=$,$.push(T)}P(x,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lg(p,x,T){return T&&T.internalChannelParams&&T.internalChannelParams[p]||x}function cD(p){this.Aa=0,this.i=[],this.j=new Cl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lg("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lg("baseRetryDelayMs",5e3,p),this.cb=lg("retryDelaySeedMs",1e4,p),this.Wa=lg("forwardChannelMaxRetries",2,p),this.wa=lg("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Jm(p&&p.concurrentRequestLimit),this.Da=new P8,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=cD.prototype,t.la=8,t.G=1,t.connect=function(p,x,T,L){gn(0),this.W=p,this.H=x||{},T&&L!==void 0&&(this.H.OSID=T,this.H.OAID=L),this.F=this.X,this.I=yD(this,null,this.W),Zw(this)};function X1(p){if(uD(p),p.G==3){var x=p.U++,T=ns(p.I);if(vt(T,"SID",p.K),vt(T,"RID",x),vt(T,"TYPE","terminate"),cg(p,T),x=new fa(p,p.j,x),x.L=2,x.v=Su(ns(T)),T=!1,o.navigator&&o.navigator.sendBeacon)try{T=o.navigator.sendBeacon(x.v.toString(),"")}catch{}!T&&o.Image&&(new Image().src=x.v,T=!0),T||(x.g=wD(x.j,null),x.g.ea(x.v)),x.F=Date.now(),Gd(x)}vD(p)}function Jw(p){p.g&&(Q1(p),p.g.cancel(),p.g=null)}function uD(p){Jw(p),p.u&&(o.clearTimeout(p.u),p.u=null),e_(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&o.clearTimeout(p.s),p.s=null)}function Zw(p){if(!zw(p.h)&&!p.s){p.s=!0;var x=p.Ga;q||te(),H||(q(),H=!0),X.add(x,p),p.B=0}}function N8(p,x){return Zm(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=x.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=ro(f(p.Ga,p,x),gD(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const B=new fa(this,this.j,p);let $=this.o;if(this.S&&($?($=C($),j($,this.S)):$=this.S),this.m!==null||this.O||(B.H=$,$=null),this.P)e:{for(var x=0,T=0;T<this.i.length;T++){t:{var L=this.i[T];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(x+=L,4096<x){x=T;break e}if(x===4096||T===this.i.length-1){x=T+1;break e}}x=1e3}else x=1e3;x=dD(this,B,x),T=ns(this.I),vt(T,"RID",p),vt(T,"CVER",22),this.D&&vt(T,"X-HTTP-Session-Id",this.D),cg(this,T),$&&(this.O?x="headers="+encodeURIComponent(String(rD($)))+"&"+x:this.m&&K1(T,this.m,$)),tg(this.h,B),this.Ua&&vt(T,"TYPE","init"),this.P?(vt(T,"$req",x),vt(T,"SID","null"),B.T=!0,Ym(B,T,null)):Ym(B,T,x),this.G=2}}else this.G==3&&(p?hD(this,p):this.i.length==0||zw(this.h)||hD(this))};function hD(p,x){var T;x?T=x.l:T=p.U++;const L=ns(p.I);vt(L,"SID",p.K),vt(L,"RID",T),vt(L,"AID",p.T),cg(p,L),p.m&&p.o&&K1(L,p.m,p.o),T=new fa(p,p.j,T,p.B+1),p.m===null&&(T.H=p.o),x&&(p.i=x.D.concat(p.i)),x=dD(p,T,1e3),T.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),tg(p.h,T),Ym(T,L,x)}function cg(p,x){p.H&&M(p.H,function(T,L){vt(x,L,T)}),p.l&&rg({},function(T,L){vt(x,L,T)})}function dD(p,x,T){T=Math.min(p.i.length,T);var L=p.l?f(p.l.Na,p.l,p):null;e:{var B=p.i;let $=-1;for(;;){const se=["count="+T];$==-1?0<T?($=B[0].g,se.push("ofs="+$)):$=0:se.push("ofs="+$);let _t=!0;for(let Kn=0;Kn<T;Kn++){let it=B[Kn].g;const dr=B[Kn].map;if(it-=$,0>it)$=Math.max(0,B[Kn].g-100),_t=!1;else try{I8(dr,se,"req"+it+"_")}catch{L&&L(dr)}}if(_t){L=se.join("&");break e}}}return p=p.i.splice(0,T),x.D=p,L}function fD(p){if(!p.g&&!p.u){p.Y=1;var x=p.Fa;q||te(),H||(q(),H=!0),X.add(x,p),p.v=0}}function Y1(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=ro(f(p.Fa,p),gD(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,pD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=ro(f(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gn(10),Jw(this),pD(this))};function Q1(p){p.A!=null&&(o.clearTimeout(p.A),p.A=null)}function pD(p){p.g=new fa(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var x=ns(p.qa);vt(x,"RID","rpc"),vt(x,"SID",p.K),vt(x,"AID",p.T),vt(x,"CI",p.F?"0":"1"),!p.F&&p.ja&&vt(x,"TO",p.ja),vt(x,"TYPE","xmlhttp"),cg(p,x),p.m&&p.o&&K1(x,p.m,p.o),p.L&&(p.g.I=p.L);var T=p.g;p=p.ia,T.L=1,T.v=Su(ns(x)),T.m=null,T.P=!0,Bw(T,p)}t.Za=function(){this.C!=null&&(this.C=null,Jw(this),Y1(this),gn(19))};function e_(p){p.C!=null&&(o.clearTimeout(p.C),p.C=null)}function mD(p,x){var T=null;if(p.g==x){e_(p),Q1(p),p.g=null;var L=2}else if(eg(p.h,x))T=x.D,Hw(p.h,x),L=1;else return;if(p.G!=0){if(x.o)if(L==1){T=x.m?x.m.length:0,x=Date.now()-x.F;var B=p.B;L=_u(),On(L,new qm(L,T)),Zw(p)}else fD(p);else if(B=x.s,B==3||B==0&&0<x.X||!(L==1&&N8(p,x)||L==2&&Y1(p)))switch(T&&0<T.length&&(x=p.h,x.i=x.i.concat(T)),B){case 1:Tu(p,5);break;case 4:Tu(p,10);break;case 3:Tu(p,6);break;default:Tu(p,2)}}}function gD(p,x){let T=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(T*=2),T*x}function Tu(p,x){if(p.j.info("Error code "+x),x==2){var T=f(p.fb,p),L=p.Xa;const B=!L;L=new pa(L||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Au(L,"https"),Su(L),B?Zt(L.toString(),T):en(L.toString(),T)}else gn(2);p.G=0,p.l&&p.l.sa(x),vD(p),uD(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),gn(2)):(this.j.info("Failed to ping google.com"),gn(1))};function vD(p){if(p.G=0,p.ka=[],p.l){const x=ng(p.h);(x.length!=0||p.i.length!=0)&&(y(p.ka,x),y(p.ka,p.i),p.h.i.length=0,v(p.i),p.i.length=0),p.l.ra()}}function yD(p,x,T){var L=T instanceof pa?ns(T):new pa(T);if(L.g!="")x&&(L.g=x+"."+L.g),Eu(L,L.s);else{var B=o.location;L=B.protocol,x=x?x+"."+B.hostname:B.hostname,B=+B.port;var $=new pa(null);L&&Au($,L),x&&($.g=x),B&&Eu($,B),T&&($.l=T),L=$}return T=p.D,x=p.ya,T&&x&&vt(L,T,x),vt(L,"VER",p.la),cg(p,L),L}function wD(p,x,T){if(x&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=p.Ca&&!p.pa?new qt(new Xw({eb:T})):new qt(p.pa),x.Ha(p.J),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _D(){}t=_D.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function t_(){}t_.prototype.g=function(p,x){return new Ai(p,x)};function Ai(p,x){mn.call(this),this.g=new cD(x),this.l=p,this.h=x&&x.messageUrlParams||null,p=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(p?p["X-WebChannel-Content-Type"]=x.messageContentType:p={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(p?p["X-WebChannel-Client-Profile"]=x.va:p={"X-WebChannel-Client-Profile":x.va}),this.g.S=p,(p=x&&x.Sb)&&!b(p)&&(this.g.m=p),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!b(x)&&(this.g.D=x,p=this.h,p!==null&&x in p&&(p=this.h,x in p&&delete p[x])),this.j=new Xd(this)}g(Ai,mn),Ai.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ai.prototype.close=function(){X1(this.g)},Ai.prototype.o=function(p){var x=this.g;if(typeof p=="string"){var T={};T.__data__=p,p=T}else this.u&&(T={},T.__data__=Gt(p),p=T);x.i.push(new q1(x.Ya++,p)),x.G==3&&Zw(x)},Ai.prototype.N=function(){this.g.l=null,delete this.j,X1(this.g),delete this.g,Ai.aa.N.call(this)};function bD(p){gt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var x=p.__sm__;if(x){e:{for(const T in x){p=T;break e}p=void 0}(this.i=p)&&(p=this.i,x=x!==null&&p in x?x[p]:void 0),this.data=x}else this.data=p}g(bD,gt);function xD(){Hm.call(this),this.status=1}g(xD,Hm);function Xd(p){this.g=p}g(Xd,_D),Xd.prototype.ua=function(){On(this.g,"a")},Xd.prototype.ta=function(p){On(this.g,new bD(p))},Xd.prototype.sa=function(p){On(this.g,new xD)},Xd.prototype.ra=function(){On(this.g,"b")},t_.prototype.createWebChannel=t_.prototype.g,Ai.prototype.send=Ai.prototype.o,Ai.prototype.open=Ai.prototype.m,Ai.prototype.close=Ai.prototype.close,LB=function(){return new t_},MB=function(){return _u()},DB=ts,PP={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hd.NO_ERROR=0,Hd.TIMEOUT=8,Hd.HTTP_ERROR=6,db=Hd,Fw.COMPLETE="complete",OB=Fw,zd.EventType=Il,Il.OPEN="a",Il.CLOSE="b",Il.ERROR="c",Il.MESSAGE="d",mn.prototype.listen=mn.prototype.K,Vg=zd,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,NB=qt}).apply(typeof x_<"u"?x_:typeof self<"u"?self:typeof window<"u"?window:{});const p2="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sr.UNAUTHENTICATED=new Sr(null),Sr.GOOGLE_CREDENTIALS=new Sr("google-credentials-uid"),Sr.FIRST_PARTY=new Sr("first-party-uid"),Sr.MOCK_USER=new Sr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new tR("@firebase/firestore");function _g(){return yd.logLevel}function ye(t,...e){if(yd.logLevel<=Qe.DEBUG){const n=e.map(dR);yd.debug(`Firestore (${Cm}): ${t}`,...n)}}function ul(t,...e){if(yd.logLevel<=Qe.ERROR){const n=e.map(dR);yd.error(`Firestore (${Cm}): ${t}`,...n)}}function cm(t,...e){if(yd.logLevel<=Qe.WARN){const n=e.map(dR);yd.warn(`Firestore (${Cm}): ${t}`,...n)}}function dR(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t="Unexpected state"){const e=`FIRESTORE (${Cm}) INTERNAL ASSERTION FAILED: `+t;throw ul(e),new Error(e)}function pt(t,e){t||Ne()}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends da{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Sr.UNAUTHENTICATED))}shutdown(){}}class vQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yQ{constructor(e){this.t=e,this.currentUser=Sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Jo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Jo,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Jo)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt(typeof r.accessToken=="string"),new jB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string"),new Sr(e)}}class wQ{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Sr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _Q{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new wQ(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Sr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bQ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xQ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pt(this.o===void 0);const r=s=>{s.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,ye("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pt(typeof n.token=="string"),this.R=n.token,new bQ(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AQ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=AQ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function st(t,e){return t<e?-1:t>e?1:0}function um(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ae(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Pn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.timestamp=e}static fromTimestamp(e){return new De(e)}static min(){return new De(new Pn(0,0))}static max(){return new De(new Pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ne(),r===void 0?r=e.length-n:r>e.length-n&&Ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return qv.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qv?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class jt extends qv{construct(e,n,r){return new jt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new jt(n)}static emptyPath(){return new jt([])}}const EQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends qv{construct(e,n,r){return new ir(e,n,r)}static isValidIdentifier(e){return EQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ir(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ae(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Ae(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ae(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new Ae(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ir(n)}static emptyPath(){return new ir([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(jt.fromString(e))}static fromName(e){return new Pe(jt.fromString(e).popFirst(5))}static empty(){return new Pe(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return jt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new jt(e.slice()))}}function SQ(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new Pn(n+1,0):new Pn(n,r));return new Qc(i,Pe.empty(),e)}function TQ(t){return new Qc(t.readTime,t.key,-1)}class Qc{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qc(De.min(),Pe.empty(),-1)}static max(){return new Qc(De.max(),Pe.empty(),-1)}}function PQ(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Pe.comparator(t.documentKey,e.documentKey),n!==0?n:st(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IQ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CQ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ew(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==IQ)throw t;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.reject(n)}static resolve(e){return new ee((n,r)=>{n(e)})}static reject(e){return new ee((n,r)=>{r(e)})}static waitFor(e){return new ee((n,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&n()},l=>r(l))}),a=!0,s===i&&n()})}static or(e){let n=ee.resolve(!1);for(const r of e)n=n.next(i=>i?ee.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ee((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{a[c]=u,++o,o===s&&r(a)},u=>i(u))}})}static doWhile(e,n){return new ee((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function kQ(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tw(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}fR.oe=-1;function TE(t){return t==null}function Nx(t){return t===0&&1/t==-1/0}function RQ(t){return typeof t=="number"&&Number.isInteger(t)&&!Nx(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Md(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function VB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n){this.comparator=e,this.root=n||nr.EMPTY}insert(e,n){return new Wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new Wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new A_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new A_(this.root,e,this.comparator,!1)}getReverseIterator(){return new A_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new A_(this.root,e,this.comparator,!0)}}class A_{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??nr.RED,this.left=i??nr.EMPTY,this.right=s??nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new nr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return nr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1;nr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,n,r,i,s){return this}insert(e,n,r){return new nr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new g2(this.data.getIterator())}getIteratorFrom(e){return new g2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof or)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new or(this.comparator);return n.data=e,n}}class g2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.fields=e,e.sort(ir.comparator)}static empty(){return new zi([])}unionWith(e){let n=new or(ir.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return um(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new UB("Invalid base64 string: "+s):s}}(e);return new ur(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new ur(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ur.EMPTY_BYTE_STRING=new ur("");const NQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jc(t){if(pt(!!t),typeof t=="string"){let e=0;const n=NQ.exec(t);if(pt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:sn(t.seconds),nanos:sn(t.nanos)}}function sn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wd(t){return typeof t=="string"?ur.fromBase64String(t):ur.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mR(t){const e=t.mapValue.fields.__previous_value__;return pR(e)?mR(e):e}function Kv(t){const e=Jc(t.mapValue.fields.__local_write_time__.timestampValue);return new Pn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{constructor(e,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class Xv{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Xv("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xv&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_={mapValue:{}};function _d(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pR(t)?4:MQ(t)?9007199254740991:DQ(t)?10:11:Ne()}function Xa(t,e){if(t===e)return!0;const n=_d(t);if(n!==_d(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kv(t).isEqual(Kv(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Jc(i.timestampValue),o=Jc(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return wd(i.bytesValue).isEqual(wd(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return sn(i.geoPointValue.latitude)===sn(s.geoPointValue.latitude)&&sn(i.geoPointValue.longitude)===sn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return sn(i.integerValue)===sn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=sn(i.doubleValue),o=sn(s.doubleValue);return a===o?Nx(a)===Nx(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return um(t.arrayValue.values||[],e.arrayValue.values||[],Xa);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(m2(a)!==m2(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Xa(a[l],o[l])))return!1;return!0}(t,e);default:return Ne()}}function Yv(t,e){return(t.values||[]).find(n=>Xa(n,e))!==void 0}function hm(t,e){if(t===e)return 0;const n=_d(t),r=_d(e);if(n!==r)return st(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=sn(s.integerValue||s.doubleValue),l=sn(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return v2(t.timestampValue,e.timestampValue);case 4:return v2(Kv(t),Kv(e));case 5:return st(t.stringValue,e.stringValue);case 6:return function(s,a){const o=wd(s),l=wd(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=st(o[c],l[c]);if(u!==0)return u}return st(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=st(sn(s.latitude),sn(a.latitude));return o!==0?o:st(sn(s.longitude),sn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return y2(t.arrayValue,e.arrayValue);case 10:return function(s,a){var o,l,c,u;const h=s.fields||{},f=a.fields||{},m=(o=h.value)===null||o===void 0?void 0:o.arrayValue,g=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=st(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:y2(m,g)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===E_.mapValue&&a===E_.mapValue)return 0;if(s===E_.mapValue)return 1;if(a===E_.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=st(l[h],u[h]);if(f!==0)return f;const m=hm(o[l[h]],c[u[h]]);if(m!==0)return m}return st(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Ne()}}function v2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return st(t,e);const n=Jc(t),r=Jc(e),i=st(n.seconds,r.seconds);return i!==0?i:st(n.nanos,r.nanos)}function y2(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=hm(n[i],r[i]);if(s)return s}return st(n.length,r.length)}function dm(t){return IP(t)}function IP(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jc(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wd(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=IP(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${IP(n.fields[a])}`;return i+"}"}(t.mapValue):Ne()}function CP(t){return!!t&&"integerValue"in t}function gR(t){return!!t&&"arrayValue"in t}function w2(t){return!!t&&"nullValue"in t}function _2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fb(t){return!!t&&"mapValue"in t}function DQ(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function vv(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Md(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vv(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vv(t.arrayValue.values[n]);return e}return Object.assign({},t)}function MQ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.value=e}static empty(){return new pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fb(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vv(n)}setAll(e){let n=ir.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=o.popLast()}a?r[o.lastSegment()]=vv(a):i.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());fb(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Md(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new pi(vv(this.value))}}function BB(t){const e=[];return Md(t.fields,(n,r)=>{const i=new ir([n]);if(fb(r)){const s=BB(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new zi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r,i,s,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Ir(e,0,De.min(),De.min(),De.min(),pi.empty(),0)}static newFoundDocument(e,n,r,i){return new Ir(e,1,n,De.min(),r,i,0)}static newNoDocument(e,n){return new Ir(e,2,n,De.min(),De.min(),pi.empty(),0)}static newUnknownDocument(e,n){return new Ir(e,3,n,De.min(),De.min(),pi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n){this.position=e,this.inclusive=n}}function b2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=Pe.comparator(Pe.fromName(a.referenceValue),n.key):r=hm(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function x2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xa(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n="asc"){this.field=e,this.dir=n}}function LQ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{}class En extends $B{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FQ(e,n,r):n==="array-contains"?new BQ(e,r):n==="in"?new $Q(e,r):n==="not-in"?new zQ(e,r):n==="array-contains-any"?new HQ(e,r):new En(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new VQ(e,r):new UQ(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hm(n,this.value)):n!==null&&_d(this.value)===_d(n)&&this.matchesComparison(hm(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ya extends $B{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ya(e,n)}matches(e){return zB(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zB(t){return t.op==="and"}function HB(t){return jQ(t)&&zB(t)}function jQ(t){for(const e of t.filters)if(e instanceof Ya)return!1;return!0}function kP(t){if(t instanceof En)return t.field.canonicalString()+t.op.toString()+dm(t.value);if(HB(t))return t.filters.map(e=>kP(e)).join(",");{const e=t.filters.map(n=>kP(n)).join(",");return`${t.op}(${e})`}}function WB(t,e){return t instanceof En?function(r,i){return i instanceof En&&r.op===i.op&&r.field.isEqual(i.field)&&Xa(r.value,i.value)}(t,e):t instanceof Ya?function(r,i){return i instanceof Ya&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&WB(a,i.filters[o]),!0):!1}(t,e):void Ne()}function GB(t){return t instanceof En?function(n){return`${n.field.canonicalString()} ${n.op} ${dm(n.value)}`}(t):t instanceof Ya?function(n){return n.op.toString()+" {"+n.getFilters().map(GB).join(" ,")+"}"}(t):"Filter"}class FQ extends En{constructor(e,n,r){super(e,n,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const n=Pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class VQ extends En{constructor(e,n){super(e,"in",n),this.keys=qB("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UQ extends En{constructor(e,n){super(e,"not-in",n),this.keys=qB("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qB(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class BQ extends En{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return gR(n)&&Yv(n.arrayValue,this.value)}}class $Q extends En{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yv(this.value.arrayValue,n)}}class zQ extends En{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Yv(this.value.arrayValue,n)}}class HQ extends En{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!gR(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yv(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ{constructor(e,n=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function A2(t,e=null,n=[],r=[],i=null,s=null,a=null){return new WQ(t,e,n,r,i,s,a)}function vR(t){const e=Me(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kP(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),TE(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>dm(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>dm(r)).join(",")),e.ue=n}return e.ue}function yR(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LQ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!WB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!x2(t.startAt,e.startAt)&&x2(t.endAt,e.endAt)}function RP(t){return Pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function GQ(t,e,n,r,i,s,a,o){return new PE(t,e,n,r,i,s,a,o)}function IE(t){return new PE(t)}function E2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qQ(t){return t.collectionGroup!==null}function yv(t){const e=Me(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new or(ir.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Dx(s,r))}),n.has(ir.keyField().canonicalString())||e.ce.push(new Dx(ir.keyField(),r))}return e.ce}function Ga(t){const e=Me(t);return e.le||(e.le=KQ(e,yv(t))),e.le}function KQ(t,e){if(t.limitType==="F")return A2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Dx(i.field,s)});const n=t.endAt?new Ox(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ox(t.startAt.position,t.startAt.inclusive):null;return A2(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function NP(t,e,n){return new PE(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function CE(t,e){return yR(Ga(t),Ga(e))&&t.limitType===e.limitType}function KB(t){return`${vR(Ga(t))}|lt:${t.limitType}`}function sf(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>GB(i)).join(", ")}]`),TE(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>dm(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>dm(i)).join(",")),`Target(${r})`}(Ga(t))}; limitType=${t.limitType})`}function kE(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of yv(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,o,l){const c=b2(a,o,l);return a.inclusive?c<=0:c<0}(r.startAt,yv(r),i)||r.endAt&&!function(a,o,l){const c=b2(a,o,l);return a.inclusive?c>=0:c>0}(r.endAt,yv(r),i))}(t,e)}function XQ(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XB(t){return(e,n)=>{let r=!1;for(const i of yv(t)){const s=YQ(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function YQ(t,e,n){const r=t.field.isKeyField()?Pe.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?hm(l,c):Ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Md(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return VB(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QQ=new Wt(Pe.comparator);function hl(){return QQ}const YB=new Wt(Pe.comparator);function Ug(...t){let e=YB;for(const n of t)e=e.insert(n.key,n);return e}function QB(t){let e=YB;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ku(){return wv()}function JB(){return wv()}function wv(){return new km(t=>t.toString(),(t,e)=>t.isEqual(e))}const JQ=new Wt(Pe.comparator),ZQ=new or(Pe.comparator);function Ke(...t){let e=ZQ;for(const n of t)e=e.add(n);return e}const eJ=new or(st);function tJ(){return eJ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nx(e)?"-0":e}}function ZB(t){return{integerValue:""+t}}function e$(t,e){return RQ(e)?ZB(e):wR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this._=void 0}}function nJ(t,e,n){return t instanceof Mx?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&pR(s)&&(s=mR(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Qv?n$(t,e):t instanceof Jv?r$(t,e):function(i,s){const a=t$(i,s),o=S2(a)+S2(i.Pe);return CP(a)&&CP(i.Pe)?ZB(o):wR(i.serializer,o)}(t,e)}function rJ(t,e,n){return t instanceof Qv?n$(t,e):t instanceof Jv?r$(t,e):n}function t$(t,e){return t instanceof Zv?function(r){return CP(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Mx extends RE{}class Qv extends RE{constructor(e){super(),this.elements=e}}function n$(t,e){const n=i$(e);for(const r of t.elements)n.some(i=>Xa(i,r))||n.push(r);return{arrayValue:{values:n}}}class Jv extends RE{constructor(e){super(),this.elements=e}}function r$(t,e){let n=i$(e);for(const r of t.elements)n=n.filter(i=>!Xa(i,r));return{arrayValue:{values:n}}}class Zv extends RE{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function S2(t){return sn(t.integerValue||t.doubleValue)}function i$(t){return gR(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iJ{constructor(e,n){this.field=e,this.transform=n}}function sJ(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Qv&&i instanceof Qv||r instanceof Jv&&i instanceof Jv?um(r.elements,i.elements,Xa):r instanceof Zv&&i instanceof Zv?Xa(r.Pe,i.Pe):r instanceof Mx&&i instanceof Mx}(t.transform,e.transform)}class aJ{constructor(e,n){this.version=e,this.transformResults=n}}class ra{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ra}static exists(e){return new ra(void 0,e)}static updateTime(e){return new ra(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pb(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class NE{}function s$(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _R(t.key,ra.none()):new nw(t.key,t.data,ra.none());{const n=t.data,r=pi.empty();let i=new or(ir.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new du(t.key,r,new zi(i.toArray()),ra.none())}}function oJ(t,e,n){t instanceof nw?function(i,s,a){const o=i.value.clone(),l=P2(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof du?function(i,s,a){if(!pb(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=P2(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(a$(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function _v(t,e,n,r){return t instanceof nw?function(s,a,o,l){if(!pb(s.precondition,a))return o;const c=s.value.clone(),u=I2(s.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof du?function(s,a,o,l){if(!pb(s.precondition,a))return o;const c=I2(s.fieldTransforms,l,a),u=a.data;return u.setAll(a$(s)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,a,o){return pb(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function lJ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=t$(r.transform,i||null);s!=null&&(n===null&&(n=pi.empty()),n.set(r.field,s))}return n||null}function T2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&um(r,i,(s,a)=>sJ(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nw extends NE{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class du extends NE{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function a$(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function P2(t,e,n){const r=new Map;pt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,rJ(a,o,n[i]))}return r}function I2(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,nJ(s,a,e))}return r}class _R extends NE{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cJ extends NE{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uJ{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&oJ(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_v(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_v(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=JB();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(i.key)?null:o;const l=s$(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ke())}isEqual(e){return this.batchId===e.batchId&&um(this.mutations,e.mutations,(n,r)=>T2(n,r))&&um(this.baseMutations,e.baseMutations,(n,r)=>T2(n,r))}}class bR{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){pt(e.mutations.length===r.length);let i=function(){return JQ}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new bR(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hJ{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dJ{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn,Ze;function fJ(t){switch(t){default:return Ne();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function o$(t){if(t===void 0)return ul("GRPC error has no .code"),Z.UNKNOWN;switch(t){case cn.OK:return Z.OK;case cn.CANCELLED:return Z.CANCELLED;case cn.UNKNOWN:return Z.UNKNOWN;case cn.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case cn.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case cn.INTERNAL:return Z.INTERNAL;case cn.UNAVAILABLE:return Z.UNAVAILABLE;case cn.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case cn.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case cn.NOT_FOUND:return Z.NOT_FOUND;case cn.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case cn.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case cn.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case cn.ABORTED:return Z.ABORTED;case cn.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case cn.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case cn.DATA_LOSS:return Z.DATA_LOSS;default:return Ne()}}(Ze=cn||(cn={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pJ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mJ=new sd([4294967295,4294967295],0);function C2(t){const e=pJ().encode(t),n=new RB;return n.update(e),new Uint8Array(n.digest())}function k2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new sd([n,r],0),new sd([i,s],0)]}class xR{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bg(`Invalid padding: ${n}`);if(r<0)throw new Bg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bg(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bg(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=sd.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(sd.fromNumber(r)));return i.compare(mJ)===1&&(i=new sd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=C2(e),[r,i]=k2(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new xR(s,i,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const n=C2(e),[r,i]=k2(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Bg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,rw.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new OE(De.min(),i,new Wt(st),hl(),Ke())}}class rw{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rw(r,n,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class l${constructor(e,n){this.targetId=e,this.me=n}}class c${constructor(e,n,r=ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class R2{constructor(){this.fe=0,this.ge=O2(),this.pe=ur.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ke(),n=Ke(),r=Ke();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ne()}}),new rw(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=O2()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class gJ{constructor(e){this.Le=e,this.Be=new Map,this.ke=hl(),this.qe=N2(),this.Qe=new Wt(st)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(RP(s))if(r===0){const a=new Pe(s.path);this.Ue(n,a,Ir.newNoDocument(a,De.min()))}else pt(r===1);else{const a=this.Ye(n);if(a!==r){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,o;try{a=wd(r).toUint8Array()}catch(l){if(l instanceof UB)return cm("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new xR(a,i,s)}catch(l){return cm(l instanceof Bg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const o=this.Je(a);if(o){if(s.current&&RP(o.target)){const l=new Pe(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Ir.newNoDocument(l,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=Ke();this.qe.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new OE(e,n,this.Qe,this.ke,r);return this.ke=hl(),this.qe=N2(),this.Qe=new Wt(st),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new R2,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new or(st),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new R2),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function N2(){return new Wt(Pe.comparator)}function O2(){return new Wt(Pe.comparator)}const vJ={asc:"ASCENDING",desc:"DESCENDING"},yJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wJ={and:"AND",or:"OR"};class _J{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function OP(t,e){return t.useProto3Json||TE(e)?e:{value:e}}function Lx(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function u$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bJ(t,e){return Lx(t,e.toTimestamp())}function qa(t){return pt(!!t),De.fromTimestamp(function(n){const r=Jc(n);return new Pn(r.seconds,r.nanos)}(t))}function AR(t,e){return DP(t,e).canonicalString()}function DP(t,e){const n=function(i){return new jt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function h$(t){const e=jt.fromString(t);return pt(g$(e)),e}function MP(t,e){return AR(t.databaseId,e.path)}function LS(t,e){const n=h$(e);if(n.get(1)!==t.databaseId.projectId)throw new Ae(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ae(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Pe(f$(n))}function d$(t,e){return AR(t.databaseId,e)}function xJ(t){const e=h$(t);return e.length===4?jt.emptyPath():f$(e)}function LP(t){return new jt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function f$(t){return pt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function D2(t,e,n){return{name:MP(t,e),fields:n.value.mapValue.fields}}function AJ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(pt(u===void 0||typeof u=="string"),ur.fromBase64String(u||"")):(pt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),ur.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?Z.UNKNOWN:o$(c.code);return new Ae(u,c.message||"")}(a);n=new c$(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=LS(t,r.document.name),s=qa(r.document.updateTime),a=r.document.createTime?qa(r.document.createTime):De.min(),o=new pi({mapValue:{fields:r.document.fields}}),l=Ir.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new mb(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=LS(t,r.document),s=r.readTime?qa(r.readTime):De.min(),a=Ir.newNoDocument(i,s),o=r.removedTargetIds||[];n=new mb([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=LS(t,r.document),s=r.removedTargetIds||[];n=new mb([],s,i,null)}else{if(!("filter"in e))return Ne();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new dJ(i,s),o=r.targetId;n=new l$(o,a)}}return n}function EJ(t,e){let n;if(e instanceof nw)n={update:D2(t,e.key,e.value)};else if(e instanceof _R)n={delete:MP(t,e.key)};else if(e instanceof du)n={update:D2(t,e.key,e.data),updateMask:OJ(e.fieldMask)};else{if(!(e instanceof cJ))return Ne();n={verify:MP(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof Mx)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Qv)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Jv)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Zv)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:bJ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ne()}(t,e.precondition)),n}function SJ(t,e){return t&&t.length>0?(pt(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?qa(i.updateTime):qa(s);return a.isEqual(De.min())&&(a=qa(s)),new aJ(a,i.transformResults||[])}(n,e))):[]}function TJ(t,e){return{documents:[d$(t,e.path)]}}function PJ(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=d$(t,i);const s=function(c){if(c.length!==0)return m$(Ya.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:af(f.field),direction:kJ(f.dir)}}(u))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=OP(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function IJ(t){let e=xJ(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){pt(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const f=p$(h);return f instanceof Ya&&HB(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(h){return h.map(f=>function(g){return new Dx(of(g.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(h){let f;return f=typeof h=="object"?h.value:h,TE(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new Ox(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new Ox(m,f)}(n.endAt)),GQ(e,i,a,s,o,"F",l,c)}function CJ(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function p$(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=of(n.unaryFilter.field);return En.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=of(n.unaryFilter.field);return En.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=of(n.unaryFilter.field);return En.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=of(n.unaryFilter.field);return En.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(t):t.fieldFilter!==void 0?function(n){return En.create(of(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ya.create(n.compositeFilter.filters.map(r=>p$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ne()}}(n.compositeFilter.op))}(t):Ne()}function kJ(t){return vJ[t]}function RJ(t){return yJ[t]}function NJ(t){return wJ[t]}function af(t){return{fieldPath:t.canonicalString()}}function of(t){return ir.fromServerFormat(t.fieldPath)}function m$(t){return t instanceof En?function(n){if(n.op==="=="){if(_2(n.value))return{unaryFilter:{field:af(n.field),op:"IS_NAN"}};if(w2(n.value))return{unaryFilter:{field:af(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_2(n.value))return{unaryFilter:{field:af(n.field),op:"IS_NOT_NAN"}};if(w2(n.value))return{unaryFilter:{field:af(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:af(n.field),op:RJ(n.op),value:n.value}}}(t):t instanceof Ya?function(n){const r=n.getFilters().map(i=>m$(i));return r.length===1?r[0]:{compositeFilter:{op:NJ(n.op),filters:r}}}(t):Ne()}function OJ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function g$(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n,r,i,s=De.min(),a=De.min(),o=ur.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DJ{constructor(e){this.ct=e}}function MJ(t){const e=IJ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?NP(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LJ{constructor(){this.un=new jJ}addToCollectionParentIndex(e,n){return this.un.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(Qc.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(Qc.min())}updateCollectionGroup(e,n,r){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class jJ{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new or(jt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new or(jt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fm(0)}static kn(){return new fm(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FJ{constructor(){this.changes=new km(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ir.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VJ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UJ{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_v(r.mutation,i,zi.empty(),Pn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ke()){const i=Ku();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Ug();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ku();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ke()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,i){let s=hl();const a=wv(),o=function(){return wv()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof du)?s=s.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),_v(u.mutation,c,u.mutation.getFieldMask(),Pn.now())):a.set(c.key,zi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>a.set(c,u)),n.forEach((c,u)=>{var h;return o.set(c,new VJ(u,(h=a.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,n){const r=wv();let i=new Wt((a,o)=>a-o),s=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||zi.empty();u=o.applyToLocalView(c,u),r.set(l,u);const h=(i.get(o.batchId)||Ke()).add(l);i=i.insert(o.batchId,h)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,h=JB();u.forEach(f=>{if(!s.has(f)){const m=s$(n.get(f),r.get(f));m!==null&&h.set(f,m),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,h))}return ee.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return Pe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qQ(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ee.resolve(Ku());let o=-1,l=s;return a.next(c=>ee.forEach(c,(u,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(u)?ee.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ke())).next(u=>({batchId:o,changes:QB(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Pe(n)).next(r=>{let i=Ug();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Ug();return this.indexManager.getCollectionParents(e,s).next(o=>ee.forEach(o,l=>{const c=function(h,f){return new PE(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,f)=>{a=a.insert(h,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Ir.newInvalidDocument(u)))});let o=Ug();return a.forEach((l,c)=>{const u=s.get(l);u!==void 0&&_v(u.mutation,c,zi.empty(),Pn.now()),kE(n,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BJ{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ee.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:qa(i.createTime)}}(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:MJ(i.bundledQuery),readTime:qa(i.readTime)}}(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $J{constructor(){this.overlays=new Wt(Pe.comparator),this.Ir=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ku();return ee.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),ee.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),ee.resolve()}getOverlaysForCollection(e,n,r){const i=Ku(),s=n.length+1,a=new Pe(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Wt((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Ku(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=Ku(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=i)););return ee.resolve(o)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new hJ(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ke(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zJ{constructor(){this.sessionToken=ur.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this.Tr=new or($n.Er),this.dr=new or($n.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new $n(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new $n(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Pe(new jt([])),r=new $n(n,e),i=new $n(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Pe(new jt([])),r=new $n(n,e),i=new $n(n,e+1);let s=Ke();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new $n(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $n{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Pe.comparator(e.key,n.key)||st(e.wr,n.wr)}static Ar(e,n){return st(e.wr,n.wr)||Pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HJ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new or($n.Er)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new uJ(s,n,r,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new $n(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ee.resolve(a)}lookupMutationBatch(e,n){return ee.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return ee.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $n(n,0),i=new $n(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const o=this.Dr(a.wr);s.push(o)}),ee.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new or(st);return n.forEach(i=>{const s=new $n(i,0),a=new $n(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],o=>{r=r.add(o.wr)})}),ee.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Pe.isDocumentKey(s)||(s=s.child(""));const a=new $n(new Pe(s),0);let o=new or(st);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(o=o.add(l.wr)),!0)},a),ee.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){pt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ee.forEach(n.mutations,i=>{const s=new $n(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new $n(n,0),i=this.br.firstAfterOrEqual(r);return ee.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WJ{constructor(e){this.Mr=e,this.docs=function(){return new Wt(Pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ee.resolve(r?r.document.mutableCopy():Ir.newInvalidDocument(n))}getEntries(e,n){let r=hl();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ir.newInvalidDocument(i))}),ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hl();const a=n.path,o=new Pe(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||PQ(TQ(u),r)<=0||(i.has(u.key)||kE(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return ee.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ne()}Or(e,n){return ee.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new GJ(this)}getSize(e){return ee.resolve(this.size)}}class GJ extends FJ{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ee.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qJ{constructor(e){this.persistence=e,this.Nr=new km(n=>vR(n),yR),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ER,this.targetCount=0,this.kr=fm.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ee.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new fm(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Kn(n),ee.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),ee.waitFor(s).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ee.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ee.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),ee.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ee.resolve(r)}containsKey(e,n){return ee.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KJ{constructor(e,n){this.qr={},this.overlays={},this.Qr=new fR(0),this.Kr=!1,this.Kr=!0,this.$r=new zJ,this.referenceDelegate=e(this),this.Ur=new qJ(this),this.indexManager=new LJ,this.remoteDocumentCache=function(i){return new WJ(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new DJ(n),this.Gr=new BJ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $J,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new HJ(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ye("MemoryPersistence","Starting transaction:",e);const i=new XJ(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return ee.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class XJ extends CQ{constructor(e){super(),this.currentSequenceNumber=e}}class SR{constructor(e){this.persistence=e,this.Jr=new ER,this.Yr=null}static Zr(e){return new SR(e)}get Xr(){if(this.Yr)return this.Yr;throw Ne()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ee.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.Xr,r=>{const i=Pe.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,De.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ee.or([()=>ee.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ke(),i=Ke();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new TR(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YJ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QJ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return BK()?8:kQ(Dr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new YJ;return this.Xi(e,n,a).next(o=>{if(s.result=o,this.zi)return this.es(e,n,a,o.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(_g()<=Qe.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",sf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ee.resolve()):(_g()<=Qe.DEBUG&&ye("QueryEngine","Query:",sf(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(_g()<=Qe.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",sf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ga(n))):ee.resolve())}Yi(e,n){if(E2(n))return ee.resolve(null);let r=Ga(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=NP(n,null,"F"),r=Ga(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Ke(...s);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,o);return this.ns(n,c,a,l.readTime)?this.Yi(e,NP(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return E2(n)||i.isEqual(De.min())?ee.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?ee.resolve(null):(_g()<=Qe.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sf(n)),this.rs(e,a,n,SQ(i,-1)).next(o=>o))})}ts(e,n){let r=new or(XB(e));return n.forEach((i,s)=>{kE(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return _g()<=Qe.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",sf(n)),this.Ji.getDocumentsMatchingQuery(e,n,Qc.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JJ{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Wt(st),this._s=new km(s=>vR(s),yR),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UJ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function ZJ(t,e,n,r){return new JJ(t,e,n,r)}async function v$(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=Ke();for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function eZ(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const h=c.batch,f=h.keys();let m=ee.resolve();return f.forEach(g=>{m=m.next(()=>u.getEntry(l,g)).next(v=>{const y=c.docVersions.get(g);pt(y!==null),v.version.compareTo(y)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=Ke();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function y$(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function tZ(t,e){const n=Me(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];e.targetChanges.forEach((u,h)=>{const f=i.get(h);if(!f)return;o.push(n.Ur.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,u.addedDocuments,h)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(ur.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(h,m),function(v,y,w){return v.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,m,u)&&o.push(n.Ur.updateTargetData(s,m))});let l=hl(),c=Ke();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),o.push(nZ(s,a,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(De.min())){const u=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(u)}return ee.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function nZ(t,e,n){let r=Ke(),i=Ke();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=hl();return n.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(De.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):ye("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:i}})}function rZ(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function iZ(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,ee.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new Rc(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function jP(t,e,n){const r=Me(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!tw(a))throw a;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function M2(t,e,n){const r=Me(t);let i=De.min(),s=Ke();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const h=Me(l),f=h._s.get(u);return f!==void 0?ee.resolve(h.os.get(f)):h.Ur.getTargetData(c,u)}(r,a,Ga(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:De.min(),n?s:Ke())).next(o=>(sZ(r,XQ(e),o),{documents:o,Ts:s})))}function sZ(t,e,n){let r=t.us.get(e)||De.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class L2{constructor(){this.activeTargetIds=tJ()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aZ{constructor(){this.so=new L2,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new L2,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S_=null;function jS(){return S_===null?S_=function(){return 268435456+Math.round(2147483648*Math.random())}():S_++,"0x"+S_.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="WebChannelConnection";class uZ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const o=jS(),l=this.xo(n,r.toUriEncodedString());ye("RestConnection",`Sending RPC '${n}' ${o}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,a),this.No(n,l,c,i).then(u=>(ye("RestConnection",`Received RPC '${n}' ${o}: `,u),u),u=>{throw cm("RestConnection",`RPC '${n}' ${o} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(n,r,i,s,a,o){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cm}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=lZ[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=jS();return new Promise((a,o)=>{const l=new NB;l.setWithCredentials(!0),l.listenOnce(OB.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case db.NO_ERROR:const u=l.getResponseJson();ye(gr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),a(u);break;case db.TIMEOUT:ye(gr,`RPC '${e}' ${s} timed out`),o(new Ae(Z.DEADLINE_EXCEEDED,"Request time out"));break;case db.HTTP_ERROR:const h=l.getStatus();if(ye(gr,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const g=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(w)>=0?w:Z.UNKNOWN}(m.status);o(new Ae(g,m.message))}else o(new Ae(Z.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Ae(Z.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{ye(gr,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ye(gr,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=jS(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=LB(),o=MB(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");ye(gr,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=a.createWebChannel(u,l);let f=!1,m=!1;const g=new cZ({Io:y=>{m?ye(gr,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(f||(ye(gr,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),ye(gr,`RPC '${e}' stream ${i} sending:`,y),h.send(y))},To:()=>h.close()}),v=(y,w,b)=>{y.listen(w,A=>{try{b(A)}catch(I){setTimeout(()=>{throw I},0)}})};return v(h,Vg.EventType.OPEN,()=>{m||(ye(gr,`RPC '${e}' stream ${i} transport opened.`),g.yo())}),v(h,Vg.EventType.CLOSE,()=>{m||(m=!0,ye(gr,`RPC '${e}' stream ${i} transport closed`),g.So())}),v(h,Vg.EventType.ERROR,y=>{m||(m=!0,cm(gr,`RPC '${e}' stream ${i} transport errored:`,y),g.So(new Ae(Z.UNAVAILABLE,"The operation could not be completed")))}),v(h,Vg.EventType.MESSAGE,y=>{var w;if(!m){const b=y.data[0];pt(!!b);const A=b,I=A.error||((w=A[0])===null||w===void 0?void 0:w.error);if(I){ye(gr,`RPC '${e}' stream ${i} received error:`,I);const k=I.status;let M=function(O){const j=cn[O];if(j!==void 0)return o$(j)}(k),P=I.message;M===void 0&&(M=Z.INTERNAL,P="Unknown error status: "+k+" with message "+I.message),m=!0,g.So(new Ae(M,P)),h.close()}else ye(gr,`RPC '${e}' stream ${i} received:`,b),g.bo(b)}}),v(o,DB.STAT_EVENT,y=>{y.stat===PP.PROXY?ye(gr,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===PP.NOPROXY&&ye(gr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function FS(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t){return new _J(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ye("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(e,n,r,i,s,a,o,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new w$(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(ul(n.toString()),ul("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Ae(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hZ extends _${constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=AJ(this.serializer,e),r=function(s){if(!("targetChange"in s))return De.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?De.min():a.readTime?qa(a.readTime):De.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=LP(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=RP(l)?{documents:TJ(s,l)}:{query:PJ(s,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=u$(s,a.resumeToken);const c=OP(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(De.min())>0){o.readTime=Lx(s,a.snapshotVersion.toTimestamp());const c=OP(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=CJ(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=LP(this.serializer),n.removeTarget=e,this.a_(n)}}class dZ extends _${constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pt(!!e.streamToken),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=SJ(e.writeResults,e.commitTime),r=qa(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=LP(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>EJ(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ae(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,DP(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ae(Z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,DP(n,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(Z.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class pZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ul(n),this.D_=!1):ye("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Ld(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Me(l);c.L_.add(4),await iw(c),c.q_.set("Unknown"),c.L_.delete(4),await ME(c)}(this))})}),this.q_=new pZ(r,i)}}async function ME(t){if(Ld(t))for(const e of t.B_)await e(!0)}async function iw(t){for(const e of t.B_)await e(!1)}function b$(t,e){const n=Me(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),kR(n)?CR(n):Rm(n).r_()&&IR(n,e))}function PR(t,e){const n=Me(t),r=Rm(n);n.N_.delete(e),r.r_()&&x$(n,e),n.N_.size===0&&(r.r_()?r.o_():Ld(n)&&n.q_.set("Unknown"))}function IR(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Rm(t).A_(e)}function x$(t,e){t.Q_.xe(e),Rm(t).R_(e)}function CR(t){t.Q_=new gJ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Rm(t).start(),t.q_.v_()}function kR(t){return Ld(t)&&!Rm(t).n_()&&t.N_.size>0}function Ld(t){return Me(t).L_.size===0}function A$(t){t.Q_=void 0}async function gZ(t){t.q_.set("Online")}async function vZ(t){t.N_.forEach((e,n)=>{IR(t,e)})}async function yZ(t,e){A$(t),kR(t)?(t.q_.M_(e),CR(t)):t.q_.set("Unknown")}async function wZ(t,e,n){if(t.q_.set("Online"),e instanceof c$&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))}(t,e)}catch(r){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jx(t,r)}else if(e instanceof mb?t.Q_.Ke(e):e instanceof l$?t.Q_.He(e):t.Q_.We(e),!n.isEqual(De.min()))try{const r=await y$(t.localStore);n.compareTo(r)>=0&&await function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(ur.EMPTY_BYTE_STRING,u.snapshotVersion)),x$(s,l);const h=new Rc(u.target,l,c,u.sequenceNumber);IR(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){ye("RemoteStore","Failed to raise snapshot:",r),await jx(t,r)}}async function jx(t,e,n){if(!tw(e))throw e;t.L_.add(1),await iw(t),t.q_.set("Offline"),n||(n=()=>y$(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ye("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ME(t)})}function E$(t,e){return e().catch(n=>jx(t,n,e))}async function LE(t){const e=Me(t),n=Zc(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_Z(e);)try{const i=await rZ(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,bZ(e,i)}catch(i){await jx(e,i)}S$(e)&&T$(e)}function _Z(t){return Ld(t)&&t.O_.length<10}function bZ(t,e){t.O_.push(e);const n=Zc(t);n.r_()&&n.V_&&n.m_(e.mutations)}function S$(t){return Ld(t)&&!Zc(t).n_()&&t.O_.length>0}function T$(t){Zc(t).start()}async function xZ(t){Zc(t).p_()}async function AZ(t){const e=Zc(t);for(const n of t.O_)e.m_(n.mutations)}async function EZ(t,e,n){const r=t.O_.shift(),i=bR.from(r,e,n);await E$(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await LE(t)}async function SZ(t,e){e&&Zc(t).V_&&await async function(r,i){if(function(a){return fJ(a)&&a!==Z.ABORTED}(i.code)){const s=r.O_.shift();Zc(r).s_(),await E$(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await LE(r)}}(t,e),S$(t)&&T$(t)}async function F2(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const r=Ld(n);n.L_.add(3),await iw(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ME(n)}async function TZ(t,e){const n=Me(t);e?(n.L_.delete(2),await ME(n)):e||(n.L_.add(2),await iw(n),n.q_.set("Unknown"))}function Rm(t){return t.K_||(t.K_=function(n,r,i){const s=Me(n);return s.w_(),new hZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:gZ.bind(null,t),Ro:vZ.bind(null,t),mo:yZ.bind(null,t),d_:wZ.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),kR(t)?CR(t):t.q_.set("Unknown")):(await t.K_.stop(),A$(t))})),t.K_}function Zc(t){return t.U_||(t.U_=function(n,r,i){const s=Me(n);return s.w_(),new dZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:xZ.bind(null,t),mo:SZ.bind(null,t),f_:AZ.bind(null,t),g_:EZ.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await LE(t)):(await t.U_.stop(),t.O_.length>0&&(ye("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Jo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,o=new RR(e,n,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function NR(t,e){if(ul("AsyncQueue",`${e}: ${t}`),tw(t))return new Ae(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Pe.comparator(n.key,r.key):(n,r)=>Pe.comparator(n.key,r.key),this.keyedMap=Ug(),this.sortedSet=new Wt(this.comparator)}static emptySet(e){return new Hf(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Hf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Hf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this.W_=new Wt(Pe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ne():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class pm{constructor(e,n,r,i,s,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new pm(e,n,Hf.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&CE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZ{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class IZ{constructor(){this.queries=U2(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Me(n),s=i.queries;i.queries=U2(),s.forEach((a,o)=>{for(const l of o.j_)l.onError(r)})})(this,new Ae(Z.ABORTED,"Firestore shutting down"))}}function U2(){return new km(t=>KB(t),CE)}async function OR(t,e){const n=Me(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new PZ,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const o=NR(a,`Initialization of query '${sf(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&MR(n)}async function DR(t,e){const n=Me(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function CZ(t,e){const n=Me(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(r=!0);a.z_=i}}r&&MR(n)}function kZ(t,e,n){const r=Me(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function MR(t){t.Y_.forEach(e=>{e.next()})}var FP,B2;(B2=FP||(FP={})).ea="default",B2.Cache="cache";class LR{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new pm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=pm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==FP.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e){this.key=e}}class I${constructor(e){this.key=e}}class RZ{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ke(),this.mutatedKeys=Ke(),this.Aa=XB(e),this.Ra=new Hf(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new V2,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const f=i.get(u),m=kE(this.query,h)?h:null,g=!!f&&this.mutatedKeys.has(f.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let y=!1;f&&m?f.data.isEqual(m.data)?g!==v&&(r.track({type:3,doc:m}),y=!0):this.ga(f,m)||(r.track({type:2,doc:m}),y=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(o=!0)):!f&&m?(r.track({type:0,doc:m}),y=!0):f&&!m&&(r.track({type:1,doc:f}),y=!0,(l||c)&&(o=!0)),y&&(m?(a=a.add(m),s=v?s.add(u):s.delete(u)):(a=a.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:a,fa:r,ns:o,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,h)=>function(m,g){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return v(m)-v(g)}(u.type,h.type)||this.Aa(u.doc,h.doc)),this.pa(r),i=i!=null&&i;const o=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new pm(this.query,e.Ra,s,a,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new V2,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ke(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new I$(r))}),this.da.forEach(r=>{e.has(r)||n.push(new P$(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ke();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return pm.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class NZ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OZ{constructor(e){this.key=e,this.va=!1}}class DZ{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new km(o=>KB(o),CE),this.Ma=new Map,this.xa=new Set,this.Oa=new Wt(Pe.comparator),this.Na=new Map,this.La=new ER,this.Ba={},this.ka=new Map,this.qa=fm.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function MZ(t,e,n=!0){const r=D$(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await C$(r,e,n,!0),i}async function LZ(t,e){const n=D$(t);await C$(n,e,!0,!1)}async function C$(t,e,n,r){const i=await iZ(t.localStore,Ga(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await jZ(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&b$(t.remoteStore,i),o}async function jZ(t,e,n,r,i){t.Ka=(h,f,m)=>async function(v,y,w,b){let A=y.view.ma(w);A.ns&&(A=await M2(v.localStore,y.query,!1).then(({documents:P})=>y.view.ma(P,A)));const I=b&&b.targetChanges.get(y.targetId),k=b&&b.targetMismatches.get(y.targetId)!=null,M=y.view.applyChanges(A,v.isPrimaryClient,I,k);return z2(v,y.targetId,M.wa),M.snapshot}(t,h,f,m);const s=await M2(t.localStore,e,!0),a=new RZ(e,s.Ts),o=a.ma(s.documents),l=rw.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=a.applyChanges(o,t.isPrimaryClient,l);z2(t,n,c.wa);const u=new NZ(e,n,a);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function FZ(t,e,n){const r=Me(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!CE(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await jP(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&PR(r.remoteStore,i.targetId),VP(r,i.targetId)}).catch(ew)):(VP(r,i.targetId),await jP(r.localStore,i.targetId,!0))}async function VZ(t,e){const n=Me(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),PR(n.remoteStore,r.targetId))}async function UZ(t,e,n){const r=qZ(t);try{const i=await function(a,o){const l=Me(a),c=Pn.now(),u=o.reduce((m,g)=>m.add(g.key),Ke());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=hl(),v=Ke();return l.cs.getEntries(m,u).next(y=>{g=y,g.forEach((w,b)=>{b.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,g)).next(y=>{h=y;const w=[];for(const b of o){const A=lJ(b,h.get(b.key).overlayedDocument);A!=null&&w.push(new du(b.key,A,BB(A.value.mapValue),ra.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,o)}).next(y=>{f=y;const w=y.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(m,y.batchId,w)})}).then(()=>({batchId:f.batchId,changes:QB(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new Wt(st)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(r,i.batchId,n),await sw(r,i.changes),await LE(r.remoteStore)}catch(i){const s=NR(i,"Failed to persist write");n.reject(s)}}async function k$(t,e){const n=Me(t);try{const r=await tZ(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?pt(a.va):i.removedDocuments.size>0&&(pt(a.va),a.va=!1))}),await sw(n,r,e)}catch(r){await ew(r)}}function $2(t,e,n){const r=Me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=Me(a);l.onlineState=o;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.j_)f.Z_(o)&&(c=!0)}),c&&MR(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BZ(t,e,n){const r=Me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new Wt(Pe.comparator);a=a.insert(s,Ir.newNoDocument(s,De.min()));const o=Ke().add(s),l=new OE(De.min(),new Map,new Wt(st),a,o);await k$(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),jR(r)}else await jP(r.localStore,e,!1).then(()=>VP(r,e,n)).catch(ew)}async function $Z(t,e){const n=Me(t),r=e.batch.batchId;try{const i=await eZ(n.localStore,e);N$(n,r,null),R$(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sw(n,i)}catch(i){await ew(i)}}async function zZ(t,e,n){const r=Me(t);try{const i=await function(a,o){const l=Me(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(h=>(pt(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);N$(r,e,n),R$(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sw(r,i)}catch(i){await ew(i)}}function R$(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function N$(t,e,n){const r=Me(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function VP(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||O$(t,r)})}function O$(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(PR(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),jR(t))}function z2(t,e,n){for(const r of n)r instanceof P$?(t.La.addReference(r.key,e),HZ(t,r)):r instanceof I$?(ye("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||O$(t,r.key)):Ne()}function HZ(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ye("SyncEngine","New document in limbo: "+n),t.xa.add(r),jR(t))}function jR(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Pe(jt.fromString(e)),r=t.qa.next();t.Na.set(r,new OZ(n)),t.Oa=t.Oa.insert(n,r),b$(t.remoteStore,new Rc(Ga(IE(n.path)),r,"TargetPurposeLimboResolution",fR.oe))}}async function sw(t,e,n){const r=Me(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,l)=>{a.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=TR.Wi(l.targetId,c);s.push(h)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(l,c){const u=Me(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ee.forEach(c,f=>ee.forEach(f.$i,m=>u.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>ee.forEach(f.Ui,m=>u.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!tw(h))throw h;ye("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=u.os.get(f),g=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(g);u.os=u.os.insert(f,v)}}}(r.localStore,s))}async function WZ(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const r=await v$(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(o=>{o.forEach(l=>{l.reject(new Ae(Z.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sw(n,r.hs)}}function GZ(t,e){const n=Me(t),r=n.Na.get(e);if(r&&r.va)return Ke().add(r.key);{let i=Ke();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const o=n.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}function D$(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=k$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BZ.bind(null,e),e.Ca.d_=CZ.bind(null,e.eventManager),e.Ca.$a=kZ.bind(null,e.eventManager),e}function qZ(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$Z.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zZ.bind(null,e),e}class Fx{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=DE(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return ZJ(this.persistence,new QJ,e.initialUser,this.serializer)}Ga(e){return new KJ(SR.Zr,this.serializer)}Wa(e){return new aZ}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fx.provider={build:()=>new Fx};class UP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WZ.bind(null,this.syncEngine),await TZ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IZ}()}createDatastore(e){const n=DE(e.databaseInfo.databaseId),r=function(s){return new uZ(s)}(e.databaseInfo);return function(s,a,o,l){return new fZ(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,o){return new mZ(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>$2(this.syncEngine,n,0),function(){return j2.D()?new j2:new oZ}())}createSyncEngine(e,n){return function(i,s,a,o,l,c,u){const h=new DZ(i,s,a,o,l,c);return u&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Me(i);ye("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await iw(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}UP.provider={build:()=>new UP};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ul("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KZ{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Sr.UNAUTHENTICATED,this.clientId=FB.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{ye("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ye("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=NR(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function VS(t,e){t.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await v$(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function H2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await XZ(t);ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>F2(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>F2(e.remoteStore,i)),t._onlineComponents=e}async function XZ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await VS(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;cm("Error using user provided cache. Falling back to memory cache: "+n),await VS(t,new Fx)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),await VS(t,new Fx);return t._offlineComponents}async function M$(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),await H2(t,t._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),await H2(t,new UP))),t._onlineComponents}function YZ(t){return M$(t).then(e=>e.syncEngine)}async function Vx(t){const e=await M$(t),n=e.eventManager;return n.onListen=MZ.bind(null,e.syncEngine),n.onUnlisten=FZ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=LZ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VZ.bind(null,e.syncEngine),n}function QZ(t,e,n={}){const r=new Jo;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const u=new FR({next:f=>{u.Za(),a.enqueueAndForget(()=>DR(s,h));const m=f.docs.has(o);!m&&f.fromCache?c.reject(new Ae(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new Ae(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new LR(IE(o.path),u,{includeMetadataChanges:!0,_a:!0});return OR(s,h)}(await Vx(t),t.asyncQueue,e,n,r)),r.promise}function JZ(t,e,n={}){const r=new Jo;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const u=new FR({next:f=>{u.Za(),a.enqueueAndForget(()=>DR(s,h)),f.fromCache&&l.source==="server"?c.reject(new Ae(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new LR(o,u,{includeMetadataChanges:!0,_a:!0});return OR(s,h)}(await Vx(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L$(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j$(t,e,n){if(!n)throw new Ae(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ZZ(t,e,n,r){if(e===!0&&r===!0)throw new Ae(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function G2(t){if(!Pe.isDocumentKey(t))throw new Ae(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function q2(t){if(Pe.isDocumentKey(t))throw new Ae(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function VR(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne()}function Gi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ae(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=VR(t);throw new Ae(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ae(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=L$((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jE{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K2({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K2(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gQ;switch(r.type){case"firstParty":return new _Q(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ae(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=W2.get(n);r&&(ye("ComponentProvider","Removing Datastore"),W2.delete(n),r.terminate())}(this),Promise.resolve()}}function eee(t,e,n,r={}){var i;const s=(t=Gi(t,jE))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&cm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let o,l;if(typeof r.mockUserToken=="string")o=r.mockUserToken,l=Sr.MOCK_USER;else{o=WU(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Ae(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Sr(c)}t._authCredentials=new vQ(new jB(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new aw(this.firestore,e,this._query)}}class Kr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kr(this.firestore,e,this._key)}}class Wc extends aw{constructor(e,n,r){super(e,n,IE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kr(this.firestore,null,new Pe(e))}withConverter(e){return new Wc(this.firestore,e,this._path)}}function $u(t,e,...n){if(t=mt(t),j$("collection","path",e),t instanceof jE){const r=jt.fromString(e,...n);return q2(r),new Wc(t,null,r)}{if(!(t instanceof Kr||t instanceof Wc))throw new Ae(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(jt.fromString(e,...n));return q2(r),new Wc(t.firestore,null,r)}}function Fe(t,e,...n){if(t=mt(t),arguments.length===1&&(e=FB.newId()),j$("doc","path",e),t instanceof jE){const r=jt.fromString(e,...n);return G2(r),new Kr(t,null,new Pe(r))}{if(!(t instanceof Kr||t instanceof Wc))throw new Ae(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(jt.fromString(e,...n));return G2(r),new Kr(t.firestore,t instanceof Wc?t.converter:null,new Pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new w$(this,"async_queue_retry"),this.Vu=()=>{const r=FS();r&&ye("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=FS();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=FS();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Jo;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!tw(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw ul("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=RR.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Y2(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class eu extends jE{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new X2,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new X2(e),this._firestoreClient=void 0,await e}}}function tee(t,e){const n=typeof t=="object"?t:bE(),r=typeof t=="string"?t:"(default)",i=Y0(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=eR("firestore");s&&eee(i,...s)}return i}function FE(t){if(t._terminated)throw new Ae(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nee(t),t._firestoreClient}function nee(t){var e,n,r;const i=t._freezeSettings(),s=function(o,l,c,u){return new OQ(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,L$(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new KZ(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mm(ur.fromBase64String(e))}catch(n){throw new Ae(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mm(ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ree=/^__.*__$/;class iee{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new du(e,this.data,this.fieldMask,n,this.fieldTransforms):new nw(e,this.data,n,this.fieldTransforms)}}class F${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new du(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function V$(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class $R{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new $R(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ux(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(V$(this.Cu)&&ree.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class see{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||DE(e)}Qu(e,n,r,i=!1){return new $R({Cu:e,methodName:n,qu:r,path:ir.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function U$(t){const e=t._freezeSettings(),n=DE(t._databaseId);return new see(t._databaseId,!!e.ignoreUndefinedProperties,n)}function aee(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);HR("Data must be an object, but it was:",a,r);const o=B$(r,a);let l,c;if(s.merge)l=new zi(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const f=BP(e,h,n);if(!a.contains(f))throw new Ae(Z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);z$(u,f)||u.push(f)}l=new zi(u),c=a.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=a.fieldTransforms;return new iee(new pi(o),l,c)}class BE extends UE{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof BE}}class zR extends UE{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Zv(e.serializer,e$(e.serializer,this.$u));return new iJ(e.path,n)}isEqual(e){return e instanceof zR&&this.$u===e.$u}}function oee(t,e,n,r){const i=t.Qu(1,e,n);HR("Data must be an object, but it was:",i,r);const s=[],a=pi.empty();Md(r,(l,c)=>{const u=WR(e,l,n);c=mt(c);const h=i.Nu(u);if(c instanceof BE)s.push(u);else{const f=$E(c,h);f!=null&&(s.push(u),a.set(u,f))}});const o=new zi(s);return new F$(a,o,i.fieldTransforms)}function lee(t,e,n,r,i,s){const a=t.Qu(1,e,n),o=[BP(e,r,n)],l=[i];if(s.length%2!=0)throw new Ae(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)o.push(BP(e,s[f])),l.push(s[f+1]);const c=[],u=pi.empty();for(let f=o.length-1;f>=0;--f)if(!z$(c,o[f])){const m=o[f];let g=l[f];g=mt(g);const v=a.Nu(m);if(g instanceof BE)c.push(m);else{const y=$E(g,v);y!=null&&(c.push(m),u.set(m,y))}}const h=new zi(c);return new F$(u,h,a.fieldTransforms)}function $E(t,e){if($$(t=mt(t)))return HR("Unsupported field value:",e,t),B$(t,e);if(t instanceof UE)return function(r,i){if(!V$(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=$E(o,i.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return e$(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Pn.fromDate(r);return{timestampValue:Lx(i.serializer,s)}}if(r instanceof Pn){const s=new Pn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lx(i.serializer,s)}}if(r instanceof UR)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mm)return{bytesValue:u$(i.serializer,r._byteString)};if(r instanceof Kr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:AR(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof BR)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return wR(o.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${VR(r)}`)}(t,e)}function B$(t,e){const n={};return VB(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Md(t,(r,i)=>{const s=$E(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function $$(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pn||t instanceof UR||t instanceof mm||t instanceof Kr||t instanceof UE||t instanceof BR)}function HR(t,e,n){if(!$$(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=VR(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function BP(t,e,n){if((e=mt(e))instanceof VE)return e._internalPath;if(typeof e=="string")return WR(t,e);throw Ux("Field path arguments must be of type string or ",t,!1,void 0,n)}const cee=new RegExp("[~\\*/\\[\\]]");function WR(t,e,n){if(e.search(cee)>=0)throw Ux(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new VE(...e.split("."))._internalPath}catch{throw Ux(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ux(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Ae(Z.INVALID_ARGUMENT,o+t+l)}function z$(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(W$("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uee extends H${data(){return super.data()}}function W$(t,e){return typeof e=="string"?WR(t,e):e instanceof VE?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ae(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hee{convertValue(e,n="none"){switch(_d(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Md(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>sn(a.doubleValue));return new BR(s)}convertGeoPoint(e){return new UR(sn(e.latitude),sn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mR(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kv(e));default:return null}}convertTimestamp(e){const n=Jc(e);return new Pn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=jt.fromString(e);pt(g$(r));const i=new Xv(r.get(1),r.get(3)),s=new Pe(r.popFirst(5));return i.isEqual(n)||ul(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dee(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class q$ extends H${constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new gb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(W$("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class gb extends q${data(e={}){return super.data(e)}}class K${constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new $g(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new gb(this._firestore,this._userDataWriter,r.key,r,new $g(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new gb(i._firestore,i._userDataWriter,o.doc.key,o.doc,new $g(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new gb(i._firestore,i._userDataWriter,o.doc.key,o.doc,new $g(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:fee(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function fee(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t){t=Gi(t,Kr);const e=Gi(t.firestore,eu);return QZ(FE(e),t._key).then(n=>X$(e,t,n))}class GR extends hee{constructor(e){super(),this.firestore=e}convertBytes(e){return new mm(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kr(this.firestore,null,n)}}function $P(t){t=Gi(t,aw);const e=Gi(t.firestore,eu),n=FE(e),r=new GR(e);return G$(t._query),JZ(n,t._query).then(i=>new K$(e,r,t,i))}function ja(t,e,n){t=Gi(t,Kr);const r=Gi(t.firestore,eu),i=dee(t.converter,e,n);return qR(r,[aee(U$(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ra.none())])}function Nc(t,e,n,...r){t=Gi(t,Kr);const i=Gi(t.firestore,eu),s=U$(i);let a;return a=typeof(e=mt(e))=="string"||e instanceof VE?lee(s,"updateDoc",t._key,e,n,r):oee(s,"updateDoc",t._key,e),qR(i,[a.toMutation(t._key,ra.exists(!0))])}function jl(t){return qR(Gi(t.firestore,eu),[new _R(t._key,ra.none())])}function Xu(t,...e){var n,r,i;t=mt(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Y2(e[a])||(s=e[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Y2(e[a])){const h=e[a];e[a]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[a+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[a+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,u;if(t instanceof Kr)c=Gi(t.firestore,eu),u=IE(t._key.path),l={next:h=>{e[a]&&e[a](X$(c,t,h))},error:e[a+1],complete:e[a+2]};else{const h=Gi(t,aw);c=Gi(h.firestore,eu),u=h._query;const f=new GR(c);l={next:m=>{e[a]&&e[a](new K$(c,f,h,m))},error:e[a+1],complete:e[a+2]},G$(t._query)}return function(f,m,g,v){const y=new FR(v),w=new LR(m,y,g);return f.asyncQueue.enqueueAndForget(async()=>OR(await Vx(f),w)),()=>{y.Za(),f.asyncQueue.enqueueAndForget(async()=>DR(await Vx(f),w))}}(FE(c),u,o,l)}function qR(t,e){return function(r,i){const s=new Jo;return r.asyncQueue.enqueueAndForget(async()=>UZ(await YZ(r),i,s)),s.promise}(FE(t),e)}function X$(t,e,n){const r=n.docs.get(e._key),i=new GR(t);return new q$(t,i,e._key,r,new $g(n.hasPendingWrites,n.fromCache),e.converter)}function Q2(t){return new zR("increment",t)}(function(e,n=!0){(function(i){Cm=i})(Od),Yc(new ol("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new eu(new yQ(r.getProvider("auth-internal")),new xQ(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ae(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xv(c.options.projectId,u)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),As(p2,"4.7.3",e),As(p2,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$="firebasestorage.googleapis.com",Q$="storageBucket",pee=2*60*1e3,mee=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt extends da{constructor(e,n,r=0){super(US(e),`Firebase Storage: ${n} (${US(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return US(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qt||(Qt={}));function US(t){return"storage/"+t}function KR(){const t="An unknown error occurred, please check the error payload for server response.";return new Jt(Qt.UNKNOWN,t)}function gee(t){return new Jt(Qt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function vee(t){return new Jt(Qt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yee(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Jt(Qt.UNAUTHENTICATED,t)}function wee(){return new Jt(Qt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _ee(t){return new Jt(Qt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function bee(){return new Jt(Qt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xee(){return new Jt(Qt.CANCELED,"User canceled the upload/download.")}function Aee(t){return new Jt(Qt.INVALID_URL,"Invalid URL '"+t+"'.")}function Eee(t){return new Jt(Qt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function See(){return new Jt(Qt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Q$+"' property when initializing the app?")}function Tee(){return new Jt(Qt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Pee(){return new Jt(Qt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Iee(t){return new Jt(Qt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zP(t){return new Jt(Qt.INVALID_ARGUMENT,t)}function J$(){return new Jt(Qt.APP_DELETED,"The Firebase app was deleted.")}function Cee(t){return new Jt(Qt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bv(t,e){return new Jt(Qt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function bg(t){throw new Jt(Qt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Wr.makeFromUrl(e,n)}catch{return new Wr(e,"")}if(r.path==="")return r;throw Eee(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${u}/b/${i}/o${f}`,"i"),g={bucket:1,path:3},v=n===Y$?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",w=new RegExp(`^https?://${v}/${i}/${y}`,"i"),A=[{regex:o,indices:l,postModify:s},{regex:m,indices:g,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<A.length;I++){const k=A[I],M=k.regex.exec(e);if(M){const P=M[k.indices.bucket];let C=M[k.indices.path];C||(C=""),r=new Wr(P,C),k.postModify(r);break}}if(r==null)throw Aee(e);return r}}class kee{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ree(t,e,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function u(...y){c||(c=!0,e.apply(null,y))}function h(y){i=setTimeout(()=>{i=null,t(m,l())},y)}function f(){s&&clearTimeout(s)}function m(y,...w){if(c){f();return}if(y){f(),u.call(null,y,...w);return}if(l()||a){f(),u.call(null,y,...w);return}r<64&&(r*=2);let A;o===1?(o=2,A=0):A=(r+Math.random())*1e3,h(A)}let g=!1;function v(y){g||(g=!0,f(),!c&&(i!==null?(y||(o=2),clearTimeout(i),h(0)):y||(o=1)))}return h(0),s=setTimeout(()=>{a=!0,v(!0)},n),v}function Nee(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oee(t){return t!==void 0}function Dee(t){return typeof t=="object"&&!Array.isArray(t)}function XR(t){return typeof t=="string"||t instanceof String}function J2(t){return YR()&&t instanceof Blob}function YR(){return typeof Blob<"u"}function HP(t,e,n,r){if(r<e)throw zP(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw zP(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Z$(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ad;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ad||(ad={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mee(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lee{constructor(e,n,r,i,s,a,o,l,c,u,h,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new T_(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===ad.NO_ERROR,l=s.getStatus();if(!o||Mee(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===ad.ABORT;r(!1,new T_(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new T_(c,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());Oee(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=KR();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?J$():xee();a(l)}else{const l=bee();a(l)}};this.canceled_?n(!1,new T_(!1,null,!0)):this.backoffId_=Ree(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Nee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class T_{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function jee(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Fee(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Vee(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Uee(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Bee(t,e,n,r,i,s,a=!0){const o=Z$(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return Vee(c,e),jee(c,n),Fee(c,s),Uee(c,r),new Lee(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ee(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function zee(...t){const e=$ee();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(YR())return new Blob(t);throw new Jt(Qt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Hee(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wee(t){if(typeof atob>"u")throw Iee("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class BS{constructor(e,n){this.data=e,this.contentType=n||null}}function Gee(t,e){switch(t){case Ua.RAW:return new BS(ez(e));case Ua.BASE64:case Ua.BASE64URL:return new BS(tz(t,e));case Ua.DATA_URL:return new BS(Kee(e),Xee(e))}throw KR()}function ez(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=t.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function qee(t){let e;try{e=decodeURIComponent(t)}catch{throw bv(Ua.DATA_URL,"Malformed data URL.")}return ez(e)}function tz(t,e){switch(t){case Ua.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw bv(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ua.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw bv(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Wee(e)}catch(i){throw i.message.includes("polyfill")?i:bv(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class nz{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw bv(Ua.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Yee(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Kee(t){const e=new nz(t);return e.base64?tz(Ua.BASE64,e.rest):qee(e.rest)}function Xee(t){return new nz(t).contentType}function Yee(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n){let r=0,i="";J2(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(J2(this.data_)){const r=this.data_,i=Hee(r,e,n);return i===null?null:new Yl(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Yl(r,!0)}}static getBlob(...e){if(YR()){const n=e.map(r=>r instanceof Yl?r.data_:r);return new Yl(zee.apply(null,n))}else{const n=e.map(a=>XR(a)?Gee(Ua.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)i[s++]=a[o]}),new Yl(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){let e;try{e=JSON.parse(t)}catch{return null}return Dee(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qee(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Jee(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function rz(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zee(t,e){return e}class jr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Zee}}let P_=null;function ete(t){return!XR(t)||t.length<2?t:rz(t)}function JR(){if(P_)return P_;const t=[];t.push(new jr("bucket")),t.push(new jr("generation")),t.push(new jr("metageneration")),t.push(new jr("name","fullPath",!0));function e(s,a){return ete(a)}const n=new jr("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new jr("size");return i.xform=r,t.push(i),t.push(new jr("timeCreated")),t.push(new jr("updated")),t.push(new jr("md5Hash",null,!0)),t.push(new jr("cacheControl",null,!0)),t.push(new jr("contentDisposition",null,!0)),t.push(new jr("contentEncoding",null,!0)),t.push(new jr("contentLanguage",null,!0)),t.push(new jr("contentType",null,!0)),t.push(new jr("metadata","customMetadata",!0)),P_=t,P_}function tte(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Wr(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function nte(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return tte(r,t),r}function iz(t,e,n){const r=QR(e);return r===null?null:nte(t,r,n)}function rte(t,e,n,r){const i=QR(e);if(i===null||!XR(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,h=t.fullPath,f="/b/"+a(u)+"/o/"+a(h),m=jd(f,n,r),g=Z$({alt:"media",token:c});return m+g})[0]}function ite(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="prefixes",eL="items";function ste(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Z2])for(const i of n[Z2]){const s=i.replace(/\/$/,""),a=t._makeStorageReference(new Wr(e,s));r.prefixes.push(a)}if(n[eL])for(const i of n[eL]){const s=t._makeStorageReference(new Wr(e,i.name));r.items.push(s)}return r}function ate(t,e,n){const r=QR(n);return r===null?null:ste(t,e,r)}class Nm{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t){if(!t)throw KR()}function sz(t,e){function n(r,i){const s=iz(t,i,e);return ZR(s!==null),s}return n}function ote(t,e){function n(r,i){const s=ate(t,e,i);return ZR(s!==null),s}return n}function lte(t,e){function n(r,i){const s=iz(t,i,e);return ZR(s!==null),rte(s,i,t.host,t._protocol)}return n}function eN(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=wee():i=yee():n.getStatus()===402?i=vee(t.bucket):n.getStatus()===403?i=_ee(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function zE(t){const e=eN(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=gee(t.path)),s.serverResponse=i.serverResponse,s}return n}function cte(t,e,n){const r=e.fullServerUrl(),i=jd(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new Nm(i,s,sz(t,n),a);return o.errorHandler=zE(e),o}function ute(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=e.bucketOnlyServerUrl(),o=jd(a,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new Nm(o,l,ote(t,e.bucket),c);return u.urlParams=s,u.errorHandler=eN(e),u}function hte(t,e,n){const r=e.fullServerUrl(),i=jd(r,t.host,t._protocol)+"?alt=media",s="GET",a=t.maxOperationRetryTime,o=new Nm(i,s,(l,c)=>c,a);return o.errorHandler=zE(e),o}function dte(t,e,n){const r=e.fullServerUrl(),i=jd(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new Nm(i,s,lte(t,n),a);return o.errorHandler=zE(e),o}function fte(t,e){const n=e.fullServerUrl(),r=jd(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function a(l,c){}const o=new Nm(r,i,a,s);return o.successCodes=[200,204],o.errorHandler=zE(e),o}function pte(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function mte(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=pte(null,e)),r}function gte(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let A="";for(let I=0;I<2;I++)A=A+Math.random().toString().slice(2);return A}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=mte(e,r,i),u=ite(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=Yl.getBlob(h,r,f);if(m===null)throw Tee();const g={name:c.fullPath},v=jd(s,t.host,t._protocol),y="POST",w=t.maxUploadRetryTime,b=new Nm(v,y,sz(t,n),w);return b.urlParams=g,b.headers=a,b.body=m.uploadData(),b.errorHandler=eN(e),b}class az{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ad.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ad.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ad.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw bg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class vte extends az{initXhr(){this.xhr_.responseType="text"}}function ow(){return new vte}class yte extends az{initXhr(){this.xhr_.responseType="arraybuffer"}}function wte(){return new yte}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n){this._service=e,n instanceof Wr?this._location=n:this._location=Wr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new bd(e,n)}get root(){const e=new Wr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rz(this._location.path)}get storage(){return this._service}get parent(){const e=Qee(this._location.path);if(e===null)return null;const n=new Wr(this._location.bucket,e);return new bd(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Cee(e)}}function _te(t,e){t._throwIfRoot("getBytes");const n=hte(t.storage,t._location);return t.storage.makeRequestWithTokens(n,wte).then(r=>r)}function bte(t,e,n){t._throwIfRoot("uploadBytes");const r=gte(t.storage,t._location,JR(),new Yl(e,!0),n);return t.storage.makeRequestWithTokens(r,ow).then(i=>({metadata:i,ref:t}))}function xte(t){const e={prefixes:[],items:[]};return oz(t,e).then(()=>e)}async function oz(t,e,n){const i=await Ate(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await oz(t,e,i.nextPageToken)}function Ate(t,e){e!=null&&typeof e.maxResults=="number"&&HP("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=ute(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,ow)}function Ete(t){t._throwIfRoot("getMetadata");const e=cte(t.storage,t._location,JR());return t.storage.makeRequestWithTokens(e,ow)}function Ste(t){t._throwIfRoot("getDownloadURL");const e=dte(t.storage,t._location,JR());return t.storage.makeRequestWithTokens(e,ow).then(n=>{if(n===null)throw Pee();return n})}function Tte(t){t._throwIfRoot("deleteObject");const e=fte(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ow)}function Pte(t,e){const n=Jee(t._location.path,e),r=new Wr(t._location.bucket,n);return new bd(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ite(t){return/^[A-Za-z]+:\/\//.test(t)}function Cte(t,e){return new bd(t,e)}function lz(t,e){if(t instanceof tN){const n=t;if(n._bucket==null)throw See();const r=new bd(n,n._bucket);return e!=null?lz(r,e):r}else return e!==void 0?Pte(t,e):t}function kte(t,e){if(e&&Ite(e)){if(t instanceof tN)return Cte(t,e);throw zP("To use ref(service, url), the first argument must be a Storage instance.")}else return lz(t,e)}function tL(t,e){const n=e==null?void 0:e[Q$];return n==null?null:Wr.makeFromBucketSpec(n,t)}function Rte(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:WU(i,t.app.options.projectId))}class tN{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Y$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pee,this._maxUploadRetryTime=mee,this._requests=new Set,i!=null?this._bucket=Wr.makeFromBucketSpec(i,this._host):this._bucket=tL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wr.makeFromBucketSpec(this._url,e):this._bucket=tL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){HP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){HP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bd(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new kee(J$());{const a=Bee(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const nL="@firebase/storage",rL="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cz="storage";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t,e){return t=mt(t),_te(t)}function WP(t,e,n){return t=mt(t),bte(t,e,n)}function Nte(t){return t=mt(t),Ete(t)}function xv(t){return t=mt(t),xte(t)}function sL(t){return t=mt(t),Ste(t)}function $S(t){return t=mt(t),Tte(t)}function fs(t,e){return t=mt(t),kte(t,e)}function Ote(t=bE(),e){t=mt(t);const r=Y0(t,cz).getImmediate({identifier:e}),i=eR("storage");return i&&Dte(r,...i),r}function Dte(t,e,n,r={}){Rte(t,e,n,r)}function Mte(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new tN(n,r,i,e,Od)}function Lte(){Yc(new ol(cz,Mte,"PUBLIC").setMultipleInstances(!0)),As(nL,rL,""),As(nL,rL,"esm2017")}Lte();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jte="type.googleapis.com/google.protobuf.Int64Value",Fte="type.googleapis.com/google.protobuf.UInt64Value";function uz(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function GP(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>GP(e));if(typeof t=="function"||typeof t=="object")return uz(t,e=>GP(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Bx(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case jte:case Fte:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Bx(e)):typeof t=="function"||typeof t=="object"?uz(t,e=>Bx(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wf extends da{constructor(e,n,r){super(`${nN}/${e}`,n||""),this.details=r}}function Vte(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Ute(t,e){let n=Vte(t),r=n,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!aL[a])return new Wf("internal","internal");n=aL[a],r=a}const o=s.message;typeof o=="string"&&(r=o),i=s.details,i!==void 0&&(i=Bx(i))}}catch{}return n==="ok"?null:new Wf(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bte{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP="us-central1";function $te(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Wf("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class zte{constructor(e,n,r,i,s=qP,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new Bte(n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=qP}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Hte(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function Wte(t,e,n){return r=>qte(t,e,r,{})}async function Gte(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}function qte(t,e,n,r){const i=t._url(e);return Kte(t,i,n,r)}async function Kte(t,e,n,r){n=GP(n);const i={data:n},s={},a=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);a.authToken&&(s.Authorization="Bearer "+a.authToken),a.messagingToken&&(s["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=a.appCheckToken);const o=r.timeout||7e4,l=$te(o),c=await Promise.race([Gte(e,i,s,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new Wf("cancelled","Firebase Functions instance was deleted.");const u=Ute(c.status,c.json);if(u)throw u;if(!c.json)throw new Wf("internal","Response is not valid JSON object.");let h=c.json.data;if(typeof h>"u"&&(h=c.json.result),typeof h>"u")throw new Wf("internal","Response is missing data field.");return{data:Bx(h)}}const oL="@firebase/functions",lL="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xte="auth-internal",Yte="app-check-internal",Qte="messaging-internal";function Jte(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),a=r.getProvider(Xte),o=r.getProvider(Qte),l=r.getProvider(Yte);return new zte(s,a,o,l,i,t)};Yc(new ol(nN,n,"PUBLIC").setMultipleInstances(!0)),As(oL,lL,e),As(oL,lL,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zte(t=bE(),e=qP){const r=Y0(mt(t),nN).getImmediate({identifier:e}),i=eR("functions");return i&&ene(r,...i),r}function ene(t,e,n){Hte(mt(t),e,n)}function cL(t,e,n){return Wte(mt(t),e)}Jte(fetch.bind(self));const hz={apiKey:"AIzaSyCPg-DCTI8xn4oSWrr0D8teFV79vpBkcts",authDomain:"state-a1.firebaseapp.com",projectId:"state-a1",storageBucket:"state-a1.firebasestorage.app",messagingSenderId:"678269987849",appId:"1:678269987849:web:98b3eeb7c2340dfa395cd8"},HE=KU(hz),Oc=pQ(HE),ke=tee(HE),ps=Ote(HE),uL=Zte(HE),tne=t=>{let e="";for(let n=10;n<t.length&&e.length<11;n+=2)/\d/.test(t[n])&&(e+=t[n]);return e},nne=()=>Array.from({length:5},()=>"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*26)]).join(""),zS=()=>new Date().toLocaleDateString("en-GB"),HS=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),rne=async()=>{var i,s;let t=localStorage.getItem("DeviceName");if(t)return t;if((i=navigator.userAgentData)!=null&&i.getHighEntropyValues)try{const a=await navigator.userAgentData.getHighEntropyValues(["model"]);if((s=a.model)!=null&&s.length&&a.model!=="Unknown")return localStorage.setItem("DeviceName",a.model),a.model}catch{}const e=navigator.userAgent,n=e.match(/Android\s[\d.]+;\s([^)]+)/i);if(n)return t=n[1].trim(),localStorage.setItem("DeviceName",t),t;const r=[[/iphone/i,"iPhone"],[/ipad/i,"iPad"],[/windows/i,"Windows PC"],[/macintosh/i,"MacBook"],[/linux/i,"Linux Device"]];for(const[a,o]of r)if(a.test(e))return localStorage.setItem("DeviceName",o),o;return t=navigator.platform||"Unknown",localStorage.setItem("DeviceName",t),t},ine=({onLoginSuccess:t})=>{const[e,n]=E.useState(1),[r,i]=E.useState(""),[s,a]=E.useState(""),[o,l]=E.useState(""),[c,u]=E.useState(!1),[h,f]=E.useState(!1),[m,g]=E.useState(null),[v,y]=E.useState(!1),[w,b]=E.useState(!1),[A,I]=E.useState(!1),[k,M]=E.useState(""),P=E.useRef(null),C=E.useRef(null),O=E.useRef(null);E.useEffect(()=>{var re;const Y=localStorage.getItem("lastBlockedNumber");Y?(async()=>{const q=Fe(ke,"Blocked",Y),H=await Hr(q);H.exists()?(i(Y),b(!0),M(H.data().Reason||"Reason not specified.")):(localStorage.removeItem("lastBlockedNumber"),localStorage.removeItem("lastBlockReason"))})():(re=P.current)==null||re.focus()},[]),E.useEffect(()=>((async()=>{if(Oc.currentUser){I(!0);return}try{await SP(Oc,"temrevil@gmail.com","1q2w3e"),I(!0)}catch{try{await SP(Oc,"temrevil+1@gmail.com","M074mm3d+"),I(!0)}catch(K){console.error("Auto login failed",K)}}})(),rY(Oc,re=>I(!!re))),[]);const j=Y=>{const re=Y.target.value.replace(/[^0-9]/g,"");re.length<=11&&(i(re),m&&g(null),localStorage.removeItem("lastBlockedNumber"),localStorage.removeItem("lastBlockReason"),w&&b(!1),e!==1&&(n(1),a(""),l(""),u(!1)))},D=async Y=>{if(Y.preventDefault(),r.length!==11)return g("ID must be exactly 11 digits");y(!0),g(null),b(!1);try{const re=Fe(ke,"Blocked",r),K=await Hr(re);if(K.exists()){const te=K.data().Reason||"No reason provided.";M(te),b(!0),localStorage.setItem("lastBlockedNumber",r),localStorage.setItem("lastBlockReason",te),g("ACCESS DENIED: Identity flagged."),y(!1);return}if((await $P($u(ke,"Snitches"))).docs.some(te=>te.data()["The Login Number"]===r)){const te="Snitching attempt";M(te),b(!0),localStorage.setItem("lastBlockedNumber",r),localStorage.setItem("lastBlockReason",te),g("ACCESS DENIED: Identity flagged."),y(!1);return}const H=Fe(ke,"Numbers",r);if((await Hr(H)).exists()){const te=hz.apiKey,ce=te.slice(0,10)+te.slice(10).split("").reduce((ue,ve,Ue)=>ue+(r[Ue%r.length]||"")+ve,"");a(ce),u(!1)}else a(""),u(!0);n(2),setTimeout(()=>{var te;return(te=C.current)==null?void 0:te.focus()},300)}catch{g("System verification failed.")}finally{y(!1)}},F=async Y=>{Y.preventDefault(),y(!0);try{if(!s.startsWith("AIzaSyCPg-"))throw new Error("Invalid Token");if(s.trim().length!==68){g("Invalid Token Length"),y(!1);return}const re=tne(s);if(re!==r){try{const X=$u(ke,"Snitches"),te=await $P(X);te.docs.some(ce=>ce.data()["The Login Number"]===r)||(await ja(Fe(X,`Match ${te.size+1}`),{"The Login Number":r,"The Snitch":re,"Snitched Date":zS(),"Snitched Time":HS()}),await ja(Fe(ke,"Blocked",r),{"Blocked Date":zS(),"Blocked Time":HS(),Reason:"tried to snitch"}))}catch{}localStorage.setItem("Number",r),b(!0),g("SECURITY VIOLATION DETECTED"),y(!1);return}const K=await rne(),q=nne();localStorage.setItem("Number",r),localStorage.setItem("Code",q);const H=await Hr(Fe(ke,"Numbers",r));if(H.exists()){const X=H.data(),te=X.Devices||{},ce=te["Devices Allowed"]||5,ue=te["Devices Name"]||{},ve=Object.values(ue);if(!ve.includes(K)&&ve.length>=ce)throw new Error("Device limit reached");const Ue=te.Archived||{};Ue[Object.keys(Ue).length+1]={Code:q,Date:zS(),Time:HS()},ve.includes(K)||(ue[Object.keys(ue).length+1]=K),await Nc(Fe(ke,"Numbers",r),{Devices:{"Devices Allowed":ce,"Devices Name":ue,Archived:Ue}}),X.Name&&X.Name!=="Unknown"?(localStorage.setItem("Name",X.Name),t()):(n(3),setTimeout(()=>{var et;return(et=O.current)==null?void 0:et.focus()},300))}else t()}catch(re){console.error(re),g(re.message==="Device limit reached"?"Maximum device limit reached.":"Authentication Failed.")}finally{y(!1)}},V=async Y=>{if(Y.preventDefault(),!!o.trim()){y(!0);try{await Nc(Fe(ke,"Numbers",r),{Name:o.trim()}),localStorage.setItem("Name",o.trim()),t()}catch{g("Failed to update profile.")}finally{y(!1)}}};return _.jsxs("div",{className:"login-container relative",children:[_.jsxs("div",{className:`login-card ${w?"blocked":""}`,children:[_.jsx("div",{className:"absolute top-6 right-6 flex items-center gap-2",children:_.jsx("div",{className:`rounded-full ${A?"bg-success":"bg-warning"}`,style:{width:"8px",height:"8px",boxShadow:A?"0 0 10px rgba(16, 185, 129, 0.5)":"none"}})}),_.jsxs("div",{className:"mb-8 mt-2 flex flex-col items-center",children:[_.jsx("div",{className:`rounded-full flex items-center justify-center mb-6 transition-colors ${w?"text-error bg-error/10":"text-white bg-surface"}`,style:{width:"72px",height:"72px",border:`1px solid ${w?"var(--color-error-translucent)":"var(--color-border)"}`},children:w?_.jsx(ob,{size:32}):e===3?_.jsx(EK,{size:32}):_.jsx(FU,{size:32})}),_.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:w?"Restricted":e===3?"Setup":"The State"}),_.jsx("p",{className:`text-base text-center mt-2 font-medium ${w?"text-error":"text-muted"}`,children:w?"This identity has been flagged.":e===1?"Enter identity number":e===3?"Create profile":"Confirm security token"})]}),_.jsxs("form",{onSubmit:e===1?D:e===2?F:V,className:"flex flex-col gap-4 w-full",children:[_.jsxs("div",{className:e===3?"hidden":"block",children:[_.jsx("div",{className:"flex flex-col gap-3",children:_.jsxs("div",{className:"relative",children:[_.jsx("input",{ref:P,type:"text",inputMode:"numeric",value:r,onChange:j,placeholder:"000 0000 0000",className:`login-input text-center font-mono text-xl ${m&&e===1?"error":""}`}),e===2&&_.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:_.jsx(gK,{size:20,className:"text-success"})})]})}),e===2&&_.jsx("div",{className:"animate-slide-up mt-4",children:_.jsxs("div",{className:"relative",children:[_.jsx("input",{ref:C,type:"text",value:s,onChange:Y=>c&&a(Y.target.value),readOnly:!c,placeholder:c?"Paste security token...":"Token missing...",className:`login-input pl-4 pr-12 text-xs font-mono break-all ${c?"":"text-success cursor-default opacity-90"}`}),_.jsx("button",{type:"button",onClick:()=>{s&&(navigator.clipboard.writeText(s),f(!0),setTimeout(()=>f(!1),2e3))},className:"absolute right-2 top-1/2 -translate-y-1/2 btn-icon",children:h?_.jsx(LU,{size:16,className:"text-success"}):_.jsx(vK,{size:16})})]})})]}),_.jsx("div",{className:`${e===3?"block":"hidden"} animate-slide-up`,children:_.jsx("input",{ref:O,type:"text",value:o,onChange:Y=>l(Y.target.value),placeholder:"Full Name",className:"login-input text-center text-lg"})}),_.jsx("div",{style:{minHeight:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:m&&_.jsxs("div",{className:"flex items-center gap-2 text-xs text-error font-medium animate-shake",children:[_.jsx(zv,{size:14})," ",m]})}),_.jsx("button",{type:"submit",disabled:v||e===1&&r.length!==11||e===3&&!o.trim(),className:`btn btn-primary w-full ${w?"btn-danger":""}`,children:v?_.jsx(Uf,{size:20,className:"animate-spin"}):_.jsxs(_.Fragment,{children:[e===1?"Continue":e===3?"Finish":"Authenticate"," ",e===1&&_.jsx(mK,{size:18})]})})]}),_.jsx("div",{className:"mt-8 text-center",children:_.jsx("p",{className:"text-dim uppercase tracking-widest text-[10px] font-bold",children:"Authorized Personnel Only"})})]}),w&&_.jsx("div",{className:"absolute inset-0 animate-fade-in flex items-center justify-center p-4 z-20",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},children:_.jsxs("div",{className:"text-center flex flex-col items-center",children:[_.jsx(zv,{size:64,className:"text-error drop-shadow-lg mb-4"}),_.jsx("h2",{className:"text-5xl font-extrabold text-white mb-2",children:"Blocked"}),_.jsx("p",{className:"text-lg text-red-300 capitalize",children:k})]})})]})};var Av={};Av.d=(t,e)=>{for(var n in e)Av.o(e,n)&&!Av.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})};Av.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Oe=globalThis.pdfjsLib={};Av.d(Oe,{AbortException:()=>tu,AnnotationEditorLayer:()=>nC,AnnotationEditorParamsType:()=>Je,AnnotationEditorType:()=>Be,AnnotationEditorUIManager:()=>Ad,AnnotationLayer:()=>Zre,AnnotationMode:()=>Ql,ColorPicker:()=>qx,DOMSVGFactory:()=>hN,DrawLayer:()=>sC,FeatureTest:()=>Xr,GlobalWorkerOptions:()=>Uo,ImageKind:()=>vb,InvalidPDFException:()=>XP,MissingPDFException:()=>ey,OPS:()=>Ls,OutputScale:()=>QP,PDFDataRangeTransport:()=>f3,PDFDateString:()=>oN,PDFWorker:()=>qf,PasswordResponses:()=>lne,PermissionFlag:()=>one,PixelsPerInch:()=>nu,RenderingCancelledException:()=>sN,TextLayer:()=>ty,TouchManager:()=>Wx,UnexpectedResponseException:()=>$x,Util:()=>_e,VerbosityLevel:()=>WE,XfaLayer:()=>m3,build:()=>Ore,createValidAbsoluteUrl:()=>dne,fetchData:()=>XE,getDocument:()=>Ere,getFilenameFromUrl:()=>bne,getPdfFilenameFromUrl:()=>xne,getXfaPageViewport:()=>Ane,isDataScheme:()=>YE,isPdfFile:()=>aN,noContextMenu:()=>oa,normalizeUnicode:()=>yne,setLayerDimensions:()=>xd,shadow:()=>Ge,stopEvent:()=>Ui,version:()=>Nre});const kr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),dz=[1,0,0,1,0,0],KP=[.001,0,0,.001,0,0],sne=1e7,WS=1.35,Li={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ql={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ane="pdfjs_internal_editor_",Be={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Je={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},one={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},vr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},vb={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},yn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},xg={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},WE={ERRORS:0,WARNINGS:1,INFOS:5},Ls={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},lne={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let GE=WE.WARNINGS;function cne(t){Number.isInteger(t)&&(GE=t)}function une(){return GE}function qE(t){GE>=WE.INFOS&&console.log(`Info: ${t}`)}function $e(t){GE>=WE.WARNINGS&&console.log(`Warning: ${t}`)}function bt(t){throw new Error(t)}function dn(t,e){t||bt(e)}function hne(t){switch(t==null?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function dne(t,e=null,n=null){if(!t)return null;try{if(n&&typeof t=="string"){if(n.addDefaultProtocol&&t.startsWith("www.")){const i=t.match(/\./g);(i==null?void 0:i.length)>=2&&(t=`http://${t}`)}if(n.tryConvertEncoding)try{t=vne(t)}catch{}}const r=e?new URL(t,e):new URL(t);if(hne(r))return r}catch{}return null}function Ge(t,e,n,r=!1){return Object.defineProperty(t,e,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const fu=function(){function e(n,r){this.message=n,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class hL extends fu{constructor(e,n){super(e,"PasswordException"),this.code=n}}class GS extends fu{constructor(e,n){super(e,"UnknownErrorException"),this.details=n}}class XP extends fu{constructor(e){super(e,"InvalidPDFException")}}class ey extends fu{constructor(e){super(e,"MissingPDFException")}}class $x extends fu{constructor(e,n){super(e,"UnexpectedResponseException"),this.status=n}}class fne extends fu{constructor(e){super(e,"FormatError")}}class tu extends fu{constructor(e){super(e,"AbortException")}}function fz(t){(typeof t!="object"||(t==null?void 0:t.length)===void 0)&&bt("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const r=[];for(let i=0;i<e;i+=n){const s=Math.min(i+n,e),a=t.subarray(i,s);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function KE(t){typeof t!="string"&&bt("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let r=0;r<e;++r)n[r]=t.charCodeAt(r)&255;return n}function pne(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function rN(t){const e=Object.create(null);for(const[n,r]of t)e[n]=r;return e}function mne(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function gne(){try{return new Function(""),!0}catch{return!1}}class Xr{static get isLittleEndian(){return Ge(this,"isLittleEndian",mne())}static get isEvalSupported(){return Ge(this,"isEvalSupported",gne())}static get isOffscreenCanvasSupported(){return Ge(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ge(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ge(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Ge(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,n;return Ge(this,"isCSSRoundSupported",(n=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:n.call(e,"width: round(1.5px, 1px)"))}}const qS=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));var tl,yb,YP;class _e{static makeHexColor(e,n,r){return`#${qS[e]}${qS[n]}${qS[r]}`}static scaleMinMax(e,n){let r;e[0]?(e[0]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[0],n[2]*=e[0],e[3]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[3],n[3]*=e[3]):(r=n[0],n[0]=n[1],n[1]=r,r=n[2],n[2]=n[3],n[3]=r,e[1]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[1],n[3]*=e[1],e[2]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[2],n[2]*=e[2]),n[0]+=e[4],n[1]+=e[5],n[2]+=e[4],n[3]+=e[5]}static transform(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]}static applyTransform(e,n){const r=e[0]*n[0]+e[1]*n[2]+n[4],i=e[0]*n[1]+e[1]*n[3]+n[5];return[r,i]}static applyInverseTransform(e,n){const r=n[0]*n[3]-n[1]*n[2],i=(e[0]*n[3]-e[1]*n[2]+n[2]*n[5]-n[4]*n[3])/r,s=(-e[0]*n[1]+e[1]*n[0]+n[4]*n[1]-n[5]*n[0])/r;return[i,s]}static getAxialAlignedBoundingBox(e,n){const r=this.applyTransform(e,n),i=this.applyTransform(e.slice(2,4),n),s=this.applyTransform([e[0],e[3]],n),a=this.applyTransform([e[2],e[1]],n);return[Math.min(r[0],i[0],s[0],a[0]),Math.min(r[1],i[1],s[1],a[1]),Math.max(r[0],i[0],s[0],a[0]),Math.max(r[1],i[1],s[1],a[1])]}static inverseTransform(e){const n=e[0]*e[3]-e[1]*e[2];return[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[4]*e[3])/n,(e[4]*e[1]-e[5]*e[0])/n]}static singularValueDecompose2dScale(e){const n=[e[0],e[2],e[1],e[3]],r=e[0]*n[0]+e[1]*n[2],i=e[0]*n[1]+e[1]*n[3],s=e[2]*n[0]+e[3]*n[2],a=e[2]*n[1]+e[3]*n[3],o=(r+a)/2,l=Math.sqrt((r+a)**2-4*(r*a-s*i))/2,c=o+l||1,u=o-l||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(e){const n=e.slice(0);return e[0]>e[2]&&(n[0]=e[2],n[2]=e[0]),e[1]>e[3]&&(n[1]=e[3],n[3]=e[1]),n}static intersect(e,n){const r=Math.max(Math.min(e[0],e[2]),Math.min(n[0],n[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(n[0],n[2]));if(r>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(n[1],n[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(n[1],n[3]));return s>a?null:[r,s,i,a]}static bezierBoundingBox(e,n,r,i,s,a,o,l,c){return c?(c[0]=Math.min(c[0],e,o),c[1]=Math.min(c[1],n,l),c[2]=Math.max(c[2],e,o),c[3]=Math.max(c[3],n,l)):c=[Math.min(e,o),Math.min(n,l),Math.max(e,o),Math.max(n,l)],N(this,tl,YP).call(this,e,r,s,o,n,i,a,l,3*(-e+3*(r-s)+o),6*(e-2*r+s),3*(r-e),c),N(this,tl,YP).call(this,e,r,s,o,n,i,a,l,3*(-n+3*(i-a)+l),6*(n-2*i+a),3*(i-n),c),c}}tl=new WeakSet,yb=function(e,n,r,i,s,a,o,l,c,u){if(c<=0||c>=1)return;const h=1-c,f=c*c,m=f*c,g=h*(h*(h*e+3*c*n)+3*f*r)+m*i,v=h*(h*(h*s+3*c*a)+3*f*o)+m*l;u[0]=Math.min(u[0],g),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],g),u[3]=Math.max(u[3],v)},YP=function(e,n,r,i,s,a,o,l,c,u,h,f){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&N(this,tl,yb).call(this,e,n,r,i,s,a,o,l,-h/u,f);return}const m=u**2-4*h*c;if(m<0)return;const g=Math.sqrt(m),v=2*c;N(this,tl,yb).call(this,e,n,r,i,s,a,o,l,(-u+g)/v,f),N(this,tl,yb).call(this,e,n,r,i,s,a,o,l,(-u-g)/v,f)},R(_e,tl);function vne(t){return decodeURIComponent(escape(t))}let KS=null,dL=null;function yne(t){return KS||(KS=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,dL=new Map([["","t"]])),t.replaceAll(KS,(e,n,r)=>n?n.normalize("NFKC"):dL.get(r))}function wne(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),fz(t)}const iN="pdfjs_internal_id_";function _ne(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(fz(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(n=>{n(t(...e))})});const ao="http://www.w3.org/2000/svg",zu=class zu{};Te(zu,"CSS",96),Te(zu,"PDF",72),Te(zu,"PDF_TO_CSS_UNITS",zu.CSS/zu.PDF);let nu=zu;async function XE(t,e="text"){if(zg(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,r)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":n(i.response);return}n(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class lw{constructor({viewBox:e,userUnit:n,scale:r,rotation:i,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=n,this.scale=r,this.rotation=i,this.offsetX=s,this.offsetY=a,r*=n;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,h,f,m;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,h=0,f=0,m=1;break;case 90:u=0,h=1,f=1,m=0;break;case 270:u=0,h=-1,f=-1,m=0;break;case 0:u=1,h=0,f=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,m=-m);let g,v,y,w;u===0?(g=Math.abs(c-e[1])*r+s,v=Math.abs(l-e[0])*r+a,y=(e[3]-e[1])*r,w=(e[2]-e[0])*r):(g=Math.abs(l-e[0])*r+s,v=Math.abs(c-e[1])*r+a,y=(e[2]-e[0])*r,w=(e[3]-e[1])*r),this.transform=[u*r,h*r,f*r,m*r,g-u*r*l-f*r*c,v-h*r*l-m*r*c],this.width=y,this.height=w}get rawDims(){const{userUnit:e,viewBox:n}=this,r=n.map(i=>i*e);return Ge(this,"rawDims",{pageWidth:r[2]-r[0],pageHeight:r[3]-r[1],pageX:r[0],pageY:r[1]})}clone({scale:e=this.scale,rotation:n=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new lw({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,n){return _e.applyTransform([e,n],this.transform)}convertToViewportRectangle(e){const n=_e.applyTransform([e[0],e[1]],this.transform),r=_e.applyTransform([e[2],e[3]],this.transform);return[n[0],n[1],r[0],r[1]]}convertToPdfPoint(e,n){return _e.applyInverseTransform([e,n],this.transform)}}class sN extends fu{constructor(e,n=0){super(e,"RenderingCancelledException"),this.extraDelay=n}}function YE(t){const e=t.length;let n=0;for(;n<e&&t[n].trim()==="";)n++;return t.substring(n,n+5).toLowerCase()==="data:"}function aN(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function bne(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function xne(t,e="document.pdf"){if(typeof t!="string")return e;if(YE(t))return $e('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=n.exec(t);let s=r.exec(i[1])||r.exec(i[2])||r.exec(i[3]);if(s&&(s=s[0],s.includes("%")))try{s=r.exec(decodeURIComponent(s))[0]}catch{}return s||e}class fL{constructor(){Te(this,"started",Object.create(null));Te(this,"times",[])}time(e){e in this.started&&$e(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||$e(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let n=0;for(const{name:r}of this.times)n=Math.max(r.length,n);for(const{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(n)} ${s-i}ms
`);return e.join("")}}function zg(t,e){try{const{protocol:n}=e?new URL(t,e):new URL(t);return n==="http:"||n==="https:"}catch{return!1}}function oa(t){t.preventDefault()}function Ui(t){t.preventDefault(),t.stopPropagation()}var yy;class oN{static toDateObject(e){if(!e||typeof e!="string")return null;d(this,yy)||S(this,yy,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const n=d(this,yy).exec(e);if(!n)return null;const r=parseInt(n[1],10);let i=parseInt(n[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(n[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(n[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(n[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(n[6],10);l=l>=0&&l<=59?l:0;const c=n[7]||"Z";let u=parseInt(n[8],10);u=u>=0&&u<=23?u:0;let h=parseInt(n[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(a+=u,o+=h):c==="+"&&(a-=u,o-=h),new Date(Date.UTC(r,i,s,a,o,l))}}yy=new WeakMap,R(oN,yy);function Ane(t,{scale:e=1,rotation:n=0}){const{width:r,height:i}=t.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new lw({viewBox:s,userUnit:1,scale:e,rotation:n})}function lN(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):($e(`Not a valid color format: "${t}"`),[0,0,0])}function Ene(t){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const n of t.keys()){e.style.color=n;const r=window.getComputedStyle(e).color;t.set(n,lN(r))}e.remove()}function Ot(t){const{a:e,b:n,c:r,d:i,e:s,f:a}=t.getTransform();return[e,n,r,i,s,a]}function ga(t){const{a:e,b:n,c:r,d:i,e:s,f:a}=t.getTransform().invertSelf();return[e,n,r,i,s,a]}function xd(t,e,n=!1,r=!0){if(e instanceof lw){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:a}=t,o=Xr.isCSSRoundSupported,l=`var(--scale-factor) * ${i}px`,c=`var(--scale-factor) * ${s}px`,u=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,h=o?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!n||e.rotation%180===0?(a.width=u,a.height=h):(a.width=h,a.height=u)}r&&t.setAttribute("data-main-rotation",e.rotation)}class QP{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Zl,Zu,js,eh,wy,_y,FA,pz,Yr,mz,gz,wb,vz,ZP;const uo=class uo{constructor(e){R(this,Yr);R(this,Zl,null);R(this,Zu,null);R(this,js);R(this,eh,null);R(this,wy,null);S(this,js,e),d(uo,_y)||S(uo,_y,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=S(this,Zl,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const n=d(this,js)._uiManager._signal;e.addEventListener("contextmenu",oa,{signal:n}),e.addEventListener("pointerdown",N(uo,FA,pz),{signal:n});const r=S(this,eh,document.createElement("div"));r.className="buttons",e.append(r);const i=d(this,js).toolbarPosition;if(i){const{style:s}=e,a=d(this,js)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return N(this,Yr,vz).call(this),e}get div(){return d(this,Zl)}hide(){var e;d(this,Zl).classList.add("hidden"),(e=d(this,Zu))==null||e.hideDropdown()}show(){var e;d(this,Zl).classList.remove("hidden"),(e=d(this,wy))==null||e.shown()}async addAltText(e){const n=await e.render();N(this,Yr,wb).call(this,n),d(this,eh).prepend(n,d(this,Yr,ZP)),S(this,wy,e)}addColorPicker(e){S(this,Zu,e);const n=e.renderButton();N(this,Yr,wb).call(this,n),d(this,eh).prepend(n,d(this,Yr,ZP))}remove(){var e;d(this,Zl).remove(),(e=d(this,Zu))==null||e.destroy(),S(this,Zu,null)}};Zl=new WeakMap,Zu=new WeakMap,js=new WeakMap,eh=new WeakMap,wy=new WeakMap,_y=new WeakMap,FA=new WeakSet,pz=function(e){e.stopPropagation()},Yr=new WeakSet,mz=function(e){d(this,js)._focusEventsAllowed=!1,Ui(e)},gz=function(e){d(this,js)._focusEventsAllowed=!0,Ui(e)},wb=function(e){const n=d(this,js)._uiManager._signal;e.addEventListener("focusin",N(this,Yr,mz).bind(this),{capture:!0,signal:n}),e.addEventListener("focusout",N(this,Yr,gz).bind(this),{capture:!0,signal:n}),e.addEventListener("contextmenu",oa,{signal:n})},vz=function(){const{editorType:e,_uiManager:n}=d(this,js),r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",d(uo,_y)[e]),N(this,Yr,wb).call(this,r),r.addEventListener("click",i=>{n.delete()},{signal:n._signal}),d(this,eh).append(r)},ZP=function(){const e=document.createElement("div");return e.className="divider",e},R(uo,FA),R(uo,_y,null);let JP=uo;var by,th,nh,au,yz,wz,_z;class Sne{constructor(e){R(this,au);R(this,by,null);R(this,th,null);R(this,nh);S(this,nh,e)}show(e,n,r){const[i,s]=N(this,au,wz).call(this,n,r),{style:a}=d(this,th)||S(this,th,N(this,au,yz).call(this));e.append(d(this,th)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,th).remove()}}by=new WeakMap,th=new WeakMap,nh=new WeakMap,au=new WeakSet,yz=function(){const e=S(this,th,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",oa,{signal:d(this,nh)._signal});const n=S(this,by,document.createElement("div"));return n.className="buttons",e.append(n),N(this,au,_z).call(this),e},wz=function(e,n){let r=0,i=0;for(const s of e){const a=s.y+s.height;if(a<r)continue;const o=s.x+(n?s.width:0);if(a>r){i=o,r=a;continue}n?o>i&&(i=o):o<i&&(i=o)}return[n?1-i:i,r]},_z=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const n=document.createElement("span");e.append(n),n.className="visuallyHidden",n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=d(this,nh)._signal;e.addEventListener("contextmenu",oa,{signal:r}),e.addEventListener("click",()=>{d(this,nh).highlightSelection("floating_button")},{signal:r}),d(this,by).append(e)};function zx(t,e,n){for(const r of n)e.addEventListener(r,t[r].bind(t))}var VA;class Tne{constructor(){R(this,VA,0)}get id(){return`${ane}${Lr(this,VA)._++}`}}VA=new WeakMap;var Yf,xy,_r,Qf,_b;const XO=class XO{constructor(){R(this,Qf);R(this,Yf,wne());R(this,xy,0);R(this,_r,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Ge(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:n,name:r,size:i,type:s}=e;return N(this,Qf,_b).call(this,`${n}_${r}_${i}_${s}`,e)}async getFromUrl(e){return N(this,Qf,_b).call(this,e,e)}async getFromBlob(e,n){const r=await n;return N(this,Qf,_b).call(this,e,r)}async getFromId(e){d(this,_r)||S(this,_r,new Map);const n=d(this,_r).get(e);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:r}=n;return delete n.blobPromise,this.getFromBlob(n.id,r)}return this.getFromUrl(n.url)}getFromCanvas(e,n){d(this,_r)||S(this,_r,new Map);let r=d(this,_r).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(n.width,n.height);return i.getContext("2d").drawImage(n,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${d(this,Yf)}_${Lr(this,xy)._++}`,refCounter:1,isSvg:!1},d(this,_r).set(e,r),d(this,_r).set(r.id,r),r}getSvgUrl(e){const n=d(this,_r).get(e);return n!=null&&n.isSvg?n.svgUrl:null}deleteId(e){var i;d(this,_r)||S(this,_r,new Map);const n=d(this,_r).get(e);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:r}=n;if(!n.url&&!n.file){const s=new OffscreenCanvas(r.width,r.height);s.getContext("bitmaprenderer").transferFromImageBitmap(r),n.blobPromise=s.convertToBlob()}(i=r.close)==null||i.call(r),n.bitmap=null}isValidId(e){return e.startsWith(`image_${d(this,Yf)}_`)}};Yf=new WeakMap,xy=new WeakMap,_r=new WeakMap,Qf=new WeakSet,_b=async function(e,n){d(this,_r)||S(this,_r,new Map);let r=d(this,_r).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${d(this,Yf)}_${Lr(this,xy)._++}`,refCounter:0,isSvg:!1});let i;if(typeof n=="string"?(r.url=n,i=await XE(n,"blob")):n instanceof File?i=r.file=n:n instanceof Blob&&(i=n),i.type==="image/svg+xml"){const s=XO._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((c,u)=>{o.onload=()=>{r.bitmap=o,r.isSvg=!0,c()},a.onload=async()=>{const h=r.svgUrl=a.result;o.src=await s?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=a.onerror=u});a.readAsDataURL(i),await l}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){$e(i),r=null}return d(this,_r).set(e,r),r&&d(this,_r).set(r.id,r),r};let eI=XO;var nn,ec,Ay,Vt;class Pne{constructor(e=128){R(this,nn,[]);R(this,ec,!1);R(this,Ay);R(this,Vt,-1);S(this,Ay,e)}add({cmd:e,undo:n,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(i&&e(),d(this,ec))return;const l={cmd:e,undo:n,post:r,type:s};if(d(this,Vt)===-1){d(this,nn).length>0&&(d(this,nn).length=0),S(this,Vt,0),d(this,nn).push(l);return}if(a&&d(this,nn)[d(this,Vt)].type===s){o&&(l.undo=d(this,nn)[d(this,Vt)].undo),d(this,nn)[d(this,Vt)]=l;return}const c=d(this,Vt)+1;c===d(this,Ay)?d(this,nn).splice(0,1):(S(this,Vt,c),c<d(this,nn).length&&d(this,nn).splice(c)),d(this,nn).push(l)}undo(){if(d(this,Vt)===-1)return;S(this,ec,!0);const{undo:e,post:n}=d(this,nn)[d(this,Vt)];e(),n==null||n(),S(this,ec,!1),S(this,Vt,d(this,Vt)-1)}redo(){if(d(this,Vt)<d(this,nn).length-1){S(this,Vt,d(this,Vt)+1),S(this,ec,!0);const{cmd:e,post:n}=d(this,nn)[d(this,Vt)];e(),n==null||n(),S(this,ec,!1)}}hasSomethingToUndo(){return d(this,Vt)!==-1}hasSomethingToRedo(){return d(this,Vt)<d(this,nn).length-1}cleanType(e){if(d(this,Vt)!==-1){for(let n=d(this,Vt);n>=0;n--)if(d(this,nn)[n].type!==e){d(this,nn).splice(n+1,d(this,Vt)-n),S(this,Vt,n);return}d(this,nn).length=0,S(this,Vt,-1)}}destroy(){S(this,nn,null)}}nn=new WeakMap,ec=new WeakMap,Ay=new WeakMap,Vt=new WeakMap;var UA,bz;class cw{constructor(e){R(this,UA);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=Xr.platform;for(const[r,i,s={}]of e)for(const a of r){const o=a.startsWith("mac+");n&&o?(this.callbacks.set(a.slice(4),{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1))):!n&&!o&&(this.callbacks.set(a,{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,n){if(!this.allKeys.has(n.key))return;const r=this.callbacks.get(N(this,UA,bz).call(this,n));if(!r)return;const{callback:i,options:{bubbles:s=!1,args:a=[],checker:o=null}}=r;o&&!o(e,n)||(i.bind(e,...a,n)(),s||Ui(n))}}UA=new WeakSet,bz=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const n=this.buffer.join("+");return this.buffer.length=0,n};const BA=class BA{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Ene(e),Ge(this,"_colors",e)}convert(e){const n=lN(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[r,i]of this._colors)if(i.every((s,a)=>s===n[a]))return BA._colorsMapping.get(r);return n}getHexCode(e){const n=this._colors.get(e);return n?_e.makeHexColor(...n):e}};Te(BA,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let tI=BA;var Jf,Ei,_n,Xn,Zf,mo,ep,as,tc,rh,tp,ih,_a,Fs,sh,Ey,Sy,np,Ty,ba,nc,rp,rc,xa,$A,ic,Py,sc,ah,Iy,Cy,Ln,ut,go,oh,ky,Ry,ac,Aa,vo,Ny,os,oe,bb,nI,xz,Az,xb,Ez,Sz,Tz,rI,Pz,iI,sI,Iz,Fr,oo,Cz,kz,aI,Rz,Hg,oI;const Nf=class Nf{constructor(e,n,r,i,s,a,o,l,c,u,h,f,m){R(this,oe);R(this,Jf,new AbortController);R(this,Ei,null);R(this,_n,new Map);R(this,Xn,new Map);R(this,Zf,null);R(this,mo,null);R(this,ep,null);R(this,as,new Pne);R(this,tc,null);R(this,rh,null);R(this,tp,0);R(this,ih,new Set);R(this,_a,null);R(this,Fs,null);R(this,sh,new Set);Te(this,"_editorUndoBar",null);R(this,Ey,!1);R(this,Sy,!1);R(this,np,!1);R(this,Ty,null);R(this,ba,null);R(this,nc,null);R(this,rp,null);R(this,rc,!1);R(this,xa,null);R(this,$A,new Tne);R(this,ic,!1);R(this,Py,!1);R(this,sc,null);R(this,ah,null);R(this,Iy,null);R(this,Cy,null);R(this,Ln,Be.NONE);R(this,ut,new Set);R(this,go,null);R(this,oh,null);R(this,ky,null);R(this,Ry,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});R(this,ac,[0,0]);R(this,Aa,null);R(this,vo,null);R(this,Ny,null);R(this,os,null);const g=this._signal=d(this,Jf).signal;S(this,vo,e),S(this,Ny,n),S(this,Zf,r),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:g}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),i._on("setpreference",this.onSetPreference.bind(this),{signal:g}),i._on("switchannotationeditorparams",v=>this.updateParams(v.type,v.value),{signal:g}),N(this,oe,Ez).call(this),N(this,oe,Iz).call(this),N(this,oe,rI).call(this),S(this,mo,s.annotationStorage),S(this,Ty,s.filterFactory),S(this,oh,a),S(this,rp,o||null),S(this,Ey,l),S(this,Sy,c),S(this,np,u),S(this,Cy,h||null),this.viewParameters={realScale:nu.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=m!==!1}static get _keyboardManager(){const e=Nf.prototype,n=a=>d(a,vo).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Ge(this,"_keyboardManager",new cw([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&d(a,vo).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&d(a,vo).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:n}]]))}destroy(){var e,n,r,i,s;(e=d(this,os))==null||e.resolve(),S(this,os,null),(n=d(this,Jf))==null||n.abort(),S(this,Jf,null),this._signal=null;for(const a of d(this,Xn).values())a.destroy();d(this,Xn).clear(),d(this,_n).clear(),d(this,sh).clear(),S(this,Ei,null),d(this,ut).clear(),d(this,as).destroy(),(r=d(this,Zf))==null||r.destroy(),(i=d(this,xa))==null||i.hide(),S(this,xa,null),d(this,ba)&&(clearTimeout(d(this,ba)),S(this,ba,null)),d(this,Aa)&&(clearTimeout(d(this,Aa)),S(this,Aa,null)),(s=this._editorUndoBar)==null||s.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return d(this,Cy)}get useNewAltTextFlow(){return d(this,Sy)}get useNewAltTextWhenAddingImage(){return d(this,np)}get hcmFilter(){return Ge(this,"hcmFilter",d(this,oh)?d(this,Ty).addHCMFilter(d(this,oh).foreground,d(this,oh).background):"none")}get direction(){return Ge(this,"direction",getComputedStyle(d(this,vo)).direction)}get highlightColors(){return Ge(this,"highlightColors",d(this,rp)?new Map(d(this,rp).split(",").map(e=>e.split("=").map(n=>n.trim()))):null)}get highlightColorNames(){return Ge(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,rh,e)}setMainHighlightColorPicker(e){S(this,Iy,e)}editAltText(e,n=!1){var r;(r=d(this,Zf))==null||r.editAltText(this,e,n)}switchToMode(e,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,n){this._eventBus.dispatch("setpreference",{source:this,name:e,value:n})}onSetPreference({name:e,value:n}){switch(e){case"enableNewAltTextWhenAddingImage":S(this,np,n);break}}onPageChanging({pageNumber:e}){S(this,tp,e-1)}focusMainContainer(){d(this,vo).focus()}findParent(e,n){for(const r of d(this,Xn).values()){const{x:i,y:s,width:a,height:o}=r.div.getBoundingClientRect();if(e>=i&&e<=i+a&&n>=s&&n<=s+o)return r}return null}disableUserSelect(e=!1){d(this,Ny).classList.toggle("noUserSelect",e)}addShouldRescale(e){d(this,sh).add(e)}removeShouldRescale(e){d(this,sh).delete(e)}onScaleChanging({scale:e}){var n;this.commitOrRemove(),this.viewParameters.realScale=e*nu.PDF_TO_CSS_UNITS;for(const r of d(this,sh))r.onScaleChanging();(n=d(this,rh))==null||n.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:a}=n,o=n.toString(),c=N(this,oe,bb).call(this,n).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;n.empty();const h=N(this,oe,nI).call(this,c),f=d(this,Ln)===Be.NONE,m=()=>{h==null||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:a,text:o}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(Be.HIGHLIGHT,m);return}m()}addToAnnotationStorage(e){!e.isEmpty()&&d(this,mo)&&!d(this,mo).has(e.id)&&d(this,mo).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,d(this,rc)&&(S(this,rc,!1),N(this,oe,xb).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const n of d(this,ut))if(n.div.contains(e)){S(this,ah,[n,e]),n._focusEventsAllowed=!1;break}}focus(){if(!d(this,ah))return;const[e,n]=d(this,ah);S(this,ah,null),n.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}addEditListeners(){N(this,oe,rI).call(this),N(this,oe,iI).call(this)}removeEditListeners(){N(this,oe,Pz).call(this),N(this,oe,sI).call(this)}dragOver(e){for(const{type:n}of e.dataTransfer.items)for(const r of d(this,Fs))if(r.isHandlingMimeForPasting(n)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const n of e.dataTransfer.items)for(const r of d(this,Fs))if(r.isHandlingMimeForPasting(n.type)){r.paste(n,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=d(this,Ei))==null||r.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of d(this,ut)){const s=i.serialize(!0);s&&n.push(s)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:n}=e;for(const s of n.items)for(const a of d(this,Fs))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let r=n.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){$e(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const l of r){const c=await i.deserialize(l);if(!c)return;s.push(c)}const a=()=>{for(const l of s)N(this,oe,aI).call(this,l);N(this,oe,oI).call(this,s)},o=()=>{for(const l of s)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){$e(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,Ln)!==Be.NONE&&!this.isEditorHandlingKeyboard&&Nf._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,rc)&&(S(this,rc,!1),N(this,oe,xb).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(N(this,oe,Sz).call(this),N(this,oe,iI).call(this),N(this,oe,Fr).call(this,{isEditing:d(this,Ln)!==Be.NONE,isEmpty:N(this,oe,Hg).call(this),hasSomethingToUndo:d(this,as).hasSomethingToUndo(),hasSomethingToRedo:d(this,as).hasSomethingToRedo(),hasSelectedEditor:!1})):(N(this,oe,Tz).call(this),N(this,oe,sI).call(this),N(this,oe,Fr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!d(this,Fs)){S(this,Fs,e);for(const n of d(this,Fs))N(this,oe,oo).call(this,n.defaultPropertiesToUpdate)}}getId(){return d(this,$A).id}get currentLayer(){return d(this,Xn).get(d(this,tp))}getLayer(e){return d(this,Xn).get(e)}get currentPageIndex(){return d(this,tp)}addLayer(e){d(this,Xn).set(e.pageIndex,e),d(this,ic)?e.enable():e.disable()}removeLayer(e){d(this,Xn).delete(e.pageIndex)}async updateMode(e,n=null,r=!1){var i;if(d(this,Ln)!==e&&!(d(this,os)&&(await d(this,os).promise,!d(this,os)))){if(S(this,os,Promise.withResolvers()),S(this,Ln,e),e===Be.NONE){this.setEditingState(!1),N(this,oe,kz).call(this),(i=this._editorUndoBar)==null||i.hide(),d(this,os).resolve();return}this.setEditingState(!0),await N(this,oe,Cz).call(this),this.unselectAll();for(const s of d(this,Xn).values())s.updateMode(e);if(!n){r&&this.addNewEditorFromKeyboard(),d(this,os).resolve();return}for(const s of d(this,_n).values())s.annotationElementId===n?(this.setSelected(s),s.enterInEditMode()):s.unselect();d(this,os).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==d(this,Ln)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,n){var r;if(d(this,Fs)){switch(e){case Je.CREATE:this.currentLayer.addNewEditor();return;case Je.HIGHLIGHT_DEFAULT_COLOR:(r=d(this,Iy))==null||r.updateColor(n);break;case Je.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,ky)||S(this,ky,new Map)).set(e,n),this.showAllEditors("highlight",n);break}for(const i of d(this,ut))i.updateParams(e,n);for(const i of d(this,Fs))i.updateDefaultParams(e,n)}}showAllEditors(e,n,r=!1){var s;for(const a of d(this,_n).values())a.editorType===e&&a.show(n);(((s=d(this,ky))==null?void 0:s.get(Je.HIGHLIGHT_SHOW_ALL))??!0)!==n&&N(this,oe,oo).call(this,[[Je.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(e=!1){if(d(this,Py)!==e){S(this,Py,e);for(const n of d(this,Xn).values())e?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",e)}}getEditors(e){const n=[];for(const r of d(this,_n).values())r.pageIndex===e&&n.push(r);return n}getEditor(e){return d(this,_n).get(e)}addEditor(e){d(this,_n).set(e.id,e)}removeEditor(e){var n;e.div.contains(document.activeElement)&&(d(this,ba)&&clearTimeout(d(this,ba)),S(this,ba,setTimeout(()=>{this.focusMainContainer(),S(this,ba,null)},0))),d(this,_n).delete(e.id),this.unselect(e),(!e.annotationElementId||!d(this,ih).has(e.annotationElementId))&&((n=d(this,mo))==null||n.remove(e.id))}addDeletedAnnotationElement(e){d(this,ih).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return d(this,ih).has(e)}removeDeletedAnnotationElement(e){d(this,ih).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){d(this,Ei)!==e&&(S(this,Ei,e),e&&N(this,oe,oo).call(this,e.propertiesToUpdate))}updateUI(e){d(this,oe,Rz)===e&&N(this,oe,oo).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){N(this,oe,oo).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(d(this,ut).has(e)){d(this,ut).delete(e),e.unselect(),N(this,oe,Fr).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,ut).add(e),e.select(),N(this,oe,oo).call(this,e.propertiesToUpdate),N(this,oe,Fr).call(this,{hasSelectedEditor:!0})}setSelected(e){var n;(n=d(this,rh))==null||n.commitOrRemove();for(const r of d(this,ut))r!==e&&r.unselect();d(this,ut).clear(),d(this,ut).add(e),e.select(),N(this,oe,oo).call(this,e.propertiesToUpdate),N(this,oe,Fr).call(this,{hasSelectedEditor:!0})}isSelected(e){return d(this,ut).has(e)}get firstSelectedEditor(){return d(this,ut).values().next().value}unselect(e){e.unselect(),d(this,ut).delete(e),N(this,oe,Fr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,ut).size!==0}get isEnterHandled(){return d(this,ut).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;d(this,as).undo(),N(this,oe,Fr).call(this,{hasSomethingToUndo:d(this,as).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:N(this,oe,Hg).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){d(this,as).redo(),N(this,oe,Fr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,as).hasSomethingToRedo(),isEmpty:N(this,oe,Hg).call(this)})}addCommands(e){d(this,as).add(e),N(this,oe,Fr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:N(this,oe,Hg).call(this)})}cleanUndoStack(e){d(this,as).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...d(this,ut)],r=()=>{var a;(a=this._editorUndoBar)==null||a.show(i,n.length===1?n[0].editorType:n.length);for(const o of n)o.remove()},i=()=>{for(const a of n)N(this,oe,aI).call(this,a)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=d(this,Ei))==null||e.commitOrRemove()}hasSomethingToControl(){return d(this,Ei)||this.hasSelection}selectAll(){for(const e of d(this,ut))e.commit();N(this,oe,oI).call(this,d(this,_n).values())}unselectAll(){var e;if(!(d(this,Ei)&&(d(this,Ei).commitOrRemove(),d(this,Ln)!==Be.NONE))&&!((e=d(this,rh))!=null&&e.commitOrRemove())&&this.hasSelection){for(const n of d(this,ut))n.unselect();d(this,ut).clear(),N(this,oe,Fr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,n,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;d(this,ac)[0]+=e,d(this,ac)[1]+=n;const[i,s]=d(this,ac),a=[...d(this,ut)],o=1e3;d(this,Aa)&&clearTimeout(d(this,Aa)),S(this,Aa,setTimeout(()=>{S(this,Aa,null),d(this,ac)[0]=d(this,ac)[1]=0,this.addCommands({cmd:()=>{for(const l of a)d(this,_n).has(l.id)&&l.translateInPage(i,s)},undo:()=>{for(const l of a)d(this,_n).has(l.id)&&l.translateInPage(-i,-s)},mustExec:!1})},o));for(const l of a)l.translateInPage(e,n)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,_a,new Map);for(const e of d(this,ut))d(this,_a).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,_a))return!1;this.disableUserSelect(!1);const e=d(this,_a);S(this,_a,null);let n=!1;for(const[{x:i,y:s,pageIndex:a},o]of e)o.newX=i,o.newY=s,o.newPageIndex=a,n||(n=i!==o.savedX||s!==o.savedY||a!==o.savedPageIndex);if(!n)return!1;const r=(i,s,a,o)=>{if(d(this,_n).has(i.id)){const l=d(this,Xn).get(o);l?i._setParentAndPosition(l,s,a):(i.pageIndex=o,i.x=s,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:a,newPageIndex:o}]of e)r(i,s,a,o)},undo:()=>{for(const[i,{savedX:s,savedY:a,savedPageIndex:o}]of e)r(i,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,n){if(d(this,_a))for(const r of d(this,_a).keys())r.drag(e,n)}rebuild(e){if(e.parent===null){const n=this.getLayer(e.pageIndex);n?(n.changeParent(e),n.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||d(this,ut).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return d(this,Ei)===e}getActive(){return d(this,Ei)}getMode(){return d(this,Ln)}get imageManager(){return Ge(this,"imageManager",new eI)}getSelectionBoxes(e){if(!e)return null;const n=document.getSelection();for(let c=0,u=n.rangeCount;c<u;c++)if(!e.contains(n.getRangeAt(c).commonAncestorContainer))return null;const{x:r,y:i,width:s,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(c,u,h,f)=>({x:(u-i)/a,y:1-(c+h-r)/s,width:f/a,height:h/s});break;case"180":o=(c,u,h,f)=>({x:1-(c+h-r)/s,y:1-(u+f-i)/a,width:h/s,height:f/a});break;case"270":o=(c,u,h,f)=>({x:1-(u+f-i)/a,y:(c-r)/s,width:f/a,height:h/s});break;default:o=(c,u,h,f)=>({x:(c-r)/s,y:(u-i)/a,width:h/s,height:f/a});break}const l=[];for(let c=0,u=n.rangeCount;c<u;c++){const h=n.getRangeAt(c);if(!h.collapsed)for(const{x:f,y:m,width:g,height:v}of h.getClientRects())g===0||v===0||l.push(o(f,m,g,v))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:n}){(d(this,ep)||S(this,ep,new Map)).set(e,n)}removeChangedExistingAnnotation({annotationElementId:e}){var n;(n=d(this,ep))==null||n.delete(e)}renderAnnotationElement(e){var i;const n=(i=d(this,ep))==null?void 0:i.get(e.data.id);if(!n)return;const r=d(this,mo).getRawValue(n);r&&(d(this,Ln)===Be.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}};Jf=new WeakMap,Ei=new WeakMap,_n=new WeakMap,Xn=new WeakMap,Zf=new WeakMap,mo=new WeakMap,ep=new WeakMap,as=new WeakMap,tc=new WeakMap,rh=new WeakMap,tp=new WeakMap,ih=new WeakMap,_a=new WeakMap,Fs=new WeakMap,sh=new WeakMap,Ey=new WeakMap,Sy=new WeakMap,np=new WeakMap,Ty=new WeakMap,ba=new WeakMap,nc=new WeakMap,rp=new WeakMap,rc=new WeakMap,xa=new WeakMap,$A=new WeakMap,ic=new WeakMap,Py=new WeakMap,sc=new WeakMap,ah=new WeakMap,Iy=new WeakMap,Cy=new WeakMap,Ln=new WeakMap,ut=new WeakMap,go=new WeakMap,oh=new WeakMap,ky=new WeakMap,Ry=new WeakMap,ac=new WeakMap,Aa=new WeakMap,vo=new WeakMap,Ny=new WeakMap,os=new WeakMap,oe=new WeakSet,bb=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},nI=function(e){const{currentLayer:n}=this;if(n.hasTextLayer(e))return n;for(const r of d(this,Xn).values())if(r.hasTextLayer(e))return r;return null},xz=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=N(this,oe,bb).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(d(this,xa)||S(this,xa,new Sne(this)),d(this,xa).show(r,i,this.direction==="ltr"))},Az=function(){var s,a,o;const e=document.getSelection();if(!e||e.isCollapsed){d(this,go)&&((s=d(this,xa))==null||s.hide(),S(this,go,null),N(this,oe,Fr).call(this,{hasSelectedText:!1}));return}const{anchorNode:n}=e;if(n===d(this,go))return;const i=N(this,oe,bb).call(this,e).closest(".textLayer");if(!i){d(this,go)&&((a=d(this,xa))==null||a.hide(),S(this,go,null),N(this,oe,Fr).call(this,{hasSelectedText:!1}));return}if((o=d(this,xa))==null||o.hide(),S(this,go,n),N(this,oe,Fr).call(this,{hasSelectedText:!0}),!(d(this,Ln)!==Be.HIGHLIGHT&&d(this,Ln)!==Be.NONE)&&(d(this,Ln)===Be.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,rc,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=d(this,Ln)===Be.HIGHLIGHT?N(this,oe,nI).call(this,i):null;l==null||l.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),h=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&N(this,oe,xb).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}},xb=function(e=""){d(this,Ln)===Be.HIGHLIGHT?this.highlightSelection(e):d(this,Ey)&&N(this,oe,xz).call(this)},Ez=function(){document.addEventListener("selectionchange",N(this,oe,Az).bind(this),{signal:this._signal})},Sz=function(){if(d(this,nc))return;S(this,nc,new AbortController);const e=this.combinedSignal(d(this,nc));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},Tz=function(){var e;(e=d(this,nc))==null||e.abort(),S(this,nc,null)},rI=function(){if(d(this,sc))return;S(this,sc,new AbortController);const e=this.combinedSignal(d(this,sc));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},Pz=function(){var e;(e=d(this,sc))==null||e.abort(),S(this,sc,null)},iI=function(){if(d(this,tc))return;S(this,tc,new AbortController);const e=this.combinedSignal(d(this,tc));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},sI=function(){var e;(e=d(this,tc))==null||e.abort(),S(this,tc,null)},Iz=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Fr=function(e){Object.entries(e).some(([r,i])=>d(this,Ry)[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,Ry),e)}),d(this,Ln)===Be.HIGHLIGHT&&e.hasSelectedEditor===!1&&N(this,oe,oo).call(this,[[Je.HIGHLIGHT_FREE,!0]]))},oo=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},Cz=async function(){if(!d(this,ic)){S(this,ic,!0);const e=[];for(const n of d(this,Xn).values())e.push(n.enable());await Promise.all(e);for(const n of d(this,_n).values())n.enable()}},kz=function(){if(this.unselectAll(),d(this,ic)){S(this,ic,!1);for(const e of d(this,Xn).values())e.disable();for(const e of d(this,_n).values())e.disable()}},aI=function(e){const n=d(this,Xn).get(e.pageIndex);n?n.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},Rz=function(){let e=null;for(e of d(this,ut));return e},Hg=function(){if(d(this,_n).size===0)return!0;if(d(this,_n).size===1)for(const e of d(this,_n).values())return e.isEmpty();return!1},oI=function(e){for(const n of d(this,ut))n.unselect();d(this,ut).clear();for(const n of e)n.isEmpty()||(d(this,ut).add(n),n.select());N(this,oe,Fr).call(this,{hasSelectedEditor:this.hasSelection})},Te(Nf,"TRANSLATE_SMALL",1),Te(Nf,"TRANSLATE_BIG",10);let Ad=Nf;var jn,Ea,Vs,ip,Sa,Si,sp,Ta,li,yo,lh,Pa,oc,ea,Wg,Ab;const Vr=class Vr{constructor(e){R(this,ea);R(this,jn,null);R(this,Ea,!1);R(this,Vs,null);R(this,ip,null);R(this,Sa,null);R(this,Si,null);R(this,sp,!1);R(this,Ta,null);R(this,li,null);R(this,yo,null);R(this,lh,null);R(this,Pa,!1);S(this,li,e),S(this,Pa,e._uiManager.useNewAltTextFlow),d(Vr,oc)||S(Vr,oc,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Vr._l10n??(Vr._l10n=e)}async render(){const e=S(this,Vs,document.createElement("button"));e.className="altText",e.tabIndex="0";const n=S(this,ip,document.createElement("span"));e.append(n),d(this,Pa)?(e.classList.add("new"),e.setAttribute("data-l10n-id",d(Vr,oc).missing),n.setAttribute("data-l10n-id",d(Vr,oc)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=d(this,li)._uiManager._signal;e.addEventListener("contextmenu",oa,{signal:r}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),d(this,li)._uiManager.editAltText(d(this,li)),d(this,Pa)&&d(this,li)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,ea,Wg)}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(S(this,sp,!0),i(s))},{signal:r}),await N(this,ea,Ab).call(this),e}finish(){d(this,Vs)&&(d(this,Vs).focus({focusVisible:d(this,sp)}),S(this,sp,!1))}isEmpty(){return d(this,Pa)?d(this,jn)===null:!d(this,jn)&&!d(this,Ea)}hasData(){return d(this,Pa)?d(this,jn)!==null||!!d(this,yo):this.isEmpty()}get guessedText(){return d(this,yo)}async setGuessedText(e){d(this,jn)===null&&(S(this,yo,e),S(this,lh,await Vr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),N(this,ea,Ab).call(this))}toggleAltTextBadge(e=!1){var n;if(!d(this,Pa)||d(this,jn)){(n=d(this,Ta))==null||n.remove(),S(this,Ta,null);return}if(!d(this,Ta)){const r=S(this,Ta,document.createElement("div"));r.className="noAltTextBadge",d(this,li).div.append(r)}d(this,Ta).classList.toggle("hidden",!e)}serialize(e){let n=d(this,jn);return!e&&d(this,yo)===n&&(n=d(this,lh)),{altText:n,decorative:d(this,Ea),guessedText:d(this,yo),textWithDisclaimer:d(this,lh)}}get data(){return{altText:d(this,jn),decorative:d(this,Ea)}}set data({altText:e,decorative:n,guessedText:r,textWithDisclaimer:i,cancel:s=!1}){r&&(S(this,yo,r),S(this,lh,i)),!(d(this,jn)===e&&d(this,Ea)===n)&&(s||(S(this,jn,e),S(this,Ea,n)),N(this,ea,Ab).call(this))}toggle(e=!1){d(this,Vs)&&(!e&&d(this,Si)&&(clearTimeout(d(this,Si)),S(this,Si,null)),d(this,Vs).disabled=!e)}shown(){d(this,li)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,ea,Wg)}})}destroy(){var e,n;(e=d(this,Vs))==null||e.remove(),S(this,Vs,null),S(this,ip,null),S(this,Sa,null),(n=d(this,Ta))==null||n.remove(),S(this,Ta,null)}};jn=new WeakMap,Ea=new WeakMap,Vs=new WeakMap,ip=new WeakMap,Sa=new WeakMap,Si=new WeakMap,sp=new WeakMap,Ta=new WeakMap,li=new WeakMap,yo=new WeakMap,lh=new WeakMap,Pa=new WeakMap,oc=new WeakMap,ea=new WeakSet,Wg=function(){return d(this,jn)&&"added"||d(this,jn)===null&&this.guessedText&&"review"||"missing"},Ab=async function(){var i,s,a;const e=d(this,Vs);if(!e)return;if(d(this,Pa)){if(e.classList.toggle("done",!!d(this,jn)),e.setAttribute("data-l10n-id",d(Vr,oc)[d(this,ea,Wg)]),(i=d(this,ip))==null||i.setAttribute("data-l10n-id",d(Vr,oc)[`${d(this,ea,Wg)}-label`]),!d(this,jn)){(s=d(this,Sa))==null||s.remove();return}}else{if(!d(this,jn)&&!d(this,Ea)){e.classList.remove("done"),(a=d(this,Sa))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=d(this,Sa);if(!n){S(this,Sa,n=document.createElement("span")),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${d(this,li).id}`;const o=100,l=d(this,li)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(d(this,Si)),S(this,Si,null)},{once:!0}),e.addEventListener("mouseenter",()=>{S(this,Si,setTimeout(()=>{S(this,Si,null),d(this,Sa).classList.add("show"),d(this,li)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;d(this,Si)&&(clearTimeout(d(this,Si)),S(this,Si,null)),(c=d(this,Sa))==null||c.classList.remove("show")},{signal:l})}d(this,Ea)?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=d(this,jn)),n.parentNode||e.append(n);const r=d(this,li).getImageForAltText();r==null||r.setAttribute("aria-describedby",n.id)},R(Vr,oc,null),Te(Vr,"_l10n",null);let Hx=Vr;var Oy,ch,Dy,My,Ly,jy,Fy,ap,wo,uh,lc,yl,Nz,Oz,lI;const YO=class YO{constructor({container:e,isPinchingDisabled:n=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:a=null,signal:o}){R(this,yl);R(this,Oy);R(this,ch,!1);R(this,Dy,null);R(this,My);R(this,Ly);R(this,jy);R(this,Fy);R(this,ap);R(this,wo,null);R(this,uh);R(this,lc,null);S(this,Oy,e),S(this,Dy,r),S(this,My,n),S(this,Ly,i),S(this,jy,s),S(this,Fy,a),S(this,uh,new AbortController),S(this,ap,AbortSignal.any([o,d(this,uh).signal])),e.addEventListener("touchstart",N(this,yl,Nz).bind(this),{passive:!1,signal:d(this,ap)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Ge(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=d(this,uh))==null||e.abort(),S(this,uh,null)}};Oy=new WeakMap,ch=new WeakMap,Dy=new WeakMap,My=new WeakMap,Ly=new WeakMap,jy=new WeakMap,Fy=new WeakMap,ap=new WeakMap,wo=new WeakMap,uh=new WeakMap,lc=new WeakMap,yl=new WeakSet,Nz=function(e){var i,s,a;if((i=d(this,My))!=null&&i.call(this)||e.touches.length<2)return;if(!d(this,lc)){S(this,lc,new AbortController);const o=AbortSignal.any([d(this,ap),d(this,lc).signal]),l=d(this,Oy),c={signal:o,passive:!1};l.addEventListener("touchmove",N(this,yl,Oz).bind(this),c),l.addEventListener("touchend",N(this,yl,lI).bind(this),c),l.addEventListener("touchcancel",N(this,yl,lI).bind(this),c),(s=d(this,Ly))==null||s.call(this)}if(Ui(e),e.touches.length!==2||(a=d(this,Dy))!=null&&a.call(this)){S(this,wo,null);return}let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]),S(this,wo,{touch0X:n.screenX,touch0Y:n.screenY,touch1X:r.screenX,touch1Y:r.screenY})},Oz=function(e){var I;if(!d(this,wo)||e.touches.length!==2)return;let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]);const{screenX:i,screenY:s}=n,{screenX:a,screenY:o}=r,l=d(this,wo),{touch0X:c,touch0Y:u,touch1X:h,touch1Y:f}=l,m=h-c,g=f-u,v=a-i,y=o-s,w=Math.hypot(v,y)||1,b=Math.hypot(m,g)||1;if(!d(this,ch)&&Math.abs(b-w)<=YO.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,e.preventDefault(),!d(this,ch)){S(this,ch,!0);return}const A=[(i+a)/2,(s+o)/2];(I=d(this,jy))==null||I.call(this,A,b,w)},lI=function(e){var n;d(this,lc).abort(),S(this,lc,null),(n=d(this,Fy))==null||n.call(this),d(this,wo)&&(e.preventDefault(),S(this,wo,null),S(this,ch,!1))};let Wx=YO;var hh,Us,Ct,op,cc,Vy,dh,Yn,fh,_o,uc,Uy,ph,Ti,By,mh,bo,Ia,lp,cp,ls,gh,$y,zA,Ie,cI,zy,uI,Eb,Dz,Mz,hI,Sb,dI,Lz,jz,Fz,fI,Vz,pI,Uz,Bz,$z,mI,Gg;const ze=class ze{constructor(e){R(this,Ie);R(this,hh,null);R(this,Us,null);R(this,Ct,null);R(this,op,!1);R(this,cc,null);R(this,Vy,"");R(this,dh,!1);R(this,Yn,null);R(this,fh,null);R(this,_o,null);R(this,uc,null);R(this,Uy,"");R(this,ph,!1);R(this,Ti,null);R(this,By,!1);R(this,mh,!1);R(this,bo,!1);R(this,Ia,null);R(this,lp,0);R(this,cp,0);R(this,ls,null);R(this,gh,null);Te(this,"_editToolbar",null);Te(this,"_initialOptions",Object.create(null));Te(this,"_initialData",null);Te(this,"_isVisible",!0);Te(this,"_uiManager",null);Te(this,"_focusEventsAllowed",!0);R(this,$y,!1);R(this,zA,ze._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:n,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ze.prototype._resizeWithKeyboard,n=Ad.TRANSLATE_SMALL,r=Ad.TRANSLATE_BIG;return Ge(this,"_resizerKeyboardManager",new cw([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],ze.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Ge(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const n=new Ine({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});n.annotationElementId=e.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(e,n){if(ze._l10n??(ze._l10n=e),ze._l10nResizer||(ze._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ze._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);ze._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,n){bt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,$y)}set _isDraggable(e){var n;S(this,$y,e),(n=this.div)==null||n.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(e*2),this.y+=this.width*e/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(e*2),this.y-=this.width*e/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,zA)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):N(this,Ie,Gg).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(d(this,ph)?S(this,ph,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const n=e.relatedTarget;n!=null&&n.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,n,r,i){const[s,a]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(n+i)/a,this.fixAndSetPosition()}translate(e,n){N(this,Ie,cI).call(this,this.parentDimensions,e,n)}translateInPage(e,n){d(this,Ti)||S(this,Ti,[this.x,this.y,this.width,this.height]),N(this,Ie,cI).call(this,this.pageDimensions,e,n),this.div.scrollIntoView({block:"nearest"})}drag(e,n){d(this,Ti)||S(this,Ti,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=n/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,c]=this.getBaseTranslation();a+=l,o+=c;const{style:u}=r;u.left=`${(100*a).toFixed(2)}%`,u.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),r.scrollIntoView({block:"nearest"})}_onTranslating(e,n){}_onTranslated(e,n){}get _hasBeenMoved(){return!!d(this,Ti)&&(d(this,Ti)[0]!==this.x||d(this,Ti)[1]!==this.y)}get _hasBeenResized(){return!!d(this,Ti)&&(d(this,Ti)[2]!==this.width||d(this,Ti)[3]!==this.height)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:r}=ze,i=r/e,s=r/n;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:n},pageDimensions:[r,i]}=this;let{x:s,y:a,width:o,height:l}=this;if(o*=r,l*=i,s*=r,a*=i,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(r-o,s)),a=Math.max(0,Math.min(i-l,a));break;case 90:s=Math.max(0,Math.min(r-l,s)),a=Math.min(i,Math.max(o,a));break;case 180:s=Math.min(r,Math.max(o,s)),a=Math.min(i,Math.max(l,a));break;case 270:s=Math.min(r,Math.max(l,s)),a=Math.max(0,Math.min(i-o,a));break}this.x=s/=r,this.y=a/=i;const[c,u]=this.getBaseTranslation();s+=c,a+=u,n.left=`${(100*s).toFixed(2)}%`,n.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,n){var r;return N(r=ze,zy,uI).call(r,e,n,this.parentRotation)}pageTranslationToScreen(e,n){var r;return N(r=ze,zy,uI).call(r,e,n,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[n,r]}=this;return[n*e,r*e]}setDims(e,n){const[r,i]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*e/r).toFixed(2)}%`,d(this,dh)||(s.height=`${(100*n/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:n,width:r}=e,i=r.endsWith("%"),s=!d(this,dh)&&n.endsWith("%");if(i&&s)return;const[a,o]=this.parentDimensions;i||(e.width=`${(100*parseFloat(r)/a).toFixed(2)}%`),!d(this,dh)&&!s&&(e.height=`${(100*parseFloat(n)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=d(this,Ct))==null||e.finish()}async addEditToolbar(){return this._editToolbar||d(this,mh)?this._editToolbar:(this._editToolbar=new JP(this),this.div.append(this._editToolbar.render()),d(this,Ct)&&await this._editToolbar.addAltText(d(this,Ct)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=d(this,Ct))==null||e.destroy())}addContainer(e){var r;const n=(r=this._editToolbar)==null?void 0:r.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){d(this,Ct)||(Hx.initialize(ze._l10n),S(this,Ct,new Hx(this)),d(this,hh)&&(d(this,Ct).data=d(this,hh),S(this,hh,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=d(this,Ct))==null?void 0:e.data}set altTextData(e){d(this,Ct)&&(d(this,Ct).data=e)}get guessedAltText(){var e;return(e=d(this,Ct))==null?void 0:e.guessedText}async setGuessedAltText(e){var n;await((n=d(this,Ct))==null?void 0:n.setGuessedText(e))}serializeAltText(e){var n;return(n=d(this,Ct))==null?void 0:n.serialize(e)}hasAltText(){return!!d(this,Ct)&&!d(this,Ct).isEmpty()}hasAltTextData(){var e;return((e=d(this,Ct))==null?void 0:e.hasData())??!1}render(){var s;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=d(this,op)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),N(this,Ie,pI).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*n/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),zx(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(d(this,gh)||S(this,gh,new Wx({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:N(this,Ie,Lz).bind(this),onPinching:N(this,Ie,jz).bind(this),onPinchEnd:N(this,Ie,Fz).bind(this),signal:this._uiManager._signal}))),(s=this._uiManager._editorUndoBar)==null||s.hide(),this.div}pointerdown(e){const{isMac:n}=Xr.platform;if(e.button!==0||e.ctrlKey&&n){e.preventDefault();return}if(S(this,ph,!0),this._isDraggable){N(this,Ie,Vz).call(this,e);return}N(this,Ie,fI).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){d(this,Ia)&&clearTimeout(d(this,Ia)),S(this,Ia,setTimeout(()=>{var e;S(this,Ia,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,n,r){e.changeParent(this),this.x=n,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,n,r=this.rotation){const i=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,c=e/i,u=n/i,h=this.x*s,f=this.y*a,m=this.width*s,g=this.height*a;switch(r){case 0:return[h+c+o,a-f-u-g+l,h+c+m+o,a-f-u+l];case 90:return[h+u+o,a-f+c+l,h+u+g+o,a-f+c+m+l];case 180:return[h-c-m+o,a-f+u+l,h-c+o,a-f+u+g+l];case 270:return[h-u-g+o,a-f-c-m+l,h-u+o,a-f-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,n){const[r,i,s,a]=e,o=s-r,l=a-i;switch(this.rotation){case 0:return[r,n-a,o,l];case 90:return[r,n-i,l,o];case 180:return[s,n-i,o,l];case 270:return[s,n-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){S(this,mh,!0)}disableEditMode(){S(this,mh,!1)}isInEditMode(){return d(this,mh)}shouldGetKeyboardEvents(){return d(this,bo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:n,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return n<a&&i>0&&e<s&&r>0}rebuild(){N(this,Ie,pI).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,n=null){bt("An editor must be serializable")}static async deserialize(e,n,r){const i=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:r});i.rotation=e.rotation,S(i,hh,e.accessibilityData);const[s,a]=i.pageDimensions,[o,l,c,u]=i.getRectInCurrentCoords(e.rect,a);return i.x=o/s,i.y=l/a,i.width=c/s,i.height=u/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,n;if((e=d(this,uc))==null||e.abort(),S(this,uc,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),d(this,Ia)&&(clearTimeout(d(this,Ia)),S(this,Ia,null)),N(this,Ie,Gg).call(this),this.removeEditToolbar(),d(this,ls)){for(const r of d(this,ls).values())clearTimeout(r);S(this,ls,null)}this.parent=null,(n=d(this,gh))==null||n.destroy(),S(this,gh,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(N(this,Ie,Dz).call(this),d(this,Yn).classList.remove("hidden"),zx(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),S(this,_o,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const n=d(this,Yn).children;if(!d(this,Us)){S(this,Us,Array.from(n));const a=N(this,Ie,Uz).bind(this),o=N(this,Ie,Bz).bind(this),l=this._uiManager._signal;for(const c of d(this,Us)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",a,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",N(this,Ie,$z).bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",ze._l10nResizer[u])}}const r=d(this,Us)[0];let i=0;for(const a of n){if(a===r)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(d(this,Us).length/4);if(s!==i){if(s<i)for(let o=0;o<i-s;o++)d(this,Yn).append(d(this,Yn).firstChild);else if(s>i)for(let o=0;o<s-i;o++)d(this,Yn).firstChild.before(d(this,Yn).lastChild);let a=0;for(const o of n){const c=d(this,Us)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",ze._l10nResizer[c])}}N(this,Ie,mI).call(this,0),S(this,bo,!0),d(this,Yn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,n){d(this,bo)&&N(this,Ie,dI).call(this,d(this,Uy),{deltaX:e,deltaY:n,fromKeyboard:!0})}_stopResizingWithKeyboard(){N(this,Ie,Gg).call(this),this.div.focus()}select(){var e,n,r;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(n=this._editToolbar)==null||n.show(),(r=d(this,Ct))==null||r.toggleAltTextBadge(!1)}unselect(){var e,n,r,i,s;(e=d(this,Yn))==null||e.classList.add("hidden"),(n=this.div)==null||n.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(s=d(this,Ct))==null||s.toggleAltTextBadge(!0)}updateParams(e,n){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return d(this,By)}set isEditing(e){S(this,By,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,n){S(this,dh,!0);const r=e/n,{style:i}=this.div;i.aspectRatio=r,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){d(this,ls)||S(this,ls,new Map);const{action:r}=e;let i=d(this,ls).get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),d(this,ls).delete(r),d(this,ls).size===0&&S(this,ls,null)},ze._telemetryTimeout),d(this,ls).set(r,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),S(this,op,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,op,!0)}renderAnnotationElement(e){let n=e.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),e.container.prepend(n);else if(n.nodeName==="CANVAS"){const r=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),r.before(n)}return n}resetAnnotationElement(e){const{firstChild:n}=e.container;(n==null?void 0:n.nodeName)==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}};hh=new WeakMap,Us=new WeakMap,Ct=new WeakMap,op=new WeakMap,cc=new WeakMap,Vy=new WeakMap,dh=new WeakMap,Yn=new WeakMap,fh=new WeakMap,_o=new WeakMap,uc=new WeakMap,Uy=new WeakMap,ph=new WeakMap,Ti=new WeakMap,By=new WeakMap,mh=new WeakMap,bo=new WeakMap,Ia=new WeakMap,lp=new WeakMap,cp=new WeakMap,ls=new WeakMap,gh=new WeakMap,$y=new WeakMap,zA=new WeakMap,Ie=new WeakSet,cI=function([e,n],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},zy=new WeakSet,uI=function(e,n,r){switch(r){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}},Eb=function(e){switch(e){case 90:{const[n,r]=this.pageDimensions;return[0,-n/r,r/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,r]=this.pageDimensions;return[0,n/r,-r/n,0]}default:return[1,0,0,1]}},Dz=function(){if(d(this,Yn))return;S(this,Yn,document.createElement("div")),d(this,Yn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const r of e){const i=document.createElement("div");d(this,Yn).append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",N(this,Ie,Mz).bind(this,r),{signal:n}),i.addEventListener("contextmenu",oa,{signal:n}),i.tabIndex=-1}this.div.prepend(d(this,Yn))},Mz=function(e,n){var u;n.preventDefault();const{isMac:r}=Xr.platform;if(n.button!==0||n.ctrlKey&&r)return;(u=d(this,Ct))==null||u.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,S(this,fh,[n.screenX,n.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",N(this,Ie,dI).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Ui,{passive:!1,signal:a}),window.addEventListener("contextmenu",oa,{signal:a}),S(this,_o,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const c=()=>{var h;s.abort(),this.parent.togglePointerEvents(!0),(h=d(this,Ct))==null||h.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,N(this,Ie,Sb).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})},hI=function(e,n,r,i){this.width=r,this.height=i,this.x=e,this.y=n;const[s,a]=this.parentDimensions;this.setDims(s*r,a*i),this.fixAndSetPosition(),this._onResized()},Sb=function(){if(!d(this,_o))return;const{savedX:e,savedY:n,savedWidth:r,savedHeight:i}=d(this,_o);S(this,_o,null);const s=this.x,a=this.y,o=this.width,l=this.height;s===e&&a===n&&o===r&&l===i||this.addCommands({cmd:N(this,Ie,hI).bind(this,s,a,o,l),undo:N(this,Ie,hI).bind(this,e,n,r,i),mustExec:!0})},dI=function(e,n){const[r,i]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,c=ze.MIN_SIZE/r,u=ze.MIN_SIZE/i,h=N(this,Ie,Eb).call(this,this.rotation),f=(K,q)=>[h[0]*K+h[2]*q,h[1]*K+h[3]*q],m=N(this,Ie,Eb).call(this,360-this.rotation),g=(K,q)=>[m[0]*K+m[2]*q,m[1]*K+m[3]*q];let v,y,w=!1,b=!1;switch(e){case"topLeft":w=!0,v=(K,q)=>[0,0],y=(K,q)=>[K,q];break;case"topMiddle":v=(K,q)=>[K/2,0],y=(K,q)=>[K/2,q];break;case"topRight":w=!0,v=(K,q)=>[K,0],y=(K,q)=>[0,q];break;case"middleRight":b=!0,v=(K,q)=>[K,q/2],y=(K,q)=>[0,q/2];break;case"bottomRight":w=!0,v=(K,q)=>[K,q],y=(K,q)=>[0,0];break;case"bottomMiddle":v=(K,q)=>[K/2,q],y=(K,q)=>[K/2,0];break;case"bottomLeft":w=!0,v=(K,q)=>[0,q],y=(K,q)=>[K,0];break;case"middleLeft":b=!0,v=(K,q)=>[0,q/2],y=(K,q)=>[K,q/2];break}const A=v(o,l),I=y(o,l);let k=f(...I);const M=ze._round(s+k[0]),P=ze._round(a+k[1]);let C=1,O=1,j,D;if(n.fromKeyboard)({deltaX:j,deltaY:D}=n);else{const{screenX:K,screenY:q}=n,[H,X]=d(this,fh);[j,D]=this.screenToPageTranslation(K-H,q-X),d(this,fh)[0]=K,d(this,fh)[1]=q}if([j,D]=g(j/r,D/i),w){const K=Math.hypot(o,l);C=O=Math.max(Math.min(Math.hypot(I[0]-A[0]-j,I[1]-A[1]-D)/K,1/o,1/l),c/o,u/l)}else b?C=Math.max(c,Math.min(1,Math.abs(I[0]-A[0]-j)))/o:O=Math.max(u,Math.min(1,Math.abs(I[1]-A[1]-D)))/l;const F=ze._round(o*C),V=ze._round(l*O);k=f(...y(F,V));const Y=M-k[0],re=P-k[1];d(this,Ti)||S(this,Ti,[this.x,this.y,this.width,this.height]),this.width=F,this.height=V,this.x=Y,this.y=re,this.setDims(r*F,i*V),this.fixAndSetPosition(),this._onResizing()},Lz=function(){var e;S(this,_o,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=d(this,Ct))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},jz=function(e,n,r){let s=.7*(r/n)+1-.7;if(s===1)return;const a=N(this,Ie,Eb).call(this,this.rotation),o=(M,P)=>[a[0]*M+a[2]*P,a[1]*M+a[3]*P],[l,c]=this.parentDimensions,u=this.x,h=this.y,f=this.width,m=this.height,g=ze.MIN_SIZE/l,v=ze.MIN_SIZE/c;s=Math.max(Math.min(s,1/f,1/m),g/f,v/m);const y=ze._round(f*s),w=ze._round(m*s);if(y===f&&w===m)return;d(this,Ti)||S(this,Ti,[u,h,f,m]);const b=o(f/2,m/2),A=ze._round(u+b[0]),I=ze._round(h+b[1]),k=o(y/2,w/2);this.x=A-k[0],this.y=I-k[1],this.width=y,this.height=w,this.setDims(l*y,c*w),this.fixAndSetPosition(),this._onResizing()},Fz=function(){var e;(e=d(this,Ct))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),N(this,Ie,Sb).call(this)},fI=function(e){const{isMac:n}=Xr.platform;e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)},Vz=function(e){const{isSelected:n}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:s},o=c=>{i.abort(),S(this,cc,null),S(this,ph,!1),this._uiManager.endDragSession()||N(this,Ie,fI).call(this,c),r&&this._onStopDragging()};n&&(S(this,lp,e.clientX),S(this,cp,e.clientY),S(this,cc,e.pointerId),S(this,Vy,e.pointerType),window.addEventListener("pointermove",c=>{r||(r=!0,this._onStartDragging());const{clientX:u,clientY:h,pointerId:f}=c;if(f!==d(this,cc)){Ui(c);return}const[m,g]=this.screenToPageTranslation(u-d(this,lp),h-d(this,cp));S(this,lp,u),S(this,cp,h),this._uiManager.dragSelectedEditors(m,g)},a),window.addEventListener("touchmove",Ui,a),window.addEventListener("pointerdown",c=>{c.pointerType===d(this,Vy)&&(d(this,gh)||c.isPrimary)&&o(c),Ui(c)},a));const l=c=>{if(!d(this,cc)||d(this,cc)===c.pointerId){o(c);return}Ui(c)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})},pI=function(){if(d(this,uc)||!this.div)return;S(this,uc,new AbortController);const e=this._uiManager.combinedSignal(d(this,uc));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},Uz=function(e){ze._resizerKeyboardManager.exec(this,e)},Bz=function(e){var n;d(this,bo)&&((n=e.relatedTarget)==null?void 0:n.parentNode)!==d(this,Yn)&&N(this,Ie,Gg).call(this)},$z=function(e){S(this,Uy,d(this,bo)?e:"")},mI=function(e){if(d(this,Us))for(const n of d(this,Us))n.tabIndex=e},Gg=function(){S(this,bo,!1),N(this,Ie,mI).call(this,-1),N(this,Ie,Sb).call(this)},R(ze,zy),Te(ze,"_l10n",null),Te(ze,"_l10nResizer",null),Te(ze,"_borderLineWidth",-1),Te(ze,"_colorManager",new tI),Te(ze,"_zIndex",1),Te(ze,"_telemetryTimeout",1e3);let $t=ze;class Ine extends $t{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const pL=3285377520,is=4294901760,va=65535;class zz{constructor(e){this.h1=e?e&4294967295:pL,this.h2=e?e&4294967295:pL}update(e){let n,r;if(typeof e=="string"){n=new Uint8Array(e.length*2),r=0;for(let v=0,y=e.length;v<y;v++){const w=e.charCodeAt(v);w<=255?n[r++]=w:(n[r++]=w>>>8,n[r++]=w&255)}}else if(ArrayBuffer.isView(e))n=e.slice(),r=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,s=r-i*4,a=new Uint32Array(n.buffer,0,i);let o=0,l=0,c=this.h1,u=this.h2;const h=3432918353,f=461845907,m=h&va,g=f&va;for(let v=0;v<i;v++)v&1?(o=a[v],o=o*h&is|o*m&va,o=o<<15|o>>>17,o=o*f&is|o*g&va,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=a[v],l=l*h&is|l*m&va,l=l<<15|l>>>17,l=l*f&is|l*g&va,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(o=0,s){case 3:o^=n[i*4+2]<<16;case 2:o^=n[i*4+1]<<8;case 1:o^=n[i*4],o=o*h&is|o*m&va,o=o<<15|o>>>17,o=o*f&is|o*g&va,i&1?c^=o:u^=o}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,n=this.h2;return e^=n>>>1,e=e*3981806797&is|e*36045&va,n=n*4283543511&is|((n<<16|e>>>16)*2950163797&is)>>>16,e^=n>>>1,e=e*444984403&is|e*60499&va,n=n*3301882366&is|((n<<16|e>>>16)*3120437893&is)>>>16,e^=n>>>1,(e>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const gI=Object.freeze({map:null,hash:"",transfer:void 0});var vh,yh,Fn,HA,Hz;class cN{constructor(){R(this,HA);R(this,vh,!1);R(this,yh,null);R(this,Fn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,n){const r=d(this,Fn).get(e);return r===void 0?n:Object.assign(n,r)}getRawValue(e){return d(this,Fn).get(e)}remove(e){if(d(this,Fn).delete(e),d(this,Fn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const n of d(this,Fn).values())if(n instanceof $t)return;this.onAnnotationEditor(null)}}setValue(e,n){const r=d(this,Fn).get(e);let i=!1;if(r!==void 0)for(const[s,a]of Object.entries(n))r[s]!==a&&(i=!0,r[s]=a);else i=!0,d(this,Fn).set(e,n);i&&N(this,HA,Hz).call(this),n instanceof $t&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type)}has(e){return d(this,Fn).has(e)}getAll(){return d(this,Fn).size>0?rN(d(this,Fn)):null}setAll(e){for(const[n,r]of Object.entries(e))this.setValue(n,r)}get size(){return d(this,Fn).size}resetModified(){d(this,vh)&&(S(this,vh,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Wz(this)}get serializable(){if(d(this,Fn).size===0)return gI;const e=new Map,n=new zz,r=[],i=Object.create(null);let s=!1;for(const[a,o]of d(this,Fn)){const l=o instanceof $t?o.serialize(!1,i):o;l&&(e.set(a,l),n.update(`${a}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const a of e.values())a.bitmap&&r.push(a.bitmap);return e.size>0?{map:e,hash:n.hexdigest(),transfer:r}:gI}get editorStats(){let e=null;const n=new Map;for(const r of d(this,Fn).values()){if(!(r instanceof $t))continue;const i=r.telemetryFinalData;if(!i)continue;const{type:s}=i;n.has(s)||n.set(s,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const a=e[s]||(e[s]=new Map);for(const[o,l]of Object.entries(i)){if(o==="type")continue;let c=a.get(o);c||(c=new Map,a.set(o,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[r,i]of n)e[r]=i.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){S(this,yh,null)}get modifiedIds(){if(d(this,yh))return d(this,yh);const e=[];for(const n of d(this,Fn).values())!(n instanceof $t)||!n.annotationElementId||!n.serialize()||e.push(n.annotationElementId);return S(this,yh,{ids:new Set(e),hash:e.join(",")})}}vh=new WeakMap,yh=new WeakMap,Fn=new WeakMap,HA=new WeakSet,Hz=function(){d(this,vh)||(S(this,vh,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Hy;class Wz extends cN{constructor(n){super();R(this,Hy);const{map:r,hash:i,transfer:s}=n.serializable,a=structuredClone(r,s?{transfer:s}:null);S(this,Hy,{map:a,hash:i,transfer:s})}get print(){bt("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,Hy)}get modifiedIds(){return Ge(this,"modifiedIds",{ids:new Set,hash:""})}}Hy=new WeakMap;var up;class Cne{constructor({ownerDocument:e=globalThis.document,styleElement:n=null}){R(this,up,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(e,n.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),d(this,up).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:n}){if(!(!e||d(this,up).has(e.loadedName))){if(dn(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:s}=e,a=new FontFace(r,i,s);this.addNativeFontFace(a);try{await a.load(),d(this,up).add(r),n==null||n(e)}catch{$e(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}bt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw $e(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const n=e.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var n;const e=!!((n=this._document)!=null&&n.fonts);return Ge(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(kr||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Ge(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function n(){for(dn(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const s=r.shift();setTimeout(s.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:n,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ge(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,n){function r(I,k){return I.charCodeAt(k)<<24|I.charCodeAt(k+1)<<16|I.charCodeAt(k+2)<<8|I.charCodeAt(k+3)&255}function i(I,k,M,P){const C=I.substring(0,k),O=I.substring(k+M);return C+P+O}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;function u(I,k){if(++c>30){$e("Load test font never loaded."),k();return}if(l.font="30px "+I,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(u.bind(null,I,k))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,h.length,h);const g=16,v=1482184792;let y=r(f,g);for(s=0,a=h.length-3;s<a;s+=4)y=y-v+r(h,s)|0;s<h.length&&(y=y-v+r(h+"XXX",s)|0),f=i(f,g,4,pne(y));const w=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${h}";src:${w}}`;this.insertRule(b);const A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(const I of[e.loadedName,h]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=I,A.append(k)}this._document.body.append(A),u(h,()=>{A.remove(),n.complete()})}}up=new WeakMap;class kne{constructor(e,{disableFontFace:n=!1,fontExtraProperties:r=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=n===!0,this.fontExtraProperties=r===!0,this._inspectFont=i}createNativeFontFace(){var n;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(n=this._inspectFont)==null||n.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${_ne(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),n}getPathGenerator(e,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const r=this.loadedName+"_path_"+n;let i;try{i=e.get(r)}catch(a){$e(`getPathGenerator - ignoring character: "${a}".`)}const s=new Path2D(i||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[n]=s}}const I_={DATA:1,ERROR:2},ln={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function mL(){}function ai(t){if(t instanceof tu||t instanceof XP||t instanceof ey||t instanceof hL||t instanceof $x||t instanceof GS)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||bt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new tu(t.message);case"InvalidPDFException":return new XP(t.message);case"MissingPDFException":return new ey(t.message);case"PasswordException":return new hL(t.message,t.code);case"UnexpectedResponseException":return new $x(t.message,t.status);case"UnknownErrorException":return new GS(t.message,t.details)}return new GS(t.message,t.toString())}var hp,Es,Gz,qz,Kz,Tb;class qg{constructor(e,n,r){R(this,Es);R(this,hp,new AbortController);this.sourceName=e,this.targetName=n,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",N(this,Es,Gz).bind(this),{signal:d(this,hp).signal})}on(e,n){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=n}send(e,n,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n},r)}sendWithPromise(e,n,r){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:n},r)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,n,r,i){const s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:n,desiredSize:c.desiredSize},i),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,l.postMessage({sourceName:a,targetName:o,stream:ln.PULL,streamId:s,desiredSize:c.desiredSize}),u.promise},cancel:c=>{dn(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:ln.CANCEL,streamId:s,reason:ai(c)}),u.promise}},r)}destroy(){var e;(e=d(this,hp))==null||e.abort(),S(this,hp,null)}}hp=new WeakMap,Es=new WeakSet,Gz=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){N(this,Es,Kz).call(this,e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===I_.DATA)i.resolve(e.data);else if(e.callback===I_.ERROR)i.reject(ai(e.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,s=this.comObj;Promise.try(n,e.data).then(function(a){s.postMessage({sourceName:r,targetName:i,callback:I_.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:r,targetName:i,callback:I_.ERROR,callbackId:e.callbackId,reason:ai(a)})});return}if(e.streamId){N(this,Es,qz).call(this,e);return}n(e.data)},qz=function(e){const n=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(c,u=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:ln.ENQUEUE,streamId:n,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:ln.CLOSE,streamId:n}),delete a.streamSinks[n])},error(c){dn(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:ln.ERROR,streamId:n,reason:ai(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[n]=l,Promise.try(o,e.data,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:ln.START_COMPLETE,streamId:n,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:ln.START_COMPLETE,streamId:n,reason:ai(c)})})},Kz=function(e){const n=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,a=this.streamControllers[n],o=this.streamSinks[n];switch(e.stream){case ln.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(ai(e.reason));break;case ln.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(ai(e.reason));break;case ln.PULL:if(!o){s.postMessage({sourceName:r,targetName:i,stream:ln.PULL_COMPLETE,streamId:n,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||mL).then(function(){s.postMessage({sourceName:r,targetName:i,stream:ln.PULL_COMPLETE,streamId:n,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:ln.PULL_COMPLETE,streamId:n,reason:ai(c)})});break;case ln.ENQUEUE:if(dn(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case ln.CLOSE:if(dn(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),N(this,Es,Tb).call(this,a,n);break;case ln.ERROR:dn(a,"error should have stream controller"),a.controller.error(ai(e.reason)),N(this,Es,Tb).call(this,a,n);break;case ln.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(ai(e.reason)),N(this,Es,Tb).call(this,a,n);break;case ln.CANCEL:if(!o)break;const l=ai(e.reason);Promise.try(o.onCancel||mL,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:ln.CANCEL_COMPLETE,streamId:n,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:ln.CANCEL_COMPLETE,streamId:n,reason:ai(c)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}},Tb=async function(e,n){var r,i,s;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(i=e.pullCall)==null?void 0:i.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[n]};var Wy;class Xz{constructor({enableHWA:e=!1}){R(this,Wy,!1);S(this,Wy,e)}create(e,n){if(e<=0||n<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,n);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!d(this,Wy)})}}reset(e,n,r){if(!e.canvas)throw new Error("Canvas is not specified");if(n<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=n,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,n){bt("Abstract method `_createCanvas` called.")}}Wy=new WeakMap;class Rne extends Xz{constructor({ownerDocument:e=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=e}_createCanvas(e,n){const r=this._document.createElement("canvas");return r.width=e,r.height=n,r}}class Yz{constructor({baseUrl:e=null,isCompressed:n=!0}){this.baseUrl=e,this.isCompressed=n}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(e){bt("Abstract method `_fetch` called.")}}class Qz extends Yz{async _fetch(e){const n=await XE(e,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):KE(n)}}class Jz{addFilter(e){return"none"}addHCMFilter(e,n){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,n,r,i,s){return"none"}destroy(e=!1){}}var wh,dp,xo,Ao,br,_h,bh,he,yr,Kg,lf,Pb,cf,Zz,vI,uf,Xg,Yg,yI,Qg;class Nne extends Jz{constructor({docId:n,ownerDocument:r=globalThis.document}){super();R(this,he);R(this,wh);R(this,dp);R(this,xo);R(this,Ao);R(this,br);R(this,_h);R(this,bh,0);S(this,Ao,n),S(this,br,r)}addFilter(n){if(!n)return"none";let r=d(this,he,yr).get(n);if(r)return r;const[i,s,a]=N(this,he,Pb).call(this,n),o=n.length===1?i:`${i}${s}${a}`;if(r=d(this,he,yr).get(o),r)return d(this,he,yr).set(n,r),r;const l=`g_${d(this,Ao)}_transfer_map_${Lr(this,bh)._++}`,c=N(this,he,cf).call(this,l);d(this,he,yr).set(n,c),d(this,he,yr).set(o,c);const u=N(this,he,uf).call(this,l);return N(this,he,Yg).call(this,i,s,a,u),c}addHCMFilter(n,r){var g;const i=`${n}-${r}`,s="base";let a=d(this,he,Kg).get(s);if((a==null?void 0:a.key)===i||(a?((g=a.filter)==null||g.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},d(this,he,Kg).set(s,a)),!n||!r))return a.url;const o=N(this,he,Qg).call(this,n);n=_e.makeHexColor(...o);const l=N(this,he,Qg).call(this,r);if(r=_e.makeHexColor(...l),d(this,he,lf).style.color="",n==="#000000"&&r==="#ffffff"||n===r)return a.url;const c=new Array(256);for(let v=0;v<=255;v++){const y=v/255;c[v]=y<=.03928?y/12.92:((y+.055)/1.055)**2.4}const u=c.join(","),h=`g_${d(this,Ao)}_hcm_filter`,f=a.filter=N(this,he,uf).call(this,h);N(this,he,Yg).call(this,u,u,u,f),N(this,he,vI).call(this,f);const m=(v,y)=>{const w=o[v]/255,b=l[v]/255,A=new Array(y+1);for(let I=0;I<=y;I++)A[I]=w+I/y*(b-w);return A.join(",")};return N(this,he,Yg).call(this,m(0,5),m(1,5),m(2,5),f),a.url=N(this,he,cf).call(this,h),a.url}addAlphaFilter(n){let r=d(this,he,yr).get(n);if(r)return r;const[i]=N(this,he,Pb).call(this,[n]),s=`alpha_${i}`;if(r=d(this,he,yr).get(s),r)return d(this,he,yr).set(n,r),r;const a=`g_${d(this,Ao)}_alpha_map_${Lr(this,bh)._++}`,o=N(this,he,cf).call(this,a);d(this,he,yr).set(n,o),d(this,he,yr).set(s,o);const l=N(this,he,uf).call(this,a);return N(this,he,yI).call(this,i,l),o}addLuminosityFilter(n){let r=d(this,he,yr).get(n||"luminosity");if(r)return r;let i,s;if(n?([i]=N(this,he,Pb).call(this,[n]),s=`luminosity_${i}`):s="luminosity",r=d(this,he,yr).get(s),r)return d(this,he,yr).set(n,r),r;const a=`g_${d(this,Ao)}_luminosity_map_${Lr(this,bh)._++}`,o=N(this,he,cf).call(this,a);d(this,he,yr).set(n,o),d(this,he,yr).set(s,o);const l=N(this,he,uf).call(this,a);return N(this,he,Zz).call(this,l),n&&N(this,he,yI).call(this,i,l),o}addHighlightHCMFilter(n,r,i,s,a){var b;const o=`${r}-${i}-${s}-${a}`;let l=d(this,he,Kg).get(n);if((l==null?void 0:l.key)===o||(l?((b=l.filter)==null||b.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},d(this,he,Kg).set(n,l)),!r||!i))return l.url;const[c,u]=[r,i].map(N(this,he,Qg).bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[m,g]=[s,a].map(N(this,he,Qg).bind(this));f<h&&([h,f,m,g]=[f,h,g,m]),d(this,he,lf).style.color="";const v=(A,I,k)=>{const M=new Array(256),P=(f-h)/k,C=A/255,O=(I-A)/(255*k);let j=0;for(let D=0;D<=k;D++){const F=Math.round(h+D*P),V=C+D*O;for(let Y=j;Y<=F;Y++)M[Y]=V;j=F+1}for(let D=j;D<256;D++)M[D]=M[j-1];return M.join(",")},y=`g_${d(this,Ao)}_hcm_${n}_filter`,w=l.filter=N(this,he,uf).call(this,y);return N(this,he,vI).call(this,w),N(this,he,Yg).call(this,v(m[0],g[0],5),v(m[1],g[1],5),v(m[2],g[2],5),w),l.url=N(this,he,cf).call(this,y),l.url}destroy(n=!1){var r,i,s,a;n&&((r=d(this,_h))!=null&&r.size)||((i=d(this,xo))==null||i.parentNode.parentNode.remove(),S(this,xo,null),(s=d(this,dp))==null||s.clear(),S(this,dp,null),(a=d(this,_h))==null||a.clear(),S(this,_h,null),S(this,bh,0))}}wh=new WeakMap,dp=new WeakMap,xo=new WeakMap,Ao=new WeakMap,br=new WeakMap,_h=new WeakMap,bh=new WeakMap,he=new WeakSet,yr=function(){return d(this,dp)||S(this,dp,new Map)},Kg=function(){return d(this,_h)||S(this,_h,new Map)},lf=function(){if(!d(this,xo)){const n=d(this,br).createElement("div"),{style:r}=n;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const i=d(this,br).createElementNS(ao,"svg");i.setAttribute("width",0),i.setAttribute("height",0),S(this,xo,d(this,br).createElementNS(ao,"defs")),n.append(i),i.append(d(this,xo)),d(this,br).body.append(n)}return d(this,xo)},Pb=function(n){if(n.length===1){const c=n[0],u=new Array(256);for(let f=0;f<256;f++)u[f]=c[f]/255;const h=u.join(",");return[h,h,h]}const[r,i,s]=n,a=new Array(256),o=new Array(256),l=new Array(256);for(let c=0;c<256;c++)a[c]=r[c]/255,o[c]=i[c]/255,l[c]=s[c]/255;return[a.join(","),o.join(","),l.join(",")]},cf=function(n){if(d(this,wh)===void 0){S(this,wh,"");const r=d(this,br).URL;r!==d(this,br).baseURI&&(YE(r)?$e('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,wh,r.split("#",1)[0]))}return`url(${d(this,wh)}#${n})`},Zz=function(n){const r=d(this,br).createElementNS(ao,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),n.append(r)},vI=function(n){const r=d(this,br).createElementNS(ao,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),n.append(r)},uf=function(n){const r=d(this,br).createElementNS(ao,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",n),d(this,he,lf).append(r),r},Xg=function(n,r,i){const s=d(this,br).createElementNS(ao,r);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),n.append(s)},Yg=function(n,r,i,s){const a=d(this,br).createElementNS(ao,"feComponentTransfer");s.append(a),N(this,he,Xg).call(this,a,"feFuncR",n),N(this,he,Xg).call(this,a,"feFuncG",r),N(this,he,Xg).call(this,a,"feFuncB",i)},yI=function(n,r){const i=d(this,br).createElementNS(ao,"feComponentTransfer");r.append(i),N(this,he,Xg).call(this,i,"feFuncA",n)},Qg=function(n){return d(this,he,lf).style.color=n,lN(getComputedStyle(d(this,he,lf)).getPropertyValue("color"))};class e3{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(e){bt("Abstract method `_fetch` called.")}}class t3 extends e3{async _fetch(e){const n=await XE(e,"arraybuffer");return new Uint8Array(n)}}kr&&$e("Please use the `legacy` build in Node.js environments.");async function n3(t){const n=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(n)}class One extends Jz{}class Dne extends Xz{_createCanvas(e,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,n)}}class Mne extends Yz{async _fetch(e){return n3(e)}}class Lne extends e3{async _fetch(e){return n3(e)}}const Tr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function wI(t,e){if(!e)return;const n=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],n,r),t.clip(i)}class uN{getPattern(){bt("Abstract method `getPattern` called.")}}class jne extends uN{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let n;this._type==="axial"?n=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)n.addColorStop(r[0],r[1]);return n}getPattern(e,n,r,i){let s;if(i===Tr.STROKE||i===Tr.FILL){const a=n.current.getClippedPathBoundingBox(i,Ot(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,c=n.cachedCanvases.getCanvas("pattern",o,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-a[0],-a[1]),r=_e.transform(r,[1,0,0,1,a[0],a[1]]),u.transform(...n.baseTransform),this.matrix&&u.transform(...this.matrix),wI(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=e.createPattern(c.canvas,"no-repeat");const h=new DOMMatrix(r);s.setTransform(h)}else wI(e,this._bbox),s=this._createGradient(e);return s}}function XS(t,e,n,r,i,s,a,o){const l=e.coords,c=e.colors,u=t.data,h=t.width*4;let f;l[n+1]>l[r+1]&&(f=n,n=r,r=f,f=s,s=a,a=f),l[r+1]>l[i+1]&&(f=r,r=i,i=f,f=a,a=o,o=f),l[n+1]>l[r+1]&&(f=n,n=r,r=f,f=s,s=a,a=f);const m=(l[n]+e.offsetX)*e.scaleX,g=(l[n+1]+e.offsetY)*e.scaleY,v=(l[r]+e.offsetX)*e.scaleX,y=(l[r+1]+e.offsetY)*e.scaleY,w=(l[i]+e.offsetX)*e.scaleX,b=(l[i+1]+e.offsetY)*e.scaleY;if(g>=b)return;const A=c[s],I=c[s+1],k=c[s+2],M=c[a],P=c[a+1],C=c[a+2],O=c[o],j=c[o+1],D=c[o+2],F=Math.round(g),V=Math.round(b);let Y,re,K,q,H,X,te,ce;for(let ue=F;ue<=V;ue++){if(ue<y){const me=ue<g?0:(g-ue)/(g-y);Y=m-(m-v)*me,re=A-(A-M)*me,K=I-(I-P)*me,q=k-(k-C)*me}else{let me;ue>b?me=1:y===b?me=0:me=(y-ue)/(y-b),Y=v-(v-w)*me,re=M-(M-O)*me,K=P-(P-j)*me,q=C-(C-D)*me}let ve;ue<g?ve=0:ue>b?ve=1:ve=(g-ue)/(g-b),H=m-(m-w)*ve,X=A-(A-O)*ve,te=I-(I-j)*ve,ce=k-(k-D)*ve;const Ue=Math.round(Math.min(Y,H)),et=Math.round(Math.max(Y,H));let Ye=h*ue+Ue*4;for(let me=Ue;me<=et;me++)ve=(Y-me)/(Y-H),ve<0?ve=0:ve>1&&(ve=1),u[Ye++]=re-(re-X)*ve|0,u[Ye++]=K-(K-te)*ve|0,u[Ye++]=q-(q-ce)*ve|0,u[Ye++]=255}}function Fne(t,e,n){const r=e.coords,i=e.colors;let s,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(r.length/o)-1,c=o-1;for(s=0;s<l;s++){let u=s*o;for(let h=0;h<c;h++,u++)XS(t,n,r[u],r[u+1],r[u+o],i[u],i[u+1],i[u+o]),XS(t,n,r[u+o+1],r[u+1],r[u+o],i[u+o+1],i[u+1],i[u+o])}break;case"triangles":for(s=0,a=r.length;s<a;s+=3)XS(t,n,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class Vne extends uN{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,n,r){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,u=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),m=c/h,g=u/f,v={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/m,scaleY:1/g},y=h+2*2,w=f+2*2,b=r.getCanvas("mesh",y,w),A=b.context,I=A.createImageData(h,f);if(n){const M=I.data;for(let P=0,C=M.length;P<C;P+=4)M[P]=n[0],M[P+1]=n[1],M[P+2]=n[2],M[P+3]=255}for(const M of this._figures)Fne(I,M,v);return A.putImageData(I,2,2),{canvas:b.canvas,offsetX:o-2*m,offsetY:l-2*g,scaleX:m,scaleY:g}}getPattern(e,n,r,i){wI(e,this._bbox);let s;if(i===Tr.SHADING)s=_e.singularValueDecompose2dScale(Ot(e));else if(s=_e.singularValueDecompose2dScale(n.baseTransform),this.matrix){const o=_e.singularValueDecompose2dScale(this.matrix);s=[s[0]*o[0],s[1]*o[1]]}const a=this._createMeshCanvas(s,i===Tr.SHADING?null:this._background,n.cachedCanvases);return i!==Tr.SHADING&&(e.setTransform(...n.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class Une extends uN{getPattern(){return"hotpink"}}function Bne(t){switch(t[0]){case"RadialAxial":return new jne(t);case"Mesh":return new Vne(t);case"Dummy":return new Une}throw new Error(`Unknown IR type: ${t[0]}`)}const gL={COLORED:1,UNCOLORED:2},WA=class WA{constructor(e,n,r,i,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=n,this.ctx=r,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(e){const{bbox:n,operatorList:r,paintType:i,tilingType:s,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),qE("TilingType: "+s);const u=n[0],h=n[1],f=n[2],m=n[3],g=f-u,v=m-h,y=_e.singularValueDecompose2dScale(this.matrix),w=_e.singularValueDecompose2dScale(this.baseTransform),b=y[0]*w[0],A=y[1]*w[1];let I=g,k=v,M=!1,P=!1;const C=Math.ceil(l*b),O=Math.ceil(c*A),j=Math.ceil(g*b),D=Math.ceil(v*A);C>=j?I=l:M=!0,O>=D?k=c:P=!0;const F=this.getSizeAndScale(I,this.ctx.canvas.width,b),V=this.getSizeAndScale(k,this.ctx.canvas.height,A),Y=e.cachedCanvases.getCanvas("pattern",F.size,V.size),re=Y.context,K=o.createCanvasGraphics(re);if(K.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(K,i,a),re.translate(-F.scale*u,-V.scale*h),K.transform(F.scale,0,0,V.scale,0,0),re.save(),this.clipBbox(K,u,h,f,m),K.baseTransform=Ot(K.ctx),K.executeOperatorList(r),K.endDrawing(),re.restore(),M||P){const q=Y.canvas;M&&(I=l),P&&(k=c);const H=this.getSizeAndScale(I,this.ctx.canvas.width,b),X=this.getSizeAndScale(k,this.ctx.canvas.height,A),te=H.size,ce=X.size,ue=e.cachedCanvases.getCanvas("pattern-workaround",te,ce),ve=ue.context,Ue=M?Math.floor(g/l):0,et=P?Math.floor(v/c):0;for(let Ye=0;Ye<=Ue;Ye++)for(let me=0;me<=et;me++)ve.drawImage(q,te*Ye,ce*me,te,ce,0,0,te,ce);return{canvas:ue.canvas,scaleX:H.scale,scaleY:X.scale,offsetX:u,offsetY:h}}return{canvas:Y.canvas,scaleX:F.scale,scaleY:V.scale,offsetX:u,offsetY:h}}getSizeAndScale(e,n,r){const i=Math.max(WA.MAX_PATTERN_SIZE,n);let s=Math.ceil(e*r);return s>=i?s=i:r=s/e,{scale:r,size:s}}clipBbox(e,n,r,i,s){const a=i-n,o=s-r;e.ctx.rect(n,r,a,o),e.current.updateRectMinMax(Ot(e.ctx),[n,r,i,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,n,r){const i=e.ctx,s=e.current;switch(n){case gL.COLORED:const a=this.ctx;i.fillStyle=a.fillStyle,i.strokeStyle=a.strokeStyle,s.fillColor=a.fillStyle,s.strokeColor=a.strokeStyle;break;case gL.UNCOLORED:const o=_e.makeHexColor(r[0],r[1],r[2]);i.fillStyle=o,i.strokeStyle=o,s.fillColor=o,s.strokeColor=o;break;default:throw new fne(`Unsupported paint type: ${n}`)}}getPattern(e,n,r,i){let s=r;i!==Tr.SHADING&&(s=_e.transform(s,n.baseTransform),this.matrix&&(s=_e.transform(s,this.matrix)));const a=this.createPatternCanvas(n);let o=new DOMMatrix(s);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};Te(WA,"MAX_PATTERN_SIZE",3e3);let _I=WA;function $ne({src:t,srcPos:e=0,dest:n,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=Xr.isLittleEndian?4278190080:255,[l,c]=a?[s,o]:[o,s],u=r>>3,h=r&7,f=t.length;n=new Uint32Array(n.buffer);let m=0;for(let g=0;g<i;g++){for(const y=e+u;e<y;e++){const w=e<f?t[e]:255;n[m++]=w&128?c:l,n[m++]=w&64?c:l,n[m++]=w&32?c:l,n[m++]=w&16?c:l,n[m++]=w&8?c:l,n[m++]=w&4?c:l,n[m++]=w&2?c:l,n[m++]=w&1?c:l}if(h===0)continue;const v=e<f?t[e++]:255;for(let y=0;y<h;y++)n[m++]=v&1<<7-y?c:l}return{srcPos:e,destPos:m}}const vL=16,yL=100,zne=15,wL=10,_L=1e3,hi=16;function Hne(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(r,i){e.translate(r,i),this.__originalTranslate(r,i)},t.scale=function(r,i){e.scale(r,i),this.__originalScale(r,i)},t.transform=function(r,i,s,a,o,l){e.transform(r,i,s,a,o,l),this.__originalTransform(r,i,s,a,o,l)},t.setTransform=function(r,i,s,a,o,l){e.setTransform(r,i,s,a,o,l),this.__originalSetTransform(r,i,s,a,o,l)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(r){e.rotate(r),this.__originalRotate(r)},t.clip=function(r){e.clip(r),this.__originalClip(r)},t.moveTo=function(n,r){e.moveTo(n,r),this.__originalMoveTo(n,r)},t.lineTo=function(n,r){e.lineTo(n,r),this.__originalLineTo(n,r)},t.bezierCurveTo=function(n,r,i,s,a,o){e.bezierCurveTo(n,r,i,s,a,o),this.__originalBezierCurveTo(n,r,i,s,a,o)},t.rect=function(n,r,i,s){e.rect(n,r,i,s),this.__originalRect(n,r,i,s)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Wne{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,n,r)):(i=this.canvasFactory.create(n,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const n=this.cache[e];this.canvasFactory.destroy(n),delete this.cache[e]}}}function C_(t,e,n,r,i,s,a,o,l,c){const[u,h,f,m,g,v]=Ot(t);if(h===0&&f===0){const b=a*u+g,A=Math.round(b),I=o*m+v,k=Math.round(I),M=(a+l)*u+g,P=Math.abs(Math.round(M)-A)||1,C=(o+c)*m+v,O=Math.abs(Math.round(C)-k)||1;return t.setTransform(Math.sign(u),0,0,Math.sign(m),A,k),t.drawImage(e,n,r,i,s,0,0,P,O),t.setTransform(u,h,f,m,g,v),[P,O]}if(u===0&&m===0){const b=o*f+g,A=Math.round(b),I=a*h+v,k=Math.round(I),M=(o+c)*f+g,P=Math.abs(Math.round(M)-A)||1,C=(a+l)*h+v,O=Math.abs(Math.round(C)-k)||1;return t.setTransform(0,Math.sign(h),Math.sign(f),0,A,k),t.drawImage(e,n,r,i,s,0,0,O,P),t.setTransform(u,h,f,m,g,v),[O,P]}t.drawImage(e,n,r,i,s,a,o,l,c);const y=Math.hypot(u,h),w=Math.hypot(f,m);return[y*l,w*c]}function Gne(t){const{width:e,height:n}=t;if(e>_L||n>_L)return null;const r=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let a=new Uint8Array(s*(n+1)),o,l,c;const u=e+7&-8;let h=new Uint8Array(u*n),f=0;for(const w of t.data){let b=128;for(;b>0;)h[f++]=w&b?0:255,b>>=1}let m=0;for(f=0,h[f]!==0&&(a[0]=1,++m),l=1;l<e;l++)h[f]!==h[f+1]&&(a[l]=h[f]?2:1,++m),f++;for(h[f]!==0&&(a[l]=2,++m),o=1;o<n;o++){f=o*u,c=o*s,h[f-u]!==h[f]&&(a[c]=h[f]?1:8,++m);let w=(h[f]?4:0)+(h[f-u]?8:0);for(l=1;l<e;l++)w=(w>>2)+(h[f+1]?4:0)+(h[f-u+1]?8:0),i[w]&&(a[c+l]=i[w],++m),f++;if(h[f-u]!==h[f]&&(a[c+l]=h[f]?2:4,++m),m>r)return null}for(f=u*(n-1),c=o*s,h[f]!==0&&(a[c]=8,++m),l=1;l<e;l++)h[f]!==h[f+1]&&(a[c+l]=h[f]?4:8,++m),f++;if(h[f]!==0&&(a[c+l]=4,++m),m>r)return null;const g=new Int32Array([0,s,-1,0,-s,0,0,0,1]),v=new Path2D;for(o=0;m&&o<=n;o++){let w=o*s;const b=w+e;for(;w<b&&!a[w];)w++;if(w===b)continue;v.moveTo(w%s,o);const A=w;let I=a[w];do{const k=g[I];do w+=k;while(!a[w]);const M=a[w];M!==5&&M!==10?(I=M,a[w]=0):(I=M&51*I>>4,a[w]&=I>>2|I<<2),v.lineTo(w%s,w/s|0),a[w]||--m}while(A!==w);--o}return h=null,a=null,function(w){w.save(),w.scale(1/e,-1/n),w.translate(0,-n),w.fill(v),w.beginPath(),w.restore()}}class bL{constructor(e,n){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=dz,this.textMatrixScale=1,this.fontMatrix=KP,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=vr.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,n])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,n){this.x=e,this.y=n}updatePathMinMax(e,n,r){[n,r]=_e.applyTransform([n,r],e),this.minX=Math.min(this.minX,n),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,n),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,n){const r=_e.applyTransform(n,e),i=_e.applyTransform(n.slice(2),e),s=_e.applyTransform([n[0],n[3]],e),a=_e.applyTransform([n[2],n[1]],e);this.minX=Math.min(this.minX,r[0],i[0],s[0],a[0]),this.minY=Math.min(this.minY,r[1],i[1],s[1],a[1]),this.maxX=Math.max(this.maxX,r[0],i[0],s[0],a[0]),this.maxY=Math.max(this.maxY,r[1],i[1],s[1],a[1])}updateScalingPathMinMax(e,n){_e.scaleMinMax(e,n),this.minX=Math.min(this.minX,n[0]),this.minY=Math.min(this.minY,n[1]),this.maxX=Math.max(this.maxX,n[2]),this.maxY=Math.max(this.maxY,n[3])}updateCurvePathMinMax(e,n,r,i,s,a,o,l,c,u){const h=_e.bezierBoundingBox(n,r,i,s,a,o,l,c,u);u||this.updateRectMinMax(e,h)}getPathBoundingBox(e=Tr.FILL,n=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===Tr.STROKE){n||bt("Stroke bounding box must include transform.");const i=_e.singularValueDecompose2dScale(n),s=i[0]*this.lineWidth/2,a=i[1]*this.lineWidth/2;r[0]-=s,r[1]-=a,r[2]+=s,r[3]+=a}return r}updateClipFromPath(){const e=_e.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Tr.FILL,n=null){return _e.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function xL(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const n=e.height,r=e.width,i=n%hi,s=(n-i)/hi,a=i===0?s:s+1,o=t.createImageData(r,hi);let l=0,c;const u=e.data,h=o.data;let f,m,g,v;if(e.kind===vb.GRAYSCALE_1BPP){const y=u.byteLength,w=new Uint32Array(h.buffer,0,h.byteLength>>2),b=w.length,A=r+7>>3,I=4294967295,k=Xr.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(g=f<s?hi:i,c=0,m=0;m<g;m++){const M=y-l;let P=0;const C=M>A?r:M*8-7,O=C&-8;let j=0,D=0;for(;P<O;P+=8)D=u[l++],w[c++]=D&128?I:k,w[c++]=D&64?I:k,w[c++]=D&32?I:k,w[c++]=D&16?I:k,w[c++]=D&8?I:k,w[c++]=D&4?I:k,w[c++]=D&2?I:k,w[c++]=D&1?I:k;for(;P<C;P++)j===0&&(D=u[l++],j=128),w[c++]=D&j?I:k,j>>=1}for(;c<b;)w[c++]=0;t.putImageData(o,0,f*hi)}}else if(e.kind===vb.RGBA_32BPP){for(m=0,v=r*hi*4,f=0;f<s;f++)h.set(u.subarray(l,l+v)),l+=v,t.putImageData(o,0,m),m+=hi;f<a&&(v=r*i*4,h.set(u.subarray(l,l+v)),t.putImageData(o,0,m))}else if(e.kind===vb.RGB_24BPP)for(g=hi,v=r*g,f=0;f<a;f++){for(f>=s&&(g=i,v=r*g),c=0,m=v;m--;)h[c++]=u[l++],h[c++]=u[l++],h[c++]=u[l++],h[c++]=255;t.putImageData(o,0,f*hi)}else throw new Error(`bad image kind: ${e.kind}`)}function AL(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const n=e.height,r=e.width,i=n%hi,s=(n-i)/hi,a=i===0?s:s+1,o=t.createImageData(r,hi);let l=0;const c=e.data,u=o.data;for(let h=0;h<a;h++){const f=h<s?hi:i;({srcPos:l}=$ne({src:c,srcPos:l,dest:u,width:r,height:f,nonBlackColor:0})),t.putImageData(o,0,h*hi)}}function Ag(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of n)t[r]!==void 0&&(e[r]=t[r]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function k_(t){if(t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0),!kr){const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}}function EL(t,e){if(e)return!0;const n=_e.singularValueDecompose2dScale(t);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*nu.PDF_TO_CSS_UNITS);return n[0]<=r&&n[1]<=r}const qne=["butt","round","square"],Kne=["miter","round","bevel"],Xne={},SL={};var ha,bI,xI,AI;const QO=class QO{constructor(e,n,r,i,s,{optionalContentConfig:a,markedContentStack:o=null},l,c){R(this,ha);this.ctx=e,this.current=new bL(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Wne(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,n=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):n}beginDrawing({transform:e,viewport:n,transparency:r=!1,background:i=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,r){const l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Ot(this.compositeCtx))}this.ctx.save(),k_(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Ot(this.ctx)}executeOperatorList(e,n,r,i){const s=e.argsArray,a=e.fnArray;let o=n||0;const l=s.length;if(l===o)return o;const c=l-o>wL&&typeof r=="function",u=c?Date.now()+zne:0;let h=0;const f=this.commonObjs,m=this.objs;let g;for(;;){if(i!==void 0&&o===i.nextBreakPoint)return i.breakIt(o,r),o;if(g=a[o],g!==Ls.dependency)this[g].apply(this,s[o]);else for(const v of s[o]){const y=v.startsWith("g_")?f:m;if(!y.has(v))return y.get(v,r),o}if(o++,o===l)return o;if(c&&++h>wL){if(Date.now()>u)return r(),o;h=0}}}endDrawing(){N(this,ha,bI).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),N(this,ha,xI).call(this)}_scaleImage(e,n){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(n[0],n[1]),1),a=Math.max(Math.hypot(n[2],n[3]),1),o=r,l=i,c="prescale1",u,h;for(;s>2&&o>1||a>2&&l>1;){let f=o,m=l;s>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/f),a>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/m),u=this.cachedCanvases.getCanvas(c,f,m),h=u.context,h.clearRect(0,0,f,m),h.drawImage(e,0,0,o,l,0,0,f,m),e=u.canvas,o=f,l=m,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const n=this.ctx,{width:r,height:i}=e,s=this.current.fillColor,a=this.current.patternFill,o=Ot(n);let l,c,u,h;if((e.bitmap||e.data)&&e.count>1){const C=e.bitmap||e.data.buffer;c=JSON.stringify(a?o:[o.slice(0,4),s]),l=this._cachedBitmapsMap.get(C),l||(l=new Map,this._cachedBitmapsMap.set(C,l));const O=l.get(c);if(O&&!a){const j=Math.round(Math.min(o[0],o[2])+o[4]),D=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:O,offsetX:j,offsetY:D}}u=O}u||(h=this.cachedCanvases.getCanvas("maskCanvas",r,i),AL(h.context,e));let f=_e.transform(o,[1/r,0,0,-1/i,0,0]);f=_e.transform(f,[1,0,0,1,0,-i]);const[m,g,v,y]=_e.getAxialAlignedBoundingBox([0,0,r,i],f),w=Math.round(v-m)||1,b=Math.round(y-g)||1,A=this.cachedCanvases.getCanvas("fillCanvas",w,b),I=A.context,k=m,M=g;I.translate(-k,-M),I.transform(...f),u||(u=this._scaleImage(h.canvas,ga(I)),u=u.img,l&&a&&l.set(c,u)),I.imageSmoothingEnabled=EL(Ot(I),e.interpolate),C_(I,u,0,0,u.width,u.height,0,0,r,i),I.globalCompositeOperation="source-in";const P=_e.transform(ga(I),[1,0,0,1,-k,-M]);return I.fillStyle=a?s.getPattern(n,this,P,Tr.FILL):s,I.fillRect(0,0,r,i),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,A.canvas)),{canvas:A.canvas,offsetX:Math.round(k),offsetY:Math.round(M)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=qne[e]}setLineJoin(e){this.ctx.lineJoin=Kne[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,n){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=n)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[n,r]of e)switch(n){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,e,n);this.suspendedCtx=this.ctx,this.ctx=i.context;const s=this.ctx;s.setTransform(...Ot(this.suspendedCtx)),Ag(this.suspendedCtx,s),Hne(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ag(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,n,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,n,r,i){const s=i[0],a=i[1],o=i[2]-s,l=i[3]-a;o===0||l===0||(this.genericComposeSMask(n.context,r,o,l,n.subtype,n.backdrop,n.transferMap,s,a,n.offsetX,n.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,n,r,i,s,a,o,l,c,u,h){let f=e.canvas,m=l-u,g=c-h;if(a){const y=_e.makeHexColor(...a);if(m<0||g<0||m+r>f.width||g+i>f.height){const w=this.cachedCanvases.getCanvas("maskExtension",r,i),b=w.context;b.drawImage(f,-m,-g),b.globalCompositeOperation="destination-atop",b.fillStyle=y,b.fillRect(0,0,r,i),b.globalCompositeOperation="source-over",f=w.canvas,m=g=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(m,g,r,i),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=y,e.fillRect(m,g,r,i),e.restore()}}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?n.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(o));const v=new Path2D;v.rect(l,c,r,i),n.clip(v),n.globalCompositeOperation="destination-in",n.drawImage(f,m,g,r,i,l,c,r,i),n.restore()}save(){this.inSMaskMode?(Ag(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Ag(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,n,r,i,s,a){this.ctx.transform(e,n,r,i,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,n,r){const i=this.ctx,s=this.current;let a=s.x,o=s.y,l,c;const u=Ot(i),h=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,f=h?r.slice(0):null;for(let m=0,g=0,v=e.length;m<v;m++)switch(e[m]|0){case Ls.rectangle:a=n[g++],o=n[g++];const y=n[g++],w=n[g++],b=a+y,A=o+w;i.moveTo(a,o),y===0||w===0?i.lineTo(b,A):(i.lineTo(b,o),i.lineTo(b,A),i.lineTo(a,A)),h||s.updateRectMinMax(u,[a,o,b,A]),i.closePath();break;case Ls.moveTo:a=n[g++],o=n[g++],i.moveTo(a,o),h||s.updatePathMinMax(u,a,o);break;case Ls.lineTo:a=n[g++],o=n[g++],i.lineTo(a,o),h||s.updatePathMinMax(u,a,o);break;case Ls.curveTo:l=a,c=o,a=n[g+4],o=n[g+5],i.bezierCurveTo(n[g],n[g+1],n[g+2],n[g+3],a,o),s.updateCurvePathMinMax(u,l,c,n[g],n[g+1],n[g+2],n[g+3],a,o,f),g+=6;break;case Ls.curveTo2:l=a,c=o,i.bezierCurveTo(a,o,n[g],n[g+1],n[g+2],n[g+3]),s.updateCurvePathMinMax(u,l,c,a,o,n[g],n[g+1],n[g+2],n[g+3],f),a=n[g+2],o=n[g+3],g+=4;break;case Ls.curveTo3:l=a,c=o,a=n[g+2],o=n[g+3],i.bezierCurveTo(n[g],n[g+1],a,o,a,o),s.updateCurvePathMinMax(u,l,c,n[g],n[g+1],a,o,a,o,f),g+=4;break;case Ls.closePath:i.closePath();break}h&&s.updateScalingPathMinMax(u,f),s.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const n=this.ctx,r=this.current.strokeColor;n.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&(r!=null&&r.getPattern)?(n.save(),n.strokeStyle=r.getPattern(n,this,ga(n),Tr.STROKE),this.rescaleAndStroke(!1),n.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),n.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const n=this.ctx,r=this.current.fillColor,i=this.current.patternFill;let s=!1;i&&(n.save(),n.fillStyle=r.getPattern(n,this,ga(n),Tr.FILL),s=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(n.fill("evenodd"),this.pendingEOFill=!1):n.fill()),s&&n.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Xne}eoClip(){this.pendingClip=SL}beginText(){this.current.textMatrix=dz,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,n=this.ctx;if(e===void 0){n.beginPath();return}const r=new Path2D,i=n.getTransform().invertSelf();for(const{transform:s,x:a,y:o,fontSize:l,path:c}of e)r.addPath(c,new DOMMatrix(s).preMultiplySelf(i).translate(a,o).scale(l,-l));n.clip(r),n.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,n){var u;const r=this.commonObjs.get(e),i=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=r.fontMatrix||KP,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&$e("Invalid font matrix for font "+e),n<0?(n=-n,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const s=r.loadedName||"sans-serif",a=((u=r.systemFontInfo)==null?void 0:u.css)||`"${s}", ${r.fallbackName}`;let o="normal";r.black?o="900":r.bold&&(o="bold");const l=r.italic?"italic":"normal";let c=n;n<vL?c=vL:n>yL&&(c=yL),this.current.fontSizeScale=n/c,this.ctx.font=`${l} ${o} ${c}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,n){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,n){this.setLeading(-n),this.moveText(e,n)}setTextMatrix(e,n,r,i,s,a){this.current.textMatrix=[e,n,r,i,s,a],this.current.textMatrixScale=Math.hypot(e,n),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,n,r,i,s){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=c&vr.FILL_STROKE_MASK,f=!!(c&vr.ADD_TO_PATH_FLAG),m=o.patternFill&&!l.missingFile,g=o.patternStroke&&!l.missingFile;let v;if((l.disableFontFace||f||m||g)&&(v=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||m||g){if(a.save(),a.translate(n,r),a.scale(u,-u),h===vr.FILL||h===vr.FILL_STROKE)if(i){const y=a.getTransform();a.setTransform(...i),a.fill(N(this,ha,AI).call(this,v,y,i))}else a.fill(v);if(h===vr.STROKE||h===vr.FILL_STROKE)if(s){const y=a.getTransform();a.setTransform(...s),a.stroke(N(this,ha,AI).call(this,v,y,s))}else a.lineWidth/=u,a.stroke(v);a.restore()}else(h===vr.FILL||h===vr.FILL_STROKE)&&a.fillText(e,n,r),(h===vr.STROKE||h===vr.FILL_STROKE)&&a.strokeText(e,n,r);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ot(a),x:n,y:r,fontSize:u,path:v})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<n.length;i+=4)if(n[i]>0&&n[i]<255){r=!0;break}return Ge(this,"isFontSubpixelAAEnabled",r)}showText(e){const n=this.current,r=n.font;if(r.isType3Font)return this.showType3Text(e);const i=n.fontSize;if(i===0)return;const s=this.ctx,a=n.fontSizeScale,o=n.charSpacing,l=n.wordSpacing,c=n.fontDirection,u=n.textHScale*c,h=e.length,f=r.vertical,m=f?1:-1,g=r.defaultVMetrics,v=i*n.fontMatrix[0],y=n.textRenderingMode===vr.FILL&&!r.disableFontFace&&!n.patternFill;s.save(),s.transform(...n.textMatrix),s.translate(n.x,n.y+n.textRise),c>0?s.scale(u,-1):s.scale(u,1);let w,b;if(n.patternFill){s.save();const P=n.fillColor.getPattern(s,this,ga(s),Tr.FILL);w=Ot(s),s.restore(),s.fillStyle=P}if(n.patternStroke){s.save();const P=n.strokeColor.getPattern(s,this,ga(s),Tr.STROKE);b=Ot(s),s.restore(),s.strokeStyle=P}let A=n.lineWidth;const I=n.textMatrixScale;if(I===0||A===0){const P=n.textRenderingMode&vr.FILL_STROKE_MASK;(P===vr.STROKE||P===vr.FILL_STROKE)&&(A=this.getSinglePixelWidth())}else A/=I;if(a!==1&&(s.scale(a,a),A/=a),s.lineWidth=A,r.isInvalidPDFjsFont){const P=[];let C=0;for(const O of e)P.push(O.unicode),C+=O.width;s.fillText(P.join(""),0,0),n.x+=C*v*u,s.restore(),this.compose();return}let k=0,M;for(M=0;M<h;++M){const P=e[M];if(typeof P=="number"){k+=m*P*i/1e3;continue}let C=!1;const O=(P.isSpace?l:0)+o,j=P.fontChar,D=P.accent;let F,V,Y=P.width;if(f){const K=P.vmetric||g,q=-(P.vmetric?K[1]:Y*.5)*v,H=K[2]*v;Y=K?-K[0]:Y,F=q/a,V=(k+H)/a}else F=k/a,V=0;if(r.remeasure&&Y>0){const K=s.measureText(j).width*1e3/i*a;if(Y<K&&this.isFontSubpixelAAEnabled){const q=Y/K;C=!0,s.save(),s.scale(q,1),F/=q}else Y!==K&&(F+=(Y-K)/2e3*i/a)}if(this.contentVisible&&(P.isInFont||r.missingFile)){if(y&&!D)s.fillText(j,F,V);else if(this.paintChar(j,F,V,w,b),D){const K=F+i*D.offset.x/a,q=V-i*D.offset.y/a;this.paintChar(D.fontChar,K,q,w,b)}}const re=f?Y*v-O*c:Y*v+O*c;k+=re,C&&s.restore()}f?n.y-=k:n.x+=k*u,s.restore(),this.compose()}showType3Text(e){const n=this.ctx,r=this.current,i=r.font,s=r.fontSize,a=r.fontDirection,o=i.vertical?1:-1,l=r.charSpacing,c=r.wordSpacing,u=r.textHScale*a,h=r.fontMatrix||KP,f=e.length,m=r.textRenderingMode===vr.INVISIBLE;let g,v,y,w;if(!(m||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),n.transform(...r.textMatrix),n.translate(r.x,r.y),n.scale(u,a),g=0;g<f;++g){if(v=e[g],typeof v=="number"){w=o*v*s/1e3,this.ctx.translate(w,0),r.x+=w*u;continue}const b=(v.isSpace?c:0)+l,A=i.charProcOperatorList[v.operatorListId];if(!A){$e(`Type3 character "${v.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=v,this.save(),n.scale(s,s),n.transform(...h),this.executeOperatorList(A),this.restore()),y=_e.applyTransform([v.width,0],h)[0]*s+b,n.translate(y,0),r.x+=y*u}n.restore(),this.processingType3=null}}setCharWidth(e,n){}setCharWidthAndBounds(e,n,r,i,s,a){this.ctx.rect(r,i,s-r,a-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let n;if(e[0]==="TilingPattern"){const r=e[1],i=this.baseTransform||Ot(this.ctx),s={createCanvasGraphics:a=>new QO(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};n=new _I(e,r,this.ctx,s,i)}else n=this._getPattern(e[1],e[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,n,r){this.ctx.strokeStyle=this.current.strokeColor=_e.makeHexColor(e,n,r),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,n,r){this.ctx.fillStyle=this.current.fillColor=_e.makeHexColor(e,n,r),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,n=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=Bne(this.getObject(e)),this.cachedPatterns.set(e,r)),n&&(r.matrix=n),r}shadingFill(e){if(!this.contentVisible)return;const n=this.ctx;this.save();const r=this._getPattern(e);n.fillStyle=r.getPattern(n,this,ga(n),Tr.SHADING);const i=ga(n);if(i){const{width:s,height:a}=n.canvas,[o,l,c,u]=_e.getAxialAlignedBoundingBox([0,0,s,a],i);this.ctx.fillRect(o,l,c-o,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){bt("Should not call beginInlineImage")}beginImageData(){bt("Should not call beginImageData")}paintFormXObjectBegin(e,n){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Ot(this.ctx),n)){const r=n[2]-n[0],i=n[3]-n[1];this.ctx.rect(n[0],n[1],r,i),this.current.updateRectMinMax(Ot(this.ctx),n),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||qE("TODO: Support non-isolated groups."),e.knockout&&$e("Knockout groups not supported.");const r=Ot(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=_e.getAxialAlignedBoundingBox(e.bbox,Ot(n));const s=[0,0,n.canvas.width,n.canvas.height];i=_e.intersect(i,s)||[0,0,0,0];const a=Math.floor(i[0]),o=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-a,1),c=Math.max(Math.ceil(i[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(u,l,c),f=h.context;f.translate(-a,-o),f.transform(...r),e.smask?this.smaskStack.push({canvas:h.canvas,context:f,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(a,o),n.save()),Ag(n,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Ot(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const s=_e.getAxialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],i);this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,n,r,i,s){if(N(this,ha,bI).call(this),k_(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const a=n[2]-n[0],o=n[3]-n[1];if(s&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=a,n[3]=o;const[l,c]=_e.singularValueDecompose2dScale(Ot(this.ctx)),{viewportScale:u}=this,h=Math.ceil(a*this.outputScaleX*u),f=Math.ceil(o*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,f);const{canvas:m,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(e,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,o*c),k_(this.ctx)}else k_(this.ctx),this.endPath(),this.ctx.rect(n[0],n[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new bL(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),N(this,ha,xI).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(e.data,e),e.count=n;const r=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=Gne(e)),i.compiled)){i.compiled(r);return}const s=this._createMaskCanvas(e),a=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,s.offsetX,s.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,r=0,i=0,s,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=Ot(o);o.transform(n,r,i,s,0,0);const c=this._createMaskCanvas(e);o.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,h=a.length;u<h;u+=2){const f=_e.transform(l,[n,r,i,s,a[u],a[u+1]]),[m,g]=_e.applyTransform([0,0],f);o.drawImage(c.canvas,m,g)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,i=this.current.patternFill;for(const s of e){const{data:a,width:o,height:l,transform:c}=s,u=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=u.context;h.save();const f=this.getObject(a,s);AL(h,f),h.globalCompositeOperation="source-in",h.fillStyle=i?r.getPattern(h,this,ga(n),Tr.FILL):r,h.fillRect(0,0,o,l),h.restore(),n.save(),n.transform(...c),n.scale(1,-1),C_(n,u.canvas,0,0,o,l,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const n=this.getObject(e);if(!n){$e("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(e,n,r,i){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){$e("Dependent image isn't ready yet");return}const a=s.width,o=s.height,l=[];for(let c=0,u=i.length;c<u;c+=2)l.push({transform:[n,0,0,r,i[c],i[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:n,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(n,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const n=e.width,r=e.height,i=this.ctx;if(this.save(),!kr){const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none")}i.scale(1/n,-1/r);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",n,r).context;xL(l,e),s=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(s,ga(i));i.imageSmoothingEnabled=EL(Ot(i),e.interpolate),C_(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-r,n,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,n){if(!this.contentVisible)return;const r=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const s=e.width,a=e.height,l=this.cachedCanvases.getCanvas("inlineImage",s,a).context;xL(l,e),i=this.applyTransferMapsToCanvas(l)}for(const s of n)r.save(),r.transform(...s.transform),r.scale(1,-1),C_(r,i,s.x,s.y,s.w,s.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,n){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(n||(this.pendingClip===SL?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ot(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:n,b:r,c:i,d:s}=this.ctx.getTransform();let a,o;if(r===0&&i===0){const l=Math.abs(n),c=Math.abs(s);if(l===c)if(e===0)a=o=1/l;else{const u=l*e;a=o=u<1?1/u:1}else if(e===0)a=1/l,o=1/c;else{const u=l*e,h=c*e;a=u<1?1/u:1,o=h<1?1/h:1}}else{const l=Math.abs(n*s-r*i),c=Math.hypot(n,r),u=Math.hypot(i,s);if(e===0)a=u/l,o=c/l;else{const h=e*l;a=u>h?u/h:1,o=c>h?c/h:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:n}=this,{lineWidth:r}=this.current,[i,s]=this.getScaleForStroking();if(n.lineWidth=r||1,i===1&&s===1){n.stroke();return}const a=n.getLineDash();if(e&&n.save(),n.scale(i,s),a.length>0){const o=Math.max(i,s);n.setLineDash(a.map(l=>l/o)),n.lineDashOffset/=o}n.stroke(),e&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ha=new WeakSet,bI=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},xI=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const n=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}},AI=function(e,n,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(n)),i};let Gf=QO;for(const t in Ls)Gf.prototype[t]!==void 0&&(Gf.prototype[Ls[t]]=Gf.prototype[t]);var Gy,qy;class Uo{static get workerPort(){return d(this,Gy)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");S(this,Gy,e)}static get workerSrc(){return d(this,qy)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");S(this,qy,e)}}Gy=new WeakMap,qy=new WeakMap,R(Uo,Gy,null),R(Uo,qy,"");var xh,Ky;class Yne{constructor({parsedData:e,rawData:n}){R(this,xh);R(this,Ky);S(this,xh,e),S(this,Ky,n)}getRaw(){return d(this,Ky)}get(e){return d(this,xh).get(e)??null}getAll(){return rN(d(this,xh))}has(e){return d(this,xh).has(e)}}xh=new WeakMap,Ky=new WeakMap;const hf=Symbol("INTERNAL");var Xy,Yy,Qy,fp;class Qne{constructor(e,{name:n,intent:r,usage:i,rbGroups:s}){R(this,Xy,!1);R(this,Yy,!1);R(this,Qy,!1);R(this,fp,!0);S(this,Xy,!!(e&Li.DISPLAY)),S(this,Yy,!!(e&Li.PRINT)),this.name=n,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(d(this,Qy))return d(this,fp);if(!d(this,fp))return!1;const{print:e,view:n}=this.usage;return d(this,Xy)?(n==null?void 0:n.viewState)!=="OFF":d(this,Yy)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,n,r=!1){e!==hf&&bt("Internal method `_setVisible` called."),S(this,Qy,r),S(this,fp,n)}}Xy=new WeakMap,Yy=new WeakMap,Qy=new WeakMap,fp=new WeakMap;var hc,ht,pp,mp,Jy,EI;class Jne{constructor(e,n=Li.DISPLAY){R(this,Jy);R(this,hc,null);R(this,ht,new Map);R(this,pp,null);R(this,mp,null);if(this.renderingIntent=n,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,S(this,mp,e.order);for(const r of e.groups)d(this,ht).set(r.id,new Qne(n,r));if(e.baseState==="OFF")for(const r of d(this,ht).values())r._setVisible(hf,!1);for(const r of e.on)d(this,ht).get(r)._setVisible(hf,!0);for(const r of e.off)d(this,ht).get(r)._setVisible(hf,!1);S(this,pp,this.getHash())}}isVisible(e){if(d(this,ht).size===0)return!0;if(!e)return qE("Optional content group not defined."),!0;if(e.type==="OCG")return d(this,ht).has(e.id)?d(this,ht).get(e.id).visible:($e(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return N(this,Jy,EI).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const n of e.ids){if(!d(this,ht).has(n))return $e(`Optional content group not found: ${n}`),!0;if(d(this,ht).get(n).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const n of e.ids){if(!d(this,ht).has(n))return $e(`Optional content group not found: ${n}`),!0;if(!d(this,ht).get(n).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const n of e.ids){if(!d(this,ht).has(n))return $e(`Optional content group not found: ${n}`),!0;if(!d(this,ht).get(n).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const n of e.ids){if(!d(this,ht).has(n))return $e(`Optional content group not found: ${n}`),!0;if(d(this,ht).get(n).visible)return!1}return!0}return $e(`Unknown optional content policy ${e.policy}.`),!0}return $e(`Unknown group type ${e.type}.`),!0}setVisibility(e,n=!0,r=!0){var s;const i=d(this,ht).get(e);if(!i){$e(`Optional content group not found: ${e}`);return}if(r&&n&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==e&&((s=d(this,ht).get(o))==null||s._setVisible(hf,!1,!0));i._setVisible(hf,!!n,!0),S(this,hc,null)}setOCGState({state:e,preserveRB:n}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const s=d(this,ht).get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,n);break;case"OFF":this.setVisibility(i,!1,n);break;case"Toggle":this.setVisibility(i,!s.visible,n);break}}S(this,hc,null)}get hasInitialVisibility(){return d(this,pp)===null||this.getHash()===d(this,pp)}getOrder(){return d(this,ht).size?d(this,mp)?d(this,mp).slice():[...d(this,ht).keys()]:null}getGroups(){return d(this,ht).size>0?rN(d(this,ht)):null}getGroup(e){return d(this,ht).get(e)||null}getHash(){if(d(this,hc)!==null)return d(this,hc);const e=new zz;for(const[n,r]of d(this,ht))e.update(`${n}:${r.visible}`);return S(this,hc,e.hexdigest())}}hc=new WeakMap,ht=new WeakMap,pp=new WeakMap,mp=new WeakMap,Jy=new WeakSet,EI=function(e){const n=e.length;if(n<2)return!0;const r=e[0];for(let i=1;i<n;i++){const s=e[i];let a;if(Array.isArray(s))a=N(this,Jy,EI).call(this,s);else if(d(this,ht).has(s))a=d(this,ht).get(s).visible;else return $e(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return r==="And"};class Zne{constructor(e,{disableRange:n=!1,disableStream:r=!1}){dn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!n,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:n}){const r=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(r),!0)});dn(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var n,r,i,s;e.total===void 0?(r=(n=this._rangeReaders[0])==null?void 0:n.onProgress)==null||r.call(n,{loaded:e.loaded}):(s=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const n=this._rangeReaders.indexOf(e);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){dn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new ere(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new tre(this,e,n);return this._pdfDataRangeTransport.requestDataRange(e,n),this._rangeReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class ere{constructor(e,n,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=aN(i)?i:null,this._queuedChunks=n||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class tre{constructor(e,n,r){this._stream=e,this._begin=n,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function nre(t){let e=!0,n=r("filename\\*","i").exec(t);if(n){n=n[1];let u=o(n);return u=unescape(u),u=l(u),u=c(u),s(u)}if(n=a(t),n){const u=c(n);return s(u)}if(n=r("filename","i").exec(t),n){n=n[1];let u=o(n);return u=c(u),s(u)}function r(u,h){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(u,h){if(u){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(u,{fatal:!0}),m=KE(h);h=f.decode(m),e=!1}catch{}}return h}function s(u){return e&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),e&&(u=i("iso-8859-1",u))),u}function a(u){const h=[];let f;const m=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=m.exec(u))!==null;){let[,v,y,w]=f;if(v=parseInt(v,10),v in h){if(v===0)break;continue}h[v]=[y,w]}const g=[];for(let v=0;v<h.length&&v in h;++v){let[y,w]=h[v];w=o(w),y&&(w=unescape(w),v===0&&(w=l(w))),g.push(w)}return g.join("")}function o(u){if(u.startsWith('"')){const h=u.slice(1).split('\\"');for(let f=0;f<h.length;++f){const m=h[f].indexOf('"');m!==-1&&(h[f]=h[f].slice(0,m),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}u=h.join('"')}return u}function l(u){const h=u.indexOf("'");if(h===-1)return u;const f=u.slice(0,h),g=u.slice(h+1).replace(/^[^']*'/,"");return i(f,g)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,m,g){if(m==="q"||m==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,y){return String.fromCharCode(parseInt(y,16))}),i(f,g);try{g=atob(g)}catch{}return i(f,g)})}return""}function r3(t,e){const n=new Headers;if(!t||!e||typeof e!="object")return n;for(const r in e){const i=e[r];i!==void 0&&n.append(r,i)}return n}function QE(t){try{return new URL(t).origin}catch{}return null}function i3({responseHeaders:t,isHttp:e,rangeChunkSize:n,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*n)||r||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function s3(t){const e=t.get("Content-Disposition");if(e){let n=nre(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(aN(n))return n}return null}function JE(t,e){return t===404||t===0&&e.startsWith("file:")?new ey('Missing PDF "'+e+'".'):new $x(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)}function a3(t){return t===200||t===206}function o3(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function l3(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:($e(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class TL{constructor(e){Te(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=r3(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return dn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new rre(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new ire(this,e,n);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class rre{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const n=e.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const r=new Headers(e.headers),i=n.url;fetch(i,o3(r,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=QE(s.url),!a3(s.status))throw JE(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:l}=i3({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=s3(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new tu("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:l3(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}class ire{constructor(e,n,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${n}-${r-1}`);const a=i.url;fetch(a,o3(s,this._withCredentials,this._abortController)).then(o=>{const l=QE(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!a3(o.status))throw JE(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:l3(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}const YS=200,QS=206;function sre(t){const e=t.response;return typeof e!="string"?e:KE(e).buffer}class are{constructor({url:e,httpHeaders:n,withCredentials:r}){Te(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=r3(this.isHttp,n),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const n=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[s,a]of this.headers)n.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=QS):i.expectedStatus=YS,n.responseType="arraybuffer",dn(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{e.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,r),n.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,n.send(null),r}onProgress(e,n){var i;const r=this.pendingRequests[e];r&&((i=r.onProgress)==null||i.call(r,n))}onStateChange(e,n){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const s=i.status||YS;if(!(s===YS&&r.expectedStatus===QS)&&s!==r.expectedStatus){r.onError(i.status);return}const o=sre(i);if(s===QS){const l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?r.onDone({begin:parseInt(c[1],10),chunk:o}):($e('Missing or invalid "Content-Range" header.'),r.onError(0))}else o?r.onDone({begin:0,chunk:o}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const n=this.pendingRequests[e].xhr;delete this.pendingRequests[e],n.abort()}}class ore{constructor(e){this._source=e,this._manager=new are(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const n=this._rangeRequestReaders.indexOf(e);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return dn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new lre(this._manager,this._source),this._fullRequestReader}getRangeReader(e,n){const r=new cre(this._manager,e,n);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class lre{constructor(e,n){this._manager=e,this._url=n.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,n=this._manager.getRequestXhr(e);this._manager._responseOrigin=QE(n.responseURL);const r=n.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...c]=o.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=i3({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=s3(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=JE(e,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var n;(n=this.onProgress)==null||n.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class cre{constructor(e,n,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:n,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var n;const e=QE((n=this._manager.getRequestXhr(this._requestId))==null?void 0:n.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const n=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=JE(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var n;this.isStreamingSupported||(n=this.onProgress)==null||n.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ure=/^[a-z][a-z0-9\-+.]+:/i;function hre(t){if(ure.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class dre{constructor(e){this.source=e,this.url=hre(e.url),dn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return dn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new fre(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new pre(this,e,n);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class fre{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new ey(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new tu("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class pre{constructor(e,n,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:n,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const mre=1e5,si=30,gre=.8;var bV,dc,ci,Zy,e0,Ah,Eo,t0,n0,Eh,gp,vp,fc,yp,r0,wp,Sh,i0,s0,Th,Ph,a0,pc,_p,wl,c3,u3,SI,Ki,Ib,TI,h3,d3;const wn=class wn{constructor({textContentSource:e,container:n,viewport:r}){R(this,wl);R(this,dc,Promise.withResolvers());R(this,ci,null);R(this,Zy,!1);R(this,e0,!!((bV=globalThis.FontInspector)!=null&&bV.enabled));R(this,Ah,null);R(this,Eo,null);R(this,t0,0);R(this,n0,0);R(this,Eh,null);R(this,gp,null);R(this,vp,0);R(this,fc,0);R(this,yp,Object.create(null));R(this,r0,[]);R(this,wp,null);R(this,Sh,[]);R(this,i0,new WeakMap);R(this,s0,null);var l;if(e instanceof ReadableStream)S(this,wp,e);else if(typeof e=="object")S(this,wp,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,ci,S(this,gp,n)),S(this,fc,r.scale*(globalThis.devicePixelRatio||1)),S(this,vp,r.rotation),S(this,Eo,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:s,pageX:a,pageY:o}=r.rawDims;S(this,s0,[1,0,0,-1,-a,o+s]),S(this,n0,i),S(this,t0,s),N(l=wn,Ki,h3).call(l),xd(n,r),d(this,dc).promise.finally(()=>{d(wn,_p).delete(this),S(this,Eo,null),S(this,yp,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:n}=Xr.platform;return Ge(this,"fontFamilyMap",new Map([["sans-serif",`${e&&n?"Calibri, ":""}sans-serif`],["monospace",`${e&&n?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{d(this,Eh).read().then(({value:n,done:r})=>{if(r){d(this,dc).resolve();return}d(this,Ah)??S(this,Ah,n.lang),Object.assign(d(this,yp),n.styles),N(this,wl,c3).call(this,n.items),e()},d(this,dc).reject)};return S(this,Eh,d(this,wp).getReader()),d(wn,_p).add(this),e(),d(this,dc).promise}update({viewport:e,onBefore:n=null}){var s;const r=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==d(this,vp)&&(n==null||n(),S(this,vp,i),xd(d(this,gp),{rotation:i})),r!==d(this,fc)){n==null||n(),S(this,fc,r);const a={div:null,properties:null,ctx:N(s=wn,Ki,Ib).call(s,d(this,Ah))};for(const o of d(this,Sh))a.properties=d(this,i0).get(o),a.div=o,N(this,wl,SI).call(this,a)}}cancel(){var n;const e=new tu("TextLayer task cancelled.");(n=d(this,Eh))==null||n.cancel(e).catch(()=>{}),S(this,Eh,null),d(this,dc).reject(e)}get textDivs(){return d(this,Sh)}get textContentItemsStr(){return d(this,r0)}static cleanup(){if(!(d(this,_p).size>0)){d(this,Th).clear();for(const{canvas:e}of d(this,Ph).values())e.remove();d(this,Ph).clear()}}};dc=new WeakMap,ci=new WeakMap,Zy=new WeakMap,e0=new WeakMap,Ah=new WeakMap,Eo=new WeakMap,t0=new WeakMap,n0=new WeakMap,Eh=new WeakMap,gp=new WeakMap,vp=new WeakMap,fc=new WeakMap,yp=new WeakMap,r0=new WeakMap,wp=new WeakMap,Sh=new WeakMap,i0=new WeakMap,s0=new WeakMap,Th=new WeakMap,Ph=new WeakMap,a0=new WeakMap,pc=new WeakMap,_p=new WeakMap,wl=new WeakSet,c3=function(e){var i,s;if(d(this,Zy))return;(s=d(this,Eo)).ctx??(s.ctx=N(i=wn,Ki,Ib).call(i,d(this,Ah)));const n=d(this,Sh),r=d(this,r0);for(const a of e){if(n.length>mre){$e("Ignoring additional textDivs for performance reasons."),S(this,Zy,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=d(this,ci);S(this,ci,document.createElement("span")),d(this,ci).classList.add("markedContent"),a.id!==null&&d(this,ci).setAttribute("id",`${a.id}`),o.append(d(this,ci))}else a.type==="endMarkedContent"&&S(this,ci,d(this,ci).parentNode);continue}r.push(a.str),N(this,wl,u3).call(this,a)}},u3=function(e){var v;const n=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};d(this,Sh).push(n);const i=_e.transform(d(this,s0),e.transform);let s=Math.atan2(i[1],i[0]);const a=d(this,yp)[e.fontName];a.vertical&&(s+=Math.PI/2);let o=d(this,e0)&&a.fontSubstitution||a.fontFamily;o=wn.fontFamilyMap.get(o)||o;const l=Math.hypot(i[2],i[3]),c=l*N(v=wn,Ki,d3).call(v,o,d(this,Ah));let u,h;s===0?(u=i[4],h=i[5]-c):(u=i[4]+c*Math.sin(s),h=i[5]-c*Math.cos(s));const f="calc(var(--scale-factor)*",m=n.style;d(this,ci)===d(this,gp)?(m.left=`${(100*u/d(this,n0)).toFixed(2)}%`,m.top=`${(100*h/d(this,t0)).toFixed(2)}%`):(m.left=`${f}${u.toFixed(2)}px)`,m.top=`${f}${h.toFixed(2)}px)`),m.fontSize=`${f}${(d(wn,pc)*l).toFixed(2)}px)`,m.fontFamily=o,r.fontSize=l,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,d(this,e0)&&(n.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(r.angle=s*(180/Math.PI));let g=!1;if(e.str.length>1)g=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const y=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);y!==w&&Math.max(y,w)/Math.min(y,w)>1.5&&(g=!0)}if(g&&(r.canvasWidth=a.vertical?e.height:e.width),d(this,i0).set(n,r),d(this,Eo).div=n,d(this,Eo).properties=r,N(this,wl,SI).call(this,d(this,Eo)),r.hasText&&d(this,ci).append(n),r.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),d(this,ci).append(y)}},SI=function(e){var o;const{div:n,properties:r,ctx:i}=e,{style:s}=n;let a="";if(d(wn,pc)>1&&(a=`scale(${1/d(wn,pc)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=s,{canvasWidth:c,fontSize:u}=r;N(o=wn,Ki,TI).call(o,i,u*d(this,fc),l);const{width:h}=i.measureText(n.textContent);h>0&&(a=`scaleX(${c*d(this,fc)/h}) ${a}`)}r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(s.transform=a)},Ki=new WeakSet,Ib=function(e=null){let n=d(this,Ph).get(e||(e=""));if(!n){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),n=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,Ph).set(e,n),d(this,a0).set(n,{size:0,family:""})}return n},TI=function(e,n,r){const i=d(this,a0).get(e);n===i.size&&r===i.family||(e.font=`${n}px ${r}`,i.size=n,i.family=r)},h3=function(){if(d(this,pc)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),S(this,pc,e.getBoundingClientRect().height),e.remove()},d3=function(e,n){const r=d(this,Th).get(e);if(r)return r;const i=N(this,Ki,Ib).call(this,n);i.canvas.width=i.canvas.height=si,N(this,Ki,TI).call(this,i,si,e);const s=i.measureText("");let a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);if(a){const u=a/(a+o);return d(this,Th).set(e,u),i.canvas.width=i.canvas.height=0,u}i.strokeStyle="red",i.clearRect(0,0,si,si),i.strokeText("g",0,0);let l=i.getImageData(0,0,si,si).data;o=0;for(let u=l.length-1-3;u>=0;u-=4)if(l[u]>0){o=Math.ceil(u/4/si);break}i.clearRect(0,0,si,si),i.strokeText("A",0,si),l=i.getImageData(0,0,si,si).data,a=0;for(let u=0,h=l.length;u<h;u+=4)if(l[u]>0){a=si-Math.floor(u/4/si);break}i.canvas.width=i.canvas.height=0;const c=a?a/(a+o):gre;return d(this,Th).set(e,c),c},R(wn,Ki),R(wn,Th,new Map),R(wn,Ph,new Map),R(wn,a0,new WeakMap),R(wn,pc,null),R(wn,_p,new Set);let ty=wn;class ny{static textContent(e){const n=[],r={items:n,styles:Object.create(null)};function i(s){var l;if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(ny.shouldBuildText(o))(l=s==null?void 0:s.attributes)!=null&&l.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&n.push({str:a}),!!s.children)for(const c of s.children)i(c)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const vre=65536,yre=100,wre=5e3,_re=kr?Dne:Rne,bre=kr?Mne:Qz,xre=kr?One:Nne,Are=kr?Lne:t3;function Ere(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new PI,{docId:n}=e,r=t.url?Sre(t.url):null,i=t.data?Tre(t.data):null,s=t.httpHeaders||null,a=t.withCredentials===!0,o=t.password??null,l=t.range instanceof f3?t.range:null,c=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:vre;let u=t.worker instanceof qf?t.worker:null;const h=t.verbosity,f=typeof t.docBaseUrl=="string"&&!YE(t.docBaseUrl)?t.docBaseUrl:null,m=typeof t.cMapUrl=="string"?t.cMapUrl:null,g=t.cMapPacked!==!1,v=t.CMapReaderFactory||bre,y=typeof t.standardFontDataUrl=="string"?t.standardFontDataUrl:null,w=t.StandardFontDataFactory||Are,b=t.stopAtErrors!==!0,A=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,I=t.isEvalSupported!==!1,k=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!kr,M=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!kr&&(Xr.platform.isFirefox||!globalThis.chrome),P=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,C=typeof t.disableFontFace=="boolean"?t.disableFontFace:kr,O=t.fontExtraProperties===!0,j=t.enableXfa===!0,D=t.ownerDocument||globalThis.document,F=t.disableRange===!0,V=t.disableStream===!0,Y=t.disableAutoFetch===!0,re=t.pdfBug===!0,K=t.CanvasFactory||_re,q=t.FilterFactory||xre,H=t.enableHWA===!0,X=l?l.length:t.length??NaN,te=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!kr&&!C,ce=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:v===Qz&&w===t3&&m&&y&&zg(m,document.baseURI)&&zg(y,document.baseURI),ue=null;cne(h);const ve={canvasFactory:new K({ownerDocument:D,enableHWA:H}),filterFactory:new q({docId:n,ownerDocument:D}),cMapReaderFactory:ce?null:new v({baseUrl:m,isCompressed:g}),standardFontDataFactory:ce?null:new w({baseUrl:y})};if(!u){const Ye={verbosity:h,port:Uo.workerPort};u=Ye.port?qf.fromPort(Ye):new qf(Ye),e._worker=u}const Ue={docId:n,apiVersion:"4.10.38",data:i,password:o,disableAutoFetch:Y,rangeChunkSize:c,length:X,docBaseUrl:f,enableXfa:j,evaluatorOptions:{maxImageSize:A,disableFontFace:C,ignoreErrors:b,isEvalSupported:I,isOffscreenCanvasSupported:k,isImageDecoderSupported:M,canvasMaxAreaInBytes:P,fontExtraProperties:O,useSystemFonts:te,cMapUrl:ce?m:null,standardFontDataUrl:ce?y:null}},et={disableFontFace:C,fontExtraProperties:O,ownerDocument:D,pdfBug:re,styleElement:ue,loadingParams:{disableAutoFetch:Y,enableXfa:j}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Ye=u.messageHandler.sendWithPromise("GetDocRequest",Ue,i?[i.buffer]:null);let me;if(l)me=new Zne(l,{disableRange:F,disableStream:V});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");let qn;if(kr)if(zg(r)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");qn=TL}else qn=dre;else qn=zg(r)?TL:ore;me=new qn({url:r,length:X,httpHeaders:s,withCredentials:a,rangeChunkSize:c,disableRange:F,disableStream:V})}return Ye.then(qn=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Q=new qg(n,qn,u.port),ne=new kre(Q,e,me,et,ve);e._transport=ne,Q.send("Ready",null)})}).catch(e._capability.reject),e}function Sre(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(kr&&typeof t=="string")return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Tre(t){if(kr&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return KE(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t==null?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function PL(t){return typeof t=="object"&&Number.isInteger(t==null?void 0:t.num)&&t.num>=0&&Number.isInteger(t==null?void 0:t.gen)&&t.gen>=0}var GA;const qA=class qA{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Lr(qA,GA)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,n,r,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((n=this._transport)==null?void 0:n.destroy())}catch(s){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,s}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};GA=new WeakMap,R(qA,GA,0);let PI=qA;class f3{constructor(e,n,r=!1,i=null){this.length=e,this.initialData=n,this.progressiveDone=r,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,n){for(const r of this._rangeListeners)r(e,n)}onDataProgress(e,n){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,n)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const n of this._progressiveReadListeners)n(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,n){bt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Pre{constructor(e,n){this._pdfInfo=e,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ge(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var mc,So,vs,df,Cb;class Ire{constructor(e,n,r,i=!1){R(this,vs);R(this,mc,null);R(this,So,!1);this._pageIndex=e,this._pageInfo=n,this._transport=r,this._stats=i?new fL:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new p3,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new lw({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ge(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:n,intent:r="display",annotationMode:i=Ql.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:h=!1}){var I,k;(I=this._stats)==null||I.time("Overall");const f=this._transport.getRenderingIntent(r,i,u,h),{renderingIntent:m,cacheKey:g}=f;S(this,So,!1),N(this,vs,Cb).call(this),o||(o=this._transport.getOptionalContentConfig(m));let v=this._intentStates.get(g);v||(v=Object.create(null),this._intentStates.set(g,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const y=!!(m&Li.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(k=this._stats)==null||k.time("Page Request"),this._pumpOperatorList(f));const w=M=>{var P;v.renderTasks.delete(b),(this._maybeCleanupAfterRender||y)&&S(this,So,!0),N(this,vs,df).call(this,!y),M?(b.capability.reject(M),this._abortOperatorList({intentState:v,reason:M instanceof Error?M:new Error(M)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new CI({callback:w,params:{canvasContext:e,viewport:n,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:c});(v.renderTasks||(v.renderTasks=new Set)).add(b);const A=b.task;return Promise.all([v.displayReadyCapability.promise,o]).then(([M,P])=>{var C;if(this.destroyed){w();return}if((C=this._stats)==null||C.time("Rendering"),!(P.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:M,optionalContentConfig:P}),b.operatorListChanged()}).catch(w),A}getOperatorList({intent:e="display",annotationMode:n=Ql.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){var c;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,n,r,i,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>ny.textContent(r));const n=this.streamTextContent(e);return new Promise(function(r,i){function s(){a.read().then(function({value:l,done:c}){if(c){r(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},i)}const a=n.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const r of n.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),S(this,So,!1),N(this,vs,Cb).call(this),Promise.all(e)}cleanup(e=!1){S(this,So,!0);const n=N(this,vs,df).call(this,!1);return e&&n&&this._stats&&(this._stats=new fL),n}_startRenderPage(e,n){var i,s;const r=this._intentStates.get(n);r&&((i=this._stats)==null||i.timeEnd("Page Request"),(s=r.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,n){for(let r=0,i=e.length;r<i;r++)n.operatorList.fnArray.push(e.fnArray[r]),n.operatorList.argsArray.push(e.argsArray[r]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const r of n.renderTasks)r.operatorListChanged();e.lastChunk&&N(this,vs,df).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:r,modifiedIds:i}){const{map:s,transfer:a}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:s,modifiedIds:i},a).getReader(),c=this._intentStates.get(n);c.streamReader=l;const u=()=>{l.read().then(({value:h,done:f})=>{if(f){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),u())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const f of c.renderTasks)f.operatorListChanged();N(this,vs,df).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};u()}_abortOperatorList({intentState:e,reason:n,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(n instanceof sN){let i=yre;n.extraDelay>0&&n.extraDelay<1e3&&(i+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},i);return}}if(e.streamReader.cancel(new tu(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}mc=new WeakMap,So=new WeakMap,vs=new WeakSet,df=function(e=!1){if(N(this,vs,Cb).call(this),!d(this,So)||this.destroyed)return!1;if(e)return S(this,mc,setTimeout(()=>{S(this,mc,null),N(this,vs,df).call(this,!1)},wre)),!1;for(const{renderTasks:n,operatorList:r}of this._intentStates.values())if(n.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,So,!1),!0},Cb=function(){d(this,mc)&&(clearTimeout(d(this,mc)),S(this,mc,null))};var To,KA;class Cre{constructor(){R(this,To,new Map);R(this,KA,Promise.resolve())}postMessage(e,n){const r={data:structuredClone(e,n?{transfer:n}:null)};d(this,KA).then(()=>{for(const[i]of d(this,To))i.call(this,r)})}addEventListener(e,n,r=null){let i=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:s}=r;if(s.aborted){$e("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,n);i=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}d(this,To).set(n,i)}removeEventListener(e,n){const r=d(this,To).get(n);r==null||r(),d(this,To).delete(n)}terminate(){for(const[,e]of d(this,To))e==null||e();d(this,To).clear()}}To=new WeakMap,KA=new WeakMap;var XA,Ih,Ch,bp,kb,xp,Rb;const Nt=class Nt{constructor({name:e=null,port:n=null,verbosity:r=une()}={}){R(this,bp);var i;if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,n){if((i=d(Nt,Ch))!=null&&i.has(n))throw new Error("Cannot use more than one PDFWorker per port.");(d(Nt,Ch)||S(Nt,Ch,new WeakMap)).set(n,this),this._initializeFromPort(n);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new qg("main","worker",e),this._messageHandler.on("ready",function(){}),N(this,bp,kb).call(this)}_initialize(){if(d(Nt,Ih)||d(Nt,xp,Rb)){this._setupFakeWorker();return}let{workerSrc:e}=Nt;try{Nt._isSameOrigin(window.location.href,e)||(e=Nt._createCDNWrapper(new URL(e,window.location).href));const n=new Worker(e,{type:"module"}),r=new qg("main","worker",n),i=()=>{s.abort(),r.destroy(),n.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;n.addEventListener("error",()=>{this._webWorker||i()},{signal:s.signal}),r.on("test",o=>{if(s.abort(),this.destroyed||!o){i();return}this._messageHandler=r,this._port=n,this._webWorker=n,N(this,bp,kb).call(this)}),r.on("ready",o=>{if(s.abort(),this.destroyed){i();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;r.send("test",o,[o.buffer])};a();return}catch{qE("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){d(Nt,Ih)||($e("Setting up fake worker."),S(Nt,Ih,!0)),Nt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const n=new Cre;this._port=n;const r=`fake${Lr(Nt,XA)._++}`,i=new qg(r+"_worker",r,n);e.setup(i,n),this._messageHandler=new qg(r,r+"_worker",n),N(this,bp,kb).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,n,r;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(n=d(Nt,Ch))==null||n.delete(this._port),this._port=null,(r=this._messageHandler)==null||r.destroy(),this._messageHandler=null}static fromPort(e){var r;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const n=(r=d(this,Ch))==null?void 0:r.get(e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Nt(e)}static get workerSrc(){if(Uo.workerSrc)return Uo.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ge(this,"_setupFakeWorkerGlobal",(async()=>d(this,xp,Rb)?d(this,xp,Rb):(await import(this.workerSrc)).WorkerMessageHandler)())}};XA=new WeakMap,Ih=new WeakMap,Ch=new WeakMap,bp=new WeakSet,kb=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},xp=new WeakSet,Rb=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},R(Nt,xp),R(Nt,XA,0),R(Nt,Ih,!1),R(Nt,Ch),kr&&(S(Nt,Ih,!0),Uo.workerSrc||(Uo.workerSrc="./pdf.worker.mjs")),Nt._isSameOrigin=(e,n)=>{let r;try{if(r=new URL(e),!r.origin||r.origin==="null")return!1}catch{return!1}const i=new URL(n,r);return r.origin===i.origin},Nt._createCDNWrapper=e=>{const n=`await import("${e}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))};let qf=Nt;var Po,Ca,Ap,Ep,Io,kh,Jg;class kre{constructor(e,n,r,i,s){R(this,kh);R(this,Po,new Map);R(this,Ca,new Map);R(this,Ap,new Map);R(this,Ep,new Map);R(this,Io,null);this.messageHandler=e,this.loadingTask=n,this.commonObjs=new p3,this.fontLoader=new Cne({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ge(this,"annotationStorage",new cN)}getRenderingIntent(e,n=Ql.ENABLE,r=null,i=!1,s=!1){let a=Li.DISPLAY,o=gI;switch(e){case"any":a=Li.ANY;break;case"display":break;case"print":a=Li.PRINT;break;default:$e(`getRenderingIntent - invalid intent: ${e}`)}const l=a&Li.PRINT&&r instanceof Wz?r:this.annotationStorage;switch(n){case Ql.DISABLE:a+=Li.ANNOTATIONS_DISABLE;break;case Ql.ENABLE:break;case Ql.ENABLE_FORMS:a+=Li.ANNOTATIONS_FORMS;break;case Ql.ENABLE_STORAGE:a+=Li.ANNOTATIONS_STORAGE,o=l.serializable;break;default:$e(`getRenderingIntent - invalid annotationMode: ${n}`)}i&&(a+=Li.IS_EDITING),s&&(a+=Li.OPLIST);const{ids:c,hash:u}=l.modifiedIds,h=[a,o.hash,u];return{renderingIntent:a,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=d(this,Io))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of d(this,Ca).values())e.push(i._destroy());d(this,Ca).clear(),d(this,Ap).clear(),d(this,Ep).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{var i,s;this.commonObjs.clear(),this.fontLoader.clear(),d(this,Po).clear(),this.filterFactory.destroy(),ty.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new tu("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(r,i)=>{dn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){i.close();return}dn(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async r=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:a}=this._fullReader;return(!i||!s)&&(this._lastProgress&&((o=n.onProgress)==null||o.call(n,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=n.onProgress)==null||c.call(n,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(r,i)=>{dn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){i.close();return}dn(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{s.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,n._capability.resolve(new Pre(r,this))}),e.on("DocException",r=>{n._capability.reject(ai(r))}),e.on("PasswordRequest",r=>{S(this,Io,Promise.withResolvers());try{if(!n.onPassword)throw ai(r);const i=s=>{s instanceof Error?d(this,Io).reject(s):d(this,Io).resolve({password:s})};n.onPassword(i,r.code)}catch(i){d(this,Io).reject(i)}return d(this,Io).promise}),e.on("DataLoaded",r=>{var i;(i=n.onProgress)==null||i.call(n,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;d(this,Ca).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{var a;if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":const{disableFontFace:o,fontExtraProperties:l,pdfBug:c}=this._params;if("error"in s){const m=s.error;$e(`Error during font loading: ${m}`),this.commonObjs.resolve(r,m);break}const u=c&&((a=globalThis.FontInspector)!=null&&a.enabled)?(m,g)=>globalThis.FontInspector.fontAdded(m,g):null,h=new kne(s,{disableFontFace:o,fontExtraProperties:l,inspectFont:u});this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l&&h.data&&(h.data=null),this.commonObjs.resolve(r,h)});break;case"CopyLocalImage":const{imageRef:f}=s;dn(f,"The imageRef must be defined.");for(const m of d(this,Ca).values())for(const[,g]of m.objs)if((g==null?void 0:g.ref)===f)return g.dataLen?(this.commonObjs.resolve(r,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,s,a])=>{var l;if(this.destroyed)return;const o=d(this,Ca).get(i);if(!o.objs.has(r)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(s){case"Image":o.objs.resolve(r,a),(a==null?void 0:a.dataLen)>sne&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",r=>{var i;this.destroyed||(i=n.onProgress)==null||i.call(n,{loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(r)}),e.on("FetchStandardFontData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&$e("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=e-1,r=d(this,Ap).get(n);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&d(this,Ep).set(s.refStr,e);const a=new Ire(n,s,this,this._params.pdfBug);return d(this,Ca).set(n,a),a});return d(this,Ap).set(n,i),i}getPageIndex(e){return PL(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}getFieldObjects(){return N(this,kh,Jg).call(this,"GetFieldObjects")}hasJSActions(){return N(this,kh,Jg).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return N(this,kh,Jg).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return N(this,kh,Jg).call(this,"GetOptionalContentConfig").then(n=>new Jne(n,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=d(this,Po).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,null).then(i=>{var s,a;return{info:i[0],metadata:i[1]?new Yne(i[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return d(this,Po).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of d(this,Ca).values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),d(this,Po).clear(),this.filterFactory.destroy(!0),ty.cleanup()}}cachedPageNumber(e){if(!PL(e))return null;const n=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return d(this,Ep).get(n)??null}}Po=new WeakMap,Ca=new WeakMap,Ap=new WeakMap,Ep=new WeakMap,Io=new WeakMap,kh=new WeakSet,Jg=function(e,n=null){const r=d(this,Po).get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,n);return d(this,Po).set(e,i),i};const Eg=Symbol("INITIAL_DATA");var Pi,o0,II;class p3{constructor(){R(this,o0);R(this,Pi,Object.create(null))}get(e,n=null){if(n){const i=N(this,o0,II).call(this,e);return i.promise.then(()=>n(i.data)),null}const r=d(this,Pi)[e];if(!r||r.data===Eg)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const n=d(this,Pi)[e];return!!n&&n.data!==Eg}delete(e){const n=d(this,Pi)[e];return!n||n.data===Eg?!1:(delete d(this,Pi)[e],!0)}resolve(e,n=null){const r=N(this,o0,II).call(this,e);r.data=n,r.resolve()}clear(){var e;for(const n in d(this,Pi)){const{data:r}=d(this,Pi)[n];(e=r==null?void 0:r.bitmap)==null||e.close()}S(this,Pi,Object.create(null))}*[Symbol.iterator](){for(const e in d(this,Pi)){const{data:n}=d(this,Pi)[e];n!==Eg&&(yield[e,n])}}}Pi=new WeakMap,o0=new WeakSet,II=function(e){var n;return(n=d(this,Pi))[e]||(n[e]={...Promise.withResolvers(),data:Eg})};var gc;class Rre{constructor(e){R(this,gc,null);S(this,gc,e),this.onContinue=null}get promise(){return d(this,gc).capability.promise}cancel(e=0){d(this,gc).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=d(this,gc).operatorList;if(!e)return!1;const{annotationCanvasMap:n}=d(this,gc);return e.form||e.canvas&&(n==null?void 0:n.size)>0}}gc=new WeakMap;var vc,Rh;const Hu=class Hu{constructor({callback:e,params:n,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:f=null}){R(this,vc,null);this.callback=e,this.params=n,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Rre(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){var o,l;if(this.cancelled)return;if(this._canvas){if(d(Hu,Rh).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(Hu,Rh).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:i,transform:s,background:a}=this.params;this.gfx=new Gf(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:i,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,n=0){var r;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),d(this,vc)&&(window.cancelAnimationFrame(d(this,vc)),S(this,vc,null)),d(Hu,Rh).delete(this._canvas),this.callback(e||new sN(`Rendering cancelled, page ${this._pageIndex+1}`,n))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,vc,window.requestAnimationFrame(()=>{S(this,vc,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(Hu,Rh).delete(this._canvas),this.callback())))}};vc=new WeakMap,Rh=new WeakMap,R(Hu,Rh,new WeakSet);let CI=Hu;const Nre="4.10.38",Ore="f9bea397f";function IL(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function Sg(t){return Math.max(0,Math.min(255,255*t))}class CL{static CMYK_G([e,n,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*n+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Sg(e),[e,e,e]}static G_HTML([e]){const n=IL(e);return`#${n}${n}${n}`}static RGB_G([e,n,r]){return["G",.3*e+.59*n+.11*r]}static RGB_rgb(e){return e.map(Sg)}static RGB_HTML(e){return`#${e.map(IL).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,n,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,n+i)]}static CMYK_rgb([e,n,r,i]){return[Sg(1-Math.min(1,e+i)),Sg(1-Math.min(1,r+i)),Sg(1-Math.min(1,n+i))]}static CMYK_HTML(e){const n=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([e,n,r]){const i=1-e,s=1-n,a=1-r,o=Math.min(i,s,a);return["CMYK",i,s,a,o]}}class Dre{create(e,n,r=!1){if(e<=0||n<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${n}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){bt("Abstract method `_createSVG` called.")}}class hN extends Dre{_createSVG(e){return document.createElementNS(ao,e)}}class m3{static setupStorage(e,n,r,i,s){const a=i.getValue(n,{value:null});switch(r.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",o=>{i.setValue(n,{value:o.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(a.value===r.attributes.xfaOn?e.setAttribute("checked",!0):a.value===r.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{i.setValue(n,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",o=>{i.setValue(n,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of r.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(n,{value:c})});break}}static setAttributes({html:e,element:n,storage:r=null,intent:i,linkService:s}){const{attributes:a}=n,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[l,c]of Object.entries(a))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}o&&s.addLinkAttributes(e,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(e,a.dataId,n,r)}static render(e){var h,f;const n=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:s,linkService:r});const o=s!=="richText",l=e.div;if(l.append(a),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=m}o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const m=document.createTextNode(i.value);a.append(m),o&&ny.shouldBuildText(i.name)&&c.push(m)}return{textDivs:c}}const u=[[i,-1,a]];for(;u.length>0;){const[m,g,v]=u.at(-1);if(g+1===m.children.length){u.pop();continue}const y=m.children[++u.at(-1)[1]];if(y===null)continue;const{name:w}=y;if(w==="#text"){const A=document.createTextNode(y.value);c.push(A),v.append(A);continue}const b=(h=y==null?void 0:y.attributes)!=null&&h.xmlns?document.createElementNS(y.attributes.xmlns,w):document.createElement(w);if(v.append(b),y.attributes&&this.setAttributes({html:b,element:y,storage:n,intent:s,linkService:r}),((f=y.children)==null?void 0:f.length)>0)u.push([y,-1,b]);else if(y.value){const A=document.createTextNode(y.value);o&&ny.shouldBuildText(w)&&c.push(A),b.append(A)}}for(const m of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const n=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=n,e.div.hidden=!1}}const uw=1e3,Mre=9,Ed=new WeakSet;function Gc(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class Lre{static create(e){switch(e.data.annotationType){case yn.LINK:return new g3(e);case yn.TEXT:return new jre(e);case yn.WIDGET:switch(e.data.fieldType){case"Tx":return new Fre(e);case"Btn":return e.data.radioButton?new w3(e):e.data.checkBox?new Ure(e):new Bre(e);case"Ch":return new $re(e);case"Sig":return new Vre(e)}return new Fd(e);case yn.POPUP:return new RI(e);case yn.FREETEXT:return new E3(e);case yn.LINE:return new Hre(e);case yn.SQUARE:return new Wre(e);case yn.CIRCLE:return new Gre(e);case yn.POLYLINE:return new S3(e);case yn.CARET:return new Kre(e);case yn.INK:return new dN(e);case yn.POLYGON:return new qre(e);case yn.HIGHLIGHT:return new T3(e);case yn.UNDERLINE:return new Xre(e);case yn.SQUIGGLY:return new Yre(e);case yn.STRIKEOUT:return new Qre(e);case yn.STAMP:return new P3(e);case yn.FILEATTACHMENT:return new Jre(e);default:return new on(e)}}}var Nh,Sp,Tp,l0,kI;const JO=class JO{constructor(e,{isRenderable:n=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){R(this,l0);R(this,Nh,null);R(this,Sp,!1);R(this,Tp,null);this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,n&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:n,richText:r}){return!!(e!=null&&e.str||n!=null&&n.str||r!=null&&r.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return JO._hasPopupData(this.data)}updateEdited(e){var r;if(!this.container)return;d(this,Nh)||S(this,Nh,{rect:this.data.rect.slice(0)});const{rect:n}=e;n&&N(this,l0,kI).call(this,n),(r=d(this,Tp))==null||r.popup.updateEdited(e)}resetEdited(){var e;d(this,Nh)&&(N(this,l0,kI).call(this,d(this,Nh).rect),(e=d(this,Tp))==null||e.popup.resetEdited(),S(this,Nh,null))}_createContainer(e){const{data:n,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",n.id),this instanceof Fd||(s.tabIndex=uw);const{style:a}=s;if(a.zIndex=this.parent.zIndex++,n.alternativeText&&(s.title=n.alternativeText),n.noRotate&&s.classList.add("norotate"),!n.rect||this instanceof RI){const{rotation:v}=n;return!n.hasOwnCanvas&&v!==0&&this.setRotation(v,s),s}const{width:o,height:l}=Gc(n.rect);if(!e&&n.borderStyle.width>0){a.borderWidth=`${n.borderStyle.width}px`;const v=n.borderStyle.horizontalCornerRadius,y=n.borderStyle.verticalCornerRadius;if(v>0||y>0){const b=`calc(${v}px * var(--scale-factor)) / calc(${y}px * var(--scale-factor))`;a.borderRadius=b}else if(this instanceof w3){const b=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=b}switch(n.borderStyle.style){case xg.SOLID:a.borderStyle="solid";break;case xg.DASHED:a.borderStyle="dashed";break;case xg.BEVELED:$e("Unimplemented border style: beveled");break;case xg.INSET:$e("Unimplemented border style: inset");break;case xg.UNDERLINE:a.borderBottomStyle="solid";break}const w=n.borderColor||null;w?(S(this,Sp,!0),a.borderColor=_e.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):a.borderWidth=0}const c=_e.normalizeRect([n.rect[0],r.view[3]-n.rect[1]+r.view[1],n.rect[2],r.view[3]-n.rect[3]+r.view[1]]),{pageWidth:u,pageHeight:h,pageX:f,pageY:m}=i.rawDims;a.left=`${100*(c[0]-f)/u}%`,a.top=`${100*(c[1]-m)/h}%`;const{rotation:g}=n;return n.hasOwnCanvas||g===0?(a.width=`${100*o/u}%`,a.height=`${100*l/h}%`):this.setRotation(g,s),s}setRotation(e,n=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims,{width:s,height:a}=Gc(this.data.rect);let o,l;e%180===0?(o=100*s/r,l=100*a/i):(o=100*a/r,l=100*s/i),n.style.width=`${o}%`,n.style.height=`${l}%`,n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(n,r,i)=>{const s=i.detail[n],a=s[0],o=s.slice(1);i.target.style[r]=CL[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[r]:CL[`${a}_rgb`](o)})};return Ge(this,"_commonActions",{display:n=>{const{display:r}=n.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:r}=n.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)},rotation:n=>{const r=n.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,n){const r=this._commonActions;for(const i of Object.keys(n.detail)){const s=e[i]||r[i];s==null||s(n)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const r=this._commonActions;for(const[i,s]of Object.entries(n)){const a=r[i];if(a){const o={detail:{[i]:s},target:e};a(o),delete n[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[n,r,i,s]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,y,w,b]=e.subarray(2,6);if(i===v&&s===y&&n===w&&r===b)return}const{style:a}=this.container;let o;if(d(this,Sp)){const{borderColor:v,borderWidth:y}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${y}">`],this.container.classList.add("hasBorder")}const l=i-n,c=s-r,{svgFactory:u}=this,h=u.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const f=u.createElement("defs");h.append(f);const m=u.createElement("clipPath"),g=`clippath_${this.data.id}`;m.setAttribute("id",g),m.setAttribute("clipPathUnits","objectBoundingBox"),f.append(m);for(let v=2,y=e.length;v<y;v+=8){const w=e[v],b=e[v+1],A=e[v+2],I=e[v+3],k=u.createElement("rect"),M=(A-n)/l,P=(s-b)/c,C=(w-A)/l,O=(b-I)/c;k.setAttribute("x",M),k.setAttribute("y",P),k.setAttribute("width",C),k.setAttribute("height",O),m.append(k),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${M}" y="${P}" width="${C}" height="${O}"/>`)}d(this,Sp)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${g})`}_createPopup(){const{data:e}=this,n=S(this,Tp,new RI({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){bt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:a,exportValues:o}of i){if(s===-1||a===n)continue;const l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${a}"]`);if(c&&!Ed.has(c)){$e(`_getElementsByName - element not allowed: ${a}`);continue}r.push({id:a,exportValue:l,domElement:c})}return r}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,a=i.getAttribute("data-element-id");a!==n&&Ed.has(i)&&r.push({id:a,exportValue:s,domElement:i})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const n of e)n.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:n})})}};Nh=new WeakMap,Sp=new WeakMap,Tp=new WeakMap,l0=new WeakSet,kI=function(e){const{container:{style:n},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;r==null||r.splice(0,4,...e);const{width:c,height:u}=Gc(e);n.left=`${100*(e[0]-o)/s}%`,n.top=`${100*(a-e[3]+l)/a}%`,i===0?(n.width=`${100*c/s}%`,n.height=`${100*u/a}%`):this.setRotation(i)};let on=JO;var Vi,ku,v3,y3;class g3 extends on{constructor(n,r=null){super(n,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});R(this,Vi);this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:r}=this,i=document.createElement("a");i.setAttribute("data-element-id",n.id);let s=!1;return n.url?(r.addLinkAttributes(i,n.url,n.newWindow),s=!0):n.action?(this._bindNamedAction(i,n.action),s=!0):n.attachment?(N(this,Vi,v3).call(this,i,n.attachment,n.attachmentDest),s=!0):n.setOCGState?(N(this,Vi,y3).call(this,i,n.setOCGState),s=!0):n.dest?(this._bindLink(i,n.dest),s=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,n),s=!0),n.resetForm?(this._bindResetFormAction(i,n.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}_bindLink(n,r){n.href=this.linkService.getDestinationHash(r),n.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&N(this,Vi,ku).call(this)}_bindNamedAction(n,r){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(r),!1),N(this,Vi,ku).call(this)}_bindJSAction(n,r){n.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(r.actions)){const a=i.get(s);a&&(n[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:s}}),!1})}n.onclick||(n.onclick=()=>!1),N(this,Vi,ku).call(this)}_bindResetFormAction(n,r){const i=n.onclick;if(i||(n.href=this.linkService.getAnchorUrl("")),N(this,Vi,ku).call(this),!this._fieldObjects){$e('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(n.onclick=()=>!1);return}n.onclick=()=>{var h;i==null||i();const{fields:s,refs:a,include:o}=r,l=[];if(s.length!==0||a.length!==0){const f=new Set(a);for(const m of s){const g=this._fieldObjects[m]||[];for(const{id:v}of g)f.add(v)}for(const m of Object.values(this._fieldObjects))for(const g of m)f.has(g.id)===o&&l.push(g)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const c=this.annotationStorage,u=[];for(const f of l){const{id:m}=f;switch(u.push(m),f.type){case"text":{const v=f.defaultValue||"";c.setValue(m,{value:v});break}case"checkbox":case"radiobutton":{const v=f.defaultValue===f.exportValues;c.setValue(m,{value:v});break}case"combobox":case"listbox":{const v=f.defaultValue||"";c.setValue(m,{value:v});break}default:continue}const g=document.querySelector(`[data-element-id="${m}"]`);if(g){if(!Ed.has(g)){$e(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Vi=new WeakSet,ku=function(){this.container.setAttribute("data-internal-link","")},v3=function(n,r,i=null){n.href=this.linkService.getAnchorUrl(""),r.description&&(n.title=r.description),n.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(r.content,r.filename,i),!1},N(this,Vi,ku).call(this)},y3=function(n,r){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(r),!1),N(this,Vi,ku).call(this)};class jre extends on{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Fd extends on{render(){return this.container}showElementAndHideCanvas(e){var n;this.data.hasOwnCanvas&&(((n=e.previousSibling)==null?void 0:n.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Xr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,n,r,i,s){r.includes("mouse")?e.addEventListener(r,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(r,a=>{var o;if(r==="blur"){if(!n.focused||!a.relatedTarget)return;n.focused=!1}else if(r==="focus"){if(n.focused)return;n.focused=!0}s&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a)}}))})}_setEventListeners(e,n,r,i){var s,a,o;for(const[l,c]of r)(c==="Action"||(s=this.data.actions)!=null&&s[c])&&((c==="Focus"||c==="Blur")&&(n||(n={focused:!1})),this._setEventListener(e,n,l,c,i),c==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,n,"blur","Blur",null):c==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,n,"focus","Focus",null))}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=n===null?"transparent":_e.makeHexColor(n[0],n[1],n[2])}_setTextStyle(e){const n=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Mre,s=e.style;let a;const o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),u=Math.round(c/(WS*i))||1,h=c/u;a=Math.min(i,l(h/WS))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(i,l(c/WS))}s.fontSize=`calc(${a}px * var(--scale-factor))`,s.color=_e.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=n[this.data.textAlignment])}_setRequired(e,n){n?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",n)}}class Fre extends Fd{constructor(e){const n=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:n})}setPropertyOnSiblings(e,n,r,i){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[n]=r),s.setValue(a.id,{[i]:r})}render(){var i,s;const e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const a=e.getValue(n,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=c??o,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",c??o),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Ed.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=uw,this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",f=>{e.setValue(n,{value:f.target.value}),this.setPropertyOnSiblings(r,"value",f.target.value,"value"),u.formattedValue=null}),r.addEventListener("resetform",f=>{const m=this.data.defaultFieldValue??"";r.value=u.userValue=m,u.formattedValue=null});let h=f=>{const{formattedValue:m}=u;m!=null&&(f.target.value=m),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",m=>{var v;if(u.focused)return;const{target:g}=m;u.userValue&&(g.value=u.userValue),u.lastCommittedValue=g.value,u.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(u.focused=!0)}),r.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const g={value(v){u.userValue=v.detail.value??"",e.setValue(n,{value:u.userValue.toString()}),v.target.value=u.userValue},formattedValue(v){const{formattedValue:y}=v.detail;u.formattedValue=y,y!=null&&v.target!==document.activeElement&&(v.target.value=y),e.setValue(n,{formattedValue:y})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var A;const{charLimit:y}=v.detail,{target:w}=v;if(y===0){w.removeAttribute("maxLength");return}w.setAttribute("maxLength",y);let b=u.userValue;!b||b.length<=y||(b=b.slice(0,y),w.value=u.userValue=b,e.setValue(n,{value:b}),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:b,willCommit:!0,commitKey:1,selStart:w.selectionStart,selEnd:w.selectionEnd}}))}};this._dispatchEventFromSandbox(g,m)}),r.addEventListener("keydown",m=>{var y;u.commitKey=1;let g=-1;if(m.key==="Escape"?g=0:m.key==="Enter"&&!this.data.multiLine?g=2:m.key==="Tab"&&(u.commitKey=3),g===-1)return;const{value:v}=m.target;u.lastCommittedValue!==v&&(u.lastCommittedValue=v,u.userValue=v,(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:v,willCommit:!0,commitKey:g,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const f=h;h=null,r.addEventListener("blur",m=>{var v,y;if(!u.focused||!m.relatedTarget)return;(v=this.data.actions)!=null&&v.Blur||(u.focused=!1);const{value:g}=m.target;u.userValue=g,u.lastCommittedValue!==g&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:g,willCommit:!0,commitKey:u.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),f(m)}),(s=this.data.actions)!=null&&s.Keystroke&&r.addEventListener("beforeinput",m=>{var k;u.lastCommittedValue=null;const{data:g,target:v}=m,{value:y,selectionStart:w,selectionEnd:b}=v;let A=w,I=b;switch(m.inputType){case"deleteWordBackward":{const M=y.substring(0,w).match(/\w*[^\w]*$/);M&&(A-=M[0].length);break}case"deleteWordForward":{const M=y.substring(w).match(/^[^\w]*\w*/);M&&(I+=M[0].length);break}case"deleteContentBackward":w===b&&(A-=1);break;case"deleteContentForward":w===b&&(I+=1);break}m.preventDefault(),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:y,change:g||"",willCommit:!1,selStart:A,selEnd:I}})}),this._setEventListeners(r,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(h&&r.addEventListener("blur",h),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${m}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Vre extends Fd{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Ure extends Fd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,r=n.id;let i=e.getValue(r,{value:n.exportValue===n.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Ed.add(s),s.setAttribute("data-element-id",r),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=n.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",n.exportValue),s.tabIndex=uw,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,r)){const u=l&&c.exportValue===n.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(r,{value:l})}),s.addEventListener("resetform",a=>{const o=n.defaultFieldValue||"Off";a.target.checked=o===n.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class w3 extends Fd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,n=this.data,r=n.id;let i=e.getValue(r,{value:n.fieldValue===n.buttonValue}).value;if(typeof i=="string"&&(i=i!==n.buttonValue,e.setValue(r,{value:i})),i)for(const a of this._getElementsByName(n.fieldName,r))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(Ed.add(s),s.setAttribute("data-element-id",r),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=n.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=uw,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),s.addEventListener("resetform",a=>{const o=n.defaultFieldValue;a.target.checked=o!=null&&o===n.buttonValue}),this.enableScripting&&this.hasJSActions){const a=n.buttonValue;s.addEventListener("updatefromsandbox",o=>{const l={value:c=>{const u=a===c.detail.value;for(const h of this._getElementsByName(c.target.name)){const f=u&&h.id===r;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Bre extends g3{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class $re extends Fd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,n=this.data.id,r=e.getValue(n,{value:this.data.fieldValue}),i=document.createElement("select");Ed.add(i),i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=uw;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const h=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===h});for(const u of this.data.options){const h=document.createElement("option");h.textContent=u.displayValue,h.value=u.exportValue,r.value.includes(u.exportValue)&&(h.setAttribute("selected",!0),s=!1),i.append(h)}let a=null;if(s){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),a=()=>{u.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=u=>{const h=u?"value":"textContent",{options:f,multiple:m}=i;return m?Array.prototype.filter.call(f,g=>g.selected).map(g=>g[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let l=o(!1);const c=u=>{const h=u.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{const h={value(f){a==null||a();const m=f.detail.value,g=new Set(Array.isArray(m)?m:[m]);for(const v of i.options)v.selected=g.has(v.value);e.setValue(n,{value:o(!0)}),l=o(!1)},multipleSelection(f){i.multiple=!0},remove(f){const m=i.options,g=f.detail.remove;m[g].selected=!1,i.remove(g),m.length>0&&Array.prototype.findIndex.call(m,y=>y.selected)===-1&&(m[0].selected=!0),e.setValue(n,{value:o(!0),items:c(f)}),l=o(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(n,{value:null,items:[]}),l=o(!1)},insert(f){const{index:m,displayValue:g,exportValue:v}=f.detail.insert,y=i.children[m],w=document.createElement("option");w.textContent=g,w.value=v,y?y.before(w):i.append(w),e.setValue(n,{value:o(!0),items:c(f)}),l=o(!1)},items(f){const{items:m}=f.detail;for(;i.length!==0;)i.remove(0);for(const g of m){const{displayValue:v,exportValue:y}=g,w=document.createElement("option");w.textContent=v,w.value=y,i.append(w)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(n,{value:o(!0),items:c(f)}),l=o(!1)},indices(f){const m=new Set(f.detail.indices);for(const g of f.target.options)g.selected=m.has(g.index);e.setValue(n,{value:o(!0)}),l=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,u)}),i.addEventListener("input",u=>{var m;const h=o(!0),f=o(!1);e.setValue(n,{value:h}),u.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:l,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){e.setValue(n,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class RI extends on{constructor(e){const{data:n,elements:r}=e;super(e,{isRenderable:on._hasPopupData(n)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new zre({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(r=>`${iN}${r}`).join(",")),this.container}}var Pp,YA,QA,Ip,Oh,Kt,Co,Cp,c0,u0,kp,ko,Bs,Ro,h0,No,d0,Dh,Mh,wt,Nb,NI,_3,b3,x3,A3,Ob,Db,OI;class zre{constructor({container:e,color:n,elements:r,titleObj:i,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:u,open:h}){R(this,wt);R(this,Pp,N(this,wt,x3).bind(this));R(this,YA,N(this,wt,OI).bind(this));R(this,QA,N(this,wt,Db).bind(this));R(this,Ip,N(this,wt,Ob).bind(this));R(this,Oh,null);R(this,Kt,null);R(this,Co,null);R(this,Cp,null);R(this,c0,null);R(this,u0,null);R(this,kp,null);R(this,ko,!1);R(this,Bs,null);R(this,Ro,null);R(this,h0,null);R(this,No,null);R(this,d0,null);R(this,Dh,null);R(this,Mh,!1);var f;S(this,Kt,e),S(this,d0,i),S(this,Co,a),S(this,No,o),S(this,u0,l),S(this,Oh,n),S(this,h0,c),S(this,kp,u),S(this,c0,r),S(this,Cp,oN.toDateObject(s)),this.trigger=r.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",d(this,Ip)),m.addEventListener("mouseenter",d(this,QA)),m.addEventListener("mouseleave",d(this,YA)),m.classList.add("popupTriggerArea");for(const m of r)(f=m.container)==null||f.addEventListener("keydown",d(this,Pp));d(this,Kt).hidden=!0,h&&N(this,wt,Ob).call(this)}render(){if(d(this,Bs))return;const e=S(this,Bs,document.createElement("div"));if(e.className="popup",d(this,Oh)){const s=e.style.outlineColor=_e.makeHexColor(...d(this,Oh));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=_e.makeHexColor(...d(this,Oh).map(o=>Math.floor(.7*(255-o)+o)))}const n=document.createElement("span");n.className="header";const r=document.createElement("h1");if(n.append(r),{dir:r.dir,str:r.textContent}=d(this,d0),e.append(n),d(this,Cp)){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,Cp).valueOf()})),n.append(s)}const i=d(this,wt,Nb);if(i)m3.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(d(this,Co));e.append(s)}d(this,Kt).append(e)}_formatContents({str:e,dir:n}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=n;const i=e.split(/(?:\r\n?|\n)/);for(let s=0,a=i.length;s<a;++s){const o=i[s];r.append(document.createTextNode(o)),s<a-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popupContent:n}){var r;d(this,Dh)||S(this,Dh,{contentsObj:d(this,Co),richText:d(this,No)}),e&&S(this,Ro,null),n&&(S(this,No,N(this,wt,b3).call(this,n)),S(this,Co,null)),(r=d(this,Bs))==null||r.remove(),S(this,Bs,null)}resetEdited(){var e;d(this,Dh)&&({contentsObj:Lr(this,Co)._,richText:Lr(this,No)._}=d(this,Dh),S(this,Dh,null),(e=d(this,Bs))==null||e.remove(),S(this,Bs,null),S(this,Ro,null))}forceHide(){S(this,Mh,this.isVisible),d(this,Mh)&&(d(this,Kt).hidden=!0)}maybeShow(){d(this,Mh)&&(d(this,Bs)||N(this,wt,Db).call(this),S(this,Mh,!1),d(this,Kt).hidden=!1)}get isVisible(){return d(this,Kt).hidden===!1}}Pp=new WeakMap,YA=new WeakMap,QA=new WeakMap,Ip=new WeakMap,Oh=new WeakMap,Kt=new WeakMap,Co=new WeakMap,Cp=new WeakMap,c0=new WeakMap,u0=new WeakMap,kp=new WeakMap,ko=new WeakMap,Bs=new WeakMap,Ro=new WeakMap,h0=new WeakMap,No=new WeakMap,d0=new WeakMap,Dh=new WeakMap,Mh=new WeakMap,wt=new WeakSet,Nb=function(){const e=d(this,No),n=d(this,Co);return e!=null&&e.str&&(!(n!=null&&n.str)||n.str===e.str)&&d(this,No).html||null},NI=function(){var e,n,r;return((r=(n=(e=d(this,wt,Nb))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:r.fontSize)||0},_3=function(){var e,n,r;return((r=(n=(e=d(this,wt,Nb))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:r.color)||null},b3=function(e){const n=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},i={style:{color:d(this,wt,_3),fontSize:d(this,wt,NI)?`calc(${d(this,wt,NI)}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))n.push({name:"span",value:s,attributes:i});return r},x3=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&d(this,ko))&&N(this,wt,Ob).call(this)},A3=function(){if(d(this,Ro)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:s}}}=d(this,u0);let a=!!d(this,kp),o=a?d(this,kp):d(this,h0);for(const g of d(this,c0))if(!o||_e.intersect(g.data.rect,o)!==null){o=g.data.rect,a=!0;break}const l=_e.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),u=a?o[2]-o[0]+5:0,h=l[0]+u,f=l[1];S(this,Ro,[100*(h-i)/n,100*(f-s)/r]);const{style:m}=d(this,Kt);m.left=`${d(this,Ro)[0]}%`,m.top=`${d(this,Ro)[1]}%`},Ob=function(){S(this,ko,!d(this,ko)),d(this,ko)?(N(this,wt,Db).call(this),d(this,Kt).addEventListener("click",d(this,Ip)),d(this,Kt).addEventListener("keydown",d(this,Pp))):(N(this,wt,OI).call(this),d(this,Kt).removeEventListener("click",d(this,Ip)),d(this,Kt).removeEventListener("keydown",d(this,Pp)))},Db=function(){d(this,Bs)||this.render(),this.isVisible?d(this,ko)&&d(this,Kt).classList.add("focused"):(N(this,wt,A3).call(this),d(this,Kt).hidden=!1,d(this,Kt).style.zIndex=parseInt(d(this,Kt).style.zIndex)+1e3)},OI=function(){d(this,Kt).classList.remove("focused"),!(d(this,ko)||!this.isVisible)&&(d(this,Kt).hidden=!0,d(this,Kt).style.zIndex=parseInt(d(this,Kt).style.zIndex)-1e3)};class E3 extends on{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Be.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const n of this.textContent){const r=document.createElement("span");r.textContent=n,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var f0;class Hre extends on{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});R(this,f0,null)}render(){this.container.classList.add("lineAnnotation");const n=this.data,{width:r,height:i}=Gc(n.rect),s=this.svgFactory.create(r,i,!0),a=S(this,f0,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),a.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),a.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),a.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),a.setAttribute("stroke-width",n.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,f0)}addHighlightArea(){this.container.classList.add("highlightArea")}}f0=new WeakMap;var p0;class Wre extends on{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});R(this,p0,null)}render(){this.container.classList.add("squareAnnotation");const n=this.data,{width:r,height:i}=Gc(n.rect),s=this.svgFactory.create(r,i,!0),a=n.borderStyle.width,o=S(this,p0,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",r-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,p0)}addHighlightArea(){this.container.classList.add("highlightArea")}}p0=new WeakMap;var m0;class Gre extends on{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});R(this,m0,null)}render(){this.container.classList.add("circleAnnotation");const n=this.data,{width:r,height:i}=Gc(n.rect),s=this.svgFactory.create(r,i,!0),a=n.borderStyle.width,o=S(this,m0,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",r/2),o.setAttribute("cy",i/2),o.setAttribute("rx",r/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,m0)}addHighlightArea(){this.container.classList.add("highlightArea")}}m0=new WeakMap;var g0;class S3 extends on{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});R(this,g0,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,vertices:r,borderStyle:i,popupRef:s}}=this;if(!r)return this.container;const{width:a,height:o}=Gc(n),l=this.svgFactory.create(a,o,!0);let c=[];for(let h=0,f=r.length;h<f;h+=2){const m=r[h]-n[0],g=n[3]-r[h+1];c.push(`${m},${g}`)}c=c.join(" ");const u=S(this,g0,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,g0)}addHighlightArea(){this.container.classList.add("highlightArea")}}g0=new WeakMap;class qre extends S3{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Kre extends on{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var v0,Lh,y0,DI;class dN extends on{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});R(this,y0);R(this,v0,null);R(this,Lh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Be.HIGHLIGHT:Be.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,rotation:r,inkLists:i,borderStyle:s,popupRef:a}}=this,{transform:o,width:l,height:c}=N(this,y0,DI).call(this,r,n),u=this.svgFactory.create(l,c,!0),h=S(this,v0,this.svgFactory.createElement("svg:g"));u.append(h),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",o);for(let f=0,m=i.length;f<m;f++){const g=this.svgFactory.createElement(this.svgElementName);d(this,Lh).push(g),g.setAttribute("points",i[f].join(",")),h.append(g)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(n){super.updateEdited(n);const{thickness:r,points:i,rect:s}=n,a=d(this,v0);if(r>=0&&a.setAttribute("stroke-width",r||1),i)for(let o=0,l=d(this,Lh).length;o<l;o++)d(this,Lh)[o].setAttribute("points",i[o].join(","));if(s){const{transform:o,width:l,height:c}=N(this,y0,DI).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return d(this,Lh)}addHighlightArea(){this.container.classList.add("highlightArea")}}v0=new WeakMap,Lh=new WeakMap,y0=new WeakSet,DI=function(n,r){switch(n){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class T3 extends on{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Be.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Xre extends on{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Yre extends on{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Qre extends on{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class P3 extends on{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Be.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var w0,_0,MI;class Jre extends on{constructor(n){var i;super(n,{isRenderable:!0});R(this,_0);R(this,w0,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:n,data:r}=this;let i;r.hasAppearance||r.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),i.addEventListener("dblclick",N(this,_0,MI).bind(this)),S(this,w0,i);const{isMac:s}=Xr.platform;return n.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&N(this,_0,MI).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),n.append(i),n}getElementsToTriggerPopup(){return d(this,w0)}addHighlightArea(){this.container.classList.add("highlightArea")}}w0=new WeakMap,_0=new WeakSet,MI=function(){var n;(n=this.downloadManager)==null||n.openOrDownloadData(this.content,this.filename)};var b0,jh,Fh,x0,kd,I3,LI;class Zre{constructor({div:e,accessibilityManager:n,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:a,structTreeLayer:o}){R(this,kd);R(this,b0,null);R(this,jh,null);R(this,Fh,new Map);R(this,x0,null);this.div=e,S(this,b0,n),S(this,jh,r),S(this,x0,o||null),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return d(this,Fh).size>0}async render(e){var a;const{annotations:n}=e,r=this.div;xd(r,this.viewport);const i=new Map,s={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new hN,annotationStorage:e.annotationStorage||new cN,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of n){if(o.noHTML)continue;const l=o.annotationType===yn.POPUP;if(l){const h=i.get(o.id);if(!h)continue;s.elements=h}else{const{width:h,height:f}=Gc(o.rect);if(h<=0||f<=0)continue}s.data=o;const c=Lre.create(s);if(!c.isRenderable)continue;if(!l&&o.popupRef){const h=i.get(o.popupRef);h?h.push(c):i.set(o.popupRef,[c])}const u=c.render();o.hidden&&(u.style.visibility="hidden"),await N(this,kd,I3).call(this,u,o.id),c._isEditable&&(d(this,Fh).set(c.data.id,c),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(c))}N(this,kd,LI).call(this)}update({viewport:e}){const n=this.div;this.viewport=e,xd(n,{rotation:e.rotation}),N(this,kd,LI).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(d(this,Fh).values())}getEditableAnnotation(e){return d(this,Fh).get(e)}}b0=new WeakMap,jh=new WeakMap,Fh=new WeakMap,x0=new WeakMap,kd=new WeakSet,I3=async function(e,n){var a,o;const r=e.firstChild||e,i=r.id=`${iN}${n}`,s=await((a=d(this,x0))==null?void 0:a.getAriaAttributes(i));if(s)for(const[l,c]of s)r.setAttribute(l,c);this.div.append(e),(o=d(this,b0))==null||o.moveElementInDOM(this.div,e,r,!1)},LI=function(){if(!d(this,jh))return;const e=this.div;for(const[n,r]of d(this,jh)){const i=e.querySelector(`[data-annotation-id="${n}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:s}=i;s?s.nodeName==="CANVAS"?s.replaceWith(r):s.classList.contains("annotationContent")?s.after(r):s.before(r):i.append(r)}d(this,jh).clear()};const R_=/\r\n?|\n/g;var $s,Ii,A0,Vh,Ci,pn,C3,k3,R3,Mb,nl,Lb,jb,N3,FI,O3;const At=class At extends $t{constructor(n){super({...n,name:"freeTextEditor"});R(this,pn);R(this,$s);R(this,Ii,"");R(this,A0,`${this.id}-editor`);R(this,Vh,null);R(this,Ci);S(this,$s,n.color||At._defaultColor||$t._defaultLineColor),S(this,Ci,n.fontSize||At._defaultFontSize)}static get _keyboardManager(){const n=At.prototype,r=a=>a.isEmpty(),i=Ad.TRANSLATE_SMALL,s=Ad.TRANSLATE_BIG;return Ge(this,"_keyboardManager",new cw([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],n.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],n.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],n._translateEmpty,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n._translateEmpty,{args:[-s,0],checker:r}],[["ArrowRight","mac+ArrowRight"],n._translateEmpty,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n._translateEmpty,{args:[s,0],checker:r}],[["ArrowUp","mac+ArrowUp"],n._translateEmpty,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n._translateEmpty,{args:[0,-s],checker:r}],[["ArrowDown","mac+ArrowDown"],n._translateEmpty,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n._translateEmpty,{args:[0,s],checker:r}]]))}static initialize(n,r){$t.initialize(n,r);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,r){switch(n){case Je.FREETEXT_SIZE:At._defaultFontSize=r;break;case Je.FREETEXT_COLOR:At._defaultColor=r;break}}updateParams(n,r){switch(n){case Je.FREETEXT_SIZE:N(this,pn,C3).call(this,r);break;case Je.FREETEXT_COLOR:N(this,pn,k3).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Je.FREETEXT_SIZE,At._defaultFontSize],[Je.FREETEXT_COLOR,At._defaultColor||$t._defaultLineColor]]}get propertiesToUpdate(){return[[Je.FREETEXT_SIZE,d(this,Ci)],[Je.FREETEXT_COLOR,d(this,$s)]]}_translateEmpty(n,r){this._uiManager.translateSelectedEditors(n,r,!0)}getInitialTranslation(){const n=this.parentScale;return[-At._internalPadding*n,-(At._internalPadding+d(this,Ci))*n]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Be.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,Vh,new AbortController);const n=this._uiManager.combinedSignal(d(this,Vh));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:n}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:n}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:n}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:n}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:n})}disableEditMode(){var n;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,A0)),this._isDraggable=!0,(n=d(this,Vh))==null||n.abort(),S(this,Vh,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(n){this._focusEventsAllowed&&(super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(n){var r;this.width||(this.enableEditMode(),n&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const n=d(this,Ii),r=S(this,Ii,N(this,pn,R3).call(this).trimEnd());if(n===r)return;const i=s=>{if(S(this,Ii,s),!s){this.remove();return}N(this,pn,jb).call(this),this._uiManager.rebuild(this),N(this,pn,Mb).call(this)};this.addCommands({cmd:()=>{i(r)},undo:()=>{i(n)},mustExec:!1}),N(this,pn,Mb).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(n){this.enterInEditMode()}keydown(n){n.target===this.div&&n.key==="Enter"&&(this.enterInEditMode(),n.preventDefault())}editorDivKeydown(n){At._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let n,r;this.width&&(n=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,A0)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${d(this,Ci)}px * var(--scale-factor))`,i.color=d(this,$s),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),zx(this,this.div,["dblclick","keydown"]),this.width){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,h]=this.pageDimensions,[f,m]=this.pageTranslation;let g,v;switch(this.rotation){case 0:g=n+(o[0]-f)/u,v=r+this.height-(o[1]-m)/h;break;case 90:g=n+(o[0]-f)/u,v=r-(o[1]-m)/h,[l,c]=[c,-l];break;case 180:g=n-this.width+(o[0]-f)/u,v=r-(o[1]-m)/h,[l,c]=[-l,-c];break;case 270:g=n+(o[0]-f-this.height*h)/u,v=r+(o[1]-m-this.width*u)/h,[l,c]=[-c,l];break}this.setAt(g*s,v*a,l,c)}else this.setAt(n*s,r*a,this.width*s,this.height*a);N(this,pn,jb).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(n){var g,v,y;const r=n.clipboardData||window.clipboardData,{types:i}=r;if(i.length===1&&i[0]==="text/plain")return;n.preventDefault();const s=N(g=At,nl,FI).call(g,r.getData("text")||"").replaceAll(R_,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:c}=o,u=[],h=[];if(l.nodeType===Node.TEXT_NODE){const w=l.parentElement;if(h.push(l.nodeValue.slice(c).replaceAll(R_,"")),w!==this.editorDiv){let b=u;for(const A of this.editorDiv.childNodes){if(A===w){b=h;continue}b.push(N(v=At,nl,Lb).call(v,A))}}u.push(l.nodeValue.slice(0,c).replaceAll(R_,""))}else if(l===this.editorDiv){let w=u,b=0;for(const A of this.editorDiv.childNodes)b++===c&&(w=h),w.push(N(y=At,nl,Lb).call(y,A))}S(this,Ii,`${u.join(`
`)}${s}${h.join(`
`)}`),N(this,pn,jb).call(this);const f=new Range;let m=u.reduce((w,b)=>w+b.length,0);for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const b=w.nodeValue.length;if(m<=b){f.setStart(w,m),f.setEnd(w,m);break}m-=b}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(n,r,i){var o;let s=null;if(n instanceof E3){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:h,id:f,popupRef:m},textContent:g,textPosition:v,parent:{page:{pageNumber:y}}}=n;if(!g||g.length===0)return null;s=n={annotationType:Be.FREETEXT,color:Array.from(c),fontSize:l,value:g.join(`
`),position:v,pageIndex:y-1,rect:u.slice(0),rotation:h,id:f,deleted:!1,popupRef:m}}const a=await super.deserialize(n,r,i);return S(a,Ci,n.fontSize),S(a,$s,_e.makeHexColor(...n.color)),S(a,Ii,N(o=At,nl,FI).call(o,n.value)),a.annotationElementId=n.id||null,a._initialData=s,a}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=At._internalPadding*this.parentScale,i=this.getRect(r,r),s=$t._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:d(this,$s)),a={annotationType:Be.FREETEXT,color:s,fontSize:d(this,Ci),value:N(this,pn,N3).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?a:this.annotationElementId&&!N(this,pn,O3).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(n){const r=super.renderAnnotationElement(n);if(this.deleted)return r;const{style:i}=r;i.fontSize=`calc(${d(this,Ci)}px * var(--scale-factor))`,i.color=d(this,$s),r.replaceChildren();for(const a of d(this,Ii).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),r.append(o)}const s=At._internalPadding*this.parentScale;return n.updateEdited({rect:this.getRect(s,s),popupContent:d(this,Ii)}),r}resetAnnotationElement(n){super.resetAnnotationElement(n),n.resetEdited()}};$s=new WeakMap,Ii=new WeakMap,A0=new WeakMap,Vh=new WeakMap,Ci=new WeakMap,pn=new WeakSet,C3=function(n){const r=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-d(this,Ci))*this.parentScale),S(this,Ci,s),N(this,pn,Mb).call(this)},i=d(this,Ci);this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Je.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},k3=function(n){const r=s=>{S(this,$s,this.editorDiv.style.color=s)},i=d(this,$s);this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Je.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},R3=function(){var i;const n=[];this.editorDiv.normalize();let r=null;for(const s of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(n.push(N(i=At,nl,Lb).call(i,s)),r=s);return n.join(`
`)},Mb=function(){const[n,r]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/n,this.height=i.height/r):(this.width=i.height/n,this.height=i.width/r),this.fixAndSetPosition()},nl=new WeakSet,Lb=function(n){return(n.nodeType===Node.TEXT_NODE?n.nodeValue:n.innerText).replaceAll(R_,"")},jb=function(){if(this.editorDiv.replaceChildren(),!!d(this,Ii))for(const n of d(this,Ii).split(`
`)){const r=document.createElement("div");r.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(r)}},N3=function(){return d(this,Ii).replaceAll(""," ")},FI=function(n){return n.replaceAll(" ","")},O3=function(n){const{value:r,fontSize:i,color:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||n.value!==r||n.fontSize!==i||n.color.some((o,l)=>o!==s[l])||n.pageIndex!==a},R(At,nl),Te(At,"_freeTextDefaultContent",""),Te(At,"_internalPadding",0),Te(At,"_defaultColor",null),Te(At,"_defaultFontSize",10),Te(At,"_type","freetext"),Te(At,"_editorType",Be.FREETEXT);let jI=At;class de{toSVGPath(){bt("Abstract method `toSVGPath` must be implemented.")}get box(){bt("Abstract getter `box` must be implemented.")}serialize(e,n){bt("Abstract method `serialize` must be implemented.")}static _rescale(e,n,r,i,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=n+e[o]*i,a[o+1]=r+e[o+1]*s;return a}static _rescaleAndSwap(e,n,r,i,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=n+e[o+1]*i,a[o+1]=r+e[o]*s;return a}static _translate(e,n,r,i){i||(i=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)i[s]=n+e[s],i[s+1]=r+e[s+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,n,r,i,s){switch(s){case 90:return[1-n/r,e/i];case 180:return[1-e/r,1-n/i];case 270:return[n/r,1-e/i];default:return[e/r,n/i]}}static _normalizePagePoint(e,n,r){switch(r){case 90:return[1-n,e];case 180:return[1-e,1-n];case 270:return[n,1-e];default:return[e,n]}}static createBezierPoints(e,n,r,i,s,a){return[(e+5*r)/6,(n+5*i)/6,(5*r+s)/6,(5*i+a)/6,(r+s)/2,(i+a)/2]}}Te(de,"PRECISION",1e-4);var ki,zs,Rp,Np,ka,We,Uh,Bh,E0,S0,Op,Dp,yc,T0,JA,ZA,Tn,Zg,D3,M3,L3,j3,F3,V3;const ho=class ho{constructor({x:e,y:n},r,i,s,a,o=0){R(this,Tn);R(this,ki);R(this,zs,[]);R(this,Rp);R(this,Np);R(this,ka,[]);R(this,We,new Float32Array(18));R(this,Uh);R(this,Bh);R(this,E0);R(this,S0);R(this,Op);R(this,Dp);R(this,yc,[]);S(this,ki,r),S(this,Dp,s*i),S(this,Np,a),d(this,We).set([NaN,NaN,NaN,NaN,e,n],6),S(this,Rp,o),S(this,S0,d(ho,T0)*i),S(this,E0,d(ho,ZA)*i),S(this,Op,i),d(this,yc).push(e,n)}isEmpty(){return isNaN(d(this,We)[8])}add({x:e,y:n}){var O;S(this,Uh,e),S(this,Bh,n);const[r,i,s,a]=d(this,ki);let[o,l,c,u]=d(this,We).subarray(8,12);const h=e-c,f=n-u,m=Math.hypot(h,f);if(m<d(this,E0))return!1;const g=m-d(this,S0),v=g/m,y=v*h,w=v*f;let b=o,A=l;o=c,l=u,c+=y,u+=w,(O=d(this,yc))==null||O.push(e,n);const I=-w/g,k=y/g,M=I*d(this,Dp),P=k*d(this,Dp);return d(this,We).set(d(this,We).subarray(2,8),0),d(this,We).set([c+M,u+P],4),d(this,We).set(d(this,We).subarray(14,18),12),d(this,We).set([c-M,u-P],16),isNaN(d(this,We)[6])?(d(this,ka).length===0&&(d(this,We).set([o+M,l+P],2),d(this,ka).push(NaN,NaN,NaN,NaN,(o+M-r)/s,(l+P-i)/a),d(this,We).set([o-M,l-P],14),d(this,zs).push(NaN,NaN,NaN,NaN,(o-M-r)/s,(l-P-i)/a)),d(this,We).set([b,A,o,l,c,u],6),!this.isEmpty()):(d(this,We).set([b,A,o,l,c,u],6),Math.abs(Math.atan2(A-l,b-o)-Math.atan2(w,y))<Math.PI/2?([o,l,c,u]=d(this,We).subarray(2,6),d(this,ka).push(NaN,NaN,NaN,NaN,((o+c)/2-r)/s,((l+u)/2-i)/a),[o,l,b,A]=d(this,We).subarray(14,18),d(this,zs).push(NaN,NaN,NaN,NaN,((b+o)/2-r)/s,((A+l)/2-i)/a),!0):([b,A,o,l,c,u]=d(this,We).subarray(0,6),d(this,ka).push(((b+5*o)/6-r)/s,((A+5*l)/6-i)/a,((5*o+c)/6-r)/s,((5*l+u)/6-i)/a,((o+c)/2-r)/s,((l+u)/2-i)/a),[c,u,o,l,b,A]=d(this,We).subarray(12,18),d(this,zs).push(((b+5*o)/6-r)/s,((A+5*l)/6-i)/a,((5*o+c)/6-r)/s,((5*l+u)/6-i)/a,((o+c)/2-r)/s,((l+u)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=d(this,ka),n=d(this,zs);if(isNaN(d(this,We)[6])&&!this.isEmpty())return N(this,Tn,D3).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);N(this,Tn,L3).call(this,r);for(let i=n.length-6;i>=6;i-=6)isNaN(n[i])?r.push(`L${n[i+4]} ${n[i+5]}`):r.push(`C${n[i]} ${n[i+1]} ${n[i+2]} ${n[i+3]} ${n[i+4]} ${n[i+5]}`);return N(this,Tn,M3).call(this,r),r.join(" ")}newFreeDrawOutline(e,n,r,i,s,a){return new U3(e,n,r,i,s,a)}getOutlines(){var h;const e=d(this,ka),n=d(this,zs),r=d(this,We),[i,s,a,o]=d(this,ki),l=new Float32Array((((h=d(this,yc))==null?void 0:h.length)??0)+2);for(let f=0,m=l.length-2;f<m;f+=2)l[f]=(d(this,yc)[f]-i)/a,l[f+1]=(d(this,yc)[f+1]-s)/o;if(l[l.length-2]=(d(this,Uh)-i)/a,l[l.length-1]=(d(this,Bh)-s)/o,isNaN(r[6])&&!this.isEmpty())return N(this,Tn,j3).call(this,l);const c=new Float32Array(d(this,ka).length+24+d(this,zs).length);let u=e.length;for(let f=0;f<u;f+=2){if(isNaN(e[f])){c[f]=c[f+1]=NaN;continue}c[f]=e[f],c[f+1]=e[f+1]}u=N(this,Tn,V3).call(this,c,u);for(let f=n.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(n[f+m])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=n[f+m],c[u+1]=n[f+m+1],u+=2}return N(this,Tn,F3).call(this,c,u),this.newFreeDrawOutline(c,l,d(this,ki),d(this,Op),d(this,Rp),d(this,Np))}};ki=new WeakMap,zs=new WeakMap,Rp=new WeakMap,Np=new WeakMap,ka=new WeakMap,We=new WeakMap,Uh=new WeakMap,Bh=new WeakMap,E0=new WeakMap,S0=new WeakMap,Op=new WeakMap,Dp=new WeakMap,yc=new WeakMap,T0=new WeakMap,JA=new WeakMap,ZA=new WeakMap,Tn=new WeakSet,Zg=function(){const e=d(this,We).subarray(4,6),n=d(this,We).subarray(16,18),[r,i,s,a]=d(this,ki);return[(d(this,Uh)+(e[0]-n[0])/2-r)/s,(d(this,Bh)+(e[1]-n[1])/2-i)/a,(d(this,Uh)+(n[0]-e[0])/2-r)/s,(d(this,Bh)+(n[1]-e[1])/2-i)/a]},D3=function(){const[e,n,r,i]=d(this,ki),[s,a,o,l]=N(this,Tn,Zg).call(this);return`M${(d(this,We)[2]-e)/r} ${(d(this,We)[3]-n)/i} L${(d(this,We)[4]-e)/r} ${(d(this,We)[5]-n)/i} L${s} ${a} L${o} ${l} L${(d(this,We)[16]-e)/r} ${(d(this,We)[17]-n)/i} L${(d(this,We)[14]-e)/r} ${(d(this,We)[15]-n)/i} Z`},M3=function(e){const n=d(this,zs);e.push(`L${n[4]} ${n[5]} Z`)},L3=function(e){const[n,r,i,s]=d(this,ki),a=d(this,We).subarray(4,6),o=d(this,We).subarray(16,18),[l,c,u,h]=N(this,Tn,Zg).call(this);e.push(`L${(a[0]-n)/i} ${(a[1]-r)/s} L${l} ${c} L${u} ${h} L${(o[0]-n)/i} ${(o[1]-r)/s}`)},j3=function(e){const n=d(this,We),[r,i,s,a]=d(this,ki),[o,l,c,u]=N(this,Tn,Zg).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(n[2]-r)/s,(n[3]-i)/a,NaN,NaN,NaN,NaN,(n[4]-r)/s,(n[5]-i)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(n[16]-r)/s,(n[17]-i)/a,NaN,NaN,NaN,NaN,(n[14]-r)/s,(n[15]-i)/a],0),this.newFreeDrawOutline(h,e,d(this,ki),d(this,Op),d(this,Rp),d(this,Np))},F3=function(e,n){const r=d(this,zs);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],n),n+=6},V3=function(e,n){const r=d(this,We).subarray(4,6),i=d(this,We).subarray(16,18),[s,a,o,l]=d(this,ki),[c,u,h,f]=N(this,Tn,Zg).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-s)/o,(r[1]-a)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/l],n),n+=24},R(ho,T0,8),R(ho,JA,2),R(ho,ZA,d(ho,T0)+d(ho,JA));let Gx=ho;var Mp,$h,Oo,P0,Ri,I0,rn,eE,B3;class U3 extends de{constructor(n,r,i,s,a,o){super();R(this,eE);R(this,Mp);R(this,$h,new Float32Array(4));R(this,Oo);R(this,P0);R(this,Ri);R(this,I0);R(this,rn);S(this,rn,n),S(this,Ri,r),S(this,Mp,i),S(this,I0,s),S(this,Oo,a),S(this,P0,o),this.lastPoint=[NaN,NaN],N(this,eE,B3).call(this,o);const[l,c,u,h]=d(this,$h);for(let f=0,m=n.length;f<m;f+=2)n[f]=(n[f]-l)/u,n[f+1]=(n[f+1]-c)/h;for(let f=0,m=r.length;f<m;f+=2)r[f]=(r[f]-l)/u,r[f+1]=(r[f+1]-c)/h}toSVGPath(){const n=[`M${d(this,rn)[4]} ${d(this,rn)[5]}`];for(let r=6,i=d(this,rn).length;r<i;r+=6){if(isNaN(d(this,rn)[r])){n.push(`L${d(this,rn)[r+4]} ${d(this,rn)[r+5]}`);continue}n.push(`C${d(this,rn)[r]} ${d(this,rn)[r+1]} ${d(this,rn)[r+2]} ${d(this,rn)[r+3]} ${d(this,rn)[r+4]} ${d(this,rn)[r+5]}`)}return n.push("Z"),n.join(" ")}serialize([n,r,i,s],a){const o=i-n,l=s-r;let c,u;switch(a){case 0:c=de._rescale(d(this,rn),n,s,o,-l),u=de._rescale(d(this,Ri),n,s,o,-l);break;case 90:c=de._rescaleAndSwap(d(this,rn),n,r,o,l),u=de._rescaleAndSwap(d(this,Ri),n,r,o,l);break;case 180:c=de._rescale(d(this,rn),i,r,-o,l),u=de._rescale(d(this,Ri),i,r,-o,l);break;case 270:c=de._rescaleAndSwap(d(this,rn),i,s,-o,-l),u=de._rescaleAndSwap(d(this,Ri),i,s,-o,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return d(this,$h)}newOutliner(n,r,i,s,a,o=0){return new Gx(n,r,i,s,a,o)}getNewOutline(n,r){const[i,s,a,o]=d(this,$h),[l,c,u,h]=d(this,Mp),f=a*u,m=o*h,g=i*u+l,v=s*h+c,y=this.newOutliner({x:d(this,Ri)[0]*f+g,y:d(this,Ri)[1]*m+v},d(this,Mp),d(this,I0),n,d(this,P0),r??d(this,Oo));for(let w=2;w<d(this,Ri).length;w+=2)y.add({x:d(this,Ri)[w]*f+g,y:d(this,Ri)[w+1]*m+v});return y.getOutlines()}}Mp=new WeakMap,$h=new WeakMap,Oo=new WeakMap,P0=new WeakMap,Ri=new WeakMap,I0=new WeakMap,rn=new WeakMap,eE=new WeakSet,B3=function(n){const r=d(this,rn);let i=r[4],s=r[5],a=i,o=s,l=i,c=s,u=i,h=s;const f=n?Math.max:Math.min;for(let g=6,v=r.length;g<v;g+=6){if(isNaN(r[g]))a=Math.min(a,r[g+4]),o=Math.min(o,r[g+5]),l=Math.max(l,r[g+4]),c=Math.max(c,r[g+5]),h<r[g+5]?(u=r[g+4],h=r[g+5]):h===r[g+5]&&(u=f(u,r[g+4]));else{const y=_e.bezierBoundingBox(i,s,...r.slice(g,g+6));a=Math.min(a,y[0]),o=Math.min(o,y[1]),l=Math.max(l,y[2]),c=Math.max(c,y[3]),h<y[3]?(u=y[2],h=y[3]):h===y[3]&&(u=f(u,y[2]))}i=r[g+4],s=r[g+5]}const m=d(this,$h);m[0]=a-d(this,Oo),m[1]=o-d(this,Oo),m[2]=l-a+2*d(this,Oo),m[3]=c-o+2*d(this,Oo),this.lastPoint=[u,h]};var C0,k0,wc,Hs,Qr,$3,Fb,z3,H3,UI;class VI{constructor(e,n=0,r=0,i=!0){R(this,Qr);R(this,C0);R(this,k0);R(this,wc,[]);R(this,Hs,[]);let s=1/0,a=-1/0,o=1/0,l=-1/0;const c=10**-4;for(const{x:y,y:w,width:b,height:A}of e){const I=Math.floor((y-n)/c)*c,k=Math.ceil((y+b+n)/c)*c,M=Math.floor((w-n)/c)*c,P=Math.ceil((w+A+n)/c)*c,C=[I,M,P,!0],O=[k,M,P,!1];d(this,wc).push(C,O),s=Math.min(s,I),a=Math.max(a,k),o=Math.min(o,M),l=Math.max(l,P)}const u=a-s+2*r,h=l-o+2*r,f=s-r,m=o-r,g=d(this,wc).at(i?-1:-2),v=[g[0],g[2]];for(const y of d(this,wc)){const[w,b,A]=y;y[0]=(w-f)/u,y[1]=(b-m)/h,y[2]=(A-m)/h}S(this,C0,new Float32Array([f,m,u,h])),S(this,k0,v)}getOutlines(){d(this,wc).sort((n,r)=>n[0]-r[0]||n[1]-r[1]||n[2]-r[2]);const e=[];for(const n of d(this,wc))n[3]?(e.push(...N(this,Qr,UI).call(this,n)),N(this,Qr,z3).call(this,n)):(N(this,Qr,H3).call(this,n),e.push(...N(this,Qr,UI).call(this,n)));return N(this,Qr,$3).call(this,e)}}C0=new WeakMap,k0=new WeakMap,wc=new WeakMap,Hs=new WeakMap,Qr=new WeakSet,$3=function(e){const n=[],r=new Set;for(const a of e){const[o,l,c]=a;n.push([o,l,a],[o,c,a])}n.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=n.length;a<o;a+=2){const l=n[a][2],c=n[a+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}const i=[];let s;for(;r.size>0;){const a=r.values().next().value;let[o,l,c,u,h]=a;r.delete(a);let f=o,m=l;for(s=[o,c],i.push(s);;){let g;if(r.has(u))g=u;else if(r.has(h))g=h;else break;r.delete(g),[o,l,c,u,h]=g,f!==o&&(s.push(f,m,o,m===l?l:c),f=o),m=m===l?c:l}s.push(f,m)}return new eie(i,d(this,C0),d(this,k0))},Fb=function(e){const n=d(this,Hs);let r=0,i=n.length-1;for(;r<=i;){const s=r+i>>1,a=n[s][0];if(a===e)return s;a<e?r=s+1:i=s-1}return i+1},z3=function([,e,n]){const r=N(this,Qr,Fb).call(this,e);d(this,Hs).splice(r,0,[e,n])},H3=function([,e,n]){const r=N(this,Qr,Fb).call(this,e);for(let i=r;i<d(this,Hs).length;i++){const[s,a]=d(this,Hs)[i];if(s!==e)break;if(s===e&&a===n){d(this,Hs).splice(i,1);return}}for(let i=r-1;i>=0;i--){const[s,a]=d(this,Hs)[i];if(s!==e)break;if(s===e&&a===n){d(this,Hs).splice(i,1);return}}},UI=function(e){const[n,r,i]=e,s=[[n,r,i]],a=N(this,Qr,Fb).call(this,i);for(let o=0;o<a;o++){const[l,c]=d(this,Hs)[o];for(let u=0,h=s.length;u<h;u++){const[,f,m]=s[u];if(!(c<=f||m<=l)){if(f>=l){if(m>c)s[u][1]=c;else{if(h===1)return[];s.splice(u,1),u--,h--}continue}s[u][2]=l,m>c&&s.push([n,c,m])}}}return s};var R0,Lp;class eie extends de{constructor(n,r,i){super();R(this,R0);R(this,Lp);S(this,Lp,n),S(this,R0,r),this.lastPoint=i}toSVGPath(){const n=[];for(const r of d(this,Lp)){let[i,s]=r;n.push(`M${i} ${s}`);for(let a=2;a<r.length;a+=2){const o=r[a],l=r[a+1];o===i?(n.push(`V${l}`),s=l):l===s&&(n.push(`H${o}`),i=o)}n.push("Z")}return n.join(" ")}serialize([n,r,i,s],a){const o=[],l=i-n,c=s-r;for(const u of d(this,Lp)){const h=new Array(u.length);for(let f=0;f<u.length;f+=2)h[f]=n+u[f]*l,h[f+1]=s-u[f+1]*c;o.push(h)}return o}get box(){return d(this,R0)}get classNamesForOutlining(){return["highlightOutline"]}}R0=new WeakMap,Lp=new WeakMap;class BI extends Gx{newFreeDrawOutline(e,n,r,i,s,a){return new tie(e,n,r,i,s,a)}}class tie extends U3{newOutliner(e,n,r,i,s,a=0){return new BI(e,n,r,i,s,a)}}var Ws,zh,jp,bn,N0,Fp,O0,D0,_c,Gs,Vp,M0,yt,$I,zI,HI,Ru,W3,Fl;const oi=class oi{constructor({editor:e=null,uiManager:n=null}){R(this,yt);R(this,Ws,null);R(this,zh,null);R(this,jp);R(this,bn,null);R(this,N0,!1);R(this,Fp,!1);R(this,O0,null);R(this,D0);R(this,_c,null);R(this,Gs,null);R(this,Vp);var r;e?(S(this,Fp,!1),S(this,Vp,Je.HIGHLIGHT_COLOR),S(this,O0,e)):(S(this,Fp,!0),S(this,Vp,Je.HIGHLIGHT_DEFAULT_COLOR)),S(this,Gs,(e==null?void 0:e._uiManager)||n),S(this,D0,d(this,Gs)._eventBus),S(this,jp,(e==null?void 0:e.color)||((r=d(this,Gs))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),d(oi,M0)||S(oi,M0,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ge(this,"_keyboardManager",new cw([[["Escape","mac+Escape"],oi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],oi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],oi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],oi.prototype._moveToPrevious],[["Home","mac+Home"],oi.prototype._moveToBeginning],[["End","mac+End"],oi.prototype._moveToEnd]]))}renderButton(){const e=S(this,Ws,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const n=d(this,Gs)._signal;e.addEventListener("click",N(this,yt,Ru).bind(this),{signal:n}),e.addEventListener("keydown",N(this,yt,HI).bind(this),{signal:n});const r=S(this,zh,document.createElement("span"));return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=d(this,jp),e.append(r),e}renderMainDropdown(){const e=S(this,bn,N(this,yt,$I).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===d(this,Ws)){N(this,yt,Ru).call(this,e);return}const n=e.target.getAttribute("data-color");n&&N(this,yt,zI).call(this,n,e)}_moveToNext(e){var n,r;if(!d(this,yt,Fl)){N(this,yt,Ru).call(this,e);return}if(e.target===d(this,Ws)){(n=d(this,bn).firstChild)==null||n.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var n,r;if(e.target===((n=d(this,bn))==null?void 0:n.firstChild)||e.target===d(this,Ws)){d(this,yt,Fl)&&this._hideDropdownFromKeyboard();return}d(this,yt,Fl)||N(this,yt,Ru).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var n;if(!d(this,yt,Fl)){N(this,yt,Ru).call(this,e);return}(n=d(this,bn).firstChild)==null||n.focus()}_moveToEnd(e){var n;if(!d(this,yt,Fl)){N(this,yt,Ru).call(this,e);return}(n=d(this,bn).lastChild)==null||n.focus()}hideDropdown(){var e,n;(e=d(this,bn))==null||e.classList.add("hidden"),(n=d(this,_c))==null||n.abort(),S(this,_c,null)}_hideDropdownFromKeyboard(){var e;if(!d(this,Fp)){if(!d(this,yt,Fl)){(e=d(this,O0))==null||e.unselect();return}this.hideDropdown(),d(this,Ws).focus({preventScroll:!0,focusVisible:d(this,N0)})}}updateColor(e){if(d(this,zh)&&(d(this,zh).style.backgroundColor=e),!d(this,bn))return;const n=d(this,Gs).highlightColors.values();for(const r of d(this,bn).children)r.setAttribute("aria-selected",n.next().value===e)}destroy(){var e,n;(e=d(this,Ws))==null||e.remove(),S(this,Ws,null),S(this,zh,null),(n=d(this,bn))==null||n.remove(),S(this,bn,null)}};Ws=new WeakMap,zh=new WeakMap,jp=new WeakMap,bn=new WeakMap,N0=new WeakMap,Fp=new WeakMap,O0=new WeakMap,D0=new WeakMap,_c=new WeakMap,Gs=new WeakMap,Vp=new WeakMap,M0=new WeakMap,yt=new WeakSet,$I=function(){const e=document.createElement("div"),n=d(this,Gs)._signal;e.addEventListener("contextmenu",oa,{signal:n}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,i]of d(this,Gs).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",d(oi,M0)[r]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=i,s.setAttribute("aria-selected",i===d(this,jp)),s.addEventListener("click",N(this,yt,zI).bind(this,i),{signal:n}),e.append(s)}return e.addEventListener("keydown",N(this,yt,HI).bind(this),{signal:n}),e},zI=function(e,n){n.stopPropagation(),d(this,D0).dispatch("switchannotationeditorparams",{source:this,type:d(this,Vp),value:e})},HI=function(e){oi._keyboardManager.exec(this,e)},Ru=function(e){if(d(this,yt,Fl)){this.hideDropdown();return}if(S(this,N0,e.detail===0),d(this,_c)||(S(this,_c,new AbortController),window.addEventListener("pointerdown",N(this,yt,W3).bind(this),{signal:d(this,Gs).combinedSignal(d(this,_c))})),d(this,bn)){d(this,bn).classList.remove("hidden");return}const n=S(this,bn,N(this,yt,$I).call(this));d(this,Ws).append(n)},W3=function(e){var n;(n=d(this,bn))!=null&&n.contains(e.target)||this.hideDropdown()},Fl=function(){return d(this,bn)&&!d(this,bn).classList.contains("hidden")},R(oi,M0,null);let qx=oi;var Up,L0,Do,Hh,Bp,ui,j0,F0,Wh,cs,Ni,Qn,$p,Mo,xr,zp,us,V0,Ve,WI,Vb,G3,q3,K3,GI,Nu,ys,ff,X3,Ub,ev,Y3,Q3,J3,Z3,e6;const lt=class lt extends $t{constructor(n){super({...n,name:"highlightEditor"});R(this,Ve);R(this,Up,null);R(this,L0,0);R(this,Do);R(this,Hh,null);R(this,Bp,null);R(this,ui,null);R(this,j0,null);R(this,F0,0);R(this,Wh,null);R(this,cs,null);R(this,Ni,null);R(this,Qn,!1);R(this,$p,null);R(this,Mo);R(this,xr,null);R(this,zp,"");R(this,us);R(this,V0,"");this.color=n.color||lt._defaultColor,S(this,us,n.thickness||lt._defaultThickness),S(this,Mo,n.opacity||lt._defaultOpacity),S(this,Do,n.boxes||null),S(this,V0,n.methodOfCreation||""),S(this,zp,n.text||""),this._isDraggable=!1,n.highlightId>-1?(S(this,Qn,!0),N(this,Ve,Vb).call(this,n),N(this,Ve,Nu).call(this)):d(this,Do)&&(S(this,Up,n.anchorNode),S(this,L0,n.anchorOffset),S(this,j0,n.focusNode),S(this,F0,n.focusOffset),N(this,Ve,WI).call(this),N(this,Ve,Nu).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const n=lt.prototype;return Ge(this,"_keyboardManager",new cw([[["ArrowLeft","mac+ArrowLeft"],n._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],n._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],n._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],n._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,Qn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:d(this,us),methodOfCreation:d(this,V0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(n){return{numberOfColors:n.get("color").size}}static initialize(n,r){var i;$t.initialize(n,r),lt._defaultColor||(lt._defaultColor=((i=r.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(n,r){switch(n){case Je.HIGHLIGHT_DEFAULT_COLOR:lt._defaultColor=r;break;case Je.HIGHLIGHT_THICKNESS:lt._defaultThickness=r;break}}translateInPage(n,r){}get toolbarPosition(){return d(this,$p)}updateParams(n,r){switch(n){case Je.HIGHLIGHT_COLOR:N(this,Ve,G3).call(this,r);break;case Je.HIGHLIGHT_THICKNESS:N(this,Ve,q3).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Je.HIGHLIGHT_DEFAULT_COLOR,lt._defaultColor],[Je.HIGHLIGHT_THICKNESS,lt._defaultThickness]]}get propertiesToUpdate(){return[[Je.HIGHLIGHT_COLOR,this.color||lt._defaultColor],[Je.HIGHLIGHT_THICKNESS,d(this,us)||lt._defaultThickness],[Je.HIGHLIGHT_FREE,d(this,Qn)]]}async addEditToolbar(){const n=await super.addEditToolbar();return n?(this._uiManager.highlightColors&&(S(this,Bp,new qx({editor:this})),n.addColorPicker(d(this,Bp))),n):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(N(this,Ve,ev).call(this))}getBaseTranslation(){return[0,0]}getRect(n,r){return super.getRect(n,r,N(this,Ve,ev).call(this))}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),n&&this.div.focus()}remove(){N(this,Ve,GI).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(N(this,Ve,Nu).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var i;let r=!1;this.parent&&!n?N(this,Ve,GI).call(this):n&&(N(this,Ve,Nu).call(this,n),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(n),this.show(this._isVisible),r&&this.select()}rotate(n){var s,a,o;const{drawLayer:r}=this.parent;let i;d(this,Qn)?(n=(n-this.rotation+360)%360,i=N(s=lt,ys,ff).call(s,d(this,cs).box,n)):i=N(a=lt,ys,ff).call(a,[this.x,this.y,this.width,this.height],n),r.updateProperties(d(this,Ni),{bbox:i,root:{"data-main-rotation":n}}),r.updateProperties(d(this,xr),{bbox:N(o=lt,ys,ff).call(o,d(this,ui).box,n),root:{"data-main-rotation":n}})}render(){if(this.div)return this.div;const n=super.render();d(this,zp)&&(n.setAttribute("aria-label",d(this,zp)),n.setAttribute("role","mark")),d(this,Qn)?n.classList.add("free"):this.div.addEventListener("keydown",N(this,Ve,X3).bind(this),{signal:this._uiManager._signal});const r=S(this,Wh,document.createElement("div"));n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=d(this,Hh);const[i,s]=this.parentDimensions;return this.setDims(this.width*i,this.height*s),zx(this,d(this,Wh),["pointerover","pointerleave"]),this.enableEditing(),n}pointerover(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(d(this,xr),{rootClass:{hovered:!0}})}pointerleave(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(d(this,xr),{rootClass:{hovered:!1}})}_moveCaret(n){switch(this.parent.unselect(this),n){case 0:case 2:N(this,Ve,Ub).call(this,!0);break;case 1:case 3:N(this,Ve,Ub).call(this,!1);break}}select(){var n;super.select(),d(this,xr)&&((n=this.parent)==null||n.drawLayer.updateProperties(d(this,xr),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var n;super.unselect(),d(this,xr)&&((n=this.parent)==null||n.drawLayer.updateProperties(d(this,xr),{rootClass:{selected:!1}}),d(this,Qn)||N(this,Ve,Ub).call(this,!1))}get _mustFixPosition(){return!d(this,Qn)}show(n=this._isVisible){super.show(n),this.parent&&(this.parent.drawLayer.updateProperties(d(this,Ni),{rootClass:{hidden:!n}}),this.parent.drawLayer.updateProperties(d(this,xr),{rootClass:{hidden:!n}}))}static startHighlighting(n,r,{target:i,x:s,y:a}){const{x:o,y:l,width:c,height:u}=i.getBoundingClientRect(),h=new AbortController,f=n.combinedSignal(h),m=g=>{h.abort(),N(this,ys,Z3).call(this,n,g)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",Ui,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",oa,{signal:f}),i.addEventListener("pointermove",N(this,ys,J3).bind(this,n),{signal:f}),this._freeHighlight=new BI({x:s,y:a},[o,l,c,u],n.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(n,r,i){var v,y,w,b;let s=null;if(n instanceof T3){const{data:{quadPoints:A,rect:I,rotation:k,id:M,color:P,opacity:C,popupRef:O},parent:{page:{pageNumber:j}}}=n;s=n={annotationType:Be.HIGHLIGHT,color:Array.from(P),opacity:C,quadPoints:A,boxes:null,pageIndex:j-1,rect:I.slice(0),rotation:k,id:M,deleted:!1,popupRef:O}}else if(n instanceof dN){const{data:{inkLists:A,rect:I,rotation:k,id:M,color:P,borderStyle:{rawWidth:C},popupRef:O},parent:{page:{pageNumber:j}}}=n;s=n={annotationType:Be.HIGHLIGHT,color:Array.from(P),thickness:C,inkLists:A,boxes:null,pageIndex:j-1,rect:I.slice(0),rotation:k,id:M,deleted:!1,popupRef:O}}const{color:a,quadPoints:o,inkLists:l,opacity:c}=n,u=await super.deserialize(n,r,i);u.color=_e.makeHexColor(...a),S(u,Mo,c||1),l&&S(u,us,n.thickness),u.annotationElementId=n.id||null,u._initialData=s;const[h,f]=u.pageDimensions,[m,g]=u.pageTranslation;if(o){const A=S(u,Do,[]);for(let I=0;I<o.length;I+=8)A.push({x:(o[I]-m)/h,y:1-(o[I+1]-g)/f,width:(o[I+2]-o[I])/h,height:(o[I+1]-o[I+5])/f});N(v=u,Ve,WI).call(v),N(y=u,Ve,Nu).call(y),u.rotate(u.rotation)}else if(l){S(u,Qn,!0);const A=l[0],I={x:A[0]-m,y:f-(A[1]-g)},k=new BI(I,[0,0,h,f],1,d(u,us)/2,!0,.001);for(let C=0,O=A.length;C<O;C+=2)I.x=A[C]-m,I.y=f-(A[C+1]-g),k.add(I);const{id:M,clipPathId:P}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:k.toSVGPath()}},!0,!0);N(w=u,Ve,Vb).call(w,{highlightOutlines:k.getOutlines(),highlightId:M,clipPathId:P}),N(b=u,Ve,Nu).call(b)}return u}serialize(n=!1){if(this.isEmpty()||n)return null;if(this.deleted)return this.serializeDeleted();const r=this.getRect(0,0),i=$t._colorManager.convert(this.color),s={annotationType:Be.HIGHLIGHT,color:i,opacity:d(this,Mo),thickness:d(this,us),quadPoints:N(this,Ve,Y3).call(this),outlines:N(this,Ve,Q3).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:N(this,Ve,ev).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!N(this,Ve,e6).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Up=new WeakMap,L0=new WeakMap,Do=new WeakMap,Hh=new WeakMap,Bp=new WeakMap,ui=new WeakMap,j0=new WeakMap,F0=new WeakMap,Wh=new WeakMap,cs=new WeakMap,Ni=new WeakMap,Qn=new WeakMap,$p=new WeakMap,Mo=new WeakMap,xr=new WeakMap,zp=new WeakMap,us=new WeakMap,V0=new WeakMap,Ve=new WeakSet,WI=function(){const n=new VI(d(this,Do),.001);S(this,cs,n.getOutlines()),[this.x,this.y,this.width,this.height]=d(this,cs).box;const r=new VI(d(this,Do),.0025,.001,this._uiManager.direction==="ltr");S(this,ui,r.getOutlines());const{lastPoint:i}=d(this,ui);S(this,$p,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Vb=function({highlightOutlines:n,highlightId:r,clipPathId:i}){var h,f;if(S(this,cs,n),S(this,ui,n.getNewOutline(d(this,us)/2+1.5,.0025)),r>=0)S(this,Ni,r),S(this,Hh,i),this.parent.drawLayer.finalizeDraw(r,{bbox:n.box,path:{d:n.toSVGPath()}}),S(this,xr,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:d(this,ui).box,path:{d:d(this,ui).toSVGPath()}},!0));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(d(this,Ni),{bbox:N(h=lt,ys,ff).call(h,d(this,cs).box,(m-this.rotation+360)%360),path:{d:n.toSVGPath()}}),this.parent.drawLayer.updateProperties(d(this,xr),{bbox:N(f=lt,ys,ff).call(f,d(this,ui).box,m),path:{d:d(this,ui).toSVGPath()}})}const[a,o,l,c]=n.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=c;break;case 90:{const[m,g]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*g/m,this.height=c*m/g;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=c;break;case 270:{const[m,g]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*g/m,this.height=c*m/g;break}}const{lastPoint:u}=d(this,ui);S(this,$p,[(u[0]-a)/l,(u[1]-o)/c])},G3=function(n){const r=(a,o)=>{var l,c;this.color=a,S(this,Mo,o),(l=this.parent)==null||l.drawLayer.updateProperties(d(this,Ni),{root:{fill:a,"fill-opacity":o}}),(c=d(this,Bp))==null||c.updateColor(a)},i=this.color,s=d(this,Mo);this.addCommands({cmd:r.bind(this,n,lt._defaultOpacity),undo:r.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Je.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(n)},!0)},q3=function(n){const r=d(this,us),i=s=>{S(this,us,s),N(this,Ve,K3).call(this,s)};this.addCommands({cmd:i.bind(this,n),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Je.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:n},!0)},K3=function(n){if(!d(this,Qn))return;N(this,Ve,Vb).call(this,{highlightOutlines:d(this,cs).getNewOutline(n/2)}),this.fixAndSetPosition();const[r,i]=this.parentDimensions;this.setDims(this.width*r,this.height*i)},GI=function(){d(this,Ni)===null||!this.parent||(this.parent.drawLayer.remove(d(this,Ni)),S(this,Ni,null),this.parent.drawLayer.remove(d(this,xr)),S(this,xr,null))},Nu=function(n=this.parent){d(this,Ni)===null&&({id:Lr(this,Ni)._,clipPathId:Lr(this,Hh)._}=n.drawLayer.draw({bbox:d(this,cs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":d(this,Mo)},rootClass:{highlight:!0,free:d(this,Qn)},path:{d:d(this,cs).toSVGPath()}},!1,!0),S(this,xr,n.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:d(this,Qn)},bbox:d(this,ui).box,path:{d:d(this,ui).toSVGPath()}},d(this,Qn))),d(this,Wh)&&(d(this,Wh).style.clipPath=d(this,Hh)))},ys=new WeakSet,ff=function([n,r,i,s],a){switch(a){case 90:return[1-r-s,n,s,i];case 180:return[1-n-i,1-r-s,i,s];case 270:return[r,1-n-i,s,i]}return[n,r,i,s]},X3=function(n){lt._keyboardManager.exec(this,n)},Ub=function(n){if(!d(this,Up))return;const r=window.getSelection();n?r.setPosition(d(this,Up),d(this,L0)):r.setPosition(d(this,j0),d(this,F0))},ev=function(){return d(this,Qn)?this.rotation:0},Y3=function(){if(d(this,Qn))return null;const[n,r]=this.pageDimensions,[i,s]=this.pageTranslation,a=d(this,Do),o=new Float32Array(a.length*8);let l=0;for(const{x:c,y:u,width:h,height:f}of a){const m=c*n+i,g=(1-u)*r+s;o[l]=o[l+4]=m,o[l+1]=o[l+3]=g,o[l+2]=o[l+6]=m+h*n,o[l+5]=o[l+7]=g-f*r,l+=8}return o},Q3=function(n){return d(this,cs).serialize(n,N(this,Ve,ev).call(this))},J3=function(n,r){this._freeHighlight.add(r)&&n.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Z3=function(n,r){this._freeHighlight.isEmpty()?n.drawLayer.remove(this._freeHighlightId):n.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},e6=function(n){const{color:r}=this._initialData;return n.color.some((i,s)=>i!==r[s])},R(lt,ys),Te(lt,"_defaultColor",null),Te(lt,"_defaultOpacity",1),Te(lt,"_defaultThickness",12),Te(lt,"_type","highlight"),Te(lt,"_editorType",Be.HIGHLIGHT),Te(lt,"_freeHighlightId",-1),Te(lt,"_freeHighlight",null),Te(lt,"_freeHighlightClipId","");let Kx=lt;var Gh;class nie{constructor(){R(this,Gh,Object.create(null))}updateProperty(e,n){this[e]=n,this.updateSVGProperty(e,n)}updateProperties(e){if(e)for(const[n,r]of Object.entries(e))this.updateProperty(n,r)}updateSVGProperty(e,n){d(this,Gh)[e]=n}toSVGProperties(){const e=d(this,Gh);return S(this,Gh,Object.create(null)),{root:e}}reset(){S(this,Gh,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){bt("Not implemented")}}Gh=new WeakMap;var Oi,Hp,Vn,qh,Kh,bc,xc,Ac,Xh,rt,KI,XI,YI,tv,t6,Bb,nv,pf;const ge=class ge extends $t{constructor(n){super(n);R(this,rt);R(this,Oi,null);R(this,Hp);Te(this,"_drawId",null);S(this,Hp,n.mustBeCommitted||!1),n.drawOutlines&&(N(this,rt,KI).call(this,n),N(this,rt,tv).call(this))}static _mergeSVGProperties(n,r){const i=new Set(Object.keys(n));for(const[s,a]of Object.entries(r))i.has(s)?Object.assign(n[s],a):n[s]=a;return n}static getDefaultDrawingOptions(n){bt("Not implemented")}static get typesMap(){bt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(n,r){const i=this.typesMap.get(n);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(d(ge,Vn).updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(n,r){const i=this.constructor.typesMap.get(n);i&&this._updateProperty(n,i,r)}static get defaultPropertiesToUpdate(){const n=[],r=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)n.push([i,r[s]]);return n}get propertiesToUpdate(){const n=[],{_drawingOptions:r}=this;for(const[i,s]of this.constructor.typesMap)n.push([i,r[s]]);return n}_updateProperty(n,r,i){const s=this._drawingOptions,a=s[r],o=l=>{var u;s.updateProperty(r,l);const c=d(this,Oi).updateProperty(r,l);c&&N(this,rt,nv).call(this,c),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,ge._mergeSVGProperties(d(this,Oi).getPathResizingSVGProperties(N(this,rt,Bb).call(this)),{bbox:N(this,rt,pf).call(this)}))}_onResized(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,ge._mergeSVGProperties(d(this,Oi).getPathResizedSVGProperties(N(this,rt,Bb).call(this)),{bbox:N(this,rt,pf).call(this)}))}_onTranslating(n,r){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:N(this,rt,pf).call(this,n,r)})}_onTranslated(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,ge._mergeSVGProperties(d(this,Oi).getPathTranslatedSVGProperties(N(this,rt,Bb).call(this),this.parentDimensions),{bbox:N(this,rt,pf).call(this)}))}_onStartDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,d(this,Hp)&&(S(this,Hp,!1),this.commit(),this.parent.setSelected(this),n&&this.isOnScreen&&this.div.focus())}remove(){N(this,rt,YI).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(N(this,rt,tv).call(this),N(this,rt,nv).call(this,d(this,Oi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var i;let r=!1;this.parent&&!n?(this._uiManager.removeShouldRescale(this),N(this,rt,YI).call(this)):n&&(this._uiManager.addShouldRescale(this),N(this,rt,tv).call(this,n),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(n),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ge._mergeSVGProperties({bbox:N(this,rt,pf).call(this)},d(this,Oi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&N(this,rt,nv).call(this,d(this,Oi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const n=super.render();n.classList.add("draw");const r=document.createElement("div");n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[i,s]=this.parentDimensions;return this.setDims(this.width*i,this.height*s),this._uiManager.addShouldRescale(this),this.disableEditing(),n}static createDrawerInstance(n,r,i,s,a){bt("Not implemented")}static startDrawing(n,r,i,s){var y;const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:u}=s;if(d(ge,xc)&&d(ge,xc)!==u)return;const{viewport:{rotation:h}}=n,{width:f,height:m}=a.getBoundingClientRect(),g=S(ge,qh,new AbortController),v=n.combinedSignal(g);if(d(ge,bc)||S(ge,bc,c),d(ge,xc)??S(ge,xc,u),window.addEventListener("pointerup",w=>{var b;d(ge,bc)===w.pointerId?this._endDraw(w):(b=d(ge,Ac))==null||b.delete(w.pointerId)},{signal:v}),window.addEventListener("pointercancel",w=>{var b;d(ge,bc)===w.pointerId?this._currentParent.endDrawingSession():(b=d(ge,Ac))==null||b.delete(w.pointerId)},{signal:v}),window.addEventListener("pointerdown",w=>{d(ge,xc)===w.pointerType&&((d(ge,Ac)||S(ge,Ac,new Set)).add(w.pointerId),d(ge,Vn).isCancellable()&&(d(ge,Vn).removeLastElement(),d(ge,Vn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",oa,{signal:v}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),a.addEventListener("touchmove",w=>{w.timeStamp===d(ge,Xh)&&Ui(w)},{signal:v}),n.toggleDrawing(),(y=r._editorUndoBar)==null||y.hide(),d(ge,Vn)){n.drawLayer.updateProperties(this._currentDrawId,d(ge,Vn).startNew(o,l,f,m,h));return}r.updateUIForDefaultProperties(this),S(ge,Vn,this.createDrawerInstance(o,l,f,m,h)),S(ge,Kh,this.getDefaultDrawingOptions()),this._currentParent=n,{id:this._currentDrawId}=n.drawLayer.draw(this._mergeSVGProperties(d(ge,Kh).toSVGProperties(),d(ge,Vn).defaultSVGProperties),!0,!1)}static _drawMove(n){var a;if(S(ge,Xh,-1),!d(ge,Vn))return;const{offsetX:r,offsetY:i,pointerId:s}=n;if(d(ge,bc)===s){if(((a=d(ge,Ac))==null?void 0:a.size)>=1){this._endDraw(n);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,d(ge,Vn).add(r,i)),S(ge,Xh,n.timeStamp),Ui(n)}}static _cleanup(n){n&&(this._currentDrawId=-1,this._currentParent=null,S(ge,Vn,null),S(ge,Kh,null),S(ge,xc,null),S(ge,Xh,NaN)),d(ge,qh)&&(d(ge,qh).abort(),S(ge,qh,null),S(ge,bc,NaN),S(ge,Ac,null))}static _endDraw(n){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),n&&r.drawLayer.updateProperties(this._currentDrawId,d(ge,Vn).end(n.offsetX,n.offsetY)),this.supportMultipleDrawings){const i=d(ge,Vn),s=this._currentDrawId,a=i.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(s,i.setLastElement(a))},undo:()=>{r.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Je.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(n){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(Je.DRAW_STEP),!d(ge,Vn).isEmpty()){const{pageDimensions:[i,s],scale:a}=r,o=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:d(ge,Vn).getOutlines(i*a,s*a,a,this._INNER_MARGIN),drawingOptions:d(ge,Kh),mustBeCommitted:!n});return this._cleanup(!0),o}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(n){}static deserializeDraw(n,r,i,s,a,o){bt("Not implemented")}static async deserialize(n,r,i){var h,f;const{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=r.viewport,c=this.deserializeDraw(o,l,s,a,this._INNER_MARGIN,n),u=await super.deserialize(n,r,i);return u.createDrawingOptions(n),N(h=u,rt,KI).call(h,{drawOutlines:c}),N(f=u,rt,tv).call(f),u.onScaleChanging(),u.rotate(),u}serializeDraw(n){const[r,i]=this.pageTranslation,[s,a]=this.pageDimensions;return d(this,Oi).serialize([r,i,s,a],n)}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Oi=new WeakMap,Hp=new WeakMap,Vn=new WeakMap,qh=new WeakMap,Kh=new WeakMap,bc=new WeakMap,xc=new WeakMap,Ac=new WeakMap,Xh=new WeakMap,rt=new WeakSet,KI=function({drawOutlines:n,drawId:r,drawingOptions:i}){S(this,Oi,n),this._drawingOptions||(this._drawingOptions=i),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,n.defaultProperties)):this._drawId=N(this,rt,XI).call(this,n,this.parent),N(this,rt,nv).call(this,n.box)},XI=function(n,r){const{id:i}=r.drawLayer.draw(ge._mergeSVGProperties(this._drawingOptions.toSVGProperties(),n.defaultSVGProperties),!1,!1);return i},YI=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},tv=function(n=this.parent){if(!(this._drawId!==null&&this.parent===n)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,n.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=N(this,rt,XI).call(this,d(this,Oi),n)}},t6=function([n,r,i,s]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[r,1-n,i*(o/a),s*(a/o)];case 180:return[1-n,1-r,i,s];case 270:return[1-r,n,i*(o/a),s*(a/o)];default:return[n,r,i,s]}},Bb=function(){const{x:n,y:r,width:i,height:s,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-r,n,i*(a/o),s*(o/a)];case 180:return[1-n,1-r,i,s];case 270:return[r,1-n,i*(a/o),s*(o/a)];default:return[n,r,i,s]}},nv=function(n){if([this.x,this.y,this.width,this.height]=N(this,rt,t6).call(this,n),this.div){this.fixAndSetPosition();const[r,i]=this.parentDimensions;this.setDims(this.width*r,this.height*i)}this._onResized()},pf=function(){const{x:n,y:r,width:i,height:s,rotation:a,parentRotation:o,parentDimensions:[l,c]}=this;switch((a*4+o)/90){case 1:return[1-r-s,n,s,i];case 2:return[1-n-i,1-r-s,i,s];case 3:return[r,1-n-i,s,i];case 4:return[n,r-i*(l/c),s*(c/l),i*(l/c)];case 5:return[1-r,n,i*(l/c),s*(c/l)];case 6:return[1-n-s*(c/l),1-r,s*(c/l),i*(l/c)];case 7:return[r-i*(l/c),1-n-s*(c/l),i*(l/c),s*(c/l)];case 8:return[n-i,r-s,i,s];case 9:return[1-r,n-i,s,i];case 10:return[1-n,1-r,i,s];case 11:return[r-s,1-n,s,i];case 12:return[n-s*(c/l),r,s*(c/l),i*(l/c)];case 13:return[1-r-i*(l/c),n-s*(c/l),i*(l/c),s*(c/l)];case 14:return[1-n,1-r-i*(l/c),s*(c/l),i*(l/c)];case 15:return[r,1-n,i*(l/c),s*(c/l)];default:return[n,r,i,s]}},Te(ge,"_currentDrawId",-1),Te(ge,"_currentParent",null),R(ge,Vn,null),R(ge,qh,null),R(ge,Kh,null),R(ge,bc,NaN),R(ge,xc,null),R(ge,Ac,null),R(ge,Xh,NaN),Te(ge,"_INNER_MARGIN",3);let qI=ge;var Ra,Un,Bn,Yh,Wp,Ur,Jn,hs,Qh,Jh,Zh,Gp,$b;class rie{constructor(e,n,r,i,s,a){R(this,Gp);R(this,Ra,new Float64Array(6));R(this,Un);R(this,Bn);R(this,Yh);R(this,Wp);R(this,Ur);R(this,Jn,"");R(this,hs,0);R(this,Qh,new Xx);R(this,Jh);R(this,Zh);S(this,Jh,r),S(this,Zh,i),S(this,Yh,s),S(this,Wp,a),[e,n]=N(this,Gp,$b).call(this,e,n);const o=S(this,Un,[NaN,NaN,NaN,NaN,e,n]);S(this,Ur,[e,n]),S(this,Bn,[{line:o,points:d(this,Ur)}]),d(this,Ra).set(o,0)}updateProperty(e,n){e==="stroke-width"&&S(this,Wp,n)}isEmpty(){return!d(this,Bn)||d(this,Bn).length===0}isCancellable(){return d(this,Ur).length<=10}add(e,n){[e,n]=N(this,Gp,$b).call(this,e,n);const[r,i,s,a]=d(this,Ra).subarray(2,6),o=e-s,l=n-a;return Math.hypot(d(this,Jh)*o,d(this,Zh)*l)<=2?null:(d(this,Ur).push(e,n),isNaN(r)?(d(this,Ra).set([s,a,e,n],2),d(this,Un).push(NaN,NaN,NaN,NaN,e,n),{path:{d:this.toSVGPath()}}):(isNaN(d(this,Ra)[0])&&d(this,Un).splice(6,6),d(this,Ra).set([r,i,s,a,e,n],0),d(this,Un).push(...de.createBezierPoints(r,i,s,a,e,n)),{path:{d:this.toSVGPath()}}))}end(e,n){const r=this.add(e,n);return r||(d(this,Ur).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,n,r,i,s){S(this,Jh,r),S(this,Zh,i),S(this,Yh,s),[e,n]=N(this,Gp,$b).call(this,e,n);const a=S(this,Un,[NaN,NaN,NaN,NaN,e,n]);S(this,Ur,[e,n]);const o=d(this,Bn).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),d(this,Bn).push({line:a,points:d(this,Ur)}),d(this,Ra).set(a,0),S(this,hs,0),this.toSVGPath(),null}getLastElement(){return d(this,Bn).at(-1)}setLastElement(e){return d(this,Bn)?(d(this,Bn).push(e),S(this,Un,e.line),S(this,Ur,e.points),S(this,hs,0),{path:{d:this.toSVGPath()}}):d(this,Qh).setLastElement(e)}removeLastElement(){if(!d(this,Bn))return d(this,Qh).removeLastElement();d(this,Bn).pop(),S(this,Jn,"");for(let e=0,n=d(this,Bn).length;e<n;e++){const{line:r,points:i}=d(this,Bn)[e];S(this,Un,r),S(this,Ur,i),S(this,hs,0),this.toSVGPath()}return{path:{d:d(this,Jn)}}}toSVGPath(){const e=de.svgRound(d(this,Un)[4]),n=de.svgRound(d(this,Un)[5]);if(d(this,Ur).length===2)return S(this,Jn,`${d(this,Jn)} M ${e} ${n} Z`),d(this,Jn);if(d(this,Ur).length<=6){const i=d(this,Jn).lastIndexOf("M");S(this,Jn,`${d(this,Jn).slice(0,i)} M ${e} ${n}`),S(this,hs,6)}if(d(this,Ur).length===4){const i=de.svgRound(d(this,Un)[10]),s=de.svgRound(d(this,Un)[11]);return S(this,Jn,`${d(this,Jn)} L ${i} ${s}`),S(this,hs,12),d(this,Jn)}const r=[];d(this,hs)===0&&(r.push(`M ${e} ${n}`),S(this,hs,6));for(let i=d(this,hs),s=d(this,Un).length;i<s;i+=6){const[a,o,l,c,u,h]=d(this,Un).slice(i,i+6).map(de.svgRound);r.push(`C${a} ${o} ${l} ${c} ${u} ${h}`)}return S(this,Jn,d(this,Jn)+r.join(" ")),S(this,hs,d(this,Un).length),d(this,Jn)}getOutlines(e,n,r,i){const s=d(this,Bn).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),d(this,Qh).build(d(this,Bn),e,n,r,d(this,Yh),d(this,Wp),i),S(this,Ra,null),S(this,Un,null),S(this,Bn,null),S(this,Jn,null),d(this,Qh)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ra=new WeakMap,Un=new WeakMap,Bn=new WeakMap,Yh=new WeakMap,Wp=new WeakMap,Ur=new WeakMap,Jn=new WeakMap,hs=new WeakMap,Qh=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,Gp=new WeakSet,$b=function(e,n){return de._normalizePoint(e,n,d(this,Jh),d(this,Zh),d(this,Yh))};var Br,U0,B0,Di,Na,Oa,qp,Kp,Xp,rr,lo,n6,r6,i6;const ZO=class ZO extends de{constructor(){super(...arguments);R(this,rr);R(this,Br);R(this,U0,0);R(this,B0);R(this,Di);R(this,Na);R(this,Oa);R(this,qp);R(this,Kp);R(this,Xp)}build(n,r,i,s,a,o,l){S(this,Na,r),S(this,Oa,i),S(this,qp,s),S(this,Kp,a),S(this,Xp,o),S(this,B0,l??0),S(this,Di,n),N(this,rr,r6).call(this)}setLastElement(n){return d(this,Di).push(n),{path:{d:this.toSVGPath()}}}removeLastElement(){return d(this,Di).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const n=[];for(const{line:r}of d(this,Di)){if(n.push(`M${de.svgRound(r[4])} ${de.svgRound(r[5])}`),r.length===6){n.push("Z");continue}if(r.length===12){n.push(`L${de.svgRound(r[10])} ${de.svgRound(r[11])}`);continue}for(let i=6,s=r.length;i<s;i+=6){const[a,o,l,c,u,h]=r.subarray(i,i+6).map(de.svgRound);n.push(`C${a} ${o} ${l} ${c} ${u} ${h}`)}}return n.join("")}serialize([n,r,i,s],a){const o=[],l=[],[c,u,h,f]=N(this,rr,n6).call(this);let m,g,v,y,w,b,A,I,k;switch(d(this,Kp)){case 0:k=de._rescale,m=n,g=r+s,v=i,y=-s,w=n+c*i,b=r+(1-u-f)*s,A=n+(c+h)*i,I=r+(1-u)*s;break;case 90:k=de._rescaleAndSwap,m=n,g=r,v=i,y=s,w=n+u*i,b=r+c*s,A=n+(u+f)*i,I=r+(c+h)*s;break;case 180:k=de._rescale,m=n+i,g=r,v=-i,y=s,w=n+(1-c-h)*i,b=r+u*s,A=n+(1-c)*i,I=r+(u+f)*s;break;case 270:k=de._rescaleAndSwap,m=n+i,g=r+s,v=-i,y=-s,w=n+(1-u-f)*i,b=r+(1-c-h)*s,A=n+(1-u)*i,I=r+(1-c)*s;break}for(const{line:M,points:P}of d(this,Di))o.push(k(M,m,g,v,y,a?new Array(M.length):null)),l.push(k(P,m,g,v,y,a?new Array(P.length):null));return{lines:o,points:l,rect:[w,b,A,I]}}static deserialize(n,r,i,s,a,{paths:{lines:o,points:l},rotation:c,thickness:u}){const h=[];let f,m,g,v,y;switch(c){case 0:y=de._rescale,f=-n/i,m=r/s+1,g=1/i,v=-1/s;break;case 90:y=de._rescaleAndSwap,f=-r/s,m=-n/i,g=1/s,v=1/i;break;case 180:y=de._rescale,f=n/i+1,m=-r/s,g=-1/i,v=1/s;break;case 270:y=de._rescaleAndSwap,f=r/s+1,m=n/i+1,g=-1/s,v=-1/i;break}if(!o){o=[];for(const b of l){const A=b.length;if(A===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(A===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const I=new Float32Array(3*(A-2));o.push(I);let[k,M,P,C]=b.subarray(0,4);I.set([NaN,NaN,NaN,NaN,k,M],0);for(let O=4;O<A;O+=2){const j=b[O],D=b[O+1];I.set(de.createBezierPoints(k,M,P,C,j,D),(O-2)*3),[k,M,P,C]=[P,C,j,D]}}}for(let b=0,A=o.length;b<A;b++)h.push({line:y(o[b].map(I=>I??NaN),f,m,g,v),points:y(l[b].map(I=>I??NaN),f,m,g,v)});const w=new ZO;return w.build(h,i,s,1,c,u,a),w}get box(){return d(this,Br)}updateProperty(n,r){return n==="stroke-width"?N(this,rr,i6).call(this,r):null}updateParentDimensions([n,r],i){const[s,a]=N(this,rr,lo).call(this);S(this,Na,n),S(this,Oa,r),S(this,qp,i);const[o,l]=N(this,rr,lo).call(this),c=o-s,u=l-a,h=d(this,Br);return h[0]-=c,h[1]-=u,h[2]+=2*c,h[3]+=2*u,h}updateRotation(n){return S(this,U0,n),{path:{transform:this.rotationTransform}}}get viewBox(){return d(this,Br).map(de.svgRound).join(" ")}get defaultProperties(){const[n,r]=d(this,Br);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${de.svgRound(n)} ${de.svgRound(r)}`}}}get rotationTransform(){const[,,n,r]=d(this,Br);let i=0,s=0,a=0,o=0,l=0,c=0;switch(d(this,U0)){case 90:s=r/n,a=-n/r,l=n;break;case 180:i=-1,o=-1,l=n,c=r;break;case 270:s=-r/n,a=n/r,c=r;break;default:return""}return`matrix(${i} ${s} ${a} ${o} ${de.svgRound(l)} ${de.svgRound(c)})`}getPathResizingSVGProperties([n,r,i,s]){const[a,o]=N(this,rr,lo).call(this),[l,c,u,h]=d(this,Br);if(Math.abs(u-a)<=de.PRECISION||Math.abs(h-o)<=de.PRECISION){const y=n+i/2-(l+u/2),w=r+s/2-(c+h/2);return{path:{"transform-origin":`${de.svgRound(n)} ${de.svgRound(r)}`,transform:`${this.rotationTransform} translate(${y} ${w})`}}}const f=(i-2*a)/(u-2*a),m=(s-2*o)/(h-2*o),g=u/i,v=h/s;return{path:{"transform-origin":`${de.svgRound(l)} ${de.svgRound(c)}`,transform:`${this.rotationTransform} scale(${g} ${v}) translate(${de.svgRound(a)} ${de.svgRound(o)}) scale(${f} ${m}) translate(${de.svgRound(-a)} ${de.svgRound(-o)})`}}}getPathResizedSVGProperties([n,r,i,s]){const[a,o]=N(this,rr,lo).call(this),l=d(this,Br),[c,u,h,f]=l;if(l[0]=n,l[1]=r,l[2]=i,l[3]=s,Math.abs(h-a)<=de.PRECISION||Math.abs(f-o)<=de.PRECISION){const w=n+i/2-(c+h/2),b=r+s/2-(u+f/2);for(const{line:A,points:I}of d(this,Di))de._translate(A,w,b,A),de._translate(I,w,b,I);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${de.svgRound(n)} ${de.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(i-2*a)/(h-2*a),g=(s-2*o)/(f-2*o),v=-m*(c+a)+n+a,y=-g*(u+o)+r+o;if(m!==1||g!==1||v!==0||y!==0)for(const{line:w,points:b}of d(this,Di))de._rescale(w,v,y,m,g,w),de._rescale(b,v,y,m,g,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${de.svgRound(n)} ${de.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([n,r],i){const[s,a]=i,o=d(this,Br),l=n-o[0],c=r-o[1];if(d(this,Na)===s&&d(this,Oa)===a)for(const{line:u,points:h}of d(this,Di))de._translate(u,l,c,u),de._translate(h,l,c,h);else{const u=d(this,Na)/s,h=d(this,Oa)/a;S(this,Na,s),S(this,Oa,a);for(const{line:f,points:m}of d(this,Di))de._rescale(f,l,c,u,h,f),de._rescale(m,l,c,u,h,m);o[2]*=u,o[3]*=h}return o[0]=n,o[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${de.svgRound(n)} ${de.svgRound(r)}`}}}get defaultSVGProperties(){const n=d(this,Br);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${de.svgRound(n[0])} ${de.svgRound(n[1])}`,transform:this.rotationTransform||null},bbox:n}}};Br=new WeakMap,U0=new WeakMap,B0=new WeakMap,Di=new WeakMap,Na=new WeakMap,Oa=new WeakMap,qp=new WeakMap,Kp=new WeakMap,Xp=new WeakMap,rr=new WeakSet,lo=function(n=d(this,Xp)){const r=d(this,B0)+n/2*d(this,qp);return d(this,Kp)%180===0?[r/d(this,Na),r/d(this,Oa)]:[r/d(this,Oa),r/d(this,Na)]},n6=function(){const[n,r,i,s]=d(this,Br),[a,o]=N(this,rr,lo).call(this,0);return[n+a,r+o,i-2*a,s-2*o]},r6=function(){const n=S(this,Br,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of d(this,Di)){if(s.length<=12){for(let l=4,c=s.length;l<c;l+=6){const[u,h]=s.subarray(l,l+2);n[0]=Math.min(n[0],u),n[1]=Math.min(n[1],h),n[2]=Math.max(n[2],u),n[3]=Math.max(n[3],h)}continue}let a=s[4],o=s[5];for(let l=6,c=s.length;l<c;l+=6){const[u,h,f,m,g,v]=s.subarray(l,l+6);_e.bezierBoundingBox(a,o,u,h,f,m,g,v,n),a=g,o=v}}const[r,i]=N(this,rr,lo).call(this);n[0]=Math.min(1,Math.max(0,n[0]-r)),n[1]=Math.min(1,Math.max(0,n[1]-i)),n[2]=Math.min(1,Math.max(0,n[2]+r)),n[3]=Math.min(1,Math.max(0,n[3]+i)),n[2]-=n[0],n[3]-=n[1]},i6=function(n){const[r,i]=N(this,rr,lo).call(this);S(this,Xp,n);const[s,a]=N(this,rr,lo).call(this),[o,l]=[s-r,a-i],c=d(this,Br);return c[0]-=o,c[1]-=l,c[2]+=2*o,c[3]+=2*l,c};let Xx=ZO;var Yp;const eD=class eD extends nie{constructor(n){super();R(this,Yp);S(this,Yp,n),super.updateProperties({fill:"none",stroke:$t._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(n,r){n==="stroke-width"&&(r??(r=this["stroke-width"]),r*=d(this,Yp).realScale),super.updateSVGProperty(n,r)}clone(){const n=new eD(d(this,Yp));return n.updateAll(this),n}};Yp=new WeakMap;let QI=eD;var tE,s6;const Of=class Of extends qI{constructor(n){super({...n,name:"inkEditor"});R(this,tE);this._willKeepAspectRatio=!0}static initialize(n,r){$t.initialize(n,r),this._defaultDrawingOptions=new QI(r.viewParameters)}static getDefaultDrawingOptions(n){const r=this._defaultDrawingOptions.clone();return r.updateProperties(n),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ge(this,"typesMap",new Map([[Je.INK_THICKNESS,"stroke-width"],[Je.INK_COLOR,"stroke"],[Je.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(n,r,i,s,a){return new rie(n,r,i,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(n,r,i,s,a,o){return Xx.deserialize(n,r,i,s,a,o)}static async deserialize(n,r,i){let s=null;if(n instanceof dN){const{data:{inkLists:o,rect:l,rotation:c,id:u,color:h,opacity:f,borderStyle:{rawWidth:m},popupRef:g},parent:{page:{pageNumber:v}}}=n;s=n={annotationType:Be.INK,color:Array.from(h),thickness:m,opacity:f,paths:{points:o},boxes:null,pageIndex:v-1,rect:l.slice(0),rotation:c,id:u,deleted:!1,popupRef:g}}const a=await super.deserialize(n,r,i);return a.annotationElementId=n.id||null,a._initialData=s,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:n,_drawingOptions:r,parent:i}=this;r.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(n,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const n=this._currentParent;n&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:n,thickness:r,opacity:i}){this._drawingOptions=Of.getDefaultDrawingOptions({stroke:_e.makeHexColor(...n),"stroke-width":r,"stroke-opacity":i})}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:i,rect:s}=this.serializeDraw(n),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,c={annotationType:Be.INK,color:$t._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:r,points:i},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?c:this.annotationElementId&&!N(this,tE,s6).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(n){const{points:r,rect:i}=this.serializeDraw(!1);return n.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:r}),null}};tE=new WeakSet,s6=function(n){const{color:r,thickness:i,opacity:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||n.color.some((o,l)=>o!==r[l])||n.thickness!==i||n.opacity!==s||n.pageIndex!==a},Te(Of,"_type","ink"),Te(Of,"_editorType",Be.INK),Te(Of,"_defaultDrawingOptions",null);let JI=Of;var Ut,Zn,Ec,Lo,Sc,Qp,Da,Ma,Mi,Jp,at,rv,iv,zb,eC,Hb,tC,Wb,a6;const Sv=class Sv extends $t{constructor(n){super({...n,name:"stampEditor"});R(this,at);R(this,Ut,null);R(this,Zn,null);R(this,Ec,null);R(this,Lo,null);R(this,Sc,null);R(this,Qp,"");R(this,Da,null);R(this,Ma,null);R(this,Mi,!1);R(this,Jp,!1);S(this,Lo,n.bitmapUrl),S(this,Sc,n.bitmapFile)}static initialize(n,r){$t.initialize(n,r)}static get supportedTypes(){return Ge(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(r=>`image/${r}`))}static get supportedTypesStr(){return Ge(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(n){return this.supportedTypes.includes(n)}static paste(n,r){r.pasteEditor(Be.STAMP,{bitmapFile:n.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var n;return{type:"stamp",hasAltText:!!((n=this.altTextData)!=null&&n.altText)}}static computeTelemetryFinalData(n){const r=n.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(n=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=n||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),r&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var n;d(this,Zn)&&(S(this,Ut,null),this._uiManager.imageManager.deleteId(d(this,Zn)),(n=d(this,Da))==null||n.remove(),S(this,Da,null),d(this,Ma)&&(clearTimeout(d(this,Ma)),S(this,Ma,null))),super.remove()}rebuild(){if(!this.parent){d(this,Zn)&&N(this,at,zb).call(this);return}super.rebuild(),this.div!==null&&(d(this,Zn)&&d(this,Da)===null&&N(this,at,zb).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(n){this._isDraggable=!0,n&&this.div.focus()}isEmpty(){return!(d(this,Ec)||d(this,Ut)||d(this,Lo)||d(this,Sc)||d(this,Zn))}get isResizable(){return!0}render(){if(this.div)return this.div;let n,r;if(this.width&&(n=this.x,r=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),d(this,Ut)?N(this,at,eC).call(this):N(this,at,zb).call(this),this.width&&!this.annotationElementId){const[i,s]=this.parentDimensions;this.setAt(n*i,r*s,this.width*i,this.height*s)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;d(this,Ma)!==null&&clearTimeout(d(this,Ma)),S(this,Ma,setTimeout(()=>{S(this,Ma,null),N(this,at,tC).call(this)},200))}copyCanvas(n,r,i=!1){var m;n||(n=224);const{width:s,height:a}=d(this,Ut),o=new QP;let l=d(this,Ut),c=s,u=a,h=null;if(r){if(s>r||a>r){const C=Math.min(r/s,r/a);c=Math.floor(s*C),u=Math.floor(a*C)}h=document.createElement("canvas");const g=h.width=Math.ceil(c*o.sx),v=h.height=Math.ceil(u*o.sy);d(this,Mi)||(l=N(this,at,Hb).call(this,g,v));const y=h.getContext("2d");y.filter=this._uiManager.hcmFilter;let w="white",b="#cfcfd8";this._uiManager.hcmFilter!=="none"?b="black":(m=window.matchMedia)!=null&&m.call(window,"(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",b="#42414d");const A=15,I=A*o.sx,k=A*o.sy,M=new OffscreenCanvas(I*2,k*2),P=M.getContext("2d");P.fillStyle=w,P.fillRect(0,0,I*2,k*2),P.fillStyle=b,P.fillRect(0,0,I,k),P.fillRect(I,k,I,k),y.fillStyle=y.createPattern(M,"repeat"),y.fillRect(0,0,g,v),y.drawImage(l,0,0,l.width,l.height,0,0,g,v)}let f=null;if(i){let g,v;if(o.symmetric&&l.width<n&&l.height<n)g=l.width,v=l.height;else if(l=d(this,Ut),s>n||a>n){const b=Math.min(n/s,n/a);g=Math.floor(s*b),v=Math.floor(a*b),d(this,Mi)||(l=N(this,at,Hb).call(this,g,v))}const w=new OffscreenCanvas(g,v).getContext("2d",{willReadFrequently:!0});w.drawImage(l,0,0,l.width,l.height,0,0,g,v),f={width:g,height:v,data:w.getImageData(0,0,g,v).data}}return{canvas:h,width:c,height:u,imageData:f}}getImageForAltText(){return d(this,Da)}static async deserialize(n,r,i){var v;let s=null;if(n instanceof P3){const{data:{rect:y,rotation:w,id:b,structParent:A,popupRef:I},container:k,parent:{page:{pageNumber:M}}}=n,P=k.querySelector("canvas"),C=i.imageManager.getFromCanvas(k.id,P);P.remove();const O=((v=await r._structTree.getAriaAttributes(`${iN}${b}`))==null?void 0:v.get("aria-label"))||"";s=n={annotationType:Be.STAMP,bitmapId:C.id,bitmap:C.bitmap,pageIndex:M-1,rect:y.slice(0),rotation:w,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:O},isSvg:!1,structParent:A,popupRef:I}}const a=await super.deserialize(n,r,i),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:u,isSvg:h,accessibilityData:f}=n;u&&i.imageManager.isValidId(u)?(S(a,Zn,u),l&&S(a,Ut,l)):S(a,Lo,c),S(a,Mi,h);const[m,g]=a.pageDimensions;return a.width=(o[2]-o[0])/m,a.height=(o[3]-o[1])/g,a.annotationElementId=n.id||null,f&&(a.altTextData=f),a._initialData=s,S(a,Jp,!!s),a}serialize(n=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:Be.STAMP,bitmapId:d(this,Zn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:d(this,Mi),structTreeParentId:this._structTreeParentId};if(n)return i.bitmapUrl=N(this,at,Wb).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=N(this,at,a6).call(this,i);if(l.isSame)return null;l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,r===null)return i;r.stamps||(r.stamps=new Map);const o=d(this,Mi)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!r.stamps.has(d(this,Zn)))r.stamps.set(d(this,Zn),{area:o,serialized:i}),i.bitmap=N(this,at,Wb).call(this,!1);else if(d(this,Mi)){const l=r.stamps.get(d(this,Zn));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=N(this,at,Wb).call(this,!1))}return i}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}};Ut=new WeakMap,Zn=new WeakMap,Ec=new WeakMap,Lo=new WeakMap,Sc=new WeakMap,Qp=new WeakMap,Da=new WeakMap,Ma=new WeakMap,Mi=new WeakMap,Jp=new WeakMap,at=new WeakSet,rv=function(n,r=!1){if(!n){this.remove();return}S(this,Ut,n.bitmap),r||(S(this,Zn,n.id),S(this,Mi,n.isSvg)),n.file&&S(this,Qp,n.file.name),N(this,at,eC).call(this)},iv=function(){if(S(this,Ec,null),this._uiManager.enableWaiting(!1),!!d(this,Da)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Ut)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Ut)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},zb=function(){if(d(this,Zn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,Zn)).then(i=>N(this,at,rv).call(this,i,!0)).finally(()=>N(this,at,iv).call(this));return}if(d(this,Lo)){const i=d(this,Lo);S(this,Lo,null),this._uiManager.enableWaiting(!0),S(this,Ec,this._uiManager.imageManager.getFromUrl(i).then(s=>N(this,at,rv).call(this,s)).finally(()=>N(this,at,iv).call(this)));return}if(d(this,Sc)){const i=d(this,Sc);S(this,Sc,null),this._uiManager.enableWaiting(!0),S(this,Ec,this._uiManager.imageManager.getFromFile(i).then(s=>N(this,at,rv).call(this,s)).finally(()=>N(this,at,iv).call(this)));return}const n=document.createElement("input");n.type="file",n.accept=Sv.supportedTypesStr;const r=this._uiManager._signal;S(this,Ec,new Promise(i=>{n.addEventListener("change",async()=>{if(!n.files||n.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(n.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),N(this,at,rv).call(this,s)}i()},{signal:r}),n.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>N(this,at,iv).call(this))),n.click()},eC=function(){var h;const{div:n}=this;let{width:r,height:i}=d(this,Ut);const[s,a]=this.pageDimensions,o=.75;if(this.width)r=this.width*s,i=this.height*a;else if(r>o*s||i>o*a){const f=Math.min(o*s/r,o*a/i);r*=f,i*=f}const[l,c]=this.parentDimensions;this.setDims(r*l/s,i*c/a),this._uiManager.enableWaiting(!1);const u=S(this,Da,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=r/s,this.height=i/a,(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(n.hidden=!1),N(this,at,tC).call(this),d(this,Jp)||(this.parent.addUndoableEditor(this),S(this,Jp,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,Qp)&&u.setAttribute("aria-label",d(this,Qp))},Hb=function(n,r){const{width:i,height:s}=d(this,Ut);let a=i,o=s,l=d(this,Ut);for(;a>2*n||o>2*r;){const c=a,u=o;a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*r&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const h=new OffscreenCanvas(a,o);h.getContext("2d").drawImage(l,0,0,c,u,0,0,a,o),l=h.transferToImageBitmap()}return l},tC=function(){const[n,r]=this.parentDimensions,{width:i,height:s}=this,a=new QP,o=Math.ceil(i*n*a.sx),l=Math.ceil(s*r*a.sy),c=d(this,Da);if(!c||c.width===o&&c.height===l)return;c.width=o,c.height=l;const u=d(this,Mi)?d(this,Ut):N(this,at,Hb).call(this,o,l),h=c.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(u,0,0,u.width,u.height,0,0,o,l)},Wb=function(n){if(n){if(d(this,Mi)){const s=this._uiManager.imageManager.getSvgUrl(d(this,Zn));if(s)return s}const r=document.createElement("canvas");return{width:r.width,height:r.height}=d(this,Ut),r.getContext("2d").drawImage(d(this,Ut),0,0),r.toDataURL()}if(d(this,Mi)){const[r,i]=this.pageDimensions,s=Math.round(this.width*r*nu.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*nu.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(d(this,Ut),0,0,d(this,Ut).width,d(this,Ut).height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(d(this,Ut))},a6=function(n){var o;const{pageIndex:r,accessibilityData:{altText:i}}=this._initialData,s=n.pageIndex===r,a=(((o=n.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},Te(Sv,"_type","stamp"),Te(Sv,"_editorType",Be.STAMP);let ZI=Sv;var ed,Zp,La,Tc,jo,ds,Pc,em,td,qs,Fo,Ar,Vo,we,Ic,Mt,o6,ya,rC,iC,Gb;const Ds=class Ds{constructor({uiManager:e,pageIndex:n,div:r,structTreeLayer:i,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:u}){R(this,Mt);R(this,ed);R(this,Zp,!1);R(this,La,null);R(this,Tc,null);R(this,jo,null);R(this,ds,new Map);R(this,Pc,!1);R(this,em,!1);R(this,td,!1);R(this,qs,null);R(this,Fo,null);R(this,Ar,null);R(this,Vo,null);R(this,we);const h=[...d(Ds,Ic).values()];if(!Ds._initialized){Ds._initialized=!0;for(const f of h)f.initialize(u,e)}e.registerEditorTypes(h),S(this,we,e),this.pageIndex=n,this.div=r,S(this,ed,s),S(this,La,a),this.viewport=c,S(this,Ar,l),this.drawLayer=o,this._structTree=i,d(this,we).addLayer(this)}get isEmpty(){return d(this,ds).size===0}get isInvisible(){return this.isEmpty&&d(this,we).getMode()===Be.NONE}updateToolbar(e){d(this,we).updateToolbar(e)}updateMode(e=d(this,we).getMode()){switch(N(this,Mt,Gb).call(this),e){case Be.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Be.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Be.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;for(const r of d(Ds,Ic).values())n.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var n;return e===((n=d(this,Ar))==null?void 0:n.div)}setEditingState(e){d(this,we).setEditingState(e)}addCommands(e){d(this,we).addCommands(e)}cleanUndoStack(e){d(this,we).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var n;(n=d(this,La))==null||n.div.classList.toggle("disabled",!e)}async enable(){S(this,td,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const r of d(this,ds).values())r.enableEditing(),r.show(!0),r.annotationElementId&&(d(this,we).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!d(this,La)){S(this,td,!1);return}const n=d(this,La).getEditableAnnotations();for(const r of n){if(r.hide(),d(this,we).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}S(this,td,!1)}disable(){var i;S(this,em,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,n=new Map;for(const s of d(this,ds).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else n.set(s.annotationElementId,s);(i=this.getEditableAnnotation(s.annotationElementId))==null||i.show(),s.remove()}if(d(this,La)){const s=d(this,La).getEditableAnnotations();for(const a of s){const{id:o}=a.data;if(d(this,we).isDeletedAnnotationElement(o))continue;let l=n.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(d(this,we).addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}N(this,Mt,Gb).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const s of d(Ds,Ic).values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,em,!1)}getEditableAnnotation(e){var n;return((n=d(this,La))==null?void 0:n.getEditableAnnotation(e))||null}setActiveEditor(e){d(this,we).getActive()!==e&&d(this,we).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=d(this,Ar))!=null&&e.div&&!d(this,Vo)){S(this,Vo,new AbortController);const n=d(this,we).combinedSignal(d(this,Vo));d(this,Ar).div.addEventListener("pointerdown",N(this,Mt,o6).bind(this),{signal:n}),d(this,Ar).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=d(this,Ar))!=null&&e.div&&d(this,Vo)&&(d(this,Vo).abort(),S(this,Vo,null),d(this,Ar).div.classList.remove("highlighting"))}enableClick(){if(d(this,Tc))return;S(this,Tc,new AbortController);const e=d(this,we).combinedSignal(d(this,Tc));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:e}),this.div.addEventListener("pointercancel",n,{signal:e})}disableClick(){var e;(e=d(this,Tc))==null||e.abort(),S(this,Tc,null)}attach(e){d(this,ds).set(e.id,e);const{annotationElementId:n}=e;n&&d(this,we).isDeletedAnnotationElement(n)&&d(this,we).removeDeletedAnnotationElement(e)}detach(e){var n;d(this,ds).delete(e.id),(n=d(this,ed))==null||n.removePointerInTextLayer(e.contentDiv),!d(this,em)&&e.annotationElementId&&d(this,we).addDeletedAnnotationElement(e)}remove(e){this.detach(e),d(this,we).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var n;e.parent!==this&&(e.parent&&e.annotationElementId&&(d(this,we).addDeletedAnnotationElement(e.annotationElementId),$t.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(n=e.parent)==null||n.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),d(this,we).addEditor(e),this.attach(e),!e.isAttachedToDOM){const n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!d(this,td)),d(this,we).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!d(this,jo)&&(e._focusEventsAllowed=!1,S(this,jo,setTimeout(()=>{S(this,jo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:d(this,we)._signal}),n.focus())},0))),e._structTreeParentId=(r=d(this,ed))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const n=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:n,undo:r,mustExec:!1})}getNextId(){return d(this,we).getId()}combinedSignal(e){return d(this,we).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=d(this,Mt,ya))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,n){d(this,we).updateToolbar(e),d(this,we).updateMode(e);const{offsetX:r,offsetY:i}=N(this,Mt,iC).call(this),s=this.getNextId(),a=N(this,Mt,rC).call(this,{parent:this,id:s,x:r,y:i,uiManager:d(this,we),isCentered:!0,...n});a&&this.add(a)}async deserialize(e){var n;return await((n=d(Ds,Ic).get(e.annotationType??e.annotationEditorType))==null?void 0:n.deserialize(e,this,d(this,we)))||null}createAndAddNewEditor(e,n,r={}){const i=this.getNextId(),s=N(this,Mt,rC).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:d(this,we),isCentered:n,...r});return s&&this.add(s),s}addNewEditor(){this.createAndAddNewEditor(N(this,Mt,iC).call(this),!0)}setSelected(e){d(this,we).setSelected(e)}toggleSelected(e){d(this,we).toggleSelected(e)}unselect(e){d(this,we).unselect(e)}pointerup(e){var r;const{isMac:n}=Xr.platform;if(!(e.button!==0||e.ctrlKey&&n)&&e.target===this.div&&d(this,Pc)&&(S(this,Pc,!1),!((r=d(this,Mt,ya))!=null&&r.isDrawer&&d(this,Mt,ya).supportMultipleDrawings))){if(!d(this,Zp)){S(this,Zp,!0);return}if(d(this,we).getMode()===Be.STAMP){d(this,we).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var i;if(d(this,we).getMode()===Be.HIGHLIGHT&&this.enableTextSelection(),d(this,Pc)){S(this,Pc,!1);return}const{isMac:n}=Xr.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div)return;if(S(this,Pc,!0),(i=d(this,Mt,ya))!=null&&i.isDrawer){this.startDrawingSession(e);return}const r=d(this,we).getActive();S(this,Zp,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus(),d(this,qs)){d(this,Mt,ya).startDrawing(this,d(this,we),!1,e);return}d(this,we).setCurrentDrawingSession(this),S(this,qs,new AbortController);const n=d(this,we).combinedSignal(d(this,qs));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(S(this,Fo,null),this.commitOrRemove())},{signal:n}),d(this,Mt,ya).startDrawing(this,d(this,we),!1,e)}pause(e){if(e){const{activeElement:n}=document;this.div.contains(n)&&S(this,Fo,n);return}d(this,Fo)&&setTimeout(()=>{var n;(n=d(this,Fo))==null||n.focus(),S(this,Fo,null)},0)}endDrawingSession(e=!1){return d(this,qs)?(d(this,we).setCurrentDrawingSession(null),d(this,qs).abort(),S(this,qs,null),S(this,Fo,null),d(this,Mt,ya).endDrawing(e)):null}findNewParent(e,n,r){const i=d(this,we).findParent(n,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return d(this,qs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){d(this,qs)&&d(this,Mt,ya).onScaleChangingWhenDrawing(this)}destroy(){var e,n;this.commitOrRemove(),((e=d(this,we).getActive())==null?void 0:e.parent)===this&&(d(this,we).commitOrRemove(),d(this,we).setActiveEditor(null)),d(this,jo)&&(clearTimeout(d(this,jo)),S(this,jo,null));for(const r of d(this,ds).values())(n=d(this,ed))==null||n.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,d(this,ds).clear(),d(this,we).removeLayer(this)}render({viewport:e}){this.viewport=e,xd(this.div,e);for(const n of d(this,we).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:e}){d(this,we).commitOrRemove(),N(this,Mt,Gb).call(this);const n=this.viewport.rotation,r=e.rotation;if(this.viewport=e,xd(this.div,{rotation:r}),n!==r)for(const i of d(this,ds).values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:n}=this.viewport.rawDims;return[e,n]}get scale(){return d(this,we).viewParameters.realScale}};ed=new WeakMap,Zp=new WeakMap,La=new WeakMap,Tc=new WeakMap,jo=new WeakMap,ds=new WeakMap,Pc=new WeakMap,em=new WeakMap,td=new WeakMap,qs=new WeakMap,Fo=new WeakMap,Ar=new WeakMap,Vo=new WeakMap,we=new WeakMap,Ic=new WeakMap,Mt=new WeakSet,o6=function(e){d(this,we).unselectAll();const{target:n}=e;if(n===d(this,Ar).div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&d(this,Ar).div.contains(n)){const{isMac:r}=Xr.platform;if(e.button!==0||e.ctrlKey&&r)return;d(this,we).showAllEditors("highlight",!0,!0),d(this,Ar).div.classList.add("free"),this.toggleDrawing(),Kx.startHighlighting(this,d(this,we).direction==="ltr",{target:d(this,Ar).div,x:e.x,y:e.y}),d(this,Ar).div.addEventListener("pointerup",()=>{d(this,Ar).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,we)._signal}),e.preventDefault()}},ya=function(){return d(Ds,Ic).get(d(this,we).getMode())},rC=function(e){const n=d(this,Mt,ya);return n?new n.prototype.constructor(e):null},iC=function(){const{x:e,y:n,width:r,height:i}=this.div.getBoundingClientRect(),s=Math.max(0,e),a=Math.max(0,n),o=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,n+i),c=(s+o)/2-e,u=(a+l)/2-n,[h,f]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:h,offsetY:f}},Gb=function(){for(const e of d(this,ds).values())e.isEmpty()&&e.remove()},Te(Ds,"_initialized",!1),R(Ds,Ic,new Map([jI,JI,ZI,Kx].map(e=>[e._editorType,e])));let nC=Ds;var Ks,$0,$r,nd,nE,l6,Za,aC,c6,oC;const wr=class wr{constructor({pageIndex:e}){R(this,Za);R(this,Ks,null);R(this,$0,0);R(this,$r,new Map);R(this,nd,new Map);this.pageIndex=e}setParent(e){if(!d(this,Ks)){S(this,Ks,e);return}if(d(this,Ks)!==e){if(d(this,$r).size>0)for(const n of d(this,$r).values())n.remove(),e.append(n);S(this,Ks,e)}}static get _svgFactory(){return Ge(this,"_svgFactory",new hN)}draw(e,n=!1,r=!1){const i=Lr(this,$0)._++,s=N(this,Za,aC).call(this),a=wr._svgFactory.createElement("defs");s.append(a);const o=wr._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),n&&d(this,nd).set(i,o);const c=r?N(this,Za,c6).call(this,a,l):null,u=wr._svgFactory.createElement("use");return s.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(s,e),d(this,$r).set(i,s),{id:i,clipPathId:`url(#${c})`}}drawOutline(e,n){const r=Lr(this,$0)._++,i=N(this,Za,aC).call(this),s=wr._svgFactory.createElement("defs");i.append(s);const a=wr._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(n){const h=wr._svgFactory.createElement("mask");s.append(h),l=`mask_p${this.pageIndex}_${r}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const f=wr._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const m=wr._svgFactory.createElement("use");h.append(m),m.setAttribute("href",`#${o}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const c=wr._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${o}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,e),d(this,$r).set(r,i),r}finalizeDraw(e,n){d(this,nd).delete(e),this.updateProperties(e,n)}updateProperties(e,n){var l;if(!n)return;const{root:r,bbox:i,rootClass:s,path:a}=n,o=typeof e=="number"?d(this,$r).get(e):e;if(o){if(r&&N(this,Za,oC).call(this,o,r),i&&N(l=wr,nE,l6).call(l,o,i),s){const{classList:c}=o;for(const[u,h]of Object.entries(s))c.toggle(u,h)}if(a){const u=o.firstChild.firstChild;N(this,Za,oC).call(this,u,a)}}}updateParent(e,n){if(n===this)return;const r=d(this,$r).get(e);r&&(d(n,Ks).append(r),d(this,$r).delete(e),d(n,$r).set(e,r))}remove(e){d(this,nd).delete(e),d(this,Ks)!==null&&(d(this,$r).get(e).remove(),d(this,$r).delete(e))}destroy(){S(this,Ks,null);for(const e of d(this,$r).values())e.remove();d(this,$r).clear(),d(this,nd).clear()}};Ks=new WeakMap,$0=new WeakMap,$r=new WeakMap,nd=new WeakMap,nE=new WeakSet,l6=function(e,[n,r,i,s]){const{style:a}=e;a.top=`${100*r}%`,a.left=`${100*n}%`,a.width=`${100*i}%`,a.height=`${100*s}%`},Za=new WeakSet,aC=function(){const e=wr._svgFactory.create(1,1,!0);return d(this,Ks).append(e),e.setAttribute("aria-hidden",!0),e},c6=function(e,n){const r=wr._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${n}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const s=wr._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${n}`),s.classList.add("clip"),i},oC=function(e,n){for(const[r,i]of Object.entries(n))i===null?e.removeAttribute(r):e.setAttribute(r,i)},R(wr,nE);let sC=wr;globalThis.pdfjsTestingUtils={HighlightOutliner:VI};Oe.AbortException;Oe.AnnotationEditorLayer;Oe.AnnotationEditorParamsType;Oe.AnnotationEditorType;Oe.AnnotationEditorUIManager;Oe.AnnotationLayer;Oe.AnnotationMode;Oe.ColorPicker;Oe.DOMSVGFactory;Oe.DrawLayer;Oe.FeatureTest;var iie=Oe.GlobalWorkerOptions;Oe.ImageKind;Oe.InvalidPDFException;Oe.MissingPDFException;Oe.OPS;Oe.OutputScale;Oe.PDFDataRangeTransport;Oe.PDFDateString;Oe.PDFWorker;Oe.PasswordResponses;Oe.PermissionFlag;Oe.PixelsPerInch;Oe.RenderingCancelledException;Oe.TextLayer;Oe.TouchManager;Oe.UnexpectedResponseException;Oe.Util;Oe.VerbosityLevel;Oe.XfaLayer;Oe.build;Oe.createValidAbsoluteUrl;Oe.fetchData;var sie=Oe.getDocument;Oe.getFilenameFromUrl;Oe.getPdfFilenameFromUrl;Oe.getXfaPageViewport;Oe.isDataScheme;Oe.isPdfFile;Oe.noContextMenu;Oe.normalizeUnicode;Oe.setLayerDimensions;Oe.shadow;Oe.stopEvent;Oe.version;iie.workerSrc="pdf.worker.min.mjs";const aie=({pdf:t,onClose:e,violation:n,onViolation:r,canDownload:i})=>{const s=E.useRef(null),[a,o]=E.useState(null),[l,c]=E.useState(0),[u,h]=E.useState(!0),[f,m]=E.useState(null),[g,v]=E.useState(null),[y,w]=E.useState(!1),[b,A]=E.useState(1),I=E.useRef({}),[k,M]=E.useState(!1);E.useLayoutEffect(()=>{const D=()=>M(window.innerWidth<768);return D(),window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),E.useEffect(()=>{if(!t){o(null),v(null);return}return h(!0),m(null),A(1),I.current={},(async()=>{var D;try{let F=t.path;if(!F&&t.url){const X=(D=new URL(t.url).pathname.split("/o/")[1])==null?void 0:D.split("?")[0];X&&(F=decodeURIComponent(X))}if(!F)throw new Error("Unable to determine file path");const V=fs(ps,F),Y=await iL(V),re=Y instanceof ArrayBuffer?new Uint8Array(Y):new Uint8Array(Y),K=Uint8Array.from(re);v(K);const q=await sie({data:re}).promise;o(q),c(q.numPages)}catch(F){const V=F instanceof Error?F.message:"Unknown error loading PDF";m(V),console.error("PDF loading error:",F)}finally{h(!1)}})(),()=>{if(a&&typeof a.destroy=="function")try{a.destroy()}catch{}}},[t]);const P=E.useCallback(async D=>{if(a)try{const F=I.current[D];if(!F)return;const V=await a.getPage(D),Y=V.getViewport({scale:b});F.width=Y.width,F.height=Y.height;const re=F.getContext("2d");if(!re)return;const K={canvasContext:re,viewport:Y};await V.render(K).promise}catch(F){console.error(`Error rendering page ${D}:`,F)}},[a,b]);E.useEffect(()=>{if(!a||l===0)return;const D=new IntersectionObserver(F=>{F.forEach(V=>{if(V.isIntersecting){const Y=parseInt(V.target.getAttribute("data-page")||"0");Y>0&&P(Y)}})},{threshold:.1});Object.values(I.current).forEach(F=>{F&&D.observe(F)})},[a,l,P]);const C=async()=>{var D;if(t){w(!0);try{let F=g;if(!F){let K=t.path;if(!K&&t.url)try{const H=(D=new URL(t.url).pathname.split("/o/")[1])==null?void 0:D.split("?")[0];H&&(K=decodeURIComponent(H))}catch(q){console.warn("Could not parse storage path from pdf.url",q)}if(K)try{const q=fs(ps,K),H=await iL(q),X=H instanceof ArrayBuffer?new Uint8Array(H):new Uint8Array(H),te=Uint8Array.from(X);F=te,v(te)}catch(q){console.warn("getBytes failed, will try fetching via public URL if available",q)}if(!F&&t.url)try{const q=await fetch(t.url);if(!q.ok)throw new Error(`HTTP ${q.status}`);const H=await q.arrayBuffer(),X=new Uint8Array(H),te=Uint8Array.from(X);F=te,v(te)}catch(q){console.warn("Failed to fetch PDF via pdf.url",q)}}if(!F)throw new Error("Could not retrieve file bytes (check storage path or access permissions)");const V=new Blob([F.buffer],{type:"application/pdf"}),Y=URL.createObjectURL(V),re=document.createElement("a");re.href=Y,re.download=t.name.endsWith(".pdf")?t.name:`${t.name}.pdf`,document.body.appendChild(re),re.click(),document.body.removeChild(re),setTimeout(()=>URL.revokeObjectURL(Y),200)}catch(F){console.error("Download error:",F),alert("Failed to download PDF. Please try again.")}finally{w(!1)}}},O=()=>{A(D=>Math.min(D+.2,3))},j=()=>{A(D=>Math.max(D-.2,.5))};return t?_.jsx("div",{onContextMenu:D=>D.preventDefault(),className:"modal-overlay animate-fade-in select-none",children:n?_.jsxs("div",{className:"modal-content modal-md p-8 flex flex-col items-center text-center border border-error/50 relative overflow-hidden bg-[#09090b] shadow-[0_0_50px_rgba(239,68,68,0.2)]",children:[_.jsx("div",{className:"absolute inset-0 bg-red-900/10 animate-pulse pointer-events-none"}),_.jsx("div",{className:"relative w-24 h-24 rounded-full bg-error/10 flex items-center justify-center mb-6 text-error shadow-[0_0_30px_rgba(239,68,68,0.3)] animate-bounce",children:_.jsx(DM,{size:48})}),_.jsx("h2",{className:"relative text-3xl font-bold text-white mb-2 tracking-tight",children:"Security Alert"}),_.jsx("p",{className:"relative text-error font-bold text-lg mb-6 uppercase tracking-widest",children:"Screenshot Detected"}),_.jsx("div",{className:"relative bg-white/5 border border-white/10 rounded-lg p-4 mb-8 w-full",children:_.jsxs("p",{className:"text-muted text-sm leading-relaxed",children:["A security violation has been logged against your ID ",_.jsx("strong",{children:localStorage.getItem("Number")}),".",_.jsx("br",{}),_.jsx("br",{}),"This incident has been reported to the administrator. Repeated violations will result in an immediate permanent ban."]})}),_.jsx("button",{onClick:e,className:"relative btn btn-danger w-full justify-center font-bold",children:"Close & Acknowledge"})]}):_.jsxs("div",{className:"modal-content modal-xl relative flex flex-col h-[90vh]",children:[_.jsxs("div",{className:"flex items-center justify-between px-10 py-5 border-b border-white/10 bg-app-surface/30 backdrop-blur-lg z-10 shrink-0",children:[_.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[_.jsx("div",{className:"p-2.5 bg-primary/10 rounded-lg text-primary shrink-0",children:_.jsx(Ax,{size:20})}),_.jsxs("div",{className:"flex flex-col min-w-0",children:[_.jsx("h3",{className:"font-semibold text-white truncate leading-tight",title:t.name,children:t.name}),_.jsxs("p",{className:"text-xs text-muted truncate",children:[t.size," - ",t.date]})]})]}),_.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[i&&_.jsx("button",{onClick:C,disabled:u||y,className:"btn btn-sm btn-ghost disabled:opacity-50 disabled:cursor-not-allowed group",title:"Download PDF",children:y?_.jsx(Uf,{size:18,className:"animate-spin"}):_.jsx(mP,{size:18,className:"text-muted group-hover:text-primary transition-colors"})}),_.jsx("button",{onClick:e,className:"btn btn-sm btn-ghost group",title:"Close",children:_.jsx(Bl,{size:18,className:"text-muted group-hover:text-white transition-colors"})})]})]}),a&&l>0&&_.jsxs("div",{className:"flex items-center gap-2 px-6 py-3 border-t border-white/10 bg-surface/50 shrink-0",children:[!k&&_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:j,disabled:b<=.5,className:"btn-icon disabled:opacity-50 disabled:cursor-not-allowed hover:text-primary",title:"Zoom out",children:_.jsx(TK,{size:18})}),_.jsxs("span",{className:"text-muted text-sm min-w-[60px] text-center",children:[Math.round(b*100),"%"]}),_.jsx("button",{onClick:O,disabled:b>=3,className:"btn-icon disabled:opacity-50 disabled:cursor-not-allowed hover:text-primary",title:"Zoom in",children:_.jsx(SK,{size:18})})]}),_.jsx("div",{className:"flex-1"}),_.jsxs("span",{className:"text-muted text-xs",children:[l," pages"]})]}),_.jsx("div",{ref:s,className:"flex-1 bg-black relative overflow-auto flex flex-col items-center justify-start pt-6 pb-6 gap-6",children:u?_.jsx("div",{className:"w-full h-full flex items-center justify-center",children:_.jsxs("div",{className:"flex flex-col items-center gap-3",children:[_.jsx(Uf,{size:32,className:"animate-spin text-primary"}),_.jsx("p",{className:"text-muted text-sm",children:"Loading document..."})]})}):f?_.jsx("div",{className:"w-full h-full flex items-center justify-center",children:_.jsxs("div",{className:"flex flex-col items-center gap-3 text-center p-8",children:[_.jsx(DM,{size:32,className:"text-error"}),_.jsx("p",{className:"text-error text-sm font-medium",children:"Failed to load PDF"}),_.jsx("p",{className:"text-muted text-xs",children:f}),_.jsx("p",{className:"text-muted text-xs mt-2",children:"Try downloading the file instead or contact support."})]})}):a?_.jsx("div",{className:"flex flex-col items-center gap-6 w-full",children:Array.from({length:l},(D,F)=>F+1).map(D=>_.jsxs("div",{className:"relative flex flex-col items-center w-full",children:[_.jsx("canvas",{ref:F=>{F&&(I.current[D]=F)},"data-page":D,className:"max-w-full border border-white/10 rounded-lg shadow-lg bg-white",style:{maxWidth:"100%",height:"auto"}}),_.jsxs("div",{className:"text-muted text-xs mt-2",children:["Page ",D]})]},D))}):null})]})}):null},oie=["SveIem0WRcSCKl1IK44dZ1KfalO2","s5rGItmRedXGhgjKr0hUW256Xor1"],lie=({onLogout:t,onNavigateAdmin:e,isAdmin:n})=>{const[r,i]=E.useState([]),[s,a]=E.useState(null),[o,l]=E.useState([]),[c,u]=E.useState(!0),[h,f]=E.useState(!1),[m,g]=E.useState(""),[v,y]=E.useState(!1),[w,b]=E.useState(null),[A,I]=E.useState(!1),[k,M]=E.useState(null),[P,C]=E.useState(!1),[O,j]=E.useState(""),[D,F]=E.useState(!1),[V,Y]=E.useState(""),[re,K]=E.useState(!1),[q,H]=E.useState(!1),[X,te]=E.useState(!1),[ce,ue]=E.useState(window.innerWidth<900),[ve,Ue]=E.useState({}),et=E.useRef(null);E.useEffect(()=>{g(localStorage.getItem("Name")||"User"),Ye(),(async()=>{const W=localStorage.getItem("Number");try{const Ee=await Hr(Fe(ke,"Dashboard","Settings")),le=Ee.exists()?Ee.data()["PDF-Down"]===!0:null;if(b(le),le===!0){y(!0);return}}catch(Ee){console.warn("Could not read global PDF settings",Ee)}if(W)try{const Ee=await Hr(Fe(ke,"Numbers",W));Ee.exists()&&y(Ee.data()["PDF-Down"]===!0)}catch(Ee){console.warn("Could not read per-number PDF setting",Ee)}})();const J=localStorage.getItem("Number");if(J){const W=Fe(ke,"Numbers",J),Ee=Xu(W,le=>{le.exists()&&Ue({quiziTimes:le.data()["Quizi-Times"],screened:le.data().Screened})});return()=>Ee()}},[]),E.useEffect(()=>{if(localStorage.getItem("Number")!=="01001308280"){const W=le=>le.preventDefault(),Ee=le=>{(le.key==="F12"||le.ctrlKey&&le.shiftKey&&(le.key==="I"||le.key==="J"||le.key==="C")||le.metaKey&&le.altKey&&(le.key==="i"||le.key==="j"||le.key==="c")||le.ctrlKey&&le.key==="u")&&le.preventDefault()};return document.addEventListener("contextmenu",W),window.addEventListener("keydown",Ee),()=>{document.removeEventListener("contextmenu",W),window.removeEventListener("keydown",Ee)}}},[]),E.useEffect(()=>{try{const ne=Xu(Fe(ke,"Dashboard","Settings"),J=>{if(J.exists()){const W=J.data()["PDF-Down"];if(b(W===!0),W===!0)y(!0);else{const Ee=localStorage.getItem("Number");if(!Ee){y(!1);return}Hr(Fe(ke,"Numbers",Ee)).then(le=>{le.exists()?y(le.data()["PDF-Down"]===!0):y(!1)}).catch(()=>{})}}});return()=>ne()}catch{}},[]),E.useEffect(()=>{const ne=localStorage.getItem("Number");if(!ne)return;const J=Fe(ke,"Blocked",ne),W=Xu(J,Ee=>{te(Ee.exists())});return()=>W()},[]),E.useEffect(()=>{s&&me(s)},[s]),E.useEffect(()=>{P&&setTimeout(()=>{var ne;return(ne=et.current)==null?void 0:ne.focus()},100)},[P]),E.useEffect(()=>{const ne=()=>ue(window.innerWidth<900);return window.addEventListener("resize",ne),()=>window.removeEventListener("resize",ne)},[]),E.useEffect(()=>{const ne=()=>{re||K(!0)},J=()=>{document.hidden&&k?ne():document.hidden&&H(!0)},W=()=>{document.activeElement instanceof HTMLIFrameElement||(k?ne():H(!0))};return document.addEventListener("visibilitychange",J),window.addEventListener("blur",W),()=>{document.removeEventListener("visibilitychange",J),window.removeEventListener("blur",W)}},[k,re]),E.useEffect(()=>{if(!k){K(!1);return}const ne=async()=>{if(re)return;K(!0);const Ce=localStorage.getItem("Number");if(Ce){try{await Nc(Fe(ke,"Numbers",Ce),{Screened:Q2(1)})}catch(ct){console.error("Failed to log violation",ct)}try{const ct=document.createElement("canvas");ct.width=1280,ct.height=720;const tt=ct.getContext("2d");tt&&(tt.fillStyle="#09090b",tt.fillRect(0,0,1280,720),tt.strokeStyle="#ef4444",tt.lineWidth=10,tt.strokeRect(50,50,1180,620),tt.fillStyle="#ef4444",tt.font="bold 80px sans-serif",tt.textAlign="center",tt.fillText("SECURITY VIOLATION",640,250),tt.fillStyle="#ffffff",tt.font="40px sans-serif",tt.fillText("SCREENSHOT ATTEMPT DETECTED",640,320),tt.fillStyle="#a1a1aa",tt.font="30px monospace",tt.fillText(`User Name: ${localStorage.getItem("Name")||"Unknown"}`,640,450),tt.fillText(`User ID:   ${Ce}`,640,500),tt.fillText(`Timestamp: ${new Date().toLocaleString()}`,640,550),tt.fillText(`Device:    ${localStorage.getItem("DeviceName")||"Unknown"}`,640,600),ct.toBlob(async Mr=>{if(Mr){const Tl=`Shot_${Ce}_${Date.now()}.png`;await WP(fs(ps,`Captured-Shots/${Tl}`),Mr)}}))}catch(ct){console.error("Evidence generation failed",ct)}}},J=Ce=>{(Ce.key==="PrintScreen"||Ce.ctrlKey&&(Ce.key==="p"||Ce.key==="s")||Ce.metaKey&&(Ce.key==="p"||Ce.key==="s")||Ce.metaKey&&Ce.shiftKey&&(Ce.key==="3"||Ce.key==="4"||Ce.key==="5"))&&(Ce.preventDefault(),ne())},W=Ce=>{Ce.key==="PrintScreen"&&ne()},Ee=Ce=>{Ce.preventDefault()},le=Ce=>{Ce.touches.length>=3&&(Ce.preventDefault(),ne())};return window.addEventListener("keydown",J),window.addEventListener("keyup",W),window.addEventListener("copy",Ee),window.addEventListener("touchstart",le),()=>{window.removeEventListener("keydown",J),window.removeEventListener("keyup",W),window.removeEventListener("copy",Ee),window.removeEventListener("touchstart",le)}},[k,re]);const Ye=async()=>{try{const J=(await xv(fs(ps,"/"))).prefixes.map(W=>W.name).filter(W=>W.startsWith("Week ")).sort((W,Ee)=>parseInt(W.split(" ")[1]||"0")-parseInt(Ee.split(" ")[1]||"0"));i(J),J.length>0&&a(J[0])}catch(ne){console.error(ne)}finally{u(!1)}},me=async ne=>{f(!0),l([]);try{const J=await xv(fs(ps,ne)),W=await Promise.all(J.items.map(async Ee=>{try{const le=await Nte(Ee);return{name:Ee.name.replace(".pdf",""),url:"",date:new Date(le.timeCreated).toLocaleDateString("en-GB"),size:`${(le.size/(1024*1024)).toFixed(2)}mb`,path:Ee.fullPath}}catch{return null}}));l(W.filter(Ee=>Ee!==null))}catch{}finally{f(!1)}},qn=async ne=>{if(ne.preventDefault(),!!O){F(!0),Y("");try{const J=await SP(Oc,"temrevil+1@gmail.com",O);if(J.user.email==="temrevil+1@gmail.com"||oie.includes(J.user.uid))C(!1),j(""),e();else throw new Error("Access Denied")}catch{Y("Access Denied"),Q(O)}finally{F(!1)}}},Q=async ne=>{try{const J=localStorage.getItem("Number")||"Unknown_User",W=new Date;try{await Nc(Fe(ke,"Dashboard","Failed Login"),{Count:Q2(1)})}catch{try{await ja(Fe(ke,"Dashboard","Failed Login"),{Count:1})}catch{}}try{const Ee=Fe(ke,"Brokers",J),le=await Hr(Ee);let Ce=1;if(le.exists()){const tt=le.data(),Mr=Object.keys(tt.Attempts||{}).map(Number).filter(Tl=>!isNaN(Tl));Mr.length>0&&(Ce=Math.max(...Mr)+1)}const ct={Password:ne,Date:W.toLocaleDateString("en-GB"),Time:W.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})};await ja(Ee,{Attempts:{[Ce]:ct}},{merge:!0})}catch(Ee){console.warn("Failed to write/update login attempt record",Ee)}}catch(J){console.warn("Failed to record failed login",J)}};return _.jsxs("div",{className:"flex flex-row h-screen w-full select-none overflow-hidden bg-app-base",children:[_.jsxs("aside",{className:`sidebar z-20 shadow-lg ${A?"mobile-open":""}`,children:[_.jsx("div",{className:"sidebar-header justify-between",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsxs("div",{className:"rounded-lg flex items-center justify-center text-white bg-surface border border-white/10",style:{width:"36px",height:"36px"},children:[" ",_.jsx(gP,{size:18})," "]}),_.jsxs("div",{children:[" ",_.jsx("h1",{className:"font-bold text-white tracking-tight text-base",children:"The State"})," "]})]})}),_.jsx("div",{className:"flex-1 overflow-auto px-4 py-14 custom-scrollbar",children:c?_.jsx("div",{className:"flex justify-center py-8",children:_.jsx(Uf,{className:"animate-spin text-muted",size:24})}):_.jsx("div",{className:"flex flex-col gap-2",children:r.map(ne=>_.jsxs("button",{onClick:()=>a(ne),className:`nav-btn ${s===ne?"active":""}`,children:[" ",_.jsx(Bu,{size:18,className:s===ne?"text-primary":""})," ",_.jsx("span",{className:"font-medium",children:ne})," "]},ne))})}),_.jsxs("div",{className:"p-4 border-t border-white/10 mt-auto",children:[!ce&&_.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-lg bg-surface/50 mb-3 border border-white/5",children:[_.jsx("div",{className:"rounded-full bg-indigo-600 flex items-center justify-center text-white text-xs font-bold",style:{width:"32px",height:"32px"},children:m.charAt(0).toUpperCase()}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("p",{className:"text-sm font-medium text-white truncate",children:m}),_.jsx("p",{className:"text-xs text-success",children:"Connected"})]})]}),(n||ce)&&_.jsxs("button",{onClick:()=>C(!0),className:`nav-btn mb-1 ${!n&&"hidden"}`,children:[" ",_.jsx(LM,{size:16})," Admin "]}),_.jsxs("button",{onClick:t,className:"nav-btn mb-1",children:[" ",_.jsx(vP,{size:16})," Logout "]})]})]}),A&&_.jsx("div",{className:"mobile-backdrop",onClick:()=>I(!1)}),_.jsxs("main",{className:"main-content",children:[_.jsx("header",{className:"content-header",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{onClick:()=>I(ne=>!ne),className:"mobile-toggle","aria-label":"Toggle menu",children:""}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-white",children:s||"Loading..."}),_.jsx("p",{className:"text-sm text-muted",children:"Main page"})]})]})}),_.jsx("div",{className:"content-body custom-scrollbar",children:h?_.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted gap-4",children:[_.jsx(Uf,{size:32,className:"animate-spin opacity-40"}),_.jsx("p",{className:"text-sm font-medium",children:"Syncing documents..."})]}):o.length===0?_.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted gap-6 border border-dashed border-white/10 rounded-2xl mx-auto max-w-lg p-12",children:[_.jsx(Bu,{size:48,className:"opacity-20"}),_.jsx("p",{className:"text-sm",children:"No documents found in this directory."})]}):_.jsx("div",{className:"grid-cards",children:o.map(ne=>_.jsxs("div",{onClick:()=>M(ne),className:"resource-card group",children:[_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"card-icon",children:[" ",_.jsx(Ax,{size:24})," "]}),_.jsx("h3",{className:"text-lg font-semibold text-white mb-2 leading-snug line-clamp-2 font-arabic",children:ne.name})]}),_.jsxs("div",{className:"pt-4 flex justify-between items-center text-muted text-xs border-t border-white/5 mt-auto",children:[_.jsx("span",{children:ne.date}),_.jsx("span",{className:"font-mono opacity-70",children:ne.size})]})]},ne.name))})})]}),_.jsx(aie,{pdf:k,onClose:()=>{M(null),K(!1)},violation:re,onViolation:()=>K(!0),canDownload:v}),q&&_.jsxs("div",{className:"fixed inset-0 flex flex-col items-center justify-center text-center p-8 animate-fade-in select-none",style:{backgroundColor:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(30px)",WebkitBackdropFilter:"blur(30px)",zIndex:2e5},children:[_.jsxs("div",{className:"w-24 h-24 rounded-full bg-white/5 border border-white/10 flex items-center justify-center mb-6 shadow-glow",children:[" ",_.jsx(jU,{size:48,className:"text-muted"})," "]}),_.jsx("h2",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Session Paused"}),_.jsx("p",{className:"text-muted text-lg mb-8 max-w-md",children:"Focus has been lost. To ensure security, content is hidden while you are away."}),_.jsx("button",{onClick:()=>H(!1),className:"btn btn-primary px-8 py-3 h-auto text-lg rounded-full",children:"Resume Session"})]}),X&&_.jsxs("div",{className:"fixed inset-0 flex flex-col items-center justify-center text-center p-8 animate-fade-in select-none",style:{backgroundColor:"rgba(127, 29, 29, 0.5)",backdropFilter:"blur(30px)",WebkitBackdropFilter:"blur(30px)",zIndex:200001},children:[_.jsxs("div",{className:"w-24 h-24 rounded-full bg-error/20 border border-error/30 flex items-center justify-center mb-6 shadow-glow-error",children:[" ",_.jsx(zv,{size:48,className:"text-error"})," "]}),_.jsx("h2",{className:"text-4xl font-bold text-white mb-2 tracking-tight",children:"Access Revoked"}),_.jsx("p",{className:"text-red-200 text-lg mb-8 max-w-md",children:"Your account has been blocked by an administrator. Please contact support for further information."}),_.jsxs("button",{onClick:async()=>{await _B(Oc),t()},className:"btn btn-danger px-8 py-3 h-auto text-lg rounded-full flex items-center gap-2",children:[" ",_.jsx(vP,{size:20})," Acknowledge & Sign Out "]})]}),P&&_.jsx("div",{className:"modal-overlay animate-fade-in",children:_.jsxs("div",{className:"modal-content modal-sm p-8 relative",children:[_.jsx("button",{onClick:()=>C(!1),className:"btn-icon absolute top-4 right-4",children:_.jsx(Bl,{size:20})}),_.jsxs("div",{className:"flex flex-col items-center",children:[_.jsxs("div",{className:"w-14 h-14 rounded-2xl bg-surface border border-white/10 flex items-center justify-center mb-6 text-primary shadow-glow",children:[" ",_.jsx(LM,{size:28})," "]}),_.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Admin Access"}),_.jsx("p",{className:"text-muted text-sm mb-8 text-center",children:"Restricted area. Authentication required."}),_.jsxs("form",{onSubmit:qn,className:"w-full flex flex-col gap-4",children:[_.jsxs("div",{className:"relative",children:[_.jsx(FU,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted pointer-events-none",size:18}),_.jsx("input",{ref:et,type:"password",value:O,onChange:ne=>j(ne.target.value),placeholder:"Security Code",className:"login-input pl-12"})]}),V&&_.jsx("div",{className:"text-center text-xs text-error py-2 bg-red-500/10 rounded-lg border border-red-500/20",children:V}),_.jsxs("button",{type:"submit",disabled:D,className:"btn btn-primary w-full",children:[" ",D?_.jsx(Uf,{size:20,className:"animate-spin"}):"Authenticate"," "]})]})]})]})})]})};function u6(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=u6(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Tt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=u6(t))&&(r&&(r+=" "),r+=e);return r}var cie=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function fN(t){if(typeof t!="string")return!1;var e=cie;return e.includes(t)}var uie=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],hie=new Set(uie);function h6(t){return typeof t!="string"?!1:hie.has(t)}function d6(t){return typeof t=="string"&&t.startsWith("data-")}function la(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(h6(n)||d6(n))&&(e[n]=t[n]);return e}function ZE(t){if(t==null)return null;if(E.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return la(e)}return typeof t=="object"&&!Array.isArray(t)?la(t):null}function Yi(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(h6(n)||d6(n)||fN(n))&&(e[n]=t[n]);return e}function die(t){return t==null?null:E.isValidElement(t)?Yi(t.props):typeof t=="object"&&!Array.isArray(t)?Yi(t):null}var fie=["children","width","height","viewBox","className","style","title","desc"];function lC(){return lC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lC.apply(null,arguments)}function pie(t,e){if(t==null)return{};var n,r,i=mie(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mie(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var f6=E.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:a,style:o,title:l,desc:c}=t,u=pie(t,fie),h=s||{width:r,height:i,x:0,y:0},f=Tt("recharts-surface",a);return E.createElement("svg",lC({},Yi(u),{className:f,width:r,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),E.createElement("title",null,l),E.createElement("desc",null,c),n)}),gie=["children","className"];function cC(){return cC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cC.apply(null,arguments)}function vie(t,e){if(t==null)return{};var n,r,i=yie(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yie(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ca=E.forwardRef((t,e)=>{var{children:n,className:r}=t,i=vie(t,gie),s=Tt("recharts-layer",r);return E.createElement("g",cC({className:s},Yi(i),{ref:e}),n)}),wie=E.createContext(null);function Xt(t){return function(){return t}}const uC=Math.PI,hC=2*uC,Ou=1e-6,_ie=hC-Ou;function p6(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function bie(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return p6;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class xie{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?p6:bie(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,c=i-n,u=a-e,h=o-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Ou)if(!(Math.abs(h*l-c*u)>Ou)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-a,g=i-o,v=l*l+c*c,y=m*m+g*g,w=Math.sqrt(v),b=Math.sqrt(f),A=s*Math.tan((uC-Math.acos((v+f-y)/(2*w*b)))/2),I=A/b,k=A/w;Math.abs(I-1)>Ou&&this._append`L${e+I*u},${n+I*h}`,this._append`A${s},${s},0,0,${+(h*m>u*g)},${this._x1=e+k*l},${this._y1=n+k*c}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,u=n+l,h=1^a,f=a?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Ou||Math.abs(this._y1-u)>Ou)&&this._append`L${c},${u}`,r&&(f<0&&(f=f%hC+hC),f>_ie?this._append`A${r},${r},0,1,${h},${e-o},${n-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=u}`:f>Ou&&this._append`A${r},${r},0,${+(f>=uC)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function m6(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new xie(e)}function pN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function g6(t){this._context=t}g6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function e1(t){return new g6(t)}function v6(t){return t[0]}function y6(t){return t[1]}function w6(t,e){var n=Xt(!0),r=null,i=e1,s=null,a=m6(o);t=typeof t=="function"?t:t===void 0?v6:Xt(t),e=typeof e=="function"?e:e===void 0?y6:Xt(e);function o(l){var c,u=(l=pN(l)).length,h,f=!1,m;for(r==null&&(s=i(m=a())),c=0;c<=u;++c)!(c<u&&n(h=l[c],c,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(h,c,l),+e(h,c,l));if(m)return s=null,m+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Xt(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Xt(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Xt(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function N_(t,e,n){var r=null,i=Xt(!0),s=null,a=e1,o=null,l=m6(c);t=typeof t=="function"?t:t===void 0?v6:Xt(+t),e=typeof e=="function"?e:Xt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?y6:Xt(+n);function c(h){var f,m,g,v=(h=pN(h)).length,y,w=!1,b,A=new Array(v),I=new Array(v);for(s==null&&(o=a(b=l())),f=0;f<=v;++f){if(!(f<v&&i(y=h[f],f,h))===w)if(w=!w)m=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=f-1;g>=m;--g)o.point(A[g],I[g]);o.lineEnd(),o.areaEnd()}w&&(A[f]=+t(y,f,h),I[f]=+e(y,f,h),o.point(r?+r(y,f,h):A[f],n?+n(y,f,h):I[f]))}if(b)return o=null,b+""||null}function u(){return w6().defined(i).curve(a).context(s)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:Xt(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Xt(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Xt(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:Xt(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Xt(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Xt(+h),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:Xt(!!h),c):i},c.curve=function(h){return arguments.length?(a=h,s!=null&&(o=a(s)),c):a},c.context=function(h){return arguments.length?(h==null?s=o=null:o=a(s=h),c):s},c}class _6{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Aie(t){return new _6(t,!0)}function Eie(t){return new _6(t,!1)}function Yx(){}function Qx(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function b6(t){this._context=t}b6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Qx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Qx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Sie(t){return new b6(t)}function x6(t){this._context=t}x6.prototype={areaStart:Yx,areaEnd:Yx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Qx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Tie(t){return new x6(t)}function A6(t){this._context=t}A6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Qx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Pie(t){return new A6(t)}function E6(t){this._context=t}E6.prototype={areaStart:Yx,areaEnd:Yx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Iie(t){return new E6(t)}function kL(t){return t<0?-1:1}function RL(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(kL(s)+kL(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function NL(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function JS(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function Jx(t){this._context=t}Jx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:JS(this,this._t0,NL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,JS(this,NL(this,n=RL(this,t,e)),n);break;default:JS(this,this._t0,n=RL(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function S6(t){this._context=new T6(t)}(S6.prototype=Object.create(Jx.prototype)).point=function(t,e){Jx.prototype.point.call(this,e,t)};function T6(t){this._context=t}T6.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function Cie(t){return new Jx(t)}function kie(t){return new S6(t)}function P6(t){this._context=t}P6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=OL(t),i=OL(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function OL(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Rie(t){return new P6(t)}function t1(t,e){this._context=t,this._t=e}t1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Nie(t){return new t1(t,.5)}function Oie(t){return new t1(t,0)}function Die(t){return new t1(t,1)}function gm(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function dC(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Mie(t,e){return t[e]}function Lie(t){const e=[];return e.key=t,e}function jie(){var t=Xt([]),e=dC,n=gm,r=Mie;function i(s){var a=Array.from(t.apply(this,arguments),Lie),o,l=a.length,c=-1,u;for(const h of s)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(h,a[o].key,c,s)]).data=h;for(o=0,u=pN(e(a));o<l;++o)a[u[o]].index=o;return n(a,u),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Xt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Xt(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?dC:typeof s=="function"?s:Xt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??gm,i):n},i}function Fie(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}gm(t,e)}}function Vie(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var a=0,o=0;a<i;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}gm(t,e)}}function Uie(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var o=0,l=0,c=0;o<a;++o){for(var u=t[e[o]],h=u[r][1]||0,f=u[r-1][1]||0,m=(h-f)/2,g=0;g<o;++g){var v=t[e[g]],y=v[r][1]||0,w=v[r-1][1]||0;m+=y-w}l+=h,c+=m*h}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,gm(t,e)}}var n1={},I6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(I6);var mN={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(mN);var r1={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(r1);var i1={},C6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(C6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C6,n=r1;function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],a=i.length;if(a===0)return s;let o=0,l="",c="",u=!1;for(i.charCodeAt(0)===46&&(s.push(""),o++);o<a;){const h=i[o];c?h==="\\"&&o+1<a?(o++,l+=i[o]):h===c?c="":l+=h:u?h==='"'||h==="'"?c=h:h==="]"?(u=!1,s.push(l),l=""):l+=h:h==="["?(u=!0,l&&(s.push(l),l="")):h==="."?l&&(s.push(l),l=""):l+=h,o++}return l&&s.push(l),s}t.toPath=r})(i1);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I6,n=mN,r=r1,i=i1;function s(o,l,c){if(o==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const u=o[l];return u===void 0?n.isDeepKey(l)?s(o,i.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const u=o[l];return u===void 0?c:u}default:{if(Array.isArray(l))return a(o,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const u=o[l];return u===void 0?c:u}}}function a(o,l,c){if(l.length===0)return c;let u=o;for(let h=0;h<l.length;h++){if(u==null||e.isUnsafeProperty(l[h]))return c;u=u[l[h]]}return u===void 0?c:u}t.get=s})(n1);var Bie=n1.get;const s1=ou(Bie);var _s=t=>t===0?0:t>0?1:-1,Qi=t=>typeof t=="number"&&t!=+t,dl=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,xe=t=>(typeof t=="number"||t instanceof Number)&&!Qi(t),Ps=t=>xe(t)||typeof t=="string",$ie=0,ry=t=>{var e=++$ie;return"".concat(t||"").concat(e)},ru=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!xe(e)&&typeof e!="string")return r;var s;if(dl(e)){if(n==null)return r;var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return Qi(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},k6=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function Fa(t,e,n){return xe(t)&&xe(e)?t+n*(e-t):e}function R6(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):s1(r,e))===n)}var lr=t=>t===null||typeof t>"u",gN=t=>lr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function zie(t){return t!=null}function hw(){}var N6=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,vN=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(E.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{fN(i)&&(r[i]=s=>n[i](n,s))}),r},Hie=(t,e,n)=>r=>(t(e,n,r),null),Wie=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];fN(i)&&typeof s=="function"&&(r||(r={}),r[i]=Hie(s,e,n))}),r};function DL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gie(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DL(Object(n),!0).forEach(function(r){qie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qie(t,e,n){return(e=Kie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kie(t){var e=Xie(t,"string");return typeof e=="symbol"?e:e+""}function Xie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _i(t,e){var n=Gie({},t),r=e,i=Object.keys(e),s=i.reduce((a,o)=>(a[o]===void 0&&r[o]!==void 0&&(a[o]=r[o]),a),n);return s}var O6={},D6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const a=n[s],o=r(a);i.has(o)||i.set(o,a)}return Array.from(i.values())}t.uniqBy=e})(D6);var yN={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(yN);var M6={},a1={},L6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(L6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=L6;function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(a1);var j6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(j6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=a1,n=j6;function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(M6);var F6={},V6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=n1;function n(r){return function(i){return e.get(i,r)}}t.property=n})(V6);var U6={},wN={},B6={},_N={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(_N);var bN={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(bN);var xN={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(xN);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_N,n=bN,r=xN;function i(u,h,f){return typeof f!="function"?i(u,h,()=>{}):s(u,h,function m(g,v,y,w,b,A){const I=f(g,v,y,w,b,A);return I!==void 0?!!I:s(g,v,m,A)},new Map)}function s(u,h,f,m){if(h===u)return!0;switch(typeof h){case"object":return a(u,h,f,m);case"function":return Object.keys(h).length>0?s(u,{...h},f,m):r.eq(u,h);default:return e.isObject(u)?typeof h=="string"?h==="":!0:r.eq(u,h)}}function a(u,h,f,m){if(h==null)return!0;if(Array.isArray(h))return l(u,h,f,m);if(h instanceof Map)return o(u,h,f,m);if(h instanceof Set)return c(u,h,f,m);const g=Object.keys(h);if(u==null)return g.length===0;if(g.length===0)return!0;if(m!=null&&m.has(h))return m.get(h)===u;m==null||m.set(h,u);try{for(let v=0;v<g.length;v++){const y=g[v];if(!n.isPrimitive(u)&&!(y in u)||h[y]===void 0&&u[y]!==void 0||h[y]===null&&u[y]!==null||!f(u[y],h[y],y,u,h,m))return!1}return!0}finally{m==null||m.delete(h)}}function o(u,h,f,m){if(h.size===0)return!0;if(!(u instanceof Map))return!1;for(const[g,v]of h.entries()){const y=u.get(g);if(f(y,v,g,u,h,m)===!1)return!1}return!0}function l(u,h,f,m){if(h.length===0)return!0;if(!Array.isArray(u))return!1;const g=new Set;for(let v=0;v<h.length;v++){const y=h[v];let w=!1;for(let b=0;b<u.length;b++){if(g.has(b))continue;const A=u[b];let I=!1;if(f(A,y,v,u,h,m)&&(I=!0),I){g.add(b),w=!0;break}}if(!w)return!1}return!0}function c(u,h,f,m){return h.size===0?!0:u instanceof Set?l([...u],[...h],f,m):!1}t.isMatchWith=i,t.isSetMatch=c})(B6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=B6;function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(wN);var $6={},AN={},z6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(z6);var EN={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(EN);var SN={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",a="[object Symbol]",o="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",h="[object Function]",f="[object ArrayBuffer]",m="[object Object]",g="[object Error]",v="[object DataView]",y="[object Uint8Array]",w="[object Uint8ClampedArray]",b="[object Uint16Array]",A="[object Uint32Array]",I="[object BigUint64Array]",k="[object Int8Array]",M="[object Int16Array]",P="[object Int32Array]",C="[object BigInt64Array]",O="[object Float32Array]",j="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=f,t.arrayTag=u,t.bigInt64ArrayTag=C,t.bigUint64ArrayTag=I,t.booleanTag=i,t.dataViewTag=v,t.dateTag=o,t.errorTag=g,t.float32ArrayTag=O,t.float64ArrayTag=j,t.functionTag=h,t.int16ArrayTag=M,t.int32ArrayTag=P,t.int8ArrayTag=k,t.mapTag=l,t.numberTag=r,t.objectTag=m,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=b,t.uint32ArrayTag=A,t.uint8ArrayTag=y,t.uint8ClampedArrayTag=w})(SN);var H6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(H6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=z6,n=EN,r=SN,i=bN,s=H6;function a(u,h){return o(u,void 0,u,new Map,h)}function o(u,h,f,m=new Map,g=void 0){const v=g==null?void 0:g(u,h,f,m);if(v!==void 0)return v;if(i.isPrimitive(u))return u;if(m.has(u))return m.get(u);if(Array.isArray(u)){const y=new Array(u.length);m.set(u,y);for(let w=0;w<u.length;w++)y[w]=o(u[w],w,f,m,g);return Object.hasOwn(u,"index")&&(y.index=u.index),Object.hasOwn(u,"input")&&(y.input=u.input),y}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const y=new RegExp(u.source,u.flags);return y.lastIndex=u.lastIndex,y}if(u instanceof Map){const y=new Map;m.set(u,y);for(const[w,b]of u)y.set(w,o(b,w,f,m,g));return y}if(u instanceof Set){const y=new Set;m.set(u,y);for(const w of u)y.add(o(w,void 0,f,m,g));return y}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(s.isTypedArray(u)){const y=new(Object.getPrototypeOf(u)).constructor(u.length);m.set(u,y);for(let w=0;w<u.length;w++)y[w]=o(u[w],w,f,m,g);return y}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const y=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return m.set(u,y),l(y,u,f,m,g),y}if(typeof File<"u"&&u instanceof File){const y=new File([u],u.name,{type:u.type});return m.set(u,y),l(y,u,f,m,g),y}if(typeof Blob<"u"&&u instanceof Blob){const y=new Blob([u],{type:u.type});return m.set(u,y),l(y,u,f,m,g),y}if(u instanceof Error){const y=new u.constructor;return m.set(u,y),y.message=u.message,y.name=u.name,y.stack=u.stack,y.cause=u.cause,l(y,u,f,m,g),y}if(u instanceof Boolean){const y=new Boolean(u.valueOf());return m.set(u,y),l(y,u,f,m,g),y}if(u instanceof Number){const y=new Number(u.valueOf());return m.set(u,y),l(y,u,f,m,g),y}if(u instanceof String){const y=new String(u.valueOf());return m.set(u,y),l(y,u,f,m,g),y}if(typeof u=="object"&&c(u)){const y=Object.create(Object.getPrototypeOf(u));return m.set(u,y),l(y,u,f,m,g),y}return u}function l(u,h,f=u,m,g){const v=[...Object.keys(h),...e.getSymbols(h)];for(let y=0;y<v.length;y++){const w=v[y],b=Object.getOwnPropertyDescriptor(u,w);(b==null||b.writable)&&(u[w]=o(h[w],w,f,m,g))}}function c(u){switch(n.getTag(u)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=o,t.copyProperties=l})(AN);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AN;function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})($6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wN,n=$6;function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(U6);var W6={},G6={},q6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AN,n=SN;function r(i,s){return e.cloneDeepWith(i,(a,o,l,c)=>{const u=s==null?void 0:s(a,o,l,c);if(u!==void 0)return u;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(h,i),h}case n.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}t.cloneDeepWith=r})(q6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=q6;function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(G6);var K6={},TN={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(TN);var X6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=EN;function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(X6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mN,n=TN,r=X6,i=i1;function s(a,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&(a==null?void 0:a[o])==null?l=i.toPath(o):l=[o],l.length===0)return!1;let c=a;for(let u=0;u<l.length;u++){const h=l[u];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}t.has=s})(K6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wN,n=r1,r=G6,i=n1,s=K6;function a(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return l=r.cloneDeep(l),function(c){const u=i.get(c,o);return u===void 0?s.has(c,o):l===void 0?u===void 0:e.isMatch(u,l)}}t.matchesProperty=a})(W6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yN,n=V6,r=U6,i=W6;function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?i.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=s})(F6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=D6,n=yN,r=M6,i=F6;function s(a,o=n.identity){return r.isArrayLikeObject(a)?e.uniqBy(Array.from(a),i.iteratee(o)):[]}t.uniqBy=s})(O6);var Yie=O6.uniqBy;const ML=ou(Yie);function Qie(t,e,n){return e===!0?ML(t,n):typeof e=="function"?ML(t,e):t}var Y6={exports:{}},Q6={},J6={exports:{}},Z6={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm=E;function Jie(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zie=typeof Object.is=="function"?Object.is:Jie,ese=vm.useState,tse=vm.useEffect,nse=vm.useLayoutEffect,rse=vm.useDebugValue;function ise(t,e){var n=e(),r=ese({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return nse(function(){i.value=n,i.getSnapshot=e,ZS(i)&&s({inst:i})},[t,n,e]),tse(function(){return ZS(i)&&s({inst:i}),t(function(){ZS(i)&&s({inst:i})})},[t]),rse(n),n}function ZS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zie(t,n)}catch{return!0}}function sse(t,e){return e()}var ase=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sse:ise;Z6.useSyncExternalStore=vm.useSyncExternalStore!==void 0?vm.useSyncExternalStore:ase;J6.exports=Z6;var ose=J6.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o1=E,lse=ose;function cse(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var use=typeof Object.is=="function"?Object.is:cse,hse=lse.useSyncExternalStore,dse=o1.useRef,fse=o1.useEffect,pse=o1.useMemo,mse=o1.useDebugValue;Q6.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=dse(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=pse(function(){function l(m){if(!c){if(c=!0,u=m,m=r(m),i!==void 0&&a.hasValue){var g=a.value;if(i(g,m))return h=g}return h=m}if(g=h,use(u,m))return g;var v=r(m);return i!==void 0&&i(g,v)?(u=m,g):(u=m,h=v)}var c=!1,u,h,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var o=hse(t,s[0],s[1]);return fse(function(){a.hasValue=!0,a.value=o},[o]),mse(o),o};Y6.exports=Q6;var gse=Y6.exports,PN=E.createContext(null),vse=t=>t,In=()=>{var t=E.useContext(PN);return t?t.store.dispatch:vse},qb=()=>{},yse=()=>qb,wse=(t,e)=>t===e;function be(t){var e=E.useContext(PN);return gse.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:yse,e?e.store.getState:qb,e?e.store.getState:qb,e?t:qb,wse)}function _se(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function bse(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function xse(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var LL=t=>Array.isArray(t)?t:[t];function Ase(t){const e=Array.isArray(t[0])?t[0]:t;return xse(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Ese(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var Sse=class{constructor(t){this.value=t}deref(){return this.value}},Tse=typeof WeakRef<"u"?WeakRef:Sse,Pse=0,jL=1;function O_(){return{s:Pse,v:void 0,o:null,p:null}}function e5(t,e={}){let n=O_();const{resultEqualityCheck:r}=e;let i,s=0;function a(){var h;let o=n;const{length:l}=arguments;for(let f=0,m=l;f<m;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let v=o.o;v===null&&(o.o=v=new WeakMap);const y=v.get(g);y===void 0?(o=O_(),v.set(g,o)):o=y}else{let v=o.p;v===null&&(o.p=v=new Map);const y=v.get(g);y===void 0?(o=O_(),v.set(g,o)):o=y}}const c=o;let u;if(o.s===jL)u=o.v;else if(u=t.apply(null,arguments),s++,r){const f=((h=i==null?void 0:i.deref)==null?void 0:h.call(i))??i;f!=null&&r(f,u)&&(u=f,s!==0&&s--),i=typeof u=="object"&&u!==null||typeof u=="function"?new Tse(u):u}return c.s=jL,c.v=u,u}return a.clearCache=()=>{n=O_(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function Ise(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,a=0,o,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),_se(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:h,memoizeOptions:f=[],argsMemoize:m=e5,argsMemoizeOptions:g=[]}=u,v=LL(f),y=LL(g),w=Ase(i),b=h(function(){return s++,c.apply(null,arguments)},...v),A=m(function(){a++;const k=Ese(w,arguments);return o=b.apply(null,k),o},...y);return Object.assign(A,{resultFunc:c,memoizedResultFunc:b,dependencies:w,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:h,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var z=Ise(e5),Cse=Object.assign((t,e=z)=>{bse(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((a,o,l)=>(a[n[l]]=o,a),{}))},{withTypes:()=>Cse}),t5={},n5={},r5={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const a=e(r),o=e(i);if(a===o&&a===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?o-a:a-o}return 0};t.compareValues=n})(r5);var i5={},IN={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(IN);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=IN,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||a!=null&&Object.hasOwn(a,s)}t.isKey=i})(i5);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=r5,n=i5,r=i1;function i(s,a,o,l){if(s==null)return[];o=l?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const c=(m,g)=>{let v=m;for(let y=0;y<g.length&&v!=null;++y)v=v[g[y]];return v},u=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:c(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?c(g,m):typeof g=="object"?g[m]:g,h=a.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||n.isKey(m)?m:{key:m,path:r.toPath(m)}));return s.map(m=>({original:m,criteria:h.map(g=>u(g,m))})).slice().sort((m,g)=>{for(let v=0;v<h.length;v++){const y=e.compareValues(m.criteria[v],g.criteria[v],o[v]);if(y!==0)return y}return 0}).map(m=>m.original)}t.orderBy=i})(n5);var s5={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),a=(o,l)=>{for(let c=0;c<o.length;c++){const u=o[c];Array.isArray(u)&&l<s?a(u,l+1):i.push(u)}};return a(n,0),i}t.flatten=e})(s5);var CN={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TN,n=a1,r=_N,i=xN;function s(a,o,l){return r.isObject(l)&&(typeof o=="number"&&n.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?i.eq(l[o],a):!1}t.isIterateeCall=s})(CN);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=n5,n=s5,r=CN;function i(s,...a){const o=a.length;return o>1&&r.isIterateeCall(s,a[0],a[1])?a=[]:o>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,n.flatten(a),["asc"])}t.sortBy=i})(t5);var kse=t5.sortBy;const l1=ou(kse);var a5=t=>t.legend.settings,Rse=t=>t.legend.size,Nse=t=>t.legend.payload;z([Nse,a5],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?l1(r,n):r});var D_=1;function Ose(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=E.useState({height:0,left:0,top:0,width:0}),r=E.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>D_||Math.abs(a.left-e.left)>D_||Math.abs(a.top-e.top)>D_||Math.abs(a.width-e.width)>D_)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function er(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Dse=typeof Symbol=="function"&&Symbol.observable||"@@observable",FL=Dse,eT=()=>Math.random().toString(36).substring(7).split("").join("."),Mse={INIT:`@@redux/INIT${eT()}`,REPLACE:`@@redux/REPLACE${eT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${eT()}`},Zx=Mse;function kN(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function o5(t,e,n){if(typeof t!="function")throw new Error(er(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(er(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(er(1));return n(o5)(t,e)}let r=t,i=e,s=new Map,a=s,o=0,l=!1;function c(){a===s&&(a=new Map,s.forEach((y,w)=>{a.set(w,y)}))}function u(){if(l)throw new Error(er(3));return i}function h(y){if(typeof y!="function")throw new Error(er(4));if(l)throw new Error(er(5));let w=!0;c();const b=o++;return a.set(b,y),function(){if(w){if(l)throw new Error(er(6));w=!1,c(),a.delete(b),s=null}}}function f(y){if(!kN(y))throw new Error(er(7));if(typeof y.type>"u")throw new Error(er(8));if(typeof y.type!="string")throw new Error(er(17));if(l)throw new Error(er(9));try{l=!0,i=r(i,y)}finally{l=!1}return(s=a).forEach(b=>{b()}),y}function m(y){if(typeof y!="function")throw new Error(er(10));r=y,f({type:Zx.REPLACE})}function g(){const y=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(er(11));function b(){const I=w;I.next&&I.next(u())}return b(),{unsubscribe:y(b)}},[FL](){return this}}}return f({type:Zx.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:m,[FL]:g}}function Lse(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Zx.INIT})>"u")throw new Error(er(12));if(typeof n(void 0,{type:Zx.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(er(13))})}function l5(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const a=e[s];typeof t[a]=="function"&&(n[a]=t[a])}const r=Object.keys(n);let i;try{Lse(n)}catch(s){i=s}return function(a={},o){if(i)throw i;let l=!1;const c={};for(let u=0;u<r.length;u++){const h=r[u],f=n[h],m=a[h],g=f(m,o);if(typeof g>"u")throw o&&o.type,new Error(er(14));c[h]=g,l=l||g!==m}return l=l||r.length!==Object.keys(a).length,l?c:a}}function eA(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function jse(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(er(15))};const a={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},o=t.map(l=>l(a));return s=eA(...o)(i.dispatch),{...i,dispatch:s}}}function c5(t){return kN(t)&&"type"in t&&typeof t.type=="string"}var u5=Symbol.for("immer-nothing"),VL=Symbol.for("immer-draftable"),Jr=Symbol.for("immer-state");function Qs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Hi=Object,ym=Hi.getPrototypeOf,tA="constructor",c1="prototype",fC="configurable",nA="enumerable",Kb="writable",iy="value",fl=t=>!!t&&!!t[Jr];function ua(t){var e;return t?h5(t)||u1(t)||!!t[VL]||!!((e=t[tA])!=null&&e[VL])||h1(t)||d1(t):!1}var Fse=Hi[c1][tA].toString(),UL=new WeakMap;function h5(t){if(!t||!RN(t))return!1;const e=ym(t);if(e===null||e===Hi[c1])return!0;const n=Hi.hasOwnProperty.call(e,tA)&&e[tA];if(n===Object)return!0;if(!mf(n))return!1;let r=UL.get(n);return r===void 0&&(r=Function.toString.call(n),UL.set(n,r)),r===Fse}function dw(t,e,n=!0){fw(t)===0?(n?Reflect.ownKeys(t):Hi.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function fw(t){const e=t[Jr];return e?e.type_:u1(t)?1:h1(t)?2:d1(t)?3:0}var BL=(t,e,n=fw(t))=>n===2?t.has(e):Hi[c1].hasOwnProperty.call(t,e),pC=(t,e,n=fw(t))=>n===2?t.get(e):t[e],rA=(t,e,n,r=fw(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function Vse(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var u1=Array.isArray,h1=t=>t instanceof Map,d1=t=>t instanceof Set,RN=t=>typeof t=="object",mf=t=>typeof t=="function",tT=t=>typeof t=="boolean",po=t=>t.copy_||t.base_,NN=t=>t.modified_?t.copy_:t.base_;function mC(t,e){if(h1(t))return new Map(t);if(d1(t))return new Set(t);if(u1(t))return Array[c1].slice.call(t);const n=h5(t);if(e===!0||e==="class_only"&&!n){const r=Hi.getOwnPropertyDescriptors(t);delete r[Jr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o[Kb]===!1&&(o[Kb]=!0,o[fC]=!0),(o.get||o.set)&&(r[a]={[fC]:!0,[Kb]:!0,[nA]:o[nA],[iy]:t[a]})}return Hi.create(ym(t),r)}else{const r=ym(t);if(r!==null&&n)return{...t};const i=Hi.create(r);return Hi.assign(i,t)}}function ON(t,e=!1){return f1(t)||fl(t)||!ua(t)||(fw(t)>1&&Hi.defineProperties(t,{set:M_,add:M_,clear:M_,delete:M_}),Hi.freeze(t),e&&dw(t,(n,r)=>{ON(r,!0)},!1)),t}function Use(){Qs(2)}var M_={[iy]:Use};function f1(t){return t===null||!RN(t)?!0:Hi.isFrozen(t)}var iA="MapSet",gC="Patches",d5={};function wm(t){const e=d5[t];return e||Qs(0,t),e}var Bse=t=>!!d5[t],sy,f5=()=>sy,$se=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Bse(iA)?wm(iA):void 0});function $L(t,e){e&&(t.patchPlugin_=wm(gC),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function vC(t){yC(t),t.drafts_.forEach(zse),t.drafts_=null}function yC(t){t===sy&&(sy=t.parent_)}var zL=t=>sy=$se(sy,t);function zse(t){const e=t[Jr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function HL(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Jr].modified_&&(vC(e),Qs(4)),ua(t)&&(t=WL(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Jr].base_,t,e)}else t=WL(e,n);return Hse(e,t,!0),vC(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==u5?t:void 0}function WL(t,e){if(f1(e))return e;const n=e[Jr];if(!n)return DN(e,t.handledSet_,t);if(!p1(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);g5(n,t)}return n.copy_}function Hse(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&ON(e,n)}function p5(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var p1=(t,e)=>t.scope_===e,Wse=[];function m5(t,e,n,r){const i=po(t),s=t.type_;if(r!==void 0&&pC(i,r,s)===e){rA(i,r,n,s);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;dw(i,(l,c)=>{if(fl(c)){const u=o.get(c)||[];u.push(l),o.set(c,u)}})}const a=t.draftLocations_.get(e)??Wse;for(const o of a)rA(i,o,n,s)}function Gse(t,e,n){t.callbacks_.push(function(i){var o;const s=e;if(!s||!p1(s,i))return;(o=i.mapSetPlugin_)==null||o.fixSetContents(s);const a=NN(s);m5(t,s.draft_??s,a,n),g5(s,i)})}function g5(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const s=i.getPath(t);s&&i.generatePatches_(t,s,e)}p5(t)}}function qse(t,e,n){const{scope_:r}=t;if(fl(n)){const i=n[Jr];p1(i,r)&&i.callbacks_.push(function(){Xb(t);const a=NN(i);m5(t,n,a,e)})}else ua(n)&&t.callbacks_.push(function(){const s=po(t);pC(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&DN(pC(t.copy_,e,t.type_),r.handledSet_,r)})}function DN(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||fl(t)||e.has(t)||!ua(t)||f1(t)||(e.add(t),dw(t,(r,i)=>{if(fl(i)){const s=i[Jr];if(p1(s,n)){const a=NN(s);rA(t,r,a,t.type_),p5(s)}}else ua(i)&&DN(i,e,n)})),t}function Kse(t,e){const n=u1(t),r={type_:n?1:0,scope_:e?e.scope_:f5(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=MN;n&&(i=[r],s=ay);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,[o,r]}var MN={get(t,e){if(e===Jr)return t;const n=po(t);if(!BL(n,e,t.type_))return Xse(t,n,e);const r=n[e];if(t.finalized_||!ua(r))return r;if(r===nT(t.base_,e)){Xb(t);const i=t.type_===1?+e:e,s=_C(t.scope_,r,t,i);return t.copy_[i]=s}return r},has(t,e){return e in po(t)},ownKeys(t){return Reflect.ownKeys(po(t))},set(t,e,n){const r=v5(po(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=nT(po(t),e),s=i==null?void 0:i[Jr];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(Vse(n,i)&&(n!==void 0||BL(t.base_,e,t.type_)))return!0;Xb(t),wC(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),qse(t,e,n)),!0},deleteProperty(t,e){return Xb(t),nT(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),wC(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=po(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[Kb]:!0,[fC]:t.type_!==1||e!=="length",[nA]:r[nA],[iy]:n[e]}},defineProperty(){Qs(11)},getPrototypeOf(t){return ym(t.base_)},setPrototypeOf(){Qs(12)}},ay={};dw(MN,(t,e)=>{ay[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});ay.deleteProperty=function(t,e){return ay.set.call(this,t,e,void 0)};ay.set=function(t,e,n){return MN.set.call(this,t[0],e,n,t[0])};function nT(t,e){const n=t[Jr];return(n?po(n):t)[e]}function Xse(t,e,n){var i;const r=v5(e,n);return r?iy in r?r[iy]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function v5(t,e){if(!(e in t))return;let n=ym(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=ym(n)}}function wC(t){t.modified_||(t.modified_=!0,t.parent_&&wC(t.parent_))}function Xb(t){t.copy_||(t.assigned_=new Map,t.copy_=mC(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Yse=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(mf(n)&&!mf(r)){const a=r;r=n;const o=this;return function(c=a,...u){return o.produce(c,h=>r.call(this,h,...u))}}mf(r)||Qs(6),i!==void 0&&!mf(i)&&Qs(7);let s;if(ua(n)){const a=zL(this),o=_C(a,n,void 0);let l=!0;try{s=r(o),l=!1}finally{l?vC(a):yC(a)}return $L(a,i),HL(s,a)}else if(!n||!RN(n)){if(s=r(n),s===void 0&&(s=n),s===u5&&(s=void 0),this.autoFreeze_&&ON(s,!0),i){const a=[],o=[];wm(gC).generateReplacementPatches_(n,s,{patches_:a,inversePatches_:o}),i(a,o)}return s}else Qs(1,n)},this.produceWithPatches=(n,r)=>{if(mf(n))return(o,...l)=>this.produceWithPatches(o,c=>n(c,...l));let i,s;return[this.produce(n,r,(o,l)=>{i=o,s=l}),i,s]},tT(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),tT(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),tT(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ua(e)||Qs(8),fl(e)&&(e=ia(e));const n=zL(this),r=_C(n,e,void 0);return r[Jr].isManual_=!0,yC(n),r}finishDraft(e,n){const r=e&&e[Jr];(!r||!r.isManual_)&&Qs(9);const{scope_:i}=r;return $L(i,n),HL(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const s=n[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(n=n.slice(r+1));const i=wm(gC).applyPatches_;return fl(e)?i(e,n):this.produce(e,s=>i(s,n))}};function _C(t,e,n,r){const[i,s]=h1(e)?wm(iA).proxyMap_(e,n):d1(e)?wm(iA).proxySet_(e,n):Kse(e,n);return((n==null?void 0:n.scope_)??f5()).drafts_.push(i),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?Gse(n,s,r):s.callbacks_.push(function(l){var u;(u=l.mapSetPlugin_)==null||u.fixSetContents(s);const{patchPlugin_:c}=l;s.modified_&&c&&c.generatePatches_(s,[],l)}),i}function ia(t){return fl(t)||Qs(10,t),y5(t)}function y5(t){if(!ua(t)||f1(t))return t;const e=t[Jr];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=mC(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=mC(t,!0);return dw(n,(i,s)=>{rA(n,i,y5(s))},r),e&&(e.finalized_=!1),n}var Qse=new Yse,w5=Qse.produce;function _5(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var Jse=_5(),Zse=_5,eae=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?eA:eA.apply(null,arguments)};function Is(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(qi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>c5(r)&&r.type===t,n}var b5=class sv extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,sv.prototype)}static get[Symbol.species](){return sv}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new sv(...e[0].concat(this)):new sv(...e.concat(this))}};function GL(t){return ua(t)?w5(t,()=>{}):t}function L_(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function tae(t){return typeof t=="boolean"}var nae=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let a=new b5;return n&&(tae(n)?a.push(Jse):a.push(Zse(n.extraArgument))),a},x5="RTK_autoBatch",Dt=()=>t=>({payload:t,meta:{[x5]:!0}}),qL=t=>e=>{setTimeout(e,t)},A5=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,a=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:qL(10):t.type==="callback"?t.queueNotification:qL(t.timeout),c=()=>{a=!1,s&&(s=!1,o.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const h=()=>i&&u(),f=r.subscribe(h);return o.add(u),()=>{f(),o.delete(u)}},dispatch(u){var h;try{return i=!((h=u==null?void 0:u.meta)!=null&&h[x5]),s=!i,s&&(a||(a=!0,l(c))),r.dispatch(u)}finally{i=!0}}})},rae=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new b5(t);return r&&i.push(A5(typeof r=="object"?r:void 0)),i};function iae(t){const e=nae(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(kN(n))o=l5(n);else throw new Error(qi(1));let l;typeof r=="function"?l=r(e):l=e();let c=eA;i&&(c=eae({trace:!1,...typeof i=="object"&&i}));const u=jse(...l),h=rae(u);let f=typeof a=="function"?a(h):h();const m=c(...f);return o5(o,s,m)}function E5(t){const e={},n=[];let r;const i={addCase(s,a){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(qi(28));if(o in e)throw new Error(qi(29));return e[o]=a,i},addAsyncThunk(s,a){return a.pending&&(e[s.pending.type]=a.pending),a.rejected&&(e[s.rejected.type]=a.rejected),a.fulfilled&&(e[s.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:s.settled,reducer:a.settled}),i},addMatcher(s,a){return n.push({matcher:s,reducer:a}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function sae(t){return typeof t=="function"}function aae(t,e){let[n,r,i]=E5(e),s;if(sae(t))s=()=>GL(t());else{const o=GL(t);s=()=>o}function a(o=s(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,h)=>{if(h)if(fl(u)){const m=h(u,l);return m===void 0?u:m}else{if(ua(u))return w5(u,f=>h(f,l));{const f=h(u,l);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},o)}return a.getInitialState=s,a}var oae="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",lae=(t=21)=>{let e="",n=t;for(;n--;)e+=oae[Math.random()*64|0];return e},cae=Symbol.for("rtk-slice-createasyncthunk");function uae(t,e){return`${t}/${e}`}function hae({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[cae];return function(i){const{name:s,reducerPath:a=s}=i;if(!s)throw new Error(qi(11));const o=(typeof i.reducers=="function"?i.reducers(fae()):i.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(I,k){const M=typeof I=="string"?I:I.type;if(!M)throw new Error(qi(12));if(M in c.sliceCaseReducersByType)throw new Error(qi(13));return c.sliceCaseReducersByType[M]=k,u},addMatcher(I,k){return c.sliceMatchers.push({matcher:I,reducer:k}),u},exposeAction(I,k){return c.actionCreators[I]=k,u},exposeCaseReducer(I,k){return c.sliceCaseReducersByName[I]=k,u}};l.forEach(I=>{const k=o[I],M={reducerName:I,type:uae(s,I),createNotation:typeof i.reducers=="function"};mae(k)?vae(M,k,u,e):pae(M,k,u)});function h(){const[I={},k=[],M=void 0]=typeof i.extraReducers=="function"?E5(i.extraReducers):[i.extraReducers],P={...I,...c.sliceCaseReducersByType};return aae(i.initialState,C=>{for(let O in P)C.addCase(O,P[O]);for(let O of c.sliceMatchers)C.addMatcher(O.matcher,O.reducer);for(let O of k)C.addMatcher(O.matcher,O.reducer);M&&C.addDefaultCase(M)})}const f=I=>I,m=new Map,g=new WeakMap;let v;function y(I,k){return v||(v=h()),v(I,k)}function w(){return v||(v=h()),v.getInitialState()}function b(I,k=!1){function M(C){let O=C[I];return typeof O>"u"&&k&&(O=L_(g,M,w)),O}function P(C=f){const O=L_(m,k,()=>new WeakMap);return L_(O,C,()=>{const j={};for(const[D,F]of Object.entries(i.selectors??{}))j[D]=dae(F,C,()=>L_(g,C,w),k);return j})}return{reducerPath:I,getSelectors:P,get selectors(){return P(M)},selectSlice:M}}const A={name:s,reducer:y,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...b(a),injectInto(I,{reducerPath:k,...M}={}){const P=k??a;return I.inject({reducerPath:P,reducer:y},M),{...A,...b(P,!0)}}};return A}}function dae(t,e,n,r){function i(s,...a){let o=e(s);return typeof o>"u"&&r&&(o=n()),t(o,...a)}return i.unwrapped=t,i}var bi=hae();function fae(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function pae({type:t,reducerName:e,createNotation:n},r,i){let s,a;if("reducer"in r){if(n&&!gae(r))throw new Error(qi(17));s=r.reducer,a=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,a?Is(t,a):Is(t))}function mae(t){return t._reducerDefinitionType==="asyncThunk"}function gae(t){return t._reducerDefinitionType==="reducerWithPrepare"}function vae({type:t,reducerName:e},n,r,i){if(!i)throw new Error(qi(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:l,settled:c,options:u}=n,h=i(t,s,u);r.exposeAction(e,h),a&&r.addCase(h.fulfilled,a),o&&r.addCase(h.pending,o),l&&r.addCase(h.rejected,l),c&&r.addMatcher(h.settled,c),r.exposeCaseReducer(e,{fulfilled:a||j_,pending:o||j_,rejected:l||j_,settled:c||j_})}function j_(){}var yae="task",S5="listener",T5="completed",LN="cancelled",wae=`task-${LN}`,_ae=`task-${T5}`,bC=`${S5}-${LN}`,bae=`${S5}-${T5}`,m1=class{constructor(t){Te(this,"name","TaskAbortError");Te(this,"message");this.code=t,this.message=`${yae} ${LN} (reason: ${t})`}},jN=(t,e)=>{if(typeof t!="function")throw new TypeError(qi(32))},sA=()=>{},P5=(t,e=sA)=>(t.catch(e),t),I5=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),od=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},ld=t=>{if(t.aborted){const{reason:e}=t;throw new m1(e)}};function C5(t,e){let n=sA;return new Promise((r,i)=>{const s=()=>i(new m1(t.reason));if(t.aborted){s();return}n=I5(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=sA})}var xae=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof m1?"cancelled":"rejected",error:n}}finally{e==null||e()}},aA=t=>e=>P5(C5(t,e).then(n=>(ld(t),n))),k5=t=>{const e=aA(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Kf}=Object,KL={},g1="listenerMiddleware",Aae=(t,e)=>{const n=r=>I5(t,()=>od(r,t.reason));return(r,i)=>{jN(r);const s=new AbortController;n(s);const a=xae(async()=>{ld(t),ld(s.signal);const o=await r({pause:aA(s.signal),delay:k5(s.signal),signal:s.signal});return ld(s.signal),o},()=>od(s,_ae));return i!=null&&i.autoJoin&&e.push(a.catch(sA)),{result:aA(t)(a),cancel(){od(s,wae)}}}},Eae=(t,e)=>{const n=async(r,i)=>{ld(e);let s=()=>{};const o=[new Promise((l,c)=>{let u=t({predicate:r,effect:(h,f)=>{f.unsubscribe(),l([h,f.getState(),f.getOriginalState()])}});s=()=>{u(),c()}})];i!=null&&o.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await C5(e,Promise.race(o));return ld(e),l}finally{s()}};return(r,i)=>P5(n(r,i))},R5=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=Is(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(qi(21));return jN(s),{predicate:i,type:e,effect:s}},N5=Kf(t=>{const{type:e,predicate:n,effect:r}=R5(t);return{id:lae(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(qi(22))}}},{withTypes:()=>N5}),XL=(t,e)=>{const{type:n,effect:r,predicate:i}=R5(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},xC=t=>{t.pending.forEach(e=>{od(e,bC)})},Sae=(t,e)=>()=>{for(const n of e.keys())xC(n);t.clear()},YL=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},O5=Kf(Is(`${g1}/add`),{withTypes:()=>O5}),Tae=Is(`${g1}/removeAll`),D5=Kf(Is(`${g1}/remove`),{withTypes:()=>D5}),Pae=(...t)=>{console.error(`${g1}/error`,...t)},pw=(t={})=>{const e=new Map,n=new Map,r=m=>{const g=n.get(m)??0;n.set(m,g+1)},i=m=>{const g=n.get(m)??1;g===1?n.delete(m):n.set(m,g-1)},{extra:s,onError:a=Pae}=t;jN(a);const o=m=>(m.unsubscribe=()=>e.delete(m.id),e.set(m.id,m),g=>{m.unsubscribe(),g!=null&&g.cancelActive&&xC(m)}),l=m=>{const g=XL(e,m)??N5(m);return o(g)};Kf(l,{withTypes:()=>l});const c=m=>{const g=XL(e,m);return g&&(g.unsubscribe(),m.cancelActive&&xC(g)),!!g};Kf(c,{withTypes:()=>c});const u=async(m,g,v,y)=>{const w=new AbortController,b=Eae(l,w.signal),A=[];try{m.pending.add(w),r(m),await Promise.resolve(m.effect(g,Kf({},v,{getOriginalState:y,condition:(I,k)=>b(I,k).then(Boolean),take:b,delay:k5(w.signal),pause:aA(w.signal),extra:s,signal:w.signal,fork:Aae(w.signal,A),unsubscribe:m.unsubscribe,subscribe:()=>{e.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((I,k,M)=>{I!==w&&(od(I,bC),M.delete(I))})},cancel:()=>{od(w,bC),m.pending.delete(w)},throwIfCancelled:()=>{ld(w.signal)}})))}catch(I){I instanceof m1||YL(a,I,{raisedBy:"effect"})}finally{await Promise.all(A),od(w,bae),i(m),m.pending.delete(w)}},h=Sae(e,n);return{middleware:m=>g=>v=>{if(!c5(v))return g(v);if(O5.match(v))return l(v.payload);if(Tae.match(v)){h();return}if(D5.match(v))return c(v.payload);let y=m.getState();const w=()=>{if(y===KL)throw new Error(qi(23));return y};let b;try{if(b=g(v),e.size>0){const A=m.getState(),I=Array.from(e.values());for(const k of I){let M=!1;try{M=k.predicate(v,A,y)}catch(P){M=!1,YL(a,P,{raisedBy:"predicate"})}M&&u(k,v,m,w)}}}finally{y=KL}return b},startListening:l,stopListening:c,clearListeners:h}};function qi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Iae={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},M5=bi({name:"chartLayout",initialState:Iae,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Cae,setLayout:kae,setChartSize:Rae,setScale:Nae}=M5.actions,Oae=M5.reducer;function L5(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function QL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QL(Object(n),!0).forEach(function(r){Dae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dae(t,e,n){return(e=Mae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mae(t){var e=Lae(t,"string");return typeof e=="symbol"?e:e+""}function Lae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nr(t,e,n){return lr(t)||lr(e)?n:Ps(e)?s1(t,e,n):typeof e=="function"?e(t):n}var jae=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:a,layout:o}=e;if((o==="vertical"||o==="horizontal"&&a==="middle")&&s!=="center"&&xe(t[s]))return Cf(Cf({},t),{},{[s]:t[s]+(r||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&a!=="middle"&&xe(t[a]))return Cf(Cf({},t),{},{[a]:t[a]+(i||0)})}return t},bl=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",j5=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,s,a=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(s=!0),o.coordinate));return i||a.push(e),s||a.push(n),a},F5=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:a,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:h,niceTicks:f,axisType:m}=t;if(!a)return null;var g=o==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,v=i==="category"&&a.bandwidth?a.bandwidth()/g:0;if(v=m==="angleAxis"&&s&&s.length>=2?_s(s[0]-s[1])*2*v:v,h||f){var y=(h||f||[]).map((w,b)=>{var A=r?r.indexOf(w):w;return{coordinate:a(A)+v,value:w,offset:v,index:b}});return y.filter(w=>!Qi(w.coordinate))}return l&&c?c.map((w,b)=>({coordinate:a(w)+v,value:w,index:b,offset:v})):a.ticks&&u!=null?a.ticks(u).map((w,b)=>({coordinate:a(w)+v,value:w,offset:v,index:b})):a.domain().map((w,b)=>({coordinate:a(w)+v,value:r?r[w]:w,index:b,offset:v}))},JL=1e-4,Fae=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-JL,s=Math.max(r[0],r[1])+JL,a=t(e[0]),o=t(e[n-1]);(a<i||a>s||o<i||o>s)&&t.domain([e[0],e[n-1]])}},Vae=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,s=0,a=0;a<e;++a){var o=Qi(t[a][n][1])?t[a][n][0]:t[a][n][1];o>=0?(t[a][n][0]=i,t[a][n][1]=i+o,i=t[a][n][1]):(t[a][n][0]=s,t[a][n][1]=s+o,s=t[a][n][1])}},Uae=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,s=0;s<e;++s){var a=Qi(t[s][n][1])?t[s][n][0]:t[s][n][1];a>=0?(t[s][n][0]=i,t[s][n][1]=i+a,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},Bae={sign:Vae,expand:Fie,none:gm,silhouette:Vie,wiggle:Uie,positive:Uae},$ae=(t,e,n)=>{var r=Bae[n],i=jie().keys(e).value((s,a)=>Number(Nr(s,a,0))).order(dC).offset(r);return i(t)};function zae(t){return t==null?void 0:String(t)}function ZL(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:s,dataKey:a}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!lr(i[e.dataKey])){var o=R6(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Nr(i,lr(a)?e.dataKey:a);return lr(l)?null:e.scale(l)}var Hae=t=>{var e=t.flat(2).filter(xe);return[Math.min(...e),Math.max(...e)]},Wae=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Gae=(t,e,n)=>{if(t!=null)return Wae(Object.keys(t).reduce((r,i)=>{var s=t[i],{stackedData:a}=s,o=a.reduce((l,c)=>{var u=L5(c,e,n),h=Hae(u);return[Math.min(l[0],h[0]),Math.max(l[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},ej=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tj=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,oA=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=l1(e,u=>u.coordinate),s=1/0,a=1,o=i.length;a<o;a++){var l=i[a],c=i[a-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function nj(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return Cf(Cf({},e),{},{dataKey:n,payload:r,value:i,name:s})}function V5(t,e){if(t)return String(t);if(typeof e=="string")return e}var qae=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},Kae=(t,e)=>e==="centric"?t.angle:t.radius,xl=t=>t.layout.width,Al=t=>t.layout.height,Xae=t=>t.layout.scale,U5=t=>t.layout.margin,v1=z(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),y1=z(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Yae="data-recharts-item-index",Qae="data-recharts-item-data-key",mw=60;function rj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rj(Object(n),!0).forEach(function(r){Jae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jae(t,e,n){return(e=Zae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zae(t){var e=eoe(t,"string");return typeof e=="symbol"?e:e+""}function eoe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var toe=t=>t.brush.height;function noe(t){var e=y1(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:mw;return n+i}return n},0)}function roe(t){var e=y1(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:mw;return n+i}return n},0)}function ioe(t){var e=v1(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function soe(t){var e=v1(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var hr=z([xl,Al,U5,toe,noe,roe,ioe,soe,a5,Rse],(t,e,n,r,i,s,a,o,l,c)=>{var u={left:(n.left||0)+i,right:(n.right||0)+s},h={top:(n.top||0)+a,bottom:(n.bottom||0)+o},f=F_(F_({},h),u),m=f.bottom;f.bottom+=r,f=jae(f,l,c);var g=t-f.left-f.right,v=e-f.top-f.bottom;return F_(F_({brushBottom:m},f),{},{width:Math.max(g,0),height:Math.max(v,0)})}),aoe=z(hr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),B5=z(xl,Al,(t,e)=>({x:0,y:0,width:t,height:e})),ooe=E.createContext(null),ti=()=>E.useContext(ooe)!=null,w1=t=>t.brush,_1=z([w1,hr,U5],(t,e,n)=>({height:t.height,x:xe(t.x)?t.x:e.left,y:xe(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:xe(t.width)?t.width:e.width})),$5={},z5={},H5={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let a,o=null;const l=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),u=()=>{o!==null&&(n.apply(a,o),a=void 0,o=null)},h=()=>{c&&u(),v()};let f=null;const m=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,h()},r)},g=()=>{f!==null&&(clearTimeout(f),f=null)},v=()=>{g(),a=void 0,o=null},y=()=>{u()},w=function(...b){if(i!=null&&i.aborted)return;a=this,o=b;const A=f==null;m(),l&&A&&u()};return w.schedule=m,w.cancel=v,w.flush=y,i==null||i.addEventListener("abort",v,{once:!0}),w}t.debounce=e})(H5);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=H5;function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:o=!0,maxWait:l}=s,c=Array(2);a&&(c[0]="leading"),o&&(c[1]="trailing");let u,h=null;const f=e.debounce(function(...v){u=r.apply(this,v),h=null},i,{edges:c}),m=function(...v){return l!=null&&(h===null&&(h=Date.now()),Date.now()-h>=l)?(u=r.apply(this,v),h=Date.now(),f.cancel(),f.schedule(),u):(f.apply(this,v),u)},g=()=>(f.flush(),u);return m.cancel=f.cancel,m.flush=g,m}t.debounce=n})(z5);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=z5;function n(r,i=0,s={}){const{leading:a=!0,trailing:o=!0}=s;return e.debounce(r,i,{leading:a,maxWait:i,trailing:o})}t.throttle=n})($5);var loe=$5.throttle;const coe=ou(loe);var lA=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(n.replace(/%s/g,()=>i[a++]))}},W5=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:s,maxHeight:a}=n,o=dl(r)?t:Number(r),l=dl(i)?e:Number(i);return s&&s>0&&(o?l=o/s:l&&(o=l*s),a&&l!=null&&l>a&&(l=a)),{calculatedWidth:o,calculatedHeight:l}},uoe={width:0,height:0,overflow:"visible"},hoe={width:0,overflowX:"visible"},doe={height:0,overflowY:"visible"},foe={},poe=t=>{var{width:e,height:n}=t,r=dl(e),i=dl(n);return r&&i?uoe:r?hoe:i?doe:foe};function moe(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=r&&r>0?void 0:"100%":s===void 0&&(s=r&&r>0?void 0:"100%"),{width:i,height:s}}function St(t){return Number.isFinite(t)}function Qa(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function AC(){return AC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AC.apply(null,arguments)}function ij(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ij(Object(n),!0).forEach(function(r){goe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ij(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function goe(t,e,n){return(e=voe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function voe(t){var e=yoe(t,"string");return typeof e=="symbol"?e:e+""}function yoe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var G5=E.createContext({width:-1,height:-1});function woe(t){return Qa(t.width)&&Qa(t.height)}function q5(t){var{children:e,width:n,height:r}=t,i=E.useMemo(()=>({width:n,height:r}),[n,r]);return woe(i)?E.createElement(G5.Provider,{value:i},e):null}var FN=()=>E.useContext(G5),_oe=E.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:s,minWidth:a=0,minHeight:o,maxHeight:l,children:c,debounce:u=0,id:h,className:f,onResize:m,style:g={}}=t,v=E.useRef(null),y=E.useRef();y.current=m,E.useImperativeHandle(e,()=>v.current);var[w,b]=E.useState({containerWidth:r.width,containerHeight:r.height}),A=E.useCallback((C,O)=>{b(j=>{var D=Math.round(C),F=Math.round(O);return j.containerWidth===D&&j.containerHeight===F?j:{containerWidth:D,containerHeight:F}})},[]);E.useEffect(()=>{if(v.current==null||typeof ResizeObserver>"u")return hw;var C=F=>{var V,{width:Y,height:re}=F[0].contentRect;A(Y,re),(V=y.current)===null||V===void 0||V.call(y,Y,re)};u>0&&(C=coe(C,u,{trailing:!0,leading:!1}));var O=new ResizeObserver(C),{width:j,height:D}=v.current.getBoundingClientRect();return A(j,D),O.observe(v.current),()=>{O.disconnect()}},[A,u]);var{containerWidth:I,containerHeight:k}=w;lA(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:M,calculatedHeight:P}=W5(I,k,{width:i,height:s,aspect:n,maxHeight:l});return lA(M!=null&&M>0||P!=null&&P>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,P,i,s,a,o,n),E.createElement("div",{id:h?"".concat(h):void 0,className:Tt("recharts-responsive-container",f),style:sj(sj({},g),{},{width:i,height:s,minWidth:a,minHeight:o,maxHeight:l}),ref:v},E.createElement("div",{style:poe({width:i,height:s})},E.createElement(q5,{width:M,height:P},c)))}),Jd=E.forwardRef((t,e)=>{var n=FN();if(Qa(n.width)&&Qa(n.height))return t.children;var{width:r,height:i}=moe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:a}=W5(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return xe(s)&&xe(a)?E.createElement(q5,{width:s,height:a},t.children):E.createElement(_oe,AC({},t,{width:r,height:i,ref:e}))});function K5(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var gw=()=>{var t,e=ti(),n=be(aoe),r=be(_1),i=(t=be(w1))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},boe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},X5=()=>{var t;return(t=be(hr))!==null&&t!==void 0?t:boe},Y5=()=>be(xl),Q5=()=>be(Al),Pt=t=>t.layout.layoutType,vw=()=>be(Pt),xoe=()=>{var t=vw();if(t==="horizontal"||t==="vertical")return t},Aoe=()=>{var t=vw();return t!==void 0},b1=t=>{var e=In(),n=ti(),{width:r,height:i}=t,s=FN(),a=r,o=i;return s&&(a=s.width>0?s.width:r,o=s.height>0?s.height:i),E.useEffect(()=>{!n&&Qa(a)&&Qa(o)&&e(Rae({width:a,height:o}))},[e,n,a,o]),null},J5=Symbol.for("immer-nothing"),aj=Symbol.for("immer-draftable"),Ji=Symbol.for("immer-state");function Js(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var oy=Object.getPrototypeOf;function _m(t){return!!t&&!!t[Ji]}function Sd(t){var e;return t?Z5(t)||Array.isArray(t)||!!t[aj]||!!((e=t.constructor)!=null&&e[aj])||yw(t)||A1(t):!1}var Eoe=Object.prototype.constructor.toString(),oj=new WeakMap;function Z5(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=oj.get(n);return r===void 0&&(r=Function.toString.call(n),oj.set(n,r)),r===Eoe}function cA(t,e,n=!0){x1(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function x1(t){const e=t[Ji];return e?e.type_:Array.isArray(t)?1:yw(t)?2:A1(t)?3:0}function EC(t,e){return x1(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function eH(t,e,n){const r=x1(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Soe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function yw(t){return t instanceof Map}function A1(t){return t instanceof Set}function Du(t){return t.copy_||t.base_}function SC(t,e){if(yw(t))return new Map(t);if(A1(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Z5(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Ji];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[a]})}return Object.create(oy(t),r)}else{const r=oy(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function VN(t,e=!1){return E1(t)||_m(t)||!Sd(t)||(x1(t)>1&&Object.defineProperties(t,{set:V_,add:V_,clear:V_,delete:V_}),Object.freeze(t),e&&Object.values(t).forEach(n=>VN(n,!0))),t}function Toe(){Js(2)}var V_={value:Toe};function E1(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Poe={};function Td(t){const e=Poe[t];return e||Js(0,t),e}var ly;function tH(){return ly}function Ioe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function lj(t,e){e&&(Td("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function TC(t){PC(t),t.drafts_.forEach(Coe),t.drafts_=null}function PC(t){t===ly&&(ly=t.parent_)}function cj(t){return ly=Ioe(ly,t)}function Coe(t){const e=t[Ji];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function uj(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Ji].modified_&&(TC(e),Js(4)),Sd(t)&&(t=uA(e,t),e.parent_||hA(e,t)),e.patches_&&Td("Patches").generateReplacementPatches_(n[Ji].base_,t,e.patches_,e.inversePatches_)):t=uA(e,n,[]),TC(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==J5?t:void 0}function uA(t,e,n){if(E1(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[Ji];if(!i)return cA(e,(s,a)=>hj(t,i,e,s,a,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return hA(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let a=s,o=!1;i.type_===3&&(a=new Set(s),s.clear(),o=!0),cA(a,(l,c)=>hj(t,i,s,l,c,n,o),r),hA(t,s,!1),n&&t.patches_&&Td("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function hj(t,e,n,r,i,s,a){if(i==null||typeof i!="object"&&!a)return;const o=E1(i);if(!(o&&!a)){if(_m(i)){const l=s&&e&&e.type_!==3&&!EC(e.assigned_,r)?s.concat(r):void 0,c=uA(t,i,l);if(eH(n,r,c),_m(c))t.canAutoFreeze_=!1;else return}else a&&n.add(i);if(Sd(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;uA(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(yw(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&hA(t,i)}}}function hA(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&VN(e,n)}function koe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:tH(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=UN;n&&(i=[r],s=cy);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var UN={get(t,e){if(e===Ji)return t;const n=Du(t);if(!EC(n,e))return Roe(t,n,e);const r=n[e];return t.finalized_||!Sd(r)?r:r===rT(t.base_,e)?(iT(t),t.copy_[e]=CC(r,t)):r},has(t,e){return e in Du(t)},ownKeys(t){return Reflect.ownKeys(Du(t))},set(t,e,n){const r=nH(Du(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=rT(Du(t),e),s=i==null?void 0:i[Ji];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Soe(n,i)&&(n!==void 0||EC(t.base_,e)))return!0;iT(t),IC(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return rT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,iT(t),IC(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Du(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Js(11)},getPrototypeOf(t){return oy(t.base_)},setPrototypeOf(){Js(12)}},cy={};cA(UN,(t,e)=>{cy[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});cy.deleteProperty=function(t,e){return cy.set.call(this,t,e,void 0)};cy.set=function(t,e,n){return UN.set.call(this,t[0],e,n,t[0])};function rT(t,e){const n=t[Ji];return(n?Du(n):t)[e]}function Roe(t,e,n){var i;const r=nH(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function nH(t,e){if(!(e in t))return;let n=oy(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=oy(n)}}function IC(t){t.modified_||(t.modified_=!0,t.parent_&&IC(t.parent_))}function iT(t){t.copy_||(t.copy_=SC(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Noe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const a=this;return function(l=s,...c){return a.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Js(6),r!==void 0&&typeof r!="function"&&Js(7);let i;if(Sd(e)){const s=cj(this),a=CC(e,void 0);let o=!0;try{i=n(a),o=!1}finally{o?TC(s):PC(s)}return lj(s,r),uj(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===J5&&(i=void 0),this.autoFreeze_&&VN(i,!0),r){const s=[],a=[];Td("Patches").generateReplacementPatches_(e,i,s,a),r(s,a)}return i}else Js(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,i;return[this.produce(e,n,(a,o)=>{r=a,i=o}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Sd(t)||Js(8),_m(t)&&(t=Ooe(t));const e=cj(this),n=CC(t,void 0);return n[Ji].isManual_=!0,PC(e),n}finishDraft(t,e){const n=t&&t[Ji];(!n||!n.isManual_)&&Js(9);const{scope_:r}=n;return lj(r,e),uj(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Td("Patches").applyPatches_;return _m(t)?r(t,e):this.produce(t,i=>r(i,e))}};function CC(t,e){const n=yw(t)?Td("MapSet").proxyMap_(t,e):A1(t)?Td("MapSet").proxySet_(t,e):koe(t,e);return(e?e.scope_:tH()).drafts_.push(n),n}function Ooe(t){return _m(t)||Js(10,t),rH(t)}function rH(t){if(!Sd(t)||E1(t))return t;const e=t[Ji];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=SC(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=SC(t,!0);return cA(n,(i,s)=>{eH(n,i,rH(s))},r),e&&(e.finalized_=!1),n}var Doe=new Noe;Doe.produce;var Moe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},iH=bi({name:"legend",initialState:Moe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Dt()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ia(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Dt()},removeLegendPayload:{reducer(t,e){var n=ia(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Dt()}}}),{setLegendSize:pwe,setLegendSettings:mwe,addLegendPayload:Loe,replaceLegendPayload:joe,removeLegendPayload:Foe}=iH.actions,Voe=iH.reducer;function kC(){return kC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kC.apply(null,arguments)}function dj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dj(Object(n),!0).forEach(function(r){Uoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uoe(t,e,n){return(e=Boe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Boe(t){var e=$oe(t,"string");return typeof e=="symbol"?e:e+""}function $oe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zoe(t){return Array.isArray(t)&&Ps(t[0])&&Ps(t[1])?t.join(" ~ "):t}var Hoe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:a,itemSorter:o,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:h,accessibilityLayer:f=!1}=t,m=()=>{if(s&&s.length){var k={padding:0,margin:0},M=(o?l1(s,o):s).map((P,C)=>{if(P.type==="none")return null;var O=P.formatter||a||zoe,{value:j,name:D}=P,F=j,V=D;if(O){var Y=O(j,D,P,C,s);if(Array.isArray(Y))[F,V]=Y;else if(Y!=null)F=Y;else return null}var re=sT({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},r);return E.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:re},Ps(V)?E.createElement("span",{className:"recharts-tooltip-item-name"},V):null,Ps(V)?E.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,E.createElement("span",{className:"recharts-tooltip-item-value"},F),E.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return E.createElement("ul",{className:"recharts-tooltip-item-list",style:k},M)}return null},g=sT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),v=sT({margin:0},i),y=!lr(u),w=y?u:"",b=Tt("recharts-default-tooltip",l),A=Tt("recharts-tooltip-label",c);y&&h&&s!==void 0&&s!==null&&(w=h(u,s));var I=f?{role:"status","aria-live":"assertive"}:{};return E.createElement("div",kC({className:b,style:g},I),E.createElement("p",{className:A,style:v},E.isValidElement(w)?w:"".concat(w)),m())},Tg="recharts-tooltip-wrapper",Woe={visibility:"hidden"};function Goe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Tt(Tg,{["".concat(Tg,"-right")]:xe(n)&&e&&xe(e.x)&&n>=e.x,["".concat(Tg,"-left")]:xe(n)&&e&&xe(e.x)&&n<e.x,["".concat(Tg,"-bottom")]:xe(r)&&e&&xe(e.y)&&r>=e.y,["".concat(Tg,"-top")]:xe(r)&&e&&xe(e.y)&&r<e.y})}function fj(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=t;if(s&&xe(s[r]))return s[r];var u=n[r]-o-(i>0?i:0),h=n[r]+i;if(e[r])return a[r]?u:h;var f=l[r];if(f==null)return 0;if(a[r]){var m=u,g=f;return m<g?Math.max(h,f):Math.max(u,f)}if(c==null)return 0;var v=h+o,y=f+c;return v>y?Math.max(u,f):Math.max(h,f)}function qoe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Koe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:a,useTranslate3d:o,viewBox:l}=t,c,u,h;return a.height>0&&a.width>0&&n?(u=fj({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),h=fj({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=qoe({translateX:u,translateY:h,useTranslate3d:o})):c=Woe,{cssProperties:c,cssClasses:Goe({translateX:u,translateY:h,coordinate:n})}}function pj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pj(Object(n),!0).forEach(function(r){RC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RC(t,e,n){return(e=Xoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xoe(t){var e=Yoe(t,"string");return typeof e=="symbol"?e:e+""}function Yoe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Qoe extends E.PureComponent{constructor(){super(...arguments),RC(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),RC(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:a,hasPayload:o,isAnimationActive:l,offset:c,position:u,reverseDirection:h,useTranslate3d:f,viewBox:m,wrapperStyle:g,lastBoundingBox:v,innerRef:y,hasPortalFromProps:w}=this.props,{cssClasses:b,cssProperties:A}=Koe({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:c,position:u,reverseDirection:h,tooltipBox:{height:v.height,width:v.width},useTranslate3d:f,viewBox:m}),I=w?{}:U_(U_({transition:l&&e?"transform ".concat(r,"ms ").concat(i):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),k=U_(U_({},I),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},g);return E.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:k,ref:y},s)}}var sH=()=>{var t;return(t=be(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function NC(){return NC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NC.apply(null,arguments)}function mj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mj(Object(n),!0).forEach(function(r){Joe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Joe(t,e,n){return(e=Zoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zoe(t){var e=ele(t,"string");return typeof e=="symbol"?e:e+""}function ele(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vj={curveBasisClosed:Tie,curveBasisOpen:Pie,curveBasis:Sie,curveBumpX:Aie,curveBumpY:Eie,curveLinearClosed:Iie,curveLinear:e1,curveMonotoneX:Cie,curveMonotoneY:kie,curveNatural:Rie,curveStep:Nie,curveStepAfter:Die,curveStepBefore:Oie},dA=t=>St(t.x)&&St(t.y),yj=t=>t.base!=null&&dA(t.base)&&dA(t),Pg=t=>t.x,Ig=t=>t.y,tle=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(gN(t));return(n==="curveMonotone"||n==="curveBump")&&e?vj["".concat(n).concat(e==="vertical"?"Y":"X")]:vj[n]||e1},nle=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=t,a=tle(e,i),o=s?n.filter(dA):n,l;if(Array.isArray(r)){var c=n.map((m,g)=>gj(gj({},m),{},{base:r[g]}));i==="vertical"?l=N_().y(Ig).x1(Pg).x0(m=>m.base.x):l=N_().x(Pg).y1(Ig).y0(m=>m.base.y);var u=l.defined(yj).curve(a),h=s?c.filter(yj):c;return u(h)}i==="vertical"&&xe(r)?l=N_().y(Ig).x1(Pg).x0(r):xe(r)?l=N_().x(Pg).y1(Ig).y0(r):l=w6().x(Pg).y(Ig);var f=l.defined(dA).curve(a);return f(o)},Yb=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var s=n&&n.length?nle(t):r;return E.createElement("path",NC({},la(t),vN(t),{className:Tt("recharts-curve",e),d:s===null?void 0:s,ref:i}))},rle=["x","y","top","left","width","height","className"];function OC(){return OC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OC.apply(null,arguments)}function wj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ile(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wj(Object(n),!0).forEach(function(r){sle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sle(t,e,n){return(e=ale(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ale(t){var e=ole(t,"string");return typeof e=="symbol"?e:e+""}function ole(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lle(t,e){if(t==null)return{};var n,r,i=cle(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cle(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ule=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),hle=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:a=0,className:o}=t,l=lle(t,rle),c=ile({x:e,y:n,top:r,left:i,width:s,height:a},l);return!xe(e)||!xe(n)||!xe(s)||!xe(a)||!xe(r)||!xe(i)?null:E.createElement("path",OC({},Yi(c),{className:Tt("recharts-cross",o),d:ule(e,n,s,a,r,i)}))};function dle(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function _j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_j(Object(n),!0).forEach(function(r){fle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_j(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fle(t,e,n){return(e=ple(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ple(t){var e=mle(t,"string");return typeof e=="symbol"?e:e+""}function mle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gle=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),vle=(t,e,n)=>t.map(r=>"".concat(gle(r)," ").concat(e,"ms ").concat(n)).join(","),yle=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),uy=(t,e)=>Object.keys(e).reduce((n,r)=>bj(bj({},n),{},{[r]:t(r,e[r])}),{});function xj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function An(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xj(Object(n),!0).forEach(function(r){wle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wle(t,e,n){return(e=_le(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _le(t){var e=ble(t,"string");return typeof e=="symbol"?e:e+""}function ble(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fA=(t,e,n)=>t+(e-t)*n,DC=t=>{var{from:e,to:n}=t;return e!==n},aH=(t,e,n)=>{var r=uy((i,s)=>{if(DC(s)){var[a,o]=t(s.from,s.to,s.velocity);return An(An({},s),{},{from:a,velocity:o})}return s},e);return n<1?uy((i,s)=>DC(s)?An(An({},s),{},{velocity:fA(s.velocity,r[i].velocity,n),from:fA(s.from,r[i].from,n)}):s,e):aH(t,r,n-1)};function xle(t,e,n,r,i,s){var a,o=r.reduce((f,m)=>An(An({},f),{},{[m]:{from:t[m],velocity:0,to:e[m]}}),{}),l=()=>uy((f,m)=>m.from,o),c=()=>!Object.values(o).filter(DC).length,u=null,h=f=>{a||(a=f);var m=f-a,g=m/n.dt;o=aH(n,o,g),i(An(An(An({},t),e),l())),a=f,c()||(u=s.setTimeout(h))};return()=>(u=s.setTimeout(h),()=>{var f;(f=u)===null||f===void 0||f()})}function Ale(t,e,n,r,i,s,a){var o=null,l=i.reduce((h,f)=>An(An({},h),{},{[f]:[t[f],e[f]]}),{}),c,u=h=>{c||(c=h);var f=(h-c)/r,m=uy((v,y)=>fA(...y,n(f)),l);if(s(An(An(An({},t),e),m)),f<1)o=a.setTimeout(u);else{var g=uy((v,y)=>fA(...y,n(1)),l);s(An(An(An({},t),e),g))}};return()=>(o=a.setTimeout(u),()=>{var h;(h=o)===null||h===void 0||h()})}const Ele=(t,e,n,r,i,s)=>{var a=yle(t,e);return n==null?()=>(i(An(An({},t),e)),()=>{}):n.isStepper===!0?xle(t,e,n,a,i,s):Ale(t,e,n,r,a,i,s)};var pA=1e-4,oH=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],lH=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),Aj=(t,e)=>n=>{var r=oH(t,e);return lH(r,n)},Sle=(t,e)=>n=>{var r=oH(t,e),i=[...r.map((s,a)=>s*a).slice(1),0];return lH(i,n)},Tle=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,s=n[0].split("(");if(s[0]==="cubic-bezier"&&((i=s[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var a=s[1].split(")")[0].split(",").map(o=>parseFloat(o));return[a[0],a[1],a[2],a[3]]}}}return n.length===4?n:[0,0,1,1]},Ple=(t,e,n,r)=>{var i=Aj(t,n),s=Aj(e,r),a=Sle(t,n),o=c=>c>1?1:c<0?0:c,l=c=>{for(var u=c>1?1:c,h=u,f=0;f<8;++f){var m=i(h)-u,g=a(h);if(Math.abs(m-u)<pA||g<pA)return s(h);h=o(h-m/g)}return s(h)};return l.isStepper=!1,l},Ej=function(){return Ple(...Tle(...arguments))},Ile=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(a,o,l)=>{var c=-(a-o)*n,u=l*r,h=l+(c-u)*i/1e3,f=l*i/1e3+a;return Math.abs(f-o)<pA&&Math.abs(h)<pA?[o,0]:[f,h]};return s.isStepper=!0,s.dt=i,s},Cle=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Ej(t);case"spring":return Ile();default:if(t.split("(")[0]==="cubic-bezier")return Ej(t)}return typeof t=="function"?t:null};function kle(t){var e,n=()=>null,r=!1,i=null,s=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,[l,...c]=o;if(typeof l=="number"){i=t.setTimeout(s.bind(null,c),l);return}s(l),i=t.setTimeout(s.bind(null,c));return}typeof a=="string"&&(e=a,n(e)),typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,i&&(i(),i=null),s(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}class Rle{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=a=>{a-r>=n?e(a):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function Nle(){return kle(new Rle)}var Ole=E.createContext(Nle);function Dle(t,e){var n=E.useContext(Ole);return E.useMemo(()=>e??n(t),[t,e,n])}var Mle=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Om={devToolsEnabled:!1,isSsr:Mle()},Lle={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Sj={t:0},aT={t:1};function cH(t){var e=_i(t,Lle),{isActive:n,canBegin:r,duration:i,easing:s,begin:a,onAnimationEnd:o,onAnimationStart:l,children:c}=e,u=n==="auto"?!Om.isSsr:n,h=Dle(e.animationId,e.animationManager),[f,m]=E.useState(u?Sj:aT),g=E.useRef(null);return E.useEffect(()=>{u||m(aT)},[u]),E.useEffect(()=>{if(!u||!r)return hw;var v=Ele(Sj,aT,Cle(s),i,m,h.getTimeoutController()),y=()=>{g.current=v()};return h.start([l,a,y,i,o]),()=>{h.stop(),g.current&&g.current(),o()}},[u,r,i,s,a,l,o,h]),c(f.t)}function uH(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=E.useRef(ry(e)),r=E.useRef(t);return r.current!==t&&(n.current=ry(e),r.current=t),n.current}var jle=["radius"],Fle=["radius"];function Tj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tj(Object(n),!0).forEach(function(r){Vle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vle(t,e,n){return(e=Ule(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ule(t){var e=Ble(t,"string");return typeof e=="symbol"?e:e+""}function Ble(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mA(){return mA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mA.apply(null,arguments)}function Ij(t,e){if(t==null)return{};var n,r,i=$le(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $le(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Cj=(t,e,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),a=r>=0?1:-1,o=n>=0?1:-1,l=r>=0&&n>=0||r<0&&n<0?1:0,c;if(s>0&&i instanceof Array){for(var u=[0,0,0,0],h=0,f=4;h<f;h++)u[h]=i[h]>s?s:i[h];c="M".concat(t,",").concat(e+a*u[0]),u[0]>0&&(c+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(t+o*u[0],",").concat(e)),c+="L ".concat(t+n-o*u[1],",").concat(e),u[1]>0&&(c+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,`,
        `).concat(t+n,",").concat(e+a*u[1])),c+="L ".concat(t+n,",").concat(e+r-a*u[2]),u[2]>0&&(c+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,`,
        `).concat(t+n-o*u[2],",").concat(e+r)),c+="L ".concat(t+o*u[3],",").concat(e+r),u[3]>0&&(c+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,`,
        `).concat(t,",").concat(e+r-a*u[3])),c+="Z"}else if(s>0&&i===+i&&i>0){var m=Math.min(s,i);c="M ".concat(t,",").concat(e+a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(t+o*m,",").concat(e,`
            L `).concat(t+n-o*m,",").concat(e,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(t+n,",").concat(e+a*m,`
            L `).concat(t+n,",").concat(e+r-a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(t+n-o*m,",").concat(e+r,`
            L `).concat(t+o*m,",").concat(e+r,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(t,",").concat(e+r-a*m," Z")}else c="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return c},kj={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zle=t=>{var e=_i(t,kj),n=E.useRef(null),[r,i]=E.useState(-1);E.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var q=n.current.getTotalLength();q&&i(q)}catch{}},[]);var{x:s,y:a,width:o,height:l,radius:c,className:u}=e,{animationEasing:h,animationDuration:f,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:v}=e,y=E.useRef(o),w=E.useRef(l),b=E.useRef(s),A=E.useRef(a),I=E.useMemo(()=>({x:s,y:a,width:o,height:l,radius:c}),[s,a,o,l,c]),k=uH(I,"rectangle-");if(s!==+s||a!==+a||o!==+o||l!==+l||o===0||l===0)return null;var M=Tt("recharts-rectangle",u);if(!v){var P=Yi(e),{radius:C}=P,O=Ij(P,jle);return E.createElement("path",mA({},O,{radius:typeof c=="number"?c:void 0,className:M,d:Cj(s,a,o,l,c)}))}var j=y.current,D=w.current,F=b.current,V=A.current,Y="0px ".concat(r===-1?1:r,"px"),re="".concat(r,"px 0px"),K=vle(["strokeDasharray"],f,typeof h=="string"?h:kj.animationEasing);return E.createElement(cH,{animationId:k,key:k,canBegin:r>0,duration:f,easing:h,isActive:v,begin:m},q=>{var H=Fa(j,o,q),X=Fa(D,l,q),te=Fa(F,s,q),ce=Fa(V,a,q);n.current&&(y.current=H,w.current=X,b.current=te,A.current=ce);var ue;g?q>0?ue={transition:K,strokeDasharray:re}:ue={strokeDasharray:Y}:ue={strokeDasharray:re};var ve=Yi(e),{radius:Ue}=ve,et=Ij(ve,Fle);return E.createElement("path",mA({},et,{radius:typeof c=="number"?c:void 0,className:M,d:Cj(te,ce,H,X,c),ref:n,style:Pj(Pj({},ue),e.style)}))})};function Rj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rj(Object(n),!0).forEach(function(r){Hle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hle(t,e,n){return(e=Wle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wle(t){var e=Gle(t,"string");return typeof e=="symbol"?e:e+""}function Gle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gA=Math.PI/180,qle=t=>t*180/Math.PI,sr=(t,e,n,r)=>({x:t+Math.cos(-gA*r)*n,y:e+Math.sin(-gA*r)*n}),Kle=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Xle=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},Yle=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,a=Xle({x:n,y:r},{x:i,y:s});if(a<=0)return{radius:a,angle:0};var o=(n-i)/a,l=Math.acos(o);return r>s&&(l=2*Math.PI-l),{radius:a,angle:qle(l),angleInRadian:l}},Qle=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},Jle=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return t+a*360},Zle=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:s}=Yle({x:n,y:r},e),{innerRadius:a,outerRadius:o}=e;if(i<a||i>o||i===0)return null;var{startAngle:l,endAngle:c}=Qle(e),u=s,h;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;h=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=l}return h?Nj(Nj({},e),{},{radius:i,angle:Jle(u,e)}):null};function hH(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,a=sr(e,n,r,i),o=sr(e,n,r,s);return{points:[a,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function MC(){return MC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MC.apply(null,arguments)}var ece=(t,e)=>{var n=_s(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},B_=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:a,cornerRadius:o,cornerIsExternal:l}=t,c=o*(a?1:-1)+r,u=Math.asin(o/c)/gA,h=l?i:i+s*u,f=sr(e,n,c,h),m=sr(e,n,r,h),g=l?i-s*u:i,v=sr(e,n,c*Math.cos(u*gA),g);return{center:f,circleTangency:m,lineTangency:v,theta:u}},dH=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:a}=t,o=ece(s,a),l=s+o,c=sr(e,n,i,s),u=sr(e,n,i,l),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>l),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(r>0){var f=sr(e,n,r,s),m=sr(e,n,r,l);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=l),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(e,",").concat(n," Z");return h},tce=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:o,startAngle:l,endAngle:c}=t,u=_s(c-l),{circleTangency:h,lineTangency:f,theta:m}=B_({cx:e,cy:n,radius:i,angle:l,sign:u,cornerRadius:s,cornerIsExternal:o}),{circleTangency:g,lineTangency:v,theta:y}=B_({cx:e,cy:n,radius:i,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:o}),w=o?Math.abs(l-c):Math.abs(l-c)-m-y;if(w<0)return a?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):dH({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var b="M ".concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(w>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
  `);if(r>0){var{circleTangency:A,lineTangency:I,theta:k}=B_({cx:e,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:M,lineTangency:P,theta:C}=B_({cx:e,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),O=o?Math.abs(l-c):Math.abs(l-c)-k-C;if(O<0&&s===0)return"".concat(b,"L").concat(e,",").concat(n,"Z");b+="L".concat(P.x,",").concat(P.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(O>180),",").concat(+(u>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(I.x,",").concat(I.y,"Z")}else b+="L".concat(e,",").concat(n,"Z");return b},nce={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},rce=t=>{var e=_i(t,nce),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u,className:h}=e;if(s<i||c===u)return null;var f=Tt("recharts-sector",h),m=s-i,g=ru(a,m,0,!0),v;return g>0&&Math.abs(c-u)<360?v=tce({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}):v=dH({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:u}),E.createElement("path",MC({},Yi(e),{className:f,d:v}))};function ice(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(N6(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:s,outerRadius:a,angle:o}=e,l=sr(r,i,s,o),c=sr(r,i,a,o);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return hH(e)}}var fH={},pH={},mH={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=IN;function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(mH);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mH;function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(pH);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CN,n=pH;function r(i,s,a){a&&typeof a!="number"&&e.isIterateeCall(i,s,a)&&(s=a=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),a=a===void 0?i<s?1:-1:n.toFinite(a);const o=Math.max(Math.ceil((s-i)/(a||1)),0),l=new Array(o);for(let c=0;c<o;c++)l[c]=i,i+=a;return l}t.range=r})(fH);var sce=fH.range;const gH=ou(sce);function qc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ace(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function BN(t){let e,n,r;t.length!==2?(e=qc,n=(o,l)=>qc(t(o),l),r=(o,l)=>t(o)-l):(e=t===qc||t===ace?t:oce,n=t,r=t);function i(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(o[h],l)<0?c=h+1:u=h}while(c<u)}return c}function s(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(o[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function a(o,l,c=0,u=o.length){const h=i(o,l,c,u-1);return h>c&&r(o[h-1],l)>-r(o[h],l)?h-1:h}return{left:i,center:a,right:s}}function oce(){return 0}function vH(t){return t===null?NaN:+t}function*lce(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const cce=BN(qc),ww=cce.right;BN(vH).center;class Oj extends Map{constructor(e,n=dce){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Dj(this,e))}has(e){return super.has(Dj(this,e))}set(e,n){return super.set(uce(this,e),n)}delete(e){return super.delete(hce(this,e))}}function Dj({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function uce({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function hce({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function dce(t){return t!==null&&typeof t=="object"?t.valueOf():t}function fce(t=qc){if(t===qc)return yH;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function yH(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const pce=Math.sqrt(50),mce=Math.sqrt(10),gce=Math.sqrt(2);function vA(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=pce?10:s>=mce?5:s>=gce?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?vA(t,e,n*2):[o,l,c]}function LC(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?vA(e,t,n):vA(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function jC(t,e,n){return e=+e,t=+t,n=+n,vA(t,e,n)[2]}function FC(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?jC(e,t,n):jC(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Mj(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Lj(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function wH(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?yH:fce(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),m=Math.max(n,Math.floor(e-c*h/l+f)),g=Math.min(r,Math.floor(e+(l-c)*h/l+f));wH(t,e,m,g,i)}const s=t[e];let a=n,o=r;for(Cg(t,n,e),i(t[r],s)>0&&Cg(t,n,r);a<o;){for(Cg(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[n],s)===0?Cg(t,n,o):(++o,Cg(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Cg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function vce(t,e,n){if(t=Float64Array.from(lce(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Lj(t);if(e>=1)return Mj(t);var r,i=(r-1)*e,s=Math.floor(i),a=Mj(wH(t,s).subarray(0,s+1)),o=Lj(t.subarray(s+1));return a+(o-a)*(i-s)}}function yce(t,e,n=vH){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),o=+n(t[s+1],s+1,t);return a+(o-a)*(i-s)}}function wce(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function ks(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function El(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const VC=Symbol("implicit");function $N(){var t=new Oj,e=[],n=[],r=VC;function i(s){let a=t.get(s);if(a===void 0){if(r!==VC)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Oj;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return $N(e,n).unknown(r)},ks.apply(i,arguments),i}function zN(){var t=$N().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,l=0,c=0,u=.5;delete t.unknown;function h(){var f=e().length,m=i<r,g=m?i:r,v=m?r:i;s=(v-g)/Math.max(1,f-l+c*2),o&&(s=Math.floor(s)),g+=(v-g-s*(f-l))*u,a=s*(1-l),o&&(g=Math.round(g),a=Math.round(a));var y=wce(f).map(function(w){return g+s*w});return n(m?y.reverse():y)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(f){return arguments.length?(o=!!f,h()):o},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),h()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,h()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},t.copy=function(){return zN(e(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(u)},ks.apply(h(),arguments)}function _H(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return _H(e())},t}function _ce(){return _H(zN.apply(null,arguments).paddingInner(1))}function HN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function bH(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function _w(){}var hy=.7,yA=1/hy,Xf="\\s*([+-]?\\d+)\\s*",dy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ka="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bce=/^#([0-9a-f]{3,8})$/,xce=new RegExp(`^rgb\\(${Xf},${Xf},${Xf}\\)$`),Ace=new RegExp(`^rgb\\(${Ka},${Ka},${Ka}\\)$`),Ece=new RegExp(`^rgba\\(${Xf},${Xf},${Xf},${dy}\\)$`),Sce=new RegExp(`^rgba\\(${Ka},${Ka},${Ka},${dy}\\)$`),Tce=new RegExp(`^hsl\\(${dy},${Ka},${Ka}\\)$`),Pce=new RegExp(`^hsla\\(${dy},${Ka},${Ka},${dy}\\)$`),jj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};HN(_w,fy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Fj,formatHex:Fj,formatHex8:Ice,formatHsl:Cce,formatRgb:Vj,toString:Vj});function Fj(){return this.rgb().formatHex()}function Ice(){return this.rgb().formatHex8()}function Cce(){return xH(this).formatHsl()}function Vj(){return this.rgb().formatRgb()}function fy(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=bce.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Uj(e):n===3?new gi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?$_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?$_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=xce.exec(t))?new gi(e[1],e[2],e[3],1):(e=Ace.exec(t))?new gi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ece.exec(t))?$_(e[1],e[2],e[3],e[4]):(e=Sce.exec(t))?$_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Tce.exec(t))?zj(e[1],e[2]/100,e[3]/100,1):(e=Pce.exec(t))?zj(e[1],e[2]/100,e[3]/100,e[4]):jj.hasOwnProperty(t)?Uj(jj[t]):t==="transparent"?new gi(NaN,NaN,NaN,0):null}function Uj(t){return new gi(t>>16&255,t>>8&255,t&255,1)}function $_(t,e,n,r){return r<=0&&(t=e=n=NaN),new gi(t,e,n,r)}function kce(t){return t instanceof _w||(t=fy(t)),t?(t=t.rgb(),new gi(t.r,t.g,t.b,t.opacity)):new gi}function UC(t,e,n,r){return arguments.length===1?kce(t):new gi(t,e,n,r??1)}function gi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}HN(gi,UC,bH(_w,{brighter(t){return t=t==null?yA:Math.pow(yA,t),new gi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?hy:Math.pow(hy,t),new gi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new gi(cd(this.r),cd(this.g),cd(this.b),wA(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bj,formatHex:Bj,formatHex8:Rce,formatRgb:$j,toString:$j}));function Bj(){return`#${Yu(this.r)}${Yu(this.g)}${Yu(this.b)}`}function Rce(){return`#${Yu(this.r)}${Yu(this.g)}${Yu(this.b)}${Yu((isNaN(this.opacity)?1:this.opacity)*255)}`}function $j(){const t=wA(this.opacity);return`${t===1?"rgb(":"rgba("}${cd(this.r)}, ${cd(this.g)}, ${cd(this.b)}${t===1?")":`, ${t})`}`}function wA(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function cd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Yu(t){return t=cd(t),(t<16?"0":"")+t.toString(16)}function zj(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Zs(t,e,n,r)}function xH(t){if(t instanceof Zs)return new Zs(t.h,t.s,t.l,t.opacity);if(t instanceof _w||(t=fy(t)),!t)return new Zs;if(t instanceof Zs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Zs(a,o,l,t.opacity)}function Nce(t,e,n,r){return arguments.length===1?xH(t):new Zs(t,e,n,r??1)}function Zs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}HN(Zs,Nce,bH(_w,{brighter(t){return t=t==null?yA:Math.pow(yA,t),new Zs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?hy:Math.pow(hy,t),new Zs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new gi(oT(t>=240?t-240:t+120,i,r),oT(t,i,r),oT(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Zs(Hj(this.h),z_(this.s),z_(this.l),wA(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=wA(this.opacity);return`${t===1?"hsl(":"hsla("}${Hj(this.h)}, ${z_(this.s)*100}%, ${z_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Hj(t){return t=(t||0)%360,t<0?t+360:t}function z_(t){return Math.max(0,Math.min(1,t||0))}function oT(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const WN=t=>()=>t;function Oce(t,e){return function(n){return t+n*e}}function Dce(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Mce(t){return(t=+t)==1?AH:function(e,n){return n-e?Dce(e,n,t):WN(isNaN(e)?n:e)}}function AH(t,e){var n=e-t;return n?Oce(t,n):WN(isNaN(t)?e:t)}const Wj=function t(e){var n=Mce(e);function r(i,s){var a=n((i=UC(i)).r,(s=UC(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=AH(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function Lce(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function jce(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Fce(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Dm(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function Vce(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function _A(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Uce(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Dm(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var BC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lT=new RegExp(BC.source,"g");function Bce(t){return function(){return t}}function $ce(t){return function(e){return t(e)+""}}function zce(t,e){var n=BC.lastIndex=lT.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=BC.exec(t))&&(i=lT.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:_A(r,i)})),n=lT.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?$ce(l[0].x):Bce(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)o[(h=l[u]).i]=h.x(c);return o.join("")})}function Dm(t,e){var n=typeof e,r;return e==null||n==="boolean"?WN(e):(n==="number"?_A:n==="string"?(r=fy(e))?(e=r,Wj):zce:e instanceof fy?Wj:e instanceof Date?Vce:jce(e)?Lce:Array.isArray(e)?Fce:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Uce:_A)(t,e)}function GN(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Hce(t,e){e===void 0&&(e=t,t=Dm);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function Wce(t){return function(){return t}}function bA(t){return+t}var Gj=[0,1];function Gr(t){return t}function $C(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Wce(isNaN(e)?NaN:.5)}function Gce(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function qce(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=$C(i,r),s=n(a,s)):(r=$C(r,i),s=n(s,a)),function(o){return s(r(o))}}function Kce(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=$C(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=ww(t,o,1,r)-1;return s[l](i[l](o))}}function bw(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function S1(){var t=Gj,e=Gj,n=Dm,r,i,s,a=Gr,o,l,c;function u(){var f=Math.min(t.length,e.length);return a!==Gr&&(a=Gce(t[0],t[f-1])),o=f>2?Kce:qce,l=c=null,h}function h(f){return f==null||isNaN(f=+f)?s:(l||(l=o(t.map(r),e,n)))(r(a(f)))}return h.invert=function(f){return a(i((c||(c=o(e,t.map(r),_A)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,bA),u()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=GN,u()},h.clamp=function(f){return arguments.length?(a=f?!0:Gr,u()):a!==Gr},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,m){return r=f,i=m,u()}}function qN(){return S1()(Gr,Gr)}function Xce(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function xA(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function bm(t){return t=xA(Math.abs(t)),t?t[1]:NaN}function Yce(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function Qce(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Jce=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function py(t){if(!(e=Jce.exec(t)))throw new Error("invalid format: "+t);var e;return new KN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}py.prototype=KN.prototype;function KN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}KN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zce(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var EH;function eue(t,e){var n=xA(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(EH=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+xA(t,Math.max(0,e+s-1))[0]}function qj(t,e){var n=xA(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Kj={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Xce,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>qj(t*100,e),r:qj,s:eue,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Xj(t){return t}var Yj=Array.prototype.map,Qj=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function tue(t){var e=t.grouping===void 0||t.thousands===void 0?Xj:Yce(Yj.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Xj:Qce(Yj.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=py(h);var f=h.fill,m=h.align,g=h.sign,v=h.symbol,y=h.zero,w=h.width,b=h.comma,A=h.precision,I=h.trim,k=h.type;k==="n"?(b=!0,k="g"):Kj[k]||(A===void 0&&(A=12),I=!0,k="g"),(y||f==="0"&&m==="=")&&(y=!0,f="0",m="=");var M=v==="$"?n:v==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",P=v==="$"?r:/[%p]/.test(k)?a:"",C=Kj[k],O=/[defgprs%]/.test(k);A=A===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function j(D){var F=M,V=P,Y,re,K;if(k==="c")V=C(D)+V,D="";else{D=+D;var q=D<0||1/D<0;if(D=isNaN(D)?l:C(Math.abs(D),A),I&&(D=Zce(D)),q&&+D==0&&g!=="+"&&(q=!1),F=(q?g==="("?g:o:g==="-"||g==="("?"":g)+F,V=(k==="s"?Qj[8+EH/3]:"")+V+(q&&g==="("?")":""),O){for(Y=-1,re=D.length;++Y<re;)if(K=D.charCodeAt(Y),48>K||K>57){V=(K===46?i+D.slice(Y+1):D.slice(Y))+V,D=D.slice(0,Y);break}}}b&&!y&&(D=e(D,1/0));var H=F.length+D.length+V.length,X=H<w?new Array(w-H+1).join(f):"";switch(b&&y&&(D=e(X+D,X.length?w-V.length:1/0),X=""),m){case"<":D=F+D+V+X;break;case"=":D=F+X+D+V;break;case"^":D=X.slice(0,H=X.length>>1)+F+D+V+X.slice(H);break;default:D=X+F+D+V;break}return s(D)}return j.toString=function(){return h+""},j}function u(h,f){var m=c((h=py(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(bm(f)/3)))*3,v=Math.pow(10,-g),y=Qj[8+g/3];return function(w){return m(v*w)+y}}return{format:c,formatPrefix:u}}var H_,XN,SH;nue({thousands:",",grouping:[3],currency:["$",""]});function nue(t){return H_=tue(t),XN=H_.format,SH=H_.formatPrefix,H_}function rue(t){return Math.max(0,-bm(Math.abs(t)))}function iue(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bm(e)/3)))*3-bm(Math.abs(t)))}function sue(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,bm(e)-bm(t))+1}function TH(t,e,n,r){var i=FC(t,e,n),s;switch(r=py(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=iue(i,a))&&(r.precision=s),SH(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=sue(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=rue(i))&&(r.precision=s-(r.type==="%")*2);break}}return XN(r)}function pu(t){var e=t.domain;return t.ticks=function(n){var r=e();return LC(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return TH(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);u-- >0;){if(c=jC(a,o,n),c===l)return r[i]=a,r[s]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function PH(){var t=qN();return t.copy=function(){return bw(t,PH())},ks.apply(t,arguments),pu(t)}function IH(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,bA),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return IH(t).unknown(e)},t=arguments.length?Array.from(t,bA):[0,1],pu(n)}function CH(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function Jj(t){return Math.log(t)}function Zj(t){return Math.exp(t)}function aue(t){return-Math.log(-t)}function oue(t){return-Math.exp(-t)}function lue(t){return isFinite(t)?+("1e"+t):t<0?0:t}function cue(t){return t===10?lue:t===Math.E?Math.exp:e=>Math.pow(t,e)}function uue(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function eF(t){return(e,n)=>-t(-e,n)}function YN(t){const e=t(Jj,Zj),n=e.domain;let r=10,i,s;function a(){return i=uue(r),s=cue(r),n()[0]<0?(i=eF(i),s=eF(s),t(aue,oue)):t(Jj,Zj),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let c=l[0],u=l[l.length-1];const h=u<c;h&&([c,u]=[u,c]);let f=i(c),m=i(u),g,v;const y=o==null?10:+o;let w=[];if(!(r%1)&&m-f<y){if(f=Math.floor(f),m=Math.ceil(m),c>0){for(;f<=m;++f)for(g=1;g<r;++g)if(v=f<0?g/s(-f):g*s(f),!(v<c)){if(v>u)break;w.push(v)}}else for(;f<=m;++f)for(g=r-1;g>=1;--g)if(v=f>0?g/s(-f):g*s(f),!(v<c)){if(v>u)break;w.push(v)}w.length*2<y&&(w=LC(c,u,y))}else w=LC(f,m,Math.min(m-f,y)).map(s);return h?w.reverse():w},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=py(l)).precision==null&&(l.trim=!0),l=XN(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return u=>{let h=u/s(Math.round(i(u)));return h*r<r-.5&&(h*=r),h<=c?l(u):""}},e.nice=()=>n(CH(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function kH(){const t=YN(S1()).domain([1,10]);return t.copy=()=>bw(t,kH()).base(t.base()),ks.apply(t,arguments),t}function tF(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function nF(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function QN(t){var e=1,n=t(tF(e),nF(e));return n.constant=function(r){return arguments.length?t(tF(e=+r),nF(e)):e},pu(n)}function RH(){var t=QN(S1());return t.copy=function(){return bw(t,RH()).constant(t.constant())},ks.apply(t,arguments)}function rF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function hue(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function due(t){return t<0?-t*t:t*t}function JN(t){var e=t(Gr,Gr),n=1;function r(){return n===1?t(Gr,Gr):n===.5?t(hue,due):t(rF(n),rF(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},pu(e)}function ZN(){var t=JN(S1());return t.copy=function(){return bw(t,ZN()).exponent(t.exponent())},ks.apply(t,arguments),t}function fue(){return ZN.apply(null,arguments).exponent(.5)}function iF(t){return Math.sign(t)*t*t}function pue(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function NH(){var t=qN(),e=[0,1],n=!1,r;function i(s){var a=pue(t(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return t.invert(iF(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,bA)).map(iF)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return NH(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ks.apply(i,arguments),pu(i)}function OH(){var t=[],e=[],n=[],r;function i(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=yce(t,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:e[ww(n,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(qc),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return OH().domain(t).range(e).unknown(r)},ks.apply(s,arguments)}function DH(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[ww(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return DH().domain([t,e]).range(i).unknown(s)},ks.apply(pu(a),arguments)}function MH(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[ww(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return MH().domain(t).range(e).unknown(n)},ks.apply(i,arguments)}const cT=new Date,uT=new Date;function Cn(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),e(s,o),t(s);while(c<s&&s<a);return l},i.filter=s=>Cn(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(cT.setTime(+s),uT.setTime(+a),t(cT),t(uT),Math.floor(n(cT,uT))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const AA=Cn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);AA.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Cn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):AA);AA.range;const Xo=1e3,bs=Xo*60,Yo=bs*60,pl=Yo*24,eO=pl*7,sF=pl*30,hT=pl*365,Qu=Cn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Xo)},(t,e)=>(e-t)/Xo,t=>t.getUTCSeconds());Qu.range;const tO=Cn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xo)},(t,e)=>{t.setTime(+t+e*bs)},(t,e)=>(e-t)/bs,t=>t.getMinutes());tO.range;const nO=Cn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*bs)},(t,e)=>(e-t)/bs,t=>t.getUTCMinutes());nO.range;const rO=Cn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xo-t.getMinutes()*bs)},(t,e)=>{t.setTime(+t+e*Yo)},(t,e)=>(e-t)/Yo,t=>t.getHours());rO.range;const iO=Cn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Yo)},(t,e)=>(e-t)/Yo,t=>t.getUTCHours());iO.range;const xw=Cn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*bs)/pl,t=>t.getDate()-1);xw.range;const T1=Cn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pl,t=>t.getUTCDate()-1);T1.range;const LH=Cn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pl,t=>Math.floor(t/pl));LH.range;function Vd(t){return Cn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*bs)/eO)}const P1=Vd(0),EA=Vd(1),mue=Vd(2),gue=Vd(3),xm=Vd(4),vue=Vd(5),yue=Vd(6);P1.range;EA.range;mue.range;gue.range;xm.range;vue.range;yue.range;function Ud(t){return Cn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/eO)}const I1=Ud(0),SA=Ud(1),wue=Ud(2),_ue=Ud(3),Am=Ud(4),bue=Ud(5),xue=Ud(6);I1.range;SA.range;wue.range;_ue.range;Am.range;bue.range;xue.range;const sO=Cn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());sO.range;const aO=Cn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());aO.range;const ml=Cn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ml.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Cn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ml.range;const gl=Cn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());gl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Cn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});gl.range;function jH(t,e,n,r,i,s){const a=[[Qu,1,Xo],[Qu,5,5*Xo],[Qu,15,15*Xo],[Qu,30,30*Xo],[s,1,bs],[s,5,5*bs],[s,15,15*bs],[s,30,30*bs],[i,1,Yo],[i,3,3*Yo],[i,6,6*Yo],[i,12,12*Yo],[r,1,pl],[r,2,2*pl],[n,1,eO],[e,1,sF],[e,3,3*sF],[t,1,hT]];function o(c,u,h){const f=u<c;f&&([c,u]=[u,c]);const m=h&&typeof h.range=="function"?h:l(c,u,h),g=m?m.range(c,+u+1):[];return f?g.reverse():g}function l(c,u,h){const f=Math.abs(u-c)/h,m=BN(([,,y])=>y).right(a,f);if(m===a.length)return t.every(FC(c/hT,u/hT,h));if(m===0)return AA.every(Math.max(FC(c,u,h),1));const[g,v]=a[f/a[m-1][2]<a[m][2]/f?m-1:m];return g.every(v)}return[o,l]}const[Aue,Eue]=jH(gl,aO,I1,LH,iO,nO),[Sue,Tue]=jH(ml,sO,P1,xw,rO,tO);function dT(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function fT(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function kg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Pue(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,c=Rg(i),u=Ng(i),h=Rg(s),f=Ng(s),m=Rg(a),g=Ng(a),v=Rg(o),y=Ng(o),w=Rg(l),b=Ng(l),A={a:q,A:H,b:X,B:te,c:null,d:hF,e:hF,f:Yue,g:ahe,G:lhe,H:que,I:Kue,j:Xue,L:FH,m:Que,M:Jue,p:ce,q:ue,Q:pF,s:mF,S:Zue,u:ehe,U:the,V:nhe,w:rhe,W:ihe,x:null,X:null,y:she,Y:ohe,Z:che,"%":fF},I={a:ve,A:Ue,b:et,B:Ye,c:null,d:dF,e:dF,f:fhe,g:Ahe,G:She,H:uhe,I:hhe,j:dhe,L:UH,m:phe,M:mhe,p:me,q:qn,Q:pF,s:mF,S:ghe,u:vhe,U:yhe,V:whe,w:_he,W:bhe,x:null,X:null,y:xhe,Y:Ehe,Z:The,"%":fF},k={a:j,A:D,b:F,B:V,c:Y,d:cF,e:cF,f:zue,g:lF,G:oF,H:uF,I:uF,j:Vue,L:$ue,m:Fue,M:Uue,p:O,q:jue,Q:Wue,s:Gue,S:Bue,u:Nue,U:Oue,V:Due,w:Rue,W:Mue,x:re,X:K,y:lF,Y:oF,Z:Lue,"%":Hue};A.x=M(n,A),A.X=M(r,A),A.c=M(e,A),I.x=M(n,I),I.X=M(r,I),I.c=M(e,I);function M(Q,ne){return function(J){var W=[],Ee=-1,le=0,Ce=Q.length,ct,tt,Mr;for(J instanceof Date||(J=new Date(+J));++Ee<Ce;)Q.charCodeAt(Ee)===37&&(W.push(Q.slice(le,Ee)),(tt=aF[ct=Q.charAt(++Ee)])!=null?ct=Q.charAt(++Ee):tt=ct==="e"?" ":"0",(Mr=ne[ct])&&(ct=Mr(J,tt)),W.push(ct),le=Ee+1);return W.push(Q.slice(le,Ee)),W.join("")}}function P(Q,ne){return function(J){var W=kg(1900,void 0,1),Ee=C(W,Q,J+="",0),le,Ce;if(Ee!=J.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(ne&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(le=fT(kg(W.y,0,1)),Ce=le.getUTCDay(),le=Ce>4||Ce===0?SA.ceil(le):SA(le),le=T1.offset(le,(W.V-1)*7),W.y=le.getUTCFullYear(),W.m=le.getUTCMonth(),W.d=le.getUTCDate()+(W.w+6)%7):(le=dT(kg(W.y,0,1)),Ce=le.getDay(),le=Ce>4||Ce===0?EA.ceil(le):EA(le),le=xw.offset(le,(W.V-1)*7),W.y=le.getFullYear(),W.m=le.getMonth(),W.d=le.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),Ce="Z"in W?fT(kg(W.y,0,1)).getUTCDay():dT(kg(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(Ce+5)%7:W.w+W.U*7-(Ce+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,fT(W)):dT(W)}}function C(Q,ne,J,W){for(var Ee=0,le=ne.length,Ce=J.length,ct,tt;Ee<le;){if(W>=Ce)return-1;if(ct=ne.charCodeAt(Ee++),ct===37){if(ct=ne.charAt(Ee++),tt=k[ct in aF?ne.charAt(Ee++):ct],!tt||(W=tt(Q,J,W))<0)return-1}else if(ct!=J.charCodeAt(W++))return-1}return W}function O(Q,ne,J){var W=c.exec(ne.slice(J));return W?(Q.p=u.get(W[0].toLowerCase()),J+W[0].length):-1}function j(Q,ne,J){var W=m.exec(ne.slice(J));return W?(Q.w=g.get(W[0].toLowerCase()),J+W[0].length):-1}function D(Q,ne,J){var W=h.exec(ne.slice(J));return W?(Q.w=f.get(W[0].toLowerCase()),J+W[0].length):-1}function F(Q,ne,J){var W=w.exec(ne.slice(J));return W?(Q.m=b.get(W[0].toLowerCase()),J+W[0].length):-1}function V(Q,ne,J){var W=v.exec(ne.slice(J));return W?(Q.m=y.get(W[0].toLowerCase()),J+W[0].length):-1}function Y(Q,ne,J){return C(Q,e,ne,J)}function re(Q,ne,J){return C(Q,n,ne,J)}function K(Q,ne,J){return C(Q,r,ne,J)}function q(Q){return a[Q.getDay()]}function H(Q){return s[Q.getDay()]}function X(Q){return l[Q.getMonth()]}function te(Q){return o[Q.getMonth()]}function ce(Q){return i[+(Q.getHours()>=12)]}function ue(Q){return 1+~~(Q.getMonth()/3)}function ve(Q){return a[Q.getUTCDay()]}function Ue(Q){return s[Q.getUTCDay()]}function et(Q){return l[Q.getUTCMonth()]}function Ye(Q){return o[Q.getUTCMonth()]}function me(Q){return i[+(Q.getUTCHours()>=12)]}function qn(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var ne=M(Q+="",A);return ne.toString=function(){return Q},ne},parse:function(Q){var ne=P(Q+="",!1);return ne.toString=function(){return Q},ne},utcFormat:function(Q){var ne=M(Q+="",I);return ne.toString=function(){return Q},ne},utcParse:function(Q){var ne=P(Q+="",!0);return ne.toString=function(){return Q},ne}}}var aF={"-":"",_:" ",0:"0"},Gn=/^\s*\d+/,Iue=/^%/,Cue=/[\\^$*+?|[\]().{}]/g;function ot(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function kue(t){return t.replace(Cue,"\\$&")}function Rg(t){return new RegExp("^(?:"+t.map(kue).join("|")+")","i")}function Ng(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Rue(t,e,n){var r=Gn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Nue(t,e,n){var r=Gn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Oue(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Due(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Mue(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function oF(t,e,n){var r=Gn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function lF(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Lue(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jue(t,e,n){var r=Gn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Fue(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function cF(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Vue(t,e,n){var r=Gn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function uF(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Uue(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Bue(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function $ue(t,e,n){var r=Gn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function zue(t,e,n){var r=Gn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Hue(t,e,n){var r=Iue.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Wue(t,e,n){var r=Gn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Gue(t,e,n){var r=Gn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function hF(t,e){return ot(t.getDate(),e,2)}function que(t,e){return ot(t.getHours(),e,2)}function Kue(t,e){return ot(t.getHours()%12||12,e,2)}function Xue(t,e){return ot(1+xw.count(ml(t),t),e,3)}function FH(t,e){return ot(t.getMilliseconds(),e,3)}function Yue(t,e){return FH(t,e)+"000"}function Que(t,e){return ot(t.getMonth()+1,e,2)}function Jue(t,e){return ot(t.getMinutes(),e,2)}function Zue(t,e){return ot(t.getSeconds(),e,2)}function ehe(t){var e=t.getDay();return e===0?7:e}function the(t,e){return ot(P1.count(ml(t)-1,t),e,2)}function VH(t){var e=t.getDay();return e>=4||e===0?xm(t):xm.ceil(t)}function nhe(t,e){return t=VH(t),ot(xm.count(ml(t),t)+(ml(t).getDay()===4),e,2)}function rhe(t){return t.getDay()}function ihe(t,e){return ot(EA.count(ml(t)-1,t),e,2)}function she(t,e){return ot(t.getFullYear()%100,e,2)}function ahe(t,e){return t=VH(t),ot(t.getFullYear()%100,e,2)}function ohe(t,e){return ot(t.getFullYear()%1e4,e,4)}function lhe(t,e){var n=t.getDay();return t=n>=4||n===0?xm(t):xm.ceil(t),ot(t.getFullYear()%1e4,e,4)}function che(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ot(e/60|0,"0",2)+ot(e%60,"0",2)}function dF(t,e){return ot(t.getUTCDate(),e,2)}function uhe(t,e){return ot(t.getUTCHours(),e,2)}function hhe(t,e){return ot(t.getUTCHours()%12||12,e,2)}function dhe(t,e){return ot(1+T1.count(gl(t),t),e,3)}function UH(t,e){return ot(t.getUTCMilliseconds(),e,3)}function fhe(t,e){return UH(t,e)+"000"}function phe(t,e){return ot(t.getUTCMonth()+1,e,2)}function mhe(t,e){return ot(t.getUTCMinutes(),e,2)}function ghe(t,e){return ot(t.getUTCSeconds(),e,2)}function vhe(t){var e=t.getUTCDay();return e===0?7:e}function yhe(t,e){return ot(I1.count(gl(t)-1,t),e,2)}function BH(t){var e=t.getUTCDay();return e>=4||e===0?Am(t):Am.ceil(t)}function whe(t,e){return t=BH(t),ot(Am.count(gl(t),t)+(gl(t).getUTCDay()===4),e,2)}function _he(t){return t.getUTCDay()}function bhe(t,e){return ot(SA.count(gl(t)-1,t),e,2)}function xhe(t,e){return ot(t.getUTCFullYear()%100,e,2)}function Ahe(t,e){return t=BH(t),ot(t.getUTCFullYear()%100,e,2)}function Ehe(t,e){return ot(t.getUTCFullYear()%1e4,e,4)}function She(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Am(t):Am.ceil(t),ot(t.getUTCFullYear()%1e4,e,4)}function The(){return"+0000"}function fF(){return"%"}function pF(t){return+t}function mF(t){return Math.floor(+t/1e3)}var Zd,$H,zH;Phe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Phe(t){return Zd=Pue(t),$H=Zd.format,Zd.parse,zH=Zd.utcFormat,Zd.utcParse,Zd}function Ihe(t){return new Date(t)}function Che(t){return t instanceof Date?+t:+new Date(+t)}function oO(t,e,n,r,i,s,a,o,l,c){var u=qN(),h=u.invert,f=u.domain,m=c(".%L"),g=c(":%S"),v=c("%I:%M"),y=c("%I %p"),w=c("%a %d"),b=c("%b %d"),A=c("%B"),I=c("%Y");function k(M){return(l(M)<M?m:o(M)<M?g:a(M)<M?v:s(M)<M?y:r(M)<M?i(M)<M?w:b:n(M)<M?A:I)(M)}return u.invert=function(M){return new Date(h(M))},u.domain=function(M){return arguments.length?f(Array.from(M,Che)):f().map(Ihe)},u.ticks=function(M){var P=f();return t(P[0],P[P.length-1],M??10)},u.tickFormat=function(M,P){return P==null?k:c(P)},u.nice=function(M){var P=f();return(!M||typeof M.range!="function")&&(M=e(P[0],P[P.length-1],M??10)),M?f(CH(P,M)):u},u.copy=function(){return bw(u,oO(t,e,n,r,i,s,a,o,l,c))},u}function khe(){return ks.apply(oO(Sue,Tue,ml,sO,P1,xw,rO,tO,Qu,$H).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Rhe(){return ks.apply(oO(Aue,Eue,gl,aO,I1,T1,iO,nO,Qu,zH).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function C1(){var t=0,e=1,n,r,i,s,a=Gr,o=!1,l;function c(h){return h==null||isNaN(h=+h)?l:a(i===0?.5:(h=(s(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([t,e]=h,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(h){return arguments.length?(o=!!h,c):o},c.interpolator=function(h){return arguments.length?(a=h,c):a};function u(h){return function(f){var m,g;return arguments.length?([m,g]=f,a=h(m,g),c):[a(0),a(1)]}}return c.range=u(Dm),c.rangeRound=u(GN),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return s=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),c}}function mu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function HH(){var t=pu(C1()(Gr));return t.copy=function(){return mu(t,HH())},El.apply(t,arguments)}function WH(){var t=YN(C1()).domain([1,10]);return t.copy=function(){return mu(t,WH()).base(t.base())},El.apply(t,arguments)}function GH(){var t=QN(C1());return t.copy=function(){return mu(t,GH()).constant(t.constant())},El.apply(t,arguments)}function lO(){var t=JN(C1());return t.copy=function(){return mu(t,lO()).exponent(t.exponent())},El.apply(t,arguments)}function Nhe(){return lO.apply(null,arguments).exponent(.5)}function qH(){var t=[],e=Gr;function n(r){if(r!=null&&!isNaN(r=+r))return e((ww(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(qc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>vce(t,s/r))},n.copy=function(){return qH(e).domain(t)},El.apply(n,arguments)}function k1(){var t=0,e=.5,n=1,r=1,i,s,a,o,l,c=Gr,u,h=!1,f;function m(v){return isNaN(v=+v)?f:(v=.5+((v=+u(v))-s)*(r*v<r*s?o:l),c(h?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([t,e,n]=v,i=u(t=+t),s=u(e=+e),a=u(n=+n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,m):[t,e,n]},m.clamp=function(v){return arguments.length?(h=!!v,m):h},m.interpolator=function(v){return arguments.length?(c=v,m):c};function g(v){return function(y){var w,b,A;return arguments.length?([w,b,A]=y,c=Hce(v,[w,b,A]),m):[c(0),c(.5),c(1)]}}return m.range=g(Dm),m.rangeRound=g(GN),m.unknown=function(v){return arguments.length?(f=v,m):f},function(v){return u=v,i=v(t),s=v(e),a=v(n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,m}}function KH(){var t=pu(k1()(Gr));return t.copy=function(){return mu(t,KH())},El.apply(t,arguments)}function XH(){var t=YN(k1()).domain([.1,1,10]);return t.copy=function(){return mu(t,XH()).base(t.base())},El.apply(t,arguments)}function YH(){var t=QN(k1());return t.copy=function(){return mu(t,YH()).constant(t.constant())},El.apply(t,arguments)}function cO(){var t=JN(k1());return t.copy=function(){return mu(t,cO()).exponent(t.exponent())},El.apply(t,arguments)}function Ohe(){return cO.apply(null,arguments).exponent(.5)}const av=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:zN,scaleDiverging:KH,scaleDivergingLog:XH,scaleDivergingPow:cO,scaleDivergingSqrt:Ohe,scaleDivergingSymlog:YH,scaleIdentity:IH,scaleImplicit:VC,scaleLinear:PH,scaleLog:kH,scaleOrdinal:$N,scalePoint:_ce,scalePow:ZN,scaleQuantile:OH,scaleQuantize:DH,scaleRadial:NH,scaleSequential:HH,scaleSequentialLog:WH,scaleSequentialPow:lO,scaleSequentialQuantile:qH,scaleSequentialSqrt:Nhe,scaleSequentialSymlog:GH,scaleSqrt:fue,scaleSymlog:RH,scaleThreshold:MH,scaleTime:khe,scaleUtc:Rhe,tickFormat:TH},Symbol.toStringTag,{value:"Module"}));var gu=t=>t.chartData,Dhe=z([gu],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),uO=(t,e,n,r)=>r?Dhe(t):gu(t);function iu(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(St(e)&&St(n))return!0}return!1}function gF(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function QH(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(St(n))i=n;else if(typeof n=="function")return;if(St(r))s=r;else if(typeof r=="function")return;var a=[i,s];if(iu(a))return a}}function Mhe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(iu(r))return gF(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,a,o;if(i==="auto")e!=null&&(a=Math.min(...e));else if(xe(i))a=i;else if(typeof i=="function")try{e!=null&&(a=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&ej.test(i)){var l=ej.exec(i);if(l==null||e==null)a=void 0;else{var c=+l[1];a=e[0]-c}}else a=e==null?void 0:e[0];if(s==="auto")e!=null&&(o=Math.max(...e));else if(xe(s))o=s;else if(typeof s=="function")try{e!=null&&(o=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&tj.test(s)){var u=tj.exec(s);if(u==null||e==null)o=void 0;else{var h=+u[1];o=e[1]+h}}else o=e==null?void 0:e[1];var f=[a,o];if(iu(f))return e==null?f:gF(f,e,n)}}}var Mm=1e9,Lhe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},dO,Ft=!0,Cs="[DecimalError] ",ud=Cs+"Invalid argument: ",hO=Cs+"Exponent out of range: ",Lm=Math.floor,Mu=Math.pow,jhe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Bi,zn=1e7,kt=7,JH=9007199254740991,TA=Lm(JH/kt),pe={};pe.absoluteValue=pe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};pe.comparedTo=pe.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};pe.decimalPlaces=pe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*kt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};pe.dividedBy=pe.div=function(t){return Zo(this,new this.constructor(t))};pe.dividedToIntegerBy=pe.idiv=function(t){var e=this,n=e.constructor;return xt(Zo(e,new n(t),0,1),n.precision)};pe.equals=pe.eq=function(t){return!this.cmp(t)};pe.exponent=function(){return fn(this)};pe.greaterThan=pe.gt=function(t){return this.cmp(t)>0};pe.greaterThanOrEqualTo=pe.gte=function(t){return this.cmp(t)>=0};pe.isInteger=pe.isint=function(){return this.e>this.d.length-2};pe.isNegative=pe.isneg=function(){return this.s<0};pe.isPositive=pe.ispos=function(){return this.s>0};pe.isZero=function(){return this.s===0};pe.lessThan=pe.lt=function(t){return this.cmp(t)<0};pe.lessThanOrEqualTo=pe.lte=function(t){return this.cmp(t)<1};pe.logarithm=pe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Bi))throw Error(Cs+"NaN");if(n.s<1)throw Error(Cs+(n.s?"NaN":"-Infinity"));return n.eq(Bi)?new r(0):(Ft=!1,e=Zo(my(n,s),my(t,s),s),Ft=!0,xt(e,i))};pe.minus=pe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?tW(e,t):ZH(e,(t.s=-t.s,t))};pe.modulo=pe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Cs+"NaN");return n.s?(Ft=!1,e=Zo(n,t,0,1).times(t),Ft=!0,n.minus(e)):xt(new r(n),i)};pe.naturalExponential=pe.exp=function(){return eW(this)};pe.naturalLogarithm=pe.ln=function(){return my(this)};pe.negated=pe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};pe.plus=pe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ZH(e,t):tW(e,(t.s=-t.s,t))};pe.precision=pe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ud+t);if(e=fn(i)+1,r=i.d.length-1,n=r*kt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};pe.squareRoot=pe.sqrt=function(){var t,e,n,r,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Cs+"NaN")}for(t=fn(o),Ft=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Ba(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Lm((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(s=r,r=s.plus(Zo(o,s,a+2)).times(.5),Ba(s.d).slice(0,a)===(e=Ba(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(xt(s,n+1,0),s.times(s).eq(o)){r=s;break}}else if(e!="9999")break;a+=4}return Ft=!0,xt(r,n)};pe.times=pe.mul=function(t){var e,n,r,i,s,a,o,l,c,u=this,h=u.constructor,f=u.d,m=(t=new h(t)).d;if(!u.s||!t.s)return new h(0);for(t.s*=u.s,n=u.e+t.e,l=f.length,c=m.length,l<c&&(s=f,f=m,m=s,a=l,l=c,c=a),s=[],a=l+c,r=a;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)o=s[i]+m[r]*f[i-r-1]+e,s[i--]=o%zn|0,e=o/zn|0;s[i]=(s[i]+e)%zn|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Ft?xt(t,h.precision):t};pe.toDecimalPlaces=pe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ja(t,0,Mm),e===void 0?e=r.rounding:Ja(e,0,8),xt(n,t+fn(n)+1,e))};pe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Pd(r,!0):(Ja(t,0,Mm),e===void 0?e=i.rounding:Ja(e,0,8),r=xt(new i(r),t+1,e),n=Pd(r,!0,t+1)),n};pe.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Pd(i):(Ja(t,0,Mm),e===void 0?e=s.rounding:Ja(e,0,8),r=xt(new s(i),t+fn(i)+1,e),n=Pd(r.abs(),!1,t+fn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};pe.toInteger=pe.toint=function(){var t=this,e=t.constructor;return xt(new e(t),fn(t)+1,e.rounding)};pe.toNumber=function(){return+this};pe.toPower=pe.pow=function(t){var e,n,r,i,s,a,o=this,l=o.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Bi);if(o=new l(o),!o.s){if(t.s<1)throw Error(Cs+"Infinity");return o}if(o.eq(Bi))return o;if(r=l.precision,t.eq(Bi))return xt(o,r);if(e=t.e,n=t.d.length-1,a=e>=n,s=o.s,a){if((n=u<0?-u:u)<=JH){for(i=new l(Bi),e=Math.ceil(r/kt+4),Ft=!1;n%2&&(i=i.times(o),yF(i.d,e)),n=Lm(n/2),n!==0;)o=o.times(o),yF(o.d,e);return Ft=!0,t.s<0?new l(Bi).div(i):xt(i,r)}}else if(s<0)throw Error(Cs+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Ft=!1,i=t.times(my(o,r+c)),Ft=!0,i=eW(i),i.s=s,i};pe.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=fn(i),r=Pd(i,n<=s.toExpNeg||n>=s.toExpPos)):(Ja(t,1,Mm),e===void 0?e=s.rounding:Ja(e,0,8),i=xt(new s(i),t,e),n=fn(i),r=Pd(i,t<=n||n<=s.toExpNeg,t)),r};pe.toSignificantDigits=pe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ja(t,1,Mm),e===void 0?e=r.rounding:Ja(e,0,8)),xt(new r(n),t,e)};pe.toString=pe.valueOf=pe.val=pe.toJSON=pe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=fn(t),n=t.constructor;return Pd(t,e<=n.toExpNeg||e>=n.toExpPos)};function ZH(t,e){var n,r,i,s,a,o,l,c,u=t.constructor,h=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Ft?xt(e,h):e;if(l=t.d,c=e.d,a=t.e,i=e.e,l=l.slice(),s=a-i,s){for(s<0?(r=l,s=-s,o=c.length):(r=c,i=a,o=l.length),a=Math.ceil(h/kt),o=a>o?a+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=l.length,s=c.length,o-s<0&&(s=o,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/zn|0,l[s]%=zn;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,Ft?xt(e,h):e}function Ja(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ud+t)}function Ba(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=kt-r.length,n&&(s+=$l(n)),s+=r;a=t[e],r=a+"",n=kt-r.length,n&&(s+=$l(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var Zo=function(){function t(r,i){var s,a=0,o=r.length;for(r=r.slice();o--;)s=r[o]*i+a,r[o]=s%zn|0,a=s/zn|0;return a&&r.unshift(a),r}function e(r,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*zn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var o,l,c,u,h,f,m,g,v,y,w,b,A,I,k,M,P,C,O=r.constructor,j=r.s==i.s?1:-1,D=r.d,F=i.d;if(!r.s)return new O(r);if(!i.s)throw Error(Cs+"Division by zero");for(l=r.e-i.e,P=F.length,k=D.length,m=new O(j),g=m.d=[],c=0;F[c]==(D[c]||0);)++c;if(F[c]>(D[c]||0)&&--l,s==null?b=s=O.precision:a?b=s+(fn(r)-fn(i))+1:b=s,b<0)return new O(0);if(b=b/kt+2|0,c=0,P==1)for(u=0,F=F[0],b++;(c<k||u)&&b--;c++)A=u*zn+(D[c]||0),g[c]=A/F|0,u=A%F|0;else{for(u=zn/(F[0]+1)|0,u>1&&(F=t(F,u),D=t(D,u),P=F.length,k=D.length),I=P,v=D.slice(0,P),y=v.length;y<P;)v[y++]=0;C=F.slice(),C.unshift(0),M=F[0],F[1]>=zn/2&&++M;do u=0,o=e(F,v,P,y),o<0?(w=v[0],P!=y&&(w=w*zn+(v[1]||0)),u=w/M|0,u>1?(u>=zn&&(u=zn-1),h=t(F,u),f=h.length,y=v.length,o=e(h,v,f,y),o==1&&(u--,n(h,P<f?C:F,f))):(u==0&&(o=u=1),h=F.slice()),f=h.length,f<y&&h.unshift(0),n(v,h,y),o==-1&&(y=v.length,o=e(F,v,P,y),o<1&&(u++,n(v,P<y?C:F,y))),y=v.length):o===0&&(u++,v=[0]),g[c++]=u,o&&v[0]?v[y++]=D[I]||0:(v=[D[I]],y=1);while((I++<k||v[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=l,xt(m,a?s+fn(m)+1:s)}}();function eW(t,e){var n,r,i,s,a,o,l=0,c=0,u=t.constructor,h=u.precision;if(fn(t)>16)throw Error(hO+fn(t));if(!t.s)return new u(Bi);for(Ft=!1,o=h,a=new u(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(Mu(2,c))/Math.LN10*2+5|0,o+=r,n=i=s=new u(Bi),u.precision=o;;){if(i=xt(i.times(t),o),n=n.times(++l),a=s.plus(Zo(i,n,o)),Ba(a.d).slice(0,o)===Ba(s.d).slice(0,o)){for(;c--;)s=xt(s.times(s),o);return u.precision=h,e==null?(Ft=!0,xt(s,h)):s}s=a}}function fn(t){for(var e=t.e*kt,n=t.d[0];n>=10;n/=10)e++;return e}function pT(t,e,n){if(e>t.LN10.sd())throw Ft=!0,n&&(t.precision=n),Error(Cs+"LN10 precision limit exceeded");return xt(new t(t.LN10),e)}function $l(t){for(var e="";t--;)e+="0";return e}function my(t,e){var n,r,i,s,a,o,l,c,u,h=1,f=10,m=t,g=m.d,v=m.constructor,y=v.precision;if(m.s<1)throw Error(Cs+(m.s?"NaN":"-Infinity"));if(m.eq(Bi))return new v(0);if(e==null?(Ft=!1,c=y):c=e,m.eq(10))return e==null&&(Ft=!0),pT(v,c);if(c+=f,v.precision=c,n=Ba(g),r=n.charAt(0),s=fn(m),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=Ba(m.d),r=n.charAt(0),h++;s=fn(m),r>1?(m=new v("0."+n),s++):m=new v(r+"."+n.slice(1))}else return l=pT(v,c+2,y).times(s+""),m=my(new v(r+"."+n.slice(1)),c-f).plus(l),v.precision=y,e==null?(Ft=!0,xt(m,y)):m;for(o=a=m=Zo(m.minus(Bi),m.plus(Bi),c),u=xt(m.times(m),c),i=3;;){if(a=xt(a.times(u),c),l=o.plus(Zo(a,new v(i),c)),Ba(l.d).slice(0,c)===Ba(o.d).slice(0,c))return o=o.times(2),s!==0&&(o=o.plus(pT(v,c+2,y).times(s+""))),o=Zo(o,new v(h),c),v.precision=y,e==null?(Ft=!0,xt(o,y)):o;o=l,i+=2}}function vF(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Lm(n/kt),t.d=[],r=(n+1)%kt,n<0&&(r+=kt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=kt;r<i;)t.d.push(+e.slice(r,r+=kt));e=e.slice(r),r=kt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Ft&&(t.e>TA||t.e<-TA))throw Error(hO+n)}else t.s=0,t.e=0,t.d=[0];return t}function xt(t,e,n){var r,i,s,a,o,l,c,u,h=t.d;for(a=1,s=h[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=kt,i=e,c=h[u=0];else{if(u=Math.ceil((r+1)/kt),s=h.length,u>=s)return t;for(c=s=h[u],a=1;s>=10;s/=10)a++;r%=kt,i=r-kt+a}if(n!==void 0&&(s=Mu(10,a-i-1),o=c/s%10|0,l=e<0||h[u+1]!==void 0||c%s,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?c/Mu(10,a-i):0:h[u-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return l?(s=fn(t),h.length=1,e=e-s-1,h[0]=Mu(10,(kt-e%kt)%kt),t.e=Lm(-e/kt)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=u,s=1,u--):(h.length=u+1,s=Mu(10,kt-r),h[u]=i>0?(c/Mu(10,a-i)%Mu(10,i)|0)*s:0),l)for(;;)if(u==0){(h[0]+=s)==zn&&(h[0]=1,++t.e);break}else{if(h[u]+=s,h[u]!=zn)break;h[u--]=0,s=1}for(r=h.length;h[--r]===0;)h.pop();if(Ft&&(t.e>TA||t.e<-TA))throw Error(hO+fn(t));return t}function tW(t,e){var n,r,i,s,a,o,l,c,u,h,f=t.constructor,m=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Ft?xt(e,m):e;if(l=t.d,h=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(u=a<0,u?(n=l,a=-a,o=h.length):(n=h,r=c,o=l.length),i=Math.max(Math.ceil(m/kt),o)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=h.length,u=i<o,u&&(o=i),i=0;i<o;i++)if(l[i]!=h[i]){u=l[i]<h[i];break}a=0}for(u&&(n=l,l=h,h=n,e.s=-e.s),o=l.length,i=h.length-o;i>0;--i)l[o++]=0;for(i=h.length;i>a;){if(l[--i]<h[i]){for(s=i;s&&l[--s]===0;)l[s]=zn-1;--l[s],l[i]+=zn}l[i]-=h[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Ft?xt(e,m):e):new f(0)}function Pd(t,e,n){var r,i=fn(t),s=Ba(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+$l(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+$l(-i-1)+s,n&&(r=n-a)>0&&(s+=$l(r))):i>=a?(s+=$l(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+$l(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=$l(r))),t.s<0?"-"+s:s}function yF(t,e){if(t.length>e)return t.length=e,!0}function nW(t){var e,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ud+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return vF(a,s.toString())}else if(typeof s!="string")throw Error(ud+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,jhe.test(s))vF(a,s);else throw Error(ud+s)}if(i.prototype=pe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=nW,i.config=i.set=Fhe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Fhe(t){if(!t||typeof t!="object")throw Error(Cs+"Object expected");var e,n,r,i=["precision",1,Mm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Lm(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(ud+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ud+n+": "+r);return this}var dO=nW(Lhe);Bi=new dO(1);const dt=dO;var Vhe=t=>t,rW={},iW=t=>t===rW,wF=t=>function e(){return arguments.length===0||arguments.length===1&&iW(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},sW=(t,e)=>t===1?e:wF(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(a=>a!==rW).length;return s>=t?e(...r):sW(t-s,wF(function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c=r.map(u=>iW(u)?o.shift():u);return e(...c,...o)}))}),Uhe=t=>sW(t.length,t),zC=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},Bhe=Uhe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),$he=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Vhe;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce((o,l)=>l(o),s(...arguments))}},HC=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join("");function aW(t){var e;return t===0?e=1:e=Math.floor(new dt(t).abs().log(10).toNumber())+1,e}function oW(t,e,n){for(var r=new dt(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var lW=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},cW=(t,e,n)=>{if(t.lte(0))return new dt(0);var r=aW(t.toNumber()),i=new dt(10).pow(r),s=t.div(i),a=r!==1?.05:.1,o=new dt(Math.ceil(s.div(a).toNumber())).add(n).mul(a),l=o.mul(i);return e?new dt(l.toNumber()):new dt(Math.ceil(l.toNumber()))},zhe=(t,e,n)=>{var r=new dt(1),i=new dt(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new dt(10).pow(aW(t)-1),i=new dt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new dt(Math.floor(t)))}else t===0?i=new dt(Math.floor((e-1)/2)):n||(i=new dt(Math.floor(t)));var a=Math.floor((e-1)/2),o=$he(Bhe(l=>i.add(new dt(l-a).mul(r)).toNumber()),zC);return o(0,e)},uW=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new dt(0),tickMin:new dt(0),tickMax:new dt(0)};var a=cW(new dt(n).sub(e).div(r-1),i,s),o;e<=0&&n>=0?o=new dt(0):(o=new dt(e).add(n).div(2),o=o.sub(new dt(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new dt(n).sub(o).div(a).toNumber()),u=l+c+1;return u>r?uW(e,n,r,i,s+1):(u<r&&(c=n>0?c+(r-u):c,l=n>0?l:l+(r-u)),{step:a,tickMin:o.sub(new dt(l).mul(a)),tickMax:o.add(new dt(c).mul(a))})},Hhe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),[o,l]=lW([n,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...zC(0,i-1).map(()=>1/0)]:[...zC(0,i-1).map(()=>-1/0),l];return n>r?HC(c):c}if(o===l)return zhe(o,i,s);var{step:u,tickMin:h,tickMax:f}=uW(o,l,a,s,0),m=oW(h,f.add(new dt(.1).mul(u)),u);return n>r?HC(m):m},Whe=function(e,n){var[r,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=lW([r,i]);if(a===-1/0||o===1/0)return[r,i];if(a===o)return[a];var l=Math.max(n,2),c=cW(new dt(o).sub(a).div(l-1),s,0),u=[...oW(new dt(a),new dt(o),c),o];return s===!1&&(u=u.map(h=>Math.round(h))),r>i?HC(u):u},Ghe=t=>t.rootProps.barCategoryGap,R1=t=>t.rootProps.stackOffset,hW=t=>t.rootProps.reverseStackOrder,fO=t=>t.options.chartName,pO=t=>t.rootProps.syncId,dW=t=>t.rootProps.syncMethod,mO=t=>t.options.eventEmitter,qhe=t=>t.rootProps.baseValue,Rr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Bo={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Fi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},N1=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Khe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Bo.angleAxisId,includeHidden:!1,name:void 0,reversed:Bo.reversed,scale:Bo.scale,tick:Bo.tick,tickCount:void 0,ticks:void 0,type:Bo.type,unit:void 0},Xhe={allowDataOverflow:Fi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Fi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fi.scale,tick:Fi.tick,tickCount:Fi.tickCount,ticks:void 0,type:Fi.type,unit:void 0},Yhe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Bo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Bo.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Bo.scale,tick:Bo.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Qhe={allowDataOverflow:Fi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Fi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fi.scale,tick:Fi.tick,tickCount:Fi.tickCount,ticks:void 0,type:"category",unit:void 0},gO=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?Yhe:Khe,vO=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?Qhe:Xhe,O1=t=>t.polarOptions,yO=z([xl,Al,hr],Kle),fW=z([O1,yO],(t,e)=>{if(t!=null)return ru(t.innerRadius,e,0)}),pW=z([O1,yO],(t,e)=>{if(t!=null)return ru(t.outerRadius,e,e*.8)}),Jhe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},mW=z([O1],Jhe);z([gO,mW],N1);var gW=z([yO,fW,pW],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});z([vO,gW],N1);var vW=z([Pt,O1,fW,pW,xl,Al],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:a,cy:o,startAngle:l,endAngle:c}=e;return{cx:ru(a,i,i/2),cy:ru(o,s,s/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),kn=(t,e)=>e,D1=(t,e,n)=>n;function wO(t){return t==null?void 0:t.id}function yW(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,a=new Map;return t.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var u=wO(o);c.forEach((h,f)=>{var m=s==null||i?f:String(Nr(h,s,null)),g=Nr(h,o.dataKey,0),v;a.has(m)?v=a.get(m):v={},Object.assign(v,{[u]:g}),a.set(m,v)})}}),Array.from(a.values())}function _O(t){return t.stackId!=null&&t.dataKey!=null}var M1=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function L1(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function Zhe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Rn=t=>{var e=Pt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},jm=t=>t.tooltip.settings.axisId;function _F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_F(Object(n),!0).forEach(function(r){ede(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_F(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ede(t,e,n){return(e=tde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tde(t){var e=nde(t,"string");return typeof e=="symbol"?e:e+""}function nde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WC=[0,"auto"],Dn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},wW=(t,e)=>t.cartesianAxis.xAxis[e],eo=(t,e)=>{var n=wW(t,e);return n??Dn},Mn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:WC,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:mw},_W=(t,e)=>t.cartesianAxis.yAxis[e],to=(t,e)=>{var n=_W(t,e);return n??Mn},rde={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},bO=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??rde},ni=(t,e,n)=>{switch(e){case"xAxis":return eo(t,n);case"yAxis":return to(t,n);case"zAxis":return bO(t,n);case"angleAxis":return gO(t,n);case"radiusAxis":return vO(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},ide=(t,e,n)=>{switch(e){case"xAxis":return eo(t,n);case"yAxis":return to(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Aw=(t,e,n)=>{switch(e){case"xAxis":return eo(t,n);case"yAxis":return to(t,n);case"angleAxis":return gO(t,n);case"radiusAxis":return vO(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},bW=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function xW(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var AW=t=>t.graphicalItems.cartesianItems,sde=z([kn,D1],xW),EW=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),Ew=z([AW,ni,sde],EW,{memoizeOptions:{resultEqualityCheck:L1}}),SW=z([Ew],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(_O)),TW=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),ade=z([Ew],TW),PW=t=>t.map(e=>e.data).filter(Boolean).flat(1),ode=z([Ew],PW,{memoizeOptions:{resultEqualityCheck:L1}}),IW=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},xO=z([ode,uO],IW),CW=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Nr(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Nr(i,r)}))):t.map(r=>({value:r})),j1=z([xO,ni,Ew],CW);function kW(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Qb(t){if(Ps(t)||t instanceof Date){var e=Number(t);if(St(e))return e}}function bF(t){if(Array.isArray(t)){var e=[Qb(t[0]),Qb(t[1])];return iu(e)?e:void 0}var n=Qb(t);if(n!=null)return[n,n]}function vl(t){return t.map(Qb).filter(zie)}function lde(t,e,n){return!n||typeof e!="number"||Qi(e)?[]:n.length?vl(n.flatMap(r=>{var i=Nr(t,r.dataKey),s,a;if(Array.isArray(i)?[s,a]=i:s=a=i,!(!St(s)||!St(a)))return[e-s,e+a]})):[]}var Nn=t=>{var e=Rn(t),n=jm(t);return Aw(t,e,n)},Sw=z([Nn],t=>t==null?void 0:t.dataKey),cde=z([SW,uO,Nn],yW),RW=(t,e,n,r)=>{var i={},s=e.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),i);return Object.fromEntries(Object.entries(s).map(a=>{var[o,l]=a,c=r?[...l].reverse():l,u=c.map(wO);return[o,{stackedData:$ae(t,u,n),graphicalItems:c}]}))},GC=z([cde,SW,R1,hW],RW),NW=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var a=Gae(t,i,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},ude=z([ni],t=>t.allowDataOverflow),AO=t=>{var e;if(t==null||!("domain"in t))return WC;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=vl(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:WC},OW=z([ni],AO),DW=z([OW,ude],QH),hde=z([GC,gu,kn,DW],NW,{memoizeOptions:{resultEqualityCheck:M1}}),EO=t=>t.errorBars,dde=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>kW(n,r)),IA=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),a=Math.min(...s),o=Math.max(...s);return[a,o]}},MW=(t,e,n,r,i)=>{var s,a;if(n.length>0&&t.forEach(o=>{n.forEach(l=>{var c,u,h=(c=r[l.id])===null||c===void 0?void 0:c.filter(w=>kW(i,w)),f=Nr(o,(u=e.dataKey)!==null&&u!==void 0?u:l.dataKey),m=lde(o,f,h);if(m.length>=2){var g=Math.min(...m),v=Math.max(...m);(s==null||g<s)&&(s=g),(a==null||v>a)&&(a=v)}var y=bF(f);y!=null&&(s=s==null?y[0]:Math.min(s,y[0]),a=a==null?y[1]:Math.max(a,y[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(o=>{var l=bF(Nr(o,e.dataKey));l!=null&&(s=s==null?l[0]:Math.min(s,l[0]),a=a==null?l[1]:Math.max(a,l[1]))}),St(s)&&St(a))return[s,a]},fde=z([xO,ni,ade,EO,kn],MW,{memoizeOptions:{resultEqualityCheck:M1}});function pde(t){var{value:e}=t;if(Ps(e)||e instanceof Date)return e}var mde=(t,e,n)=>{var r=t.map(pde).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&k6(r))?gH(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},LW=t=>t.referenceElements.dots,Fm=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),gde=z([LW,kn,D1],Fm),jW=t=>t.referenceElements.areas,vde=z([jW,kn,D1],Fm),FW=t=>t.referenceElements.lines,yde=z([FW,kn,D1],Fm),VW=(t,e)=>{var n=vl(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},wde=z(gde,kn,VW),UW=(t,e)=>{var n=vl(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},_de=z([vde,kn],UW);function bde(t){var e;if(t.x!=null)return vl([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:vl(n)}function xde(t){var e;if(t.y!=null)return vl([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:vl(n)}var BW=(t,e)=>{var n=t.flatMap(r=>e==="xAxis"?bde(r):xde(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Ade=z([yde,kn],BW),Ede=z(wde,Ade,_de,(t,e,n)=>IA(t,n,e)),$W=(t,e,n,r,i,s,a,o)=>{if(n!=null)return n;var l=a==="vertical"&&o==="xAxis"||a==="horizontal"&&o==="yAxis",c=l?IA(r,s,i):IA(s,i);return Mhe(e,c,t.allowDataOverflow)},Sde=z([ni,OW,DW,hde,fde,Ede,Pt,kn],$W,{memoizeOptions:{resultEqualityCheck:M1}}),Tde=[0,1],zW=(t,e,n,r,i,s,a)=>{if(!((t==null||n==null||n.length===0)&&a===void 0)){var{dataKey:o,type:l}=t,c=bl(e,s);if(c&&o==null){var u;return gH(0,(u=n==null?void 0:n.length)!==null&&u!==void 0?u:0)}return l==="category"?mde(r,t,c):i==="expand"?Tde:a}},SO=z([ni,Pt,xO,j1,R1,kn,Sde],zW),HW=(t,e,n,r,i)=>{if(t!=null){var{scale:s,type:a}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(gN(s));return o in av?o:"point"}}},Tw=z([ni,Pt,bW,fO,kn],HW);function Pde(t){if(t!=null){if(t in av)return av[t]();var e="scale".concat(gN(t));if(e in av)return av[e]()}}function TO(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=Pde(e);if(i!=null){var s=i.domain(n).range(r);return Fae(s),s}}}var WW=(t,e,n)=>{var r=AO(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&iu(t))return Hhe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&iu(t))return Whe(t,e.tickCount,e.allowDecimals)}},PO=z([SO,Aw,Tw],WW),GW=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&iu(e)&&Array.isArray(n)&&n.length>0){var i=e[0],s=n[0],a=e[1],o=n[n.length-1];return[Math.min(i,s),Math.max(a,o)]}return e},Ide=z([ni,SO,PO,kn],GW),Cde=z(j1,ni,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(vl(t.map(o=>o.value))).sort((o,l)=>o-l);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var a=r[s+1]-r[s];n=Math.min(n,a)}return n/i}}),qW=z(Cde,Pt,Ghe,hr,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!St(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var a=ru(n,t*s),o=t*s/2;return o-a-(o-a)/s*a}return 0}),kde=(t,e)=>{var n=eo(t,e);return n==null||typeof n.padding!="string"?0:qW(t,"xAxis",e,n.padding)},Rde=(t,e)=>{var n=to(t,e);return n==null||typeof n.padding!="string"?0:qW(t,"yAxis",e,n.padding)},Nde=z(eo,kde,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),Ode=z(to,Rde,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),Dde=z([hr,Nde,_1,w1,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),Mde=z([hr,Pt,Ode,_1,w1,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:a}=i;return s?[r.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Pw=(t,e,n,r)=>{var i;switch(e){case"xAxis":return Dde(t,n,r);case"yAxis":return Mde(t,n,r);case"zAxis":return(i=bO(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return mW(t);case"radiusAxis":return gW(t,n);default:return}},KW=z([ni,Pw],N1),su=z([ni,Tw,Ide,KW],TO);z([Ew,EO,kn],dde);function XW(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var F1=(t,e)=>e,V1=(t,e,n)=>n,Lde=z(v1,F1,V1,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(XW)),jde=z(y1,F1,V1,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(XW)),YW=(t,e)=>({width:t.width,height:e.height}),Fde=(t,e)=>{var n=typeof e.width=="number"?e.width:mw;return{width:n,height:t.height}},Vde=z(hr,eo,YW),Ude=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},Bde=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},$de=z(Al,hr,Lde,F1,V1,(t,e,n,r,i)=>{var s={},a;return n.forEach(o=>{var l=YW(e,o);a==null&&(a=Ude(e,r,t));var c=r==="top"&&!i||r==="bottom"&&i;s[o.id]=a-Number(c)*l.height,a+=(c?-1:1)*l.height}),s}),zde=z(xl,hr,jde,F1,V1,(t,e,n,r,i)=>{var s={},a;return n.forEach(o=>{var l=Fde(e,o);a==null&&(a=Bde(e,r,t));var c=r==="left"&&!i||r==="right"&&i;s[o.id]=a-Number(c)*l.width,a+=(c?-1:1)*l.width}),s}),Hde=(t,e)=>{var n=eo(t,e);if(n!=null)return $de(t,n.orientation,n.mirror)},Wde=z([hr,eo,Hde,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),Gde=(t,e)=>{var n=to(t,e);if(n!=null)return zde(t,n.orientation,n.mirror)},qde=z([hr,to,Gde,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),Kde=z(hr,to,(t,e)=>{var n=typeof e.width=="number"?e.width:mw;return{width:n,height:t.height}}),QW=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:a}=n,o=bl(t,r),l=e.map(c=>c.value);if(a&&o&&s==="category"&&i&&k6(l))return l}},IO=z([Pt,j1,ni,kn],QW),JW=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,a=bl(t,r);if(a&&(i==="number"||s!=="auto"))return e.map(o=>o.value)}},CO=z([Pt,j1,Aw,kn],JW),xF=z([Pt,ide,Tw,su,IO,CO,Pw,PO,kn],(t,e,n,r,i,s,a,o,l)=>{if(e!=null){var c=bl(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:o,range:a,realScaleType:n,scale:r}}}),Xde=(t,e,n,r,i,s,a,o,l)=>{if(!(e==null||r==null)){var c=bl(t,l),{type:u,ticks:h,tickCount:f}=e,m=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,g=u==="category"&&r.bandwidth?r.bandwidth()/m:0;g=l==="angleAxis"&&s!=null&&s.length>=2?_s(s[0]-s[1])*2*g:g;var v=h||i;if(v){var y=v.map((w,b)=>{var A=a?a.indexOf(w):w;return{index:b,coordinate:r(A)+g,value:w,offset:g}});return y.filter(w=>St(w.coordinate))}return c&&o?o.map((w,b)=>({coordinate:r(w)+g,value:w,index:b,offset:g})).filter(w=>St(w.coordinate)):r.ticks?r.ticks(f).map(w=>({coordinate:r(w)+g,value:w,offset:g})):r.domain().map((w,b)=>({coordinate:r(w)+g,value:a?a[w]:w,index:b,offset:g}))}},ZW=z([Pt,Aw,Tw,su,PO,Pw,IO,CO,kn],Xde),Yde=(t,e,n,r,i,s,a)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=bl(t,a),{tickCount:l}=e,c=0;return c=a==="angleAxis"&&(r==null?void 0:r.length)>=2?_s(r[0]-r[1])*2*c:c,o&&s?s.map((u,h)=>({coordinate:n(u)+c,value:u,index:h,offset:c})):n.ticks?n.ticks(l).map(u=>({coordinate:n(u)+c,value:u,offset:c})):n.domain().map((u,h)=>({coordinate:n(u)+c,value:i?i[u]:u,index:h,offset:c}))}},e9=z([Pt,Aw,su,Pw,IO,CO,kn],Yde),t9=z(ni,su,(t,e)=>{if(!(t==null||e==null))return PA(PA({},t),{},{scale:e})}),Qde=z([ni,Tw,SO,KW],TO);z((t,e,n)=>bO(t,n),Qde,(t,e)=>{if(!(t==null||e==null))return PA(PA({},t),{},{scale:e})});var Jde=z([Pt,v1,y1],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),n9=t=>t.options.defaultTooltipEventType,r9=t=>t.options.validateTooltipEventTypes;function i9(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function kO(t,e){var n=n9(t),r=r9(t);return i9(e,n,r)}function Zde(t){return be(e=>kO(e,t))}var s9=(t,e)=>{var n,r=Number(e);if(!(Qi(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},efe=t=>t.tooltip.settings,Jl={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},tfe={itemInteraction:{click:Jl,hover:Jl},axisInteraction:{click:Jl,hover:Jl},keyboardInteraction:Jl,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},a9=bi({name:"tooltip",initialState:tfe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Dt()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ia(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Dt()},removeTooltipEntrySettings:{reducer(t,e){var n=ia(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Dt()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:nfe,replaceTooltipEntrySettings:rfe,removeTooltipEntrySettings:ife,setTooltipSettingsState:sfe,setActiveMouseOverItemIndex:afe,mouseLeaveItem:gwe,mouseLeaveChart:o9,setActiveClickItemIndex:vwe,setMouseOverAxisIndex:l9,setMouseClickAxisIndex:ofe,setSyncInteraction:qC,setKeyboardInteraction:KC}=a9.actions,lfe=a9.reducer;function AF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function W_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AF(Object(n),!0).forEach(function(r){cfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cfe(t,e,n){return(e=ufe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ufe(t){var e=hfe(t,"string");return typeof e=="symbol"?e:e+""}function hfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dfe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function ffe(t){return t.index!=null}var c9=(t,e,n,r)=>{if(e==null)return Jl;var i=dfe(t,e,n);if(i==null)return Jl;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(ffe(i)){if(s)return W_(W_({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return W_(W_({},Jl),{},{coordinate:i.coordinate})};function pfe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function mfe(t,e){var n=pfe(t),r=e[0],i=e[1];if(n===void 0)return!1;var s=Math.min(r,i),a=Math.max(r,i);return n>=s&&n<=a}function gfe(t,e,n){if(n==null||e==null)return!0;var r=Nr(t,e);return r==null||!iu(n)?!0:mfe(r,n)}var RO=(t,e,n,r)=>{var i=t==null?void 0:t.index;if(i==null)return null;var s=Number(i);if(!St(s))return i;var a=0,o=1/0;e.length>0&&(o=e.length-1);var l=Math.max(a,Math.min(s,o)),c=e[l];return c==null||gfe(c,n,r)?String(l):null},u9=(t,e,n,r,i,s,a,o)=>{if(!(s==null||o==null)){var l=a[0],c=l==null?void 0:o(l.positions,s);if(c!=null)return c;var u=i==null?void 0:i[Number(s)];if(u)switch(n){case"horizontal":return{x:u.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:u.coordinate}}}},h9=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var a;return((a=s.settings)===null||a===void 0?void 0:a.dataKey)===i})},Iw=t=>t.options.tooltipPayloadSearcher,Vm=t=>t.tooltip;function EF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EF(Object(n),!0).forEach(function(r){vfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vfe(t,e,n){return(e=yfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yfe(t){var e=wfe(t,"string");return typeof e=="symbol"?e:e+""}function wfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _fe(t,e){return t??e}var d9=(t,e,n,r,i,s,a)=>{if(!(e==null||s==null)){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:u}=n,h=[];return t.reduce((f,m)=>{var g,{dataDefinedOnItem:v,settings:y}=m,w=_fe(v,o),b=Array.isArray(w)?L5(w,c,u):w,A=(g=y==null?void 0:y.dataKey)!==null&&g!==void 0?g:r,I=y==null?void 0:y.nameKey,k;if(r&&Array.isArray(b)&&!Array.isArray(b[0])&&a==="axis"?k=R6(b,r,i):k=s(b,e,l,I),Array.isArray(k))k.forEach(P=>{var C=SF(SF({},y),{},{name:P.name,unit:P.unit,color:void 0,fill:void 0});f.push(nj({tooltipEntrySettings:C,dataKey:P.dataKey,payload:P.payload,value:Nr(P.payload,P.dataKey),name:P.name}))});else{var M;f.push(nj({tooltipEntrySettings:y,dataKey:A,payload:k,value:Nr(k,A),name:(M=Nr(k,I))!==null&&M!==void 0?M:y==null?void 0:y.name}))}return f},h)}},NO=z([Nn,Pt,bW,fO,Rn],HW),bfe=z([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),xfe=z([Rn,jm],xW),Cw=z([bfe,Nn,xfe],EW,{memoizeOptions:{resultEqualityCheck:L1}}),Afe=z([Cw],t=>t.filter(_O)),Efe=z([Cw],PW,{memoizeOptions:{resultEqualityCheck:L1}}),Um=z([Efe,gu],IW),Sfe=z([Afe,gu,Nn],yW),OO=z([Um,Nn,Cw],CW),f9=z([Nn],AO),Tfe=z([Nn],t=>t.allowDataOverflow),p9=z([f9,Tfe],QH),Pfe=z([Cw],t=>t.filter(_O)),Ife=z([Sfe,Pfe,R1,hW],RW),Cfe=z([Ife,gu,Rn,p9],NW),kfe=z([Cw],TW),Rfe=z([Um,Nn,kfe,EO,Rn],MW,{memoizeOptions:{resultEqualityCheck:M1}}),Nfe=z([LW,Rn,jm],Fm),Ofe=z([Nfe,Rn],VW),Dfe=z([jW,Rn,jm],Fm),Mfe=z([Dfe,Rn],UW),Lfe=z([FW,Rn,jm],Fm),jfe=z([Lfe,Rn],BW),Ffe=z([Ofe,jfe,Mfe],IA),Vfe=z([Nn,f9,p9,Cfe,Rfe,Ffe,Pt,Rn],$W),kw=z([Nn,Pt,Um,OO,R1,Rn,Vfe],zW),Ufe=z([kw,Nn,NO],WW),Bfe=z([Nn,kw,Ufe,Rn],GW),m9=t=>{var e=Rn(t),n=jm(t),r=!1;return Pw(t,e,n,r)},g9=z([Nn,m9],N1),v9=z([Nn,NO,Bfe,g9],TO),$fe=z([Pt,OO,Nn,Rn],QW),zfe=z([Pt,OO,Nn,Rn],JW),Hfe=(t,e,n,r,i,s,a,o)=>{if(e){var{type:l}=e,c=bl(t,o);if(r){var u=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=l==="category"&&r.bandwidth?r.bandwidth()/u:0;return h=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?_s(i[0]-i[1])*2*h:h,c&&a?a.map((f,m)=>({coordinate:r(f)+h,value:f,index:m,offset:h})):r.domain().map((f,m)=>({coordinate:r(f)+h,value:s?s[f]:f,index:m,offset:h}))}}},Sl=z([Pt,Nn,NO,v9,m9,$fe,zfe,Rn],Hfe),DO=z([n9,r9,efe],(t,e,n)=>i9(n.shared,t,e)),y9=t=>t.tooltip.settings.trigger,MO=t=>t.tooltip.settings.defaultIndex,Rw=z([Vm,DO,y9,MO],c9),gy=z([Rw,Um,Sw,kw],RO),w9=z([Sl,gy],s9),Wfe=z([Rw],t=>{if(t)return t.dataKey});z([Rw],t=>{if(t)return t.graphicalItemId});var _9=z([Vm,DO,y9,MO],h9),Gfe=z([xl,Al,Pt,hr,Sl,MO,_9,Iw],u9),qfe=z([Rw,Gfe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Kfe=z([Rw],t=>t.active),Xfe=z([_9,gy,gu,Sw,w9,Iw,DO],d9),Yfe=z([Xfe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function TF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TF(Object(n),!0).forEach(function(r){Qfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qfe(t,e,n){return(e=Jfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jfe(t){var e=Zfe(t,"string");return typeof e=="symbol"?e:e+""}function Zfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var epe=()=>be(Nn),tpe=()=>{var t=epe(),e=be(Sl),n=be(v9);return oA(!t||!n?void 0:PF(PF({},t),{},{scale:n}),e)};function IF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ef(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IF(Object(n),!0).forEach(function(r){npe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function npe(t,e,n){return(e=rpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rpe(t){var e=ipe(t,"string");return typeof e=="symbol"?e:e+""}function ipe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var spe=(t,e,n,r)=>{var i=e.find(s=>s&&s.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},ape=(t,e,n,r)=>{var i=e.find(c=>c&&c.index===n);if(i){if(t==="centric"){var s=i.coordinate,{radius:a}=r;return ef(ef(ef({},r),sr(r.cx,r.cy,a,s)),{},{angle:s,radius:a})}var o=i.coordinate,{angle:l}=r;return ef(ef(ef({},r),sr(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function ope(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var b9=(t,e,n,r,i)=>{var s,a=-1,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?n[l-1].coordinate:n[o-1].coordinate,u=n[l].coordinate,h=l>=o-1?n[0].coordinate:n[l+1].coordinate,f=void 0;if(_s(u-c)!==_s(h-u)){var m=[];if(_s(h-u)===_s(i[1]-i[0])){f=h;var g=u+i[1]-i[0];m[0]=Math.min(g,(g+c)/2),m[1]=Math.max(g,(g+c)/2)}else{f=c;var v=h+i[1]-i[0];m[0]=Math.min(u,(v+u)/2),m[1]=Math.max(u,(v+u)/2)}var y=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(t>y[0]&&t<=y[1]||t>=m[0]&&t<=m[1]){({index:a}=n[l]);break}}else{var w=Math.min(c,h),b=Math.max(c,h);if(t>(w+u)/2&&t<=(b+u)/2){({index:a}=n[l]);break}}}else if(e){for(var A=0;A<o;A++)if(A===0&&t<=(e[A].coordinate+e[A+1].coordinate)/2||A>0&&A<o-1&&t>(e[A].coordinate+e[A-1].coordinate)/2&&t<=(e[A].coordinate+e[A+1].coordinate)/2||A===o-1&&t>(e[A].coordinate+e[A-1].coordinate)/2){({index:a}=e[A]);break}}return a},x9=()=>be(fO),LO=(t,e)=>e,A9=(t,e,n)=>n,jO=(t,e,n,r)=>r,lpe=z(Sl,t=>l1(t,e=>e.coordinate)),FO=z([Vm,LO,A9,jO],c9),VO=z([FO,Um,Sw,kw],RO),cpe=(t,e,n)=>{if(e!=null){var r=Vm(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},E9=z([Vm,LO,A9,jO],h9),CA=z([xl,Al,Pt,hr,Sl,jO,E9,Iw],u9),upe=z([FO,CA],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),S9=z([Sl,VO],s9),hpe=z([E9,VO,gu,Sw,S9,Iw,LO],d9),dpe=z([FO,VO],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),fpe=(t,e,n,r,i,s,a)=>{if(!(!t||!n||!r||!i)&&ope(t,a)){var o=qae(t,e),l=b9(o,s,i,n,r),c=spe(e,i,l,t);return{activeIndex:String(l),activeCoordinate:c}}},ppe=(t,e,n,r,i,s,a)=>{if(!(!t||!r||!i||!s||!n)){var o=Zle(t,n);if(o){var l=Kae(o,e),c=b9(l,a,s,r,i),u=ape(e,s,c,o);return{activeIndex:String(c),activeCoordinate:u}}}},mpe=(t,e,n,r,i,s,a,o)=>{if(!(!t||!e||!r||!i||!s))return e==="horizontal"||e==="vertical"?fpe(t,e,r,i,s,a,o):ppe(t,e,n,r,i,s,a)},gpe=z(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElementId:r.elementId}}),vpe=z(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Rr)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:Zhe}});function CF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CF(Object(n),!0).forEach(function(r){ype(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ype(t,e,n){return(e=wpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wpe(t){var e=_pe(t,"string");return typeof e=="symbol"?e:e+""}function _pe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bpe={},xpe={zIndexMap:Object.values(Rr).reduce((t,e)=>kF(kF({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),bpe)},Ape=new Set(Object.values(Rr));function Epe(t){return Ape.has(t)}var T9=bi({name:"zIndex",initialState:xpe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Dt()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!Epe(n)&&delete t.zIndexMap[n])},prepare:Dt()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n,elementId:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElementId=r:t.zIndexMap[n].elementId=r:t.zIndexMap[n]={consumers:0,elementId:i?void 0:r,panoramaElementId:i?r:void 0}},prepare:Dt()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElementId=void 0:t.zIndexMap[n].elementId=void 0)},prepare:Dt()}}}),{registerZIndexPortal:Spe,unregisterZIndexPortal:Tpe,registerZIndexPortalId:Ppe,unregisterZIndexPortalId:Ipe}=T9.actions,Cpe=T9.reducer;function no(t){var{zIndex:e,children:n}=t,r=Aoe(),i=r&&e!==void 0&&e!==0,s=ti(),a=In();E.useLayoutEffect(()=>i?(a(Spe({zIndex:e})),()=>{a(Tpe({zIndex:e}))}):hw,[a,e,i]);var o=be(c=>gpe(c,e,s));if(!i)return n;if(!o)return null;var l=document.getElementById(o);return l?Jk.createPortal(n,l):null}function XC(){return XC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XC.apply(null,arguments)}function RF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RF(Object(n),!0).forEach(function(r){kpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kpe(t,e,n){return(e=Rpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rpe(t){var e=Npe(t,"string");return typeof e=="symbol"?e:e+""}function Npe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ope(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return E.isValidElement(e)?E.cloneElement(e,r):E.createElement(n,r)}function Dpe(t){var e,{coordinate:n,payload:r,index:i,offset:s,tooltipAxisBandSize:a,layout:o,cursor:l,tooltipEventType:c,chartName:u}=t,h=n,f=r,m=i;if(!l||!h||u!=="ScatterChart"&&c!=="axis")return null;var g,v,y;if(u==="ScatterChart")g=h,v=hle,y=Rr.cursorLine;else if(u==="BarChart")g=dle(o,h,s,a),v=zle,y=Rr.cursorRectangle;else if(o==="radial"&&N6(h)){var{cx:w,cy:b,radius:A,startAngle:I,endAngle:k}=hH(h);g={cx:w,cy:b,startAngle:I,endAngle:k,innerRadius:A,outerRadius:A},v=rce,y=Rr.cursorLine}else g={points:ice(o,h,s)},v=Yb,y=Rr.cursorLine;var M=typeof l=="object"&&"className"in l?l.className:void 0,P=G_(G_(G_(G_({stroke:"#ccc",pointerEvents:"none"},s),g),ZE(l)),{},{payload:f,payloadIndex:m,className:Tt("recharts-tooltip-cursor",M)});return E.createElement(no,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:y},E.createElement(Ope,{cursor:l,cursorComp:v,cursorProps:P}))}function Mpe(t){var e=tpe(),n=X5(),r=vw(),i=x9();return e==null||n==null||r==null||i==null?null:E.createElement(Dpe,XC({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var P9=E.createContext(null),Lpe=()=>E.useContext(P9),I9={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new i(u,h||l,f),g=n?n+c:c;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],m]:l._events[g].push(m):(l._events[g]=m,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=n?n+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,g=new Array(m);f<m;f++)g[f]=h[f].fn;return g},o.prototype.listenerCount=function(c){var u=n?n+c:c,h=this._events[u];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,u,h,f,m,g){var v=n?n+c:c;if(!this._events[v])return!1;var y=this._events[v],w=arguments.length,b,A;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,h),!0;case 4:return y.fn.call(y.context,u,h,f),!0;case 5:return y.fn.call(y.context,u,h,f,m),!0;case 6:return y.fn.call(y.context,u,h,f,m,g),!0}for(A=1,b=new Array(w-1);A<w;A++)b[A-1]=arguments[A];y.fn.apply(y.context,b)}else{var I=y.length,k;for(A=0;A<I;A++)switch(y[A].once&&this.removeListener(c,y[A].fn,void 0,!0),w){case 1:y[A].fn.call(y[A].context);break;case 2:y[A].fn.call(y[A].context,u);break;case 3:y[A].fn.call(y[A].context,u,h);break;case 4:y[A].fn.call(y[A].context,u,h,f);break;default:if(!b)for(k=1,b=new Array(w-1);k<w;k++)b[k-1]=arguments[k];y[A].fn.apply(y[A].context,b)}}return!0},o.prototype.on=function(c,u,h){return s(this,c,u,h,!1)},o.prototype.once=function(c,u,h){return s(this,c,u,h,!0)},o.prototype.removeListener=function(c,u,h,f){var m=n?n+c:c;if(!this._events[m])return this;if(!u)return a(this,m),this;var g=this._events[m];if(g.fn)g.fn===u&&(!f||g.once)&&(!h||g.context===h)&&a(this,m);else{for(var v=0,y=[],w=g.length;v<w;v++)(g[v].fn!==u||f&&!g[v].once||h&&g[v].context!==h)&&y.push(g[v]);y.length?this._events[m]=y.length===1?y[0]:y:a(this,m)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(I9);var jpe=I9.exports;const Fpe=ou(jpe);var vy=new Fpe,YC="recharts.syncEvent.tooltip",NF="recharts.syncEvent.brush";function Vpe(t,e){if(e){var n=Number.parseInt(e,10);if(!Qi(n))return t==null?void 0:t[n]}}var Upe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},C9=bi({name:"options",initialState:Upe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Bpe=C9.reducer,{createEventEmitter:$pe}=C9.actions;function zpe(t){return t.tooltip.syncInteraction}var Hpe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},k9=bi({name:"chartData",initialState:Hpe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:OF,setDataStartEndIndexes:Wpe,setComputedData:ywe}=k9.actions,Gpe=k9.reducer,qpe=["x","y"];function DF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DF(Object(n),!0).forEach(function(r){Kpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kpe(t,e,n){return(e=Xpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xpe(t){var e=Ype(t,"string");return typeof e=="symbol"?e:e+""}function Ype(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qpe(t,e){if(t==null)return{};var n,r,i=Jpe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Jpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Zpe(){var t=be(pO),e=be(mO),n=In(),r=be(dW),i=be(Sl),s=vw(),a=gw(),o=be(l=>l.rootProps.className);E.useEffect(()=>{if(t==null)return hw;var l=(c,u,h)=>{if(e!==h&&t===c){if(r==="index"){var f;if(a&&u!==null&&u!==void 0&&(f=u.payload)!==null&&f!==void 0&&f.coordinate&&u.payload.sourceViewBox){var m=u.payload.coordinate,{x:g,y:v}=m,y=Qpe(m,qpe),{x:w,y:b,width:A,height:I}=u.payload.sourceViewBox,k=tf(tf({},y),{},{x:a.x+(A?(g-w)/A:0)*a.width,y:a.y+(I?(v-b)/I:0)*a.height});n(tf(tf({},u),{},{payload:tf(tf({},u.payload),{},{coordinate:k})}))}else n(u);return}if(i!=null){var M;if(typeof r=="function"){var P={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},C=r(i,P);M=i[C]}else r==="value"&&(M=i.find(K=>String(K.value)===u.payload.label));var{coordinate:O}=u.payload;if(M==null||u.payload.active===!1||O==null||a==null){n(qC({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:j,y:D}=O,F=Math.min(j,a.x+a.width),V=Math.min(D,a.y+a.height),Y={x:s==="horizontal"?M.coordinate:F,y:s==="horizontal"?V:M.coordinate},re=qC({active:u.payload.active,coordinate:Y,dataKey:u.payload.dataKey,index:String(M.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});n(re)}}};return vy.on(YC,l),()=>{vy.off(YC,l)}},[o,n,e,t,r,i,s,a])}function eme(){var t=be(pO),e=be(mO),n=In();E.useEffect(()=>{if(t==null)return hw;var r=(i,s,a)=>{e!==a&&t===i&&n(Wpe(s))};return vy.on(NF,r),()=>{vy.off(NF,r)}},[n,e,t])}function tme(){var t=In();E.useEffect(()=>{t($pe())},[t]),Zpe(),eme()}function nme(t,e,n,r,i,s){var a=be(m=>cpe(m,t,e)),o=be(mO),l=be(pO),c=be(dW),u=be(zpe),h=u==null?void 0:u.active,f=gw();E.useEffect(()=>{if(!h&&l!=null&&o!=null){var m=qC({active:s,coordinate:n,dataKey:a,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:f,graphicalItemId:void 0});vy.emit(YC,l,m,o)}},[h,n,a,i,r,o,l,c,s,f])}function MF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MF(Object(n),!0).forEach(function(r){rme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rme(t,e,n){return(e=ime(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ime(t){var e=sme(t,"string");return typeof e=="symbol"?e:e+""}function sme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ame(t){return t.dataKey}function ome(t,e){return E.isValidElement(t)?E.cloneElement(t,e):typeof t=="function"?E.createElement(t,e):E.createElement(Hoe,e)}var jF=[],lme={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function nf(t){var e,n,r=_i(t,lme),{active:i,allowEscapeViewBox:s,animationDuration:a,animationEasing:o,content:l,filterNull:c,isAnimationActive:u,offset:h,payloadUniqBy:f,position:m,reverseDirection:g,useTranslate3d:v,wrapperStyle:y,cursor:w,shared:b,trigger:A,defaultIndex:I,portal:k,axisId:M}=r,P=In(),C=typeof I=="number"?String(I):I;E.useEffect(()=>{P(sfe({shared:b,trigger:A,axisId:M,active:i,defaultIndex:C}))},[P,b,A,M,i,C]);var O=gw(),j=sH(),D=Zde(b),{activeIndex:F,isActive:V}=(e=be(me=>dpe(me,D,A,C)))!==null&&e!==void 0?e:{},Y=be(me=>hpe(me,D,A,C)),re=be(me=>S9(me,D,A,C)),K=be(me=>upe(me,D,A,C)),q=Y,H=Lpe(),X=(n=i??V)!==null&&n!==void 0?n:!1,[te,ce]=Ose([q,X]),ue=D==="axis"?re:void 0;nme(D,A,K,ue,F,X);var ve=k??H;if(ve==null||O==null||D==null)return null;var Ue=q??jF;X||(Ue=jF),c&&Ue.length&&(Ue=Qie(Ue.filter(me=>me.value!=null&&(me.hide!==!0||r.includeHidden)),f,ame));var et=Ue.length>0,Ye=E.createElement(Qoe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:o,isAnimationActive:u,active:X,coordinate:K,hasPayload:et,offset:h,position:m,reverseDirection:g,useTranslate3d:v,viewBox:O,wrapperStyle:y,lastBoundingBox:te,innerRef:ce,hasPortalFromProps:!!k},ome(l,LF(LF({},r),{},{payload:Ue,label:ue,active:X,activeIndex:F,coordinate:K,accessibilityLayer:j})));return E.createElement(E.Fragment,null,Jk.createPortal(Ye,ve),X&&E.createElement(Mpe,{cursor:w,tooltipEventType:D,coordinate:K,payload:Ue,index:F}))}function cme(t,e,n){return(e=ume(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ume(t){var e=hme(t,"string");return typeof e=="symbol"?e:e+""}function hme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class dme{constructor(e){cme(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function FF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fme(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FF(Object(n),!0).forEach(function(r){pme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pme(t,e,n){return(e=mme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mme(t){var e=gme(t,"string");return typeof e=="symbol"?e:e+""}function gme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vme={cacheSize:2e3,enableCache:!0},R9=fme({},vme),VF=new dme(R9.cacheSize),yme={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},UF="recharts_measurement_span";function wme(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",a=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(a,"|").concat(o)}var BF=(t,e)=>{try{var n=document.getElementById(UF);n||(n=document.createElement("span"),n.setAttribute("id",UF),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,yme,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Ev=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Om.isSsr)return{width:0,height:0};if(!R9.enableCache)return BF(e,n);var r=wme(e,n),i=VF.get(r);if(i)return i;var s=BF(e,n);return VF.set(r,s),s},$F=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_me=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,bme=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,N9={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},xme=Object.keys(N9),kf="NaN";function Ame(t,e){return t*N9[e]}class di{static parse(e){var n,[,r,i]=(n=bme.exec(e))!==null&&n!==void 0?n:[];return new di(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Qi(e)&&(this.unit=""),n!==""&&!_me.test(n)&&(this.num=NaN,this.unit=""),xme.includes(n)&&(this.num=Ame(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new di(NaN,""):new di(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new di(NaN,""):new di(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new di(NaN,""):new di(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new di(NaN,""):new di(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Qi(this.num)}}function O9(t){if(t.includes(kf))return kf;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=$F.exec(e))!==null&&n!==void 0?n:[],a=di.parse(r??""),o=di.parse(s??""),l=i==="*"?a.multiply(o):a.divide(o);if(l.isNaN())return kf;e=e.replace($F,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,u,h,f]=(c=zF.exec(e))!==null&&c!==void 0?c:[],m=di.parse(u??""),g=di.parse(f??""),v=h==="+"?m.add(g):m.subtract(g);if(v.isNaN())return kf;e=e.replace(zF,v.toString())}return e}var HF=/\(([^()]*)\)/;function Eme(t){for(var e=t,n;(n=HF.exec(e))!=null;){var[,r]=n;e=e.replace(HF,O9(r))}return e}function Sme(t){var e=t.replace(/\s+/g,"");return e=Eme(e),e=O9(e),e}function Tme(t){try{return Sme(t)}catch{return kf}}function mT(t){var e=Tme(t.slice(5,-1));return e===kf?"":e}var Pme=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Ime=["dx","dy","angle","className","breakAll"];function QC(){return QC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QC.apply(null,arguments)}function WF(t,e){if(t==null)return{};var n,r,i=Cme(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Cme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var D9=/[ \f\n\r\t\v\u2028\u2029]+/,M9=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];lr(e)||(n?i=e.toString().split(""):i=e.toString().split(D9));var s=i.map(o=>({word:o,width:Ev(o,r).width})),a=n?0:Ev("",r).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}};function kme(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var L9=(t,e,n,r)=>t.reduce((i,s)=>{var{word:a,width:o}=s,l=i[i.length-1];if(l&&o!=null&&(e==null||r||l.width+o+n<Number(e)))l.words.push(a),l.width+=o+n;else{var c={words:[a],width:o};i.push(c)}return i},[]),j9=t=>t.reduce((e,n)=>e.width>n.width?e:n),Rme="",GF=(t,e,n,r,i,s,a,o)=>{var l=t.slice(0,e),c=M9({breakAll:n,style:r,children:l+Rme});if(!c)return[!1,[]];var u=L9(c.wordsWithComputedWidth,s,a,o),h=u.length>i||j9(u).width>Number(s);return[h,u]},Nme=(t,e,n,r,i)=>{var{maxLines:s,children:a,style:o,breakAll:l}=t,c=xe(s),u=String(a),h=L9(e,r,n,i);if(!c||i)return h;var f=h.length>s||j9(h).width>Number(r);if(!f)return h;for(var m=0,g=u.length-1,v=0,y;m<=g&&v<=u.length-1;){var w=Math.floor((m+g)/2),b=w-1,[A,I]=GF(u,b,l,o,s,r,n,i),[k]=GF(u,w,l,o,s,r,n,i);if(!A&&!k&&(m=w+1),A&&k&&(g=w-1),!A&&k){y=I;break}v++}return y||h},qF=t=>{var e=lr(t)?[]:t.toString().split(D9);return[{words:e,width:void 0}]},Ome=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:a}=t;if((e||n)&&!Om.isSsr){var o,l,c=M9({breakAll:s,children:r,style:i});if(c){var{wordsWithComputedWidth:u,spaceWidth:h}=c;o=u,l=h}else return qF(r);return Nme({breakAll:s,children:r,maxLines:a,style:i},o,l,e,!!n)}return qF(r)},F9="#808080",Dme={angle:0,breakAll:!1,capHeight:"0.71em",fill:F9,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},UO=E.forwardRef((t,e)=>{var n=_i(t,Dme),{x:r,y:i,lineHeight:s,capHeight:a,fill:o,scaleToFit:l,textAnchor:c,verticalAnchor:u}=n,h=WF(n,Pme),f=E.useMemo(()=>Ome({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:m,dy:g,angle:v,className:y,breakAll:w}=h,b=WF(h,Ime);if(!Ps(r)||!Ps(i)||f.length===0)return null;var A=Number(r)+(xe(m)?m:0),I=Number(i)+(xe(g)?g:0);if(!St(A)||!St(I))return null;var k;switch(u){case"start":k=mT("calc(".concat(a,")"));break;case"middle":k=mT("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:k=mT("calc(".concat(f.length-1," * -").concat(s,")"));break}var M=[];if(l){var P=f[0].width,{width:C}=h;M.push("scale(".concat(xe(C)&&xe(P)?C/P:1,")"))}return v&&M.push("rotate(".concat(v,", ").concat(A,", ").concat(I,")")),M.length&&(b.transform=M.join(" ")),E.createElement("text",QC({},Yi(b),{ref:e,x:A,y:I,className:Tt("recharts-text",y),textAnchor:c,fill:o.includes("url")?F9:o}),f.map((O,j)=>{var D=O.words.join(w?"":" ");return E.createElement("tspan",{x:A,dy:j===0?k:s,key:"".concat(D,"-").concat(j)},D)}))});UO.displayName="Text";var Mme=["labelRef"];function Lme(t,e){if(t==null)return{};var n,r,i=jme(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function KF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KF(Object(n),!0).forEach(function(r){Fme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fme(t,e,n){return(e=Vme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vme(t){var e=Ume(t,"string");return typeof e=="symbol"?e:e+""}function Ume(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $o(){return $o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$o.apply(null,arguments)}var V9=E.createContext(null),U9=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:a,children:o}=t,l=E.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:a}),[e,n,r,i,s,a]);return E.createElement(V9.Provider,{value:l},o)},B9=()=>{var t=E.useContext(V9),e=gw();return t||K5(e)},Bme=E.createContext(null),$me=()=>{var t=E.useContext(Bme),e=be(vW);return t||e},zme=t=>{var{value:e,formatter:n}=t,r=lr(t.children)?e:t.children;return typeof n=="function"?n(r):r},BO=t=>t!=null&&typeof t=="function",Hme=(t,e)=>{var n=_s(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Wme=(t,e,n,r,i)=>{var{offset:s,className:a}=t,{cx:o,cy:l,innerRadius:c,outerRadius:u,startAngle:h,endAngle:f,clockWise:m}=i,g=(c+u)/2,v=Hme(h,f),y=v>=0?1:-1,w,b;switch(e){case"insideStart":w=h+y*s,b=m;break;case"insideEnd":w=f-y*s,b=!m;break;case"end":w=f+y*s,b=m;break;default:throw new Error("Unsupported position ".concat(e))}b=v<=0?b:!b;var A=sr(o,l,g,w),I=sr(o,l,g,w+(b?1:-1)*359),k="M".concat(A.x,",").concat(A.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(b?0:1,`,
    `).concat(I.x,",").concat(I.y),M=lr(t.id)?ry("recharts-radial-line-"):t.id;return E.createElement("text",$o({},r,{dominantBaseline:"central",className:Tt("recharts-radial-bar-label",a)}),E.createElement("defs",null,E.createElement("path",{id:M,d:k})),E.createElement("textPath",{xlinkHref:"#".concat(M)},n))},Gme=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:o,endAngle:l}=t,c=(o+l)/2;if(n==="outside"){var{x:u,y:h}=sr(r,i,a+e,c);return{x:u,y:h,textAnchor:u>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var f=(s+a)/2,{x:m,y:g}=sr(r,i,f,c);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},JC=t=>"cx"in t&&xe(t.cx),qme=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,s;n!=null&&!JC(n)&&(s=n);var{x:a,y:o,upperWidth:l,lowerWidth:c,height:u}=e,h=a,f=a+(l-c)/2,m=(h+f)/2,g=(l+c)/2,v=h+l/2,y=u>=0?1:-1,w=y*r,b=y>0?"end":"start",A=y>0?"start":"end",I=l>=0?1:-1,k=I*r,M=I>0?"end":"start",P=I>0?"start":"end";if(i==="top"){var C={x:h+l/2,y:o-w,textAnchor:"middle",verticalAnchor:b};return tn(tn({},C),s?{height:Math.max(o-s.y,0),width:l}:{})}if(i==="bottom"){var O={x:f+c/2,y:o+u+w,textAnchor:"middle",verticalAnchor:A};return tn(tn({},O),s?{height:Math.max(s.y+s.height-(o+u),0),width:c}:{})}if(i==="left"){var j={x:m-k,y:o+u/2,textAnchor:M,verticalAnchor:"middle"};return tn(tn({},j),s?{width:Math.max(j.x-s.x,0),height:u}:{})}if(i==="right"){var D={x:m+g+k,y:o+u/2,textAnchor:P,verticalAnchor:"middle"};return tn(tn({},D),s?{width:Math.max(s.x+s.width-D.x,0),height:u}:{})}var F=s?{width:g,height:u}:{};return i==="insideLeft"?tn({x:m+k,y:o+u/2,textAnchor:P,verticalAnchor:"middle"},F):i==="insideRight"?tn({x:m+g-k,y:o+u/2,textAnchor:M,verticalAnchor:"middle"},F):i==="insideTop"?tn({x:h+l/2,y:o+w,textAnchor:"middle",verticalAnchor:A},F):i==="insideBottom"?tn({x:f+c/2,y:o+u-w,textAnchor:"middle",verticalAnchor:b},F):i==="insideTopLeft"?tn({x:h+k,y:o+w,textAnchor:P,verticalAnchor:A},F):i==="insideTopRight"?tn({x:h+l-k,y:o+w,textAnchor:M,verticalAnchor:A},F):i==="insideBottomLeft"?tn({x:f+k,y:o+u-w,textAnchor:P,verticalAnchor:b},F):i==="insideBottomRight"?tn({x:f+c-k,y:o+u-w,textAnchor:M,verticalAnchor:b},F):i&&typeof i=="object"&&(xe(i.x)||dl(i.x))&&(xe(i.y)||dl(i.y))?tn({x:a+ru(i.x,g),y:o+ru(i.y,u),textAnchor:"end",verticalAnchor:"end"},F):tn({x:v,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},F)},Kme={angle:0,offset:5,zIndex:Rr.label,position:"middle",textBreakAll:!1};function zl(t){var e=_i(t,Kme),{viewBox:n,position:r,value:i,children:s,content:a,className:o="",textBreakAll:l,labelRef:c}=e,u=$me(),h=B9(),f=r==="center"?h:u??h,m,g,v;if(n==null?m=f:JC(n)?m=n:m=K5(n),!m||lr(i)&&lr(s)&&!E.isValidElement(a)&&typeof a!="function")return null;var y=tn(tn({},e),{},{viewBox:m});if(E.isValidElement(a)){var{labelRef:w}=y,b=Lme(y,Mme);return E.cloneElement(a,b)}if(typeof a=="function"){if(g=E.createElement(a,y),E.isValidElement(g))return g}else g=zme(e);var A=Yi(e);if(JC(m)){if(r==="insideStart"||r==="insideEnd"||r==="end")return Wme(e,r,g,A,m);v=Gme(m,e.offset,e.position)}else v=qme(e,m);return E.createElement(no,{zIndex:e.zIndex},E.createElement(UO,$o({ref:c,className:Tt("recharts-label",o)},A,v,{textAnchor:kme(A.textAnchor)?A.textAnchor:v.textAnchor,breakAll:l}),g))}zl.displayName="Label";var Xme=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?E.createElement(zl,$o({key:"label-implicit"},r)):Ps(t)?E.createElement(zl,$o({key:"label-implicit",value:t},r)):E.isValidElement(t)?t.type===zl?E.cloneElement(t,tn({key:"label-implicit"},r)):E.createElement(zl,$o({key:"label-implicit",content:t},r)):BO(t)?E.createElement(zl,$o({key:"label-implicit",content:t},r)):t&&typeof t=="object"?E.createElement(zl,$o({},t,{key:"label-implicit"},r)):null};function $9(t){var{label:e,labelRef:n}=t,r=B9();return Xme(e,r,n)||null}var z9={},H9={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(H9);var W9={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(W9);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=H9,n=W9,r=a1;function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(z9);var Yme=z9.last;const Qme=ou(Yme);var Jme=["valueAccessor"],Zme=["dataKey","clockWise","id","textBreakAll","zIndex"];function kA(){return kA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kA.apply(null,arguments)}function XF(t,e){if(t==null)return{};var n,r,i=ege(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ege(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var tge=t=>Array.isArray(t.value)?Qme(t.value):t.value,G9=E.createContext(void 0),nge=G9.Provider,q9=E.createContext(void 0);q9.Provider;function rge(){return E.useContext(G9)}function ige(){return E.useContext(q9)}function Jb(t){var{valueAccessor:e=tge}=t,n=XF(t,Jme),{dataKey:r,clockWise:i,id:s,textBreakAll:a,zIndex:o}=n,l=XF(n,Zme),c=rge(),u=ige(),h=c||u;return!h||!h.length?null:E.createElement(no,{zIndex:o??Rr.label},E.createElement(ca,{className:"recharts-label-list"},h.map((f,m)=>{var g,v=lr(r)?e(f,m):Nr(f&&f.payload,r),y=lr(s)?{}:{id:"".concat(s,"-").concat(m)};return E.createElement(zl,kA({key:"label-".concat(m)},Yi(f),l,y,{fill:(g=n.fill)!==null&&g!==void 0?g:f.fill,parentViewBox:f.parentViewBox,value:v,textBreakAll:a,viewBox:f.viewBox,index:m,zIndex:0}))})))}Jb.displayName="LabelList";function sge(t){var{label:e}=t;return e?e===!0?E.createElement(Jb,{key:"labelList-implicit"}):E.isValidElement(e)||BO(e)?E.createElement(Jb,{key:"labelList-implicit",content:e}):typeof e=="object"?E.createElement(Jb,kA({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function ZC(){return ZC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZC.apply(null,arguments)}var K9=t=>{var{cx:e,cy:n,r,className:i}=t,s=Tt("recharts-dot",i);return xe(e)&&xe(n)&&xe(r)?E.createElement("circle",ZC({},la(t),vN(t),{className:s,cx:e,cy:n,r})):null},age={radiusAxis:{},angleAxis:{}},X9=bi({name:"polarAxis",initialState:age,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:wwe,removeRadiusAxis:_we,addAngleAxis:bwe,removeAngleAxis:xwe}=X9.actions,oge=X9.reducer,Y9=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0;function lge(t){var{tooltipEntrySettings:e}=t,n=In(),r=ti(),i=E.useRef(null);return E.useLayoutEffect(()=>{r||(i.current===null?n(nfe(e)):i.current!==e&&n(rfe({prev:i.current,next:e})),i.current=e)},[e,n,r]),E.useLayoutEffect(()=>()=>{i.current&&(n(ife(i.current)),i.current=null)},[n]),null}function cge(t){var{legendPayload:e}=t,n=In(),r=ti(),i=E.useRef(null);return E.useLayoutEffect(()=>{r||(i.current===null?n(Loe(e)):i.current!==e&&n(joe({prev:i.current,next:e})),i.current=e)},[n,r,e]),E.useLayoutEffect(()=>()=>{i.current&&(n(Foe(i.current)),i.current=null)},[n]),null}var gT,uge=()=>{var[t]=E.useState(()=>ry("uid-"));return t},hge=(gT=Q8.useId)!==null&&gT!==void 0?gT:uge;function Q9(t,e){var n=hge();return e||(t?"".concat(t,"-").concat(n):n)}var dge=E.createContext(void 0),fge=t=>{var{id:e,type:n,children:r}=t,i=Q9("recharts-".concat(n),e);return E.createElement(dge.Provider,{value:i},r(i))},pge={cartesianItems:[],polarItems:[]},J9=bi({name:"graphicalItems",initialState:pge,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Dt()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ia(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Dt()},removeCartesianGraphicalItem:{reducer(t,e){var n=ia(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Dt()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Dt()},removePolarGraphicalItem:{reducer(t,e){var n=ia(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Dt()}}}),{addCartesianGraphicalItem:mge,replaceCartesianGraphicalItem:gge,removeCartesianGraphicalItem:vge,addPolarGraphicalItem:Awe,removePolarGraphicalItem:Ewe}=J9.actions,yge=J9.reducer,wge=t=>{var e=In(),n=E.useRef(null);return E.useLayoutEffect(()=>{n.current===null?e(mge(t)):n.current!==t&&e(gge({prev:n.current,next:t})),n.current=t},[e,t]),E.useLayoutEffect(()=>()=>{n.current&&(e(vge(n.current)),n.current=null)},[e]),null},_ge=E.memo(wge),bge=["points"];function YF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YF(Object(n),!0).forEach(function(r){xge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xge(t,e,n){return(e=Age(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Age(t){var e=Ege(t,"string");return typeof e=="symbol"?e:e+""}function Ege(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RA(){return RA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RA.apply(null,arguments)}function Sge(t,e){if(t==null)return{};var n,r,i=Tge(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Tge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Pge(t){var{option:e,dotProps:n,className:r}=t;if(E.isValidElement(e))return E.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Tt(r,typeof e!="boolean"?e.className:""),s=n??{},{points:a}=s,o=Sge(s,bge);return E.createElement(K9,RA({},o,{className:i}))}function Ige(t,e){return t==null?!1:e?!0:t.length===1}function Cge(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:s,baseProps:a,needClip:o,clipPathId:l,zIndex:c=Rr.scatter}=t;if(!Ige(e,n))return null;var u=Y9(n),h=die(n),f=e.map((g,v)=>{var y,w,b=vT(vT(vT({r:3},a),h),{},{index:v,cx:(y=g.x)!==null&&y!==void 0?y:void 0,cy:(w=g.y)!==null&&w!==void 0?w:void 0,dataKey:s,value:g.value,payload:g.payload,points:e});return E.createElement(Pge,{key:"dot-".concat(v),option:n,dotProps:b,className:i})}),m={};return o&&l!=null&&(m.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(l,")")),E.createElement(no,{zIndex:c},E.createElement(ca,RA({className:r},m),f))}function QF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QF(Object(n),!0).forEach(function(r){kge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kge(t,e,n){return(e=Rge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rge(t){var e=Nge(t,"string");return typeof e=="symbol"?e:e+""}function Nge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Oge={xAxis:{},yAxis:{},zAxis:{}},Z9=bi({name:"cartesianAxis",initialState:Oge,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Dt()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Dt()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Dt()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Dt()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Dt()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Dt()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Dt()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Dt()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Dt()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-s[0])<=1)return;var a=[...s,r].slice(-3);t.yAxis[n]=JF(JF({},t.yAxis[n]),{},{width:r,widthHistory:a})}}}}),{addXAxis:Dge,replaceXAxis:Mge,removeXAxis:Lge,addYAxis:jge,replaceYAxis:Fge,removeYAxis:Vge,addZAxis:Swe,replaceZAxis:Twe,removeZAxis:Pwe,updateYAxisWidth:Uge}=Z9.actions,Bge=Z9.reducer,$ge=z([hr],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),zge=z([$ge,xl,Al],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),$O=()=>be(zge),Hge=()=>be(Yfe);function ZF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZF(Object(n),!0).forEach(function(r){Wge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wge(t,e,n){return(e=Gge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gge(t){var e=qge(t,"string");return typeof e=="symbol"?e:e+""}function qge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kge=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:s,clipPath:a}=t;if(i===!1||e.x==null||e.y==null)return null;var o={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=yT(yT(yT({},o),ZE(i)),vN(i)),c;return E.isValidElement(i)?c=E.cloneElement(i,l):typeof i=="function"?c=i(l):c=E.createElement(K9,l),E.createElement(ca,{className:"recharts-active-dot",clipPath:a},c)};function eV(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:s,zIndex:a=Rr.activeDot}=t,o=be(gy),l=Hge();if(e==null||l==null)return null;var c=e.find(u=>l.includes(u.payload));return lr(c)?null:E.createElement(no,{zIndex:a},E.createElement(Kge,{point:c,childIndex:Number(o),mainColor:n,dataKey:i,activeDot:r,clipPath:s}))}var Xge={},e8=bi({name:"errorBars",initialState:Xge,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Iwe,replaceErrorBar:Cwe,removeErrorBar:kwe}=e8.actions,Yge=e8.reducer;function t8(t,e){var n,r,i=be(c=>eo(c,t)),s=be(c=>to(c,e)),a=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Dn.allowDataOverflow,o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Mn.allowDataOverflow,l=a||o;return{needClip:l,needClipX:a,needClipY:o}}function Qge(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=$O(),{needClipX:s,needClipY:a,needClip:o}=t8(e,n);if(!o||!i)return null;var{x:l,y:c,width:u,height:h}=i;return E.createElement("clipPath",{id:"clipPath-".concat(r)},E.createElement("rect",{x:s?l:l-u/2,y:a?c:c-h/2,width:s?u:u*2,height:a?h:h*2}))}var Jge={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw=E;function Zge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var eve=typeof Object.is=="function"?Object.is:Zge,tve=Nw.useSyncExternalStore,nve=Nw.useRef,rve=Nw.useEffect,ive=Nw.useMemo,sve=Nw.useDebugValue;Jge.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=nve(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=ive(function(){function l(m){if(!c){if(c=!0,u=m,m=r(m),i!==void 0&&a.hasValue){var g=a.value;if(i(g,m))return h=g}return h=m}if(g=h,eve(u,m))return g;var v=r(m);return i!==void 0&&i(g,v)?(u=m,g):(u=m,h=v)}var c=!1,u,h,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var o=tve(t,s[0],s[1]);return rve(function(){a.hasValue=!0,a.value=o},[o]),sve(o),o};function ave(t){t()}function ove(){let t=null,e=null;return{clear(){t=null,e=null},notify(){ave(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var tV={notify(){},get:()=>[]};function lve(t,e){let n,r=tV,i=0,s=!1;function a(v){u();const y=r.subscribe(v);let w=!1;return()=>{w||(w=!0,y(),h())}}function o(){r.notify()}function l(){g.onStateChange&&g.onStateChange()}function c(){return s}function u(){i++,n||(n=t.subscribe(l),r=ove())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=tV)}function f(){s||(s=!0,u())}function m(){s&&(s=!1,h())}const g={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>r};return g}var cve=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uve=cve(),hve=()=>typeof navigator<"u"&&navigator.product==="ReactNative",dve=hve(),fve=()=>uve||dve?E.useLayoutEffect:E.useEffect,pve=fve();function nV(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function mve(t,e){if(nV(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!nV(t[n[i]],e[n[i]]))return!1;return!0}var wT=Symbol.for("react-redux-context"),_T=typeof globalThis<"u"?globalThis:{};function gve(){if(!E.createContext)return{};const t=_T[wT]??(_T[wT]=new Map);let e=t.get(E.createContext);return e||(e=E.createContext(null),t.set(E.createContext,e)),e}var vve=gve();function yve(t){const{children:e,context:n,serverState:r,store:i}=t,s=E.useMemo(()=>{const l=lve(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),a=E.useMemo(()=>i.getState(),[i]);pve(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,a]);const o=n||vve;return E.createElement(o.Provider,{value:s},e)}var wve=yve,_ve=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function bve(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function zO(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(_ve.has(r)){if(t[r]==null&&e[r]==null)continue;if(!mve(t[r],e[r]))return!1}else if(!bve(t[r],e[r]))return!1;return!0}var xve=t=>{var{chartData:e}=t,n=In(),r=ti();return E.useEffect(()=>r?()=>{}:(n(OF(e)),()=>{n(OF(void 0))}),[e,n,r]),null},rV={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},n8=bi({name:"brush",initialState:rV,reducers:{setBrushSettings(t,e){return e.payload==null?rV:e.payload}}}),{setBrushSettings:Rwe}=n8.actions,Ave=n8.reducer;function iV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iV(Object(n),!0).forEach(function(r){r8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r8(t,e,n){return(e=Eve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eve(t){var e=Sve(t,"string");return typeof e=="symbol"?e:e+""}function Sve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tve=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return{x:Math.min(n,i),y:Math.min(r,s),width:Math.abs(i-n),height:Math.abs(s-r)}},Pve=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return Tve({x:e,y:n},{x:r,y:i})};class U1{static create(e){return new U1(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}r8(U1,"EPS",1e-4);var Ive=t=>{var e=Object.keys(t).reduce((n,r)=>q_(q_({},n),{},{[r]:U1.create(t[r])}),{});return q_(q_({},e),{},{apply(n){var{bandAware:r,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(s=>{var[a,o]=s;return[a,e[a].apply(o,{bandAware:r,position:i})]}))},isInRange(n){return Object.keys(n).every(r=>e[r].isInRange(n[r]))}})};function Cve(t){return(t%180+180)%180}var kve=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Cve(i),a=s*Math.PI/180,o=Math.atan(r/n),l=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},Rve={dots:[],areas:[],lines:[]},i8=bi({name:"referenceElements",initialState:Rve,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=ia(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=ia(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=ia(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Nwe,removeDot:Owe,addArea:Dwe,removeArea:Mwe,addLine:Nve,removeLine:Ove}=i8.actions,Dve=i8.reducer,s8=E.createContext(void 0),Mve=t=>{var{children:e}=t,[n]=E.useState("".concat(ry("recharts"),"-clip")),r=$O();if(r==null)return null;var{x:i,y:s,width:a,height:o}=r;return E.createElement(s8.Provider,{value:n},E.createElement("defs",null,E.createElement("clipPath",{id:n},E.createElement("rect",{x:i,y:s,height:o,width:a}))),e)},Lve=()=>E.useContext(s8);function sV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sV(Object(n),!0).forEach(function(r){jve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jve(t,e,n){return(e=Fve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fve(t){var e=Vve(t,"string");return typeof e=="symbol"?e:e+""}function Vve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NA(){return NA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NA.apply(null,arguments)}var Uve=(t,e)=>{var n;if(E.isValidElement(t))n=E.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!St(e.x1)||!St(e.y1)||!St(e.x2)||!St(e.y2))return null;n=E.createElement("line",NA({},e,{className:"recharts-reference-line-line"}))}return n},Bve=(t,e,n,r,i,s)=>{var{x:a,width:o}=s,l=i.y.apply(t,{position:n});if(Qi(l)||e==="discard"&&!i.y.isInRange(l))return null;var c=[{x:a+o,y:l},{x:a,y:l}];return r==="left"?c.reverse():c},$ve=(t,e,n,r,i,s)=>{var{y:a,height:o}=s,l=i.x.apply(t,{position:n});if(Qi(l)||e==="discard"&&!i.x.isInRange(l))return null;var c=[{x:l,y:a+o},{x:l,y:a}];return r==="top"?c.reverse():c},zve=(t,e,n,r)=>{var i=t.map(s=>r.apply(s,{position:n}));return e==="discard"&&i.some(s=>!r.isInRange(s))?null:i},Hve=(t,e,n,r,i,s)=>{var{x:a,y:o,segment:l,ifOverflow:c}=s,u=Ps(a),h=Ps(o);return h?Bve(o,c,n,i,t,e):u?$ve(a,c,n,r,t,e):l!=null&&l.length===2?zve(l,c,n,t):null};function Wve(t){var e=In();return E.useEffect(()=>(e(Nve(t)),()=>{e(Ove(t))})),null}function Gve(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:s}=t,a=ti(),o=Lve(),l=be(M=>eo(M,e)),c=be(M=>to(M,n)),u=be(M=>su(M,"xAxis",e,a)),h=be(M=>su(M,"yAxis",n,a)),f=gw();if(!o||!f||l==null||c==null||u==null||h==null)return null;var m=Ive({x:u,y:h}),g=Hve(m,f,t.position,l.orientation,c.orientation,t);if(!g)return null;var[{x:v,y},{x:w,y:b}]=g,A=s==="hidden"?"url(#".concat(o,")"):void 0,I=aV(aV({clipPath:A},Yi(t)),{},{x1:v,y1:y,x2:w,y2:b}),k=Pve({x1:v,y1:y,x2:w,y2:b});return E.createElement(no,{zIndex:t.zIndex},E.createElement(ca,{className:Tt("recharts-reference-line",i)},Uve(r,I),E.createElement(U9,NA({},k,{lowerWidth:k.width,upperWidth:k.width}),E.createElement($9,{label:t.label}),t.children)))}var qve={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Rr.line};function Lu(t){var e=_i(t,qve);return E.createElement(E.Fragment,null,E.createElement(Wve,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),E.createElement(Gve,e))}Lu.displayName="ReferenceLine";function a8(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e)n.push(t[r]);return n}function Kve(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return kve(r,n)}function Xve(t,e,n){var r=n==="width",{x:i,y:s,width:a,height:o}=t;return e===1?{start:r?i:s,end:r?i+a:s+o}:{start:r?i+a:s+o,end:r?i:s}}function OA(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function Yve(t,e){return a8(t,e+1)}function Qve(t,e,n,r,i){for(var s=(r||[]).slice(),{start:a,end:o}=e,l=0,c=1,u=a,h=function(){var g=r==null?void 0:r[l];if(g===void 0)return{v:a8(r,c)};var v=l,y,w=()=>(y===void 0&&(y=n(g,v)),y),b=g.coordinate,A=l===0||OA(t,b,w,u,o);A||(l=0,u=a,c+=1),A&&(u=b+t*(w()/2+i),l+=c)},f;c<=s.length;)if(f=h(),f)return f.v;return[]}function oV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oV(Object(n),!0).forEach(function(r){Jve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jve(t,e,n){return(e=Zve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zve(t){var e=eye(t,"string");return typeof e=="symbol"?e:e+""}function eye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tye(t,e,n,r,i){for(var s=(r||[]).slice(),a=s.length,{start:o}=e,{end:l}=e,c=function(f){var m=s[f],g,v=()=>(g===void 0&&(g=n(m,f)),g);if(f===a-1){var y=t*(m.coordinate+t*v()/2-l);s[f]=m=Er(Er({},m),{},{tickCoord:y>0?m.coordinate-y*t:m.coordinate})}else s[f]=m=Er(Er({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var w=OA(t,m.tickCoord,v,o,l);w&&(l=m.tickCoord-t*(v()/2+i),s[f]=Er(Er({},m),{},{isShow:!0}))}},u=a-1;u>=0;u--)c(u);return s}function nye(t,e,n,r,i,s){var a=(r||[]).slice(),o=a.length,{start:l,end:c}=e;if(s){var u=r[o-1],h=n(u,o-1),f=t*(u.coordinate+t*h/2-c);if(a[o-1]=u=Er(Er({},u),{},{tickCoord:f>0?u.coordinate-f*t:u.coordinate}),u.tickCoord!=null){var m=OA(t,u.tickCoord,()=>h,l,c);m&&(c=u.tickCoord-t*(h/2+i),a[o-1]=Er(Er({},u),{},{isShow:!0}))}}for(var g=s?o-1:o,v=function(b){var A=a[b],I,k=()=>(I===void 0&&(I=n(A,b)),I);if(b===0){var M=t*(A.coordinate-t*k()/2-l);a[b]=A=Er(Er({},A),{},{tickCoord:M<0?A.coordinate-M*t:A.coordinate})}else a[b]=A=Er(Er({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var P=OA(t,A.tickCoord,k,l,c);P&&(l=A.tickCoord+t*(k()/2+i),a[b]=Er(Er({},A),{},{isShow:!0}))}},y=0;y<g;y++)v(y);return a}function HO(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:a,orientation:o,interval:l,tickFormatter:c,unit:u,angle:h}=t;if(!i||!i.length||!r)return[];if(xe(l)||Om.isSsr){var f;return(f=Yve(i,xe(l)?l:0))!==null&&f!==void 0?f:[]}var m=[],g=o==="top"||o==="bottom"?"width":"height",v=u&&g==="width"?Ev(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},y=(A,I)=>{var k=typeof c=="function"?c(A.value,I):A.value;return g==="width"?Kve(Ev(k,{fontSize:e,letterSpacing:n}),v,h):Ev(k,{fontSize:e,letterSpacing:n})[g]},w=i.length>=2?_s(i[1].coordinate-i[0].coordinate):1,b=Xve(s,w,g);return l==="equidistantPreserveStart"?Qve(w,b,y,i,a):(l==="preserveStart"||l==="preserveStartEnd"?m=nye(w,b,y,i,a,l==="preserveStartEnd"):m=tye(w,b,y,i,a),m.filter(A=>A.isShow))}var rye=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,a=0;if(e){Array.from(e).forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>a&&(a=h.width)}});var o=n?n.getBoundingClientRect().width:0,l=i+s,c=a+l+o+(n?r:0);return Math.round(c)}return 0},iye=["axisLine","width","height","className","hide","ticks","axisType"];function sye(t,e){if(t==null)return{};var n,r,i=aye(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function aye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Id(){return Id=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Id.apply(null,arguments)}function lV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function un(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lV(Object(n),!0).forEach(function(r){oye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oye(t,e,n){return(e=lye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lye(t){var e=cye(t,"string");return typeof e=="symbol"?e:e+""}function cye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var el={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Rr.axis};function uye(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:a,axisLine:o,otherSvgProps:l}=t;if(!o)return null;var c=un(un(un({},l),la(o)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!a||s==="bottom"&&a);c=un(un({},c),{},{x1:e,y1:n+u*i,x2:e+r,y2:n+u*i})}else{var h=+(s==="left"&&!a||s==="right"&&a);c=un(un({},c),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return E.createElement("line",Id({},c,{className:Tt("recharts-cartesian-axis-line",s1(o,"className"))}))}function hye(t,e,n,r,i,s,a,o,l){var c,u,h,f,m,g,v=o?-1:1,y=t.tickSize||a,w=xe(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":c=u=t.coordinate,f=n+ +!o*i,h=f-v*y,g=h-v*l,m=w;break;case"left":h=f=t.coordinate,u=e+ +!o*r,c=u-v*y,m=c-v*l,g=w;break;case"right":h=f=t.coordinate,u=e+ +o*r,c=u+v*y,m=c+v*l,g=w;break;default:c=u=t.coordinate,f=n+ +o*i,h=f+v*y,g=h+v*l,m=w;break}return{line:{x1:c,y1:h,x2:u,y2:f},tick:{x:m,y:g}}}function dye(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function fye(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function pye(t){var{option:e,tickProps:n,value:r}=t,i,s=Tt(n.className,"recharts-cartesian-axis-tick-value");if(E.isValidElement(e))i=E.cloneElement(e,un(un({},n),{},{className:s}));else if(typeof e=="function")i=e(un(un({},n),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=Tt(a,e==null?void 0:e.className)),i=E.createElement(UO,Id({},n,{className:a}),r)}return i}var mye=E.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:s,tickFormatter:a,unit:o,padding:l,tickTextProps:c,orientation:u,mirror:h,x:f,y:m,width:g,height:v,tickSize:y,tickMargin:w,fontSize:b,letterSpacing:A,getTicksConfig:I,events:k,axisType:M}=t,P=HO(un(un({},I),{},{ticks:n}),b,A),C=dye(u,h),O=fye(u,h),j=la(I),D=ZE(r),F={};typeof i=="object"&&(F=i);var V=un(un({},j),{},{fill:"none"},F),Y=P.map(q=>un({entry:q},hye(q,f,m,g,v,u,y,h,w))),re=Y.map(q=>{var{entry:H,line:X}=q;return E.createElement(ca,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(H.value,"-").concat(H.coordinate,"-").concat(H.tickCoord)},i&&E.createElement("line",Id({},V,X,{className:Tt("recharts-cartesian-axis-tick-line",s1(i,"className"))})))}),K=Y.map((q,H)=>{var{entry:X,tick:te}=q,ce=un(un(un(un({textAnchor:C,verticalAnchor:O},j),{},{stroke:"none",fill:s},D),te),{},{index:H,payload:X,visibleTicksCount:P.length,tickFormatter:a,padding:l},c);return E.createElement(ca,Id({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(X.value,"-").concat(X.coordinate,"-").concat(X.tickCoord)},Wie(k,X,H)),r&&E.createElement(pye,{option:r,tickProps:ce,value:"".concat(typeof a=="function"?a(X.value,H):X.value).concat(o||"")}))});return E.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(M,"-ticks")},K.length>0&&E.createElement(no,{zIndex:Rr.label},E.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(M,"-tick-labels"),ref:e},K)),re.length>0&&E.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(M,"-tick-lines")},re))}),gye=E.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:a,ticks:o,axisType:l}=t,c=sye(t,iye),[u,h]=E.useState(""),[f,m]=E.useState(""),g=E.useRef(null);E.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var y;return rye({ticks:g.current,label:(y=t.labelRef)===null||y===void 0?void 0:y.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var v=E.useCallback(y=>{if(y){var w=y.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=w;var b=w[0];if(b){var A=window.getComputedStyle(b),I=A.fontSize,k=A.letterSpacing;(I!==u||k!==f)&&(h(I),m(k))}}},[u,f]);return a||r!=null&&r<=0||i!=null&&i<=0?null:E.createElement(no,{zIndex:t.zIndex},E.createElement(ca,{className:Tt("recharts-cartesian-axis",s)},E.createElement(uye,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:la(t)}),E.createElement(mye,{ref:v,axisType:l,events:c,fontSize:u,getTicksConfig:t,height:t.height,letterSpacing:f,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),E.createElement(U9,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},E.createElement($9,{label:t.label,labelRef:t.labelRef}),t.children)))}),WO=E.forwardRef((t,e)=>{var n=_i(t,el);return E.createElement(gye,Id({},n,{ref:e}))});WO.displayName="CartesianAxis";var vye=["x1","y1","x2","y2","key"],yye=["offset"],wye=["xAxisId","yAxisId"],_ye=["xAxisId","yAxisId"];function cV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cV(Object(n),!0).forEach(function(r){bye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bye(t,e,n){return(e=xye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xye(t){var e=Aye(t,"string");return typeof e=="symbol"?e:e+""}function Aye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ju(){return Ju=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ju.apply(null,arguments)}function DA(t,e){if(t==null)return{};var n,r,i=Eye(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Eye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Sye=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:a,ry:o}=t;return E.createElement("rect",{x:r,y:i,ry:o,width:s,height:a,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function o8(t){var{option:e,lineItemProps:n}=t,r;if(E.isValidElement(e))r=E.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:s,y1:a,x2:o,y2:l,key:c}=n,u=DA(n,vye),h=(i=la(u))!==null&&i!==void 0?i:{},{offset:f}=h,m=DA(h,yye);r=E.createElement("line",Ju({},m,{x1:s,y1:a,x2:o,y2:l,fill:"none",key:c}))}return r}function Tye(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=t,o=DA(t,wye),l=i.map((c,u)=>{var h=Cr(Cr({},o),{},{x1:e,y1:c,x2:e+n,y2:c,key:"line-".concat(u),index:u});return E.createElement(o8,{key:"line-".concat(u),option:r,lineItemProps:h})});return E.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Pye(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=t,o=DA(t,_ye),l=i.map((c,u)=>{var h=Cr(Cr({},o),{},{x1:c,y1:e,x2:c,y2:e+n,key:"line-".concat(u),index:u});return E.createElement(o8,{option:r,lineItemProps:h,key:"line-".concat(u)})});return E.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Iye(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:a,horizontalPoints:o,horizontal:l=!0}=t;if(!l||!e||!e.length||o==null)return null;var c=o.map(h=>Math.round(h+i-i)).sort((h,f)=>h-f);i!==c[0]&&c.unshift(0);var u=c.map((h,f)=>{var m=!c[f+1],g=m?i+a-h:c[f+1]-h;if(g<=0)return null;var v=f%e.length;return E.createElement("rect",{key:"react-".concat(f),y:h,x:r,height:g,width:s,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function Cye(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:a,height:o,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var c=l.map(h=>Math.round(h+i-i)).sort((h,f)=>h-f);i!==c[0]&&c.unshift(0);var u=c.map((h,f)=>{var m=!c[f+1],g=m?i+a-h:c[f+1]-h;if(g<=0)return null;var v=f%n.length;return E.createElement("rect",{key:"react-".concat(f),x:h,y:s,width:g,height:o,stroke:"none",fill:n[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var kye=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return j5(HO(Cr(Cr(Cr({},el),n),{},{ticks:F5(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},Rye=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return j5(HO(Cr(Cr(Cr({},el),n),{},{ticks:F5(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},Nye={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Rr.grid};function ju(t){var e=Y5(),n=Q5(),r=X5(),i=Cr(Cr({},_i(t,Nye)),{},{x:xe(t.x)?t.x:r.left,y:xe(t.y)?t.y:r.top,width:xe(t.width)?t.width:r.width,height:xe(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:a,x:o,y:l,width:c,height:u,syncWithTicks:h,horizontalValues:f,verticalValues:m}=i,g=ti(),v=be(O=>xF(O,"xAxis",s,g)),y=be(O=>xF(O,"yAxis",a,g));if(!Qa(c)||!Qa(u)||!xe(o)||!xe(l))return null;var w=i.verticalCoordinatesGenerator||kye,b=i.horizontalCoordinatesGenerator||Rye,{horizontalPoints:A,verticalPoints:I}=i;if((!A||!A.length)&&typeof b=="function"){var k=f&&f.length,M=b({yAxis:y?Cr(Cr({},y),{},{ticks:k?f:y.ticks}):void 0,width:e??c,height:n??u,offset:r},k?!0:h);lA(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(A=M)}if((!I||!I.length)&&typeof w=="function"){var P=m&&m.length,C=w({xAxis:v?Cr(Cr({},v),{},{ticks:P?m:v.ticks}):void 0,width:e??c,height:n??u,offset:r},P?!0:h);lA(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(I=C)}return E.createElement(no,{zIndex:i.zIndex},E.createElement("g",{className:"recharts-cartesian-grid"},E.createElement(Sye,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),E.createElement(Iye,Ju({},i,{horizontalPoints:A})),E.createElement(Cye,Ju({},i,{verticalPoints:I})),E.createElement(Tye,Ju({},i,{offset:r,horizontalPoints:A,xAxis:v,yAxis:y})),E.createElement(Pye,Ju({},i,{offset:r,verticalPoints:I,xAxis:v,yAxis:y}))))}ju.displayName="CartesianGrid";function Oye(t){var e=ZE(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:s}=e,a=Number(i),o=Number(s);return(Number.isNaN(a)||a<0)&&(a=n),(Number.isNaN(o)||o<0)&&(o=r),{r:a,strokeWidth:o}}return{r:n,strokeWidth:r}}var l8=(t,e,n,r)=>t9(t,"xAxis",e,r),c8=(t,e,n,r)=>e9(t,"xAxis",e,r),u8=(t,e,n,r)=>t9(t,"yAxis",n,r),h8=(t,e,n,r)=>e9(t,"yAxis",n,r),Dye=z([Pt,l8,u8,c8,h8],(t,e,n,r,i)=>bl(t,"xAxis")?oA(e,r,!1):oA(n,i,!1)),Mye=(t,e,n,r,i)=>i,d8=z([AW,Mye],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),Lye=(t,e,n,r,i)=>{var s,a=d8(t,e,n,r,i);if(a!=null){var o=Pt(t),l=bl(o,"xAxis"),c;if(l?c=GC(t,"yAxis",n,r):c=GC(t,"xAxis",e,r),c!=null){var{stackId:u}=a,h=wO(a);if(!(u==null||h==null)){var f=(s=c[u])===null||s===void 0?void 0:s.stackedData;return f==null?void 0:f.find(m=>m.key===h)}}}},jye=z([Pt,l8,u8,c8,h8,Lye,uO,Dye,d8,qhe],(t,e,n,r,i,s,a,o,l,c)=>{var{chartData:u,dataStartIndex:h,dataEndIndex:f}=a;if(!(l==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null)){var{data:m}=l,g;if(m&&m.length>0?g=m:g=u==null?void 0:u.slice(h,f+1),g!=null)return n0e({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:h,areaSettings:l,stackedData:s,displayedData:g,chartBaseValue:c,bandSize:o})}}),Fye=["id"],Vye=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function hd(){return hd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hd.apply(null,arguments)}function f8(t,e){if(t==null)return{};var n,r,i=Uye(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Uye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function uV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uV(Object(n),!0).forEach(function(r){Bye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bye(t,e,n){return(e=$ye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ye(t){var e=zye(t,"string");return typeof e=="symbol"?e:e+""}function zye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MA(t,e){return t&&t!=="none"?t:e}var Hye=t=>{var{dataKey:e,name:n,stroke:r,fill:i,legendType:s,hide:a}=t;return[{inactive:a,dataKey:e,type:s,color:MA(r,i),value:V5(n,e),payload:t}]},Wye=E.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:a,hide:o,unit:l,tooltipType:c}=t,u={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:V5(a,e),hide:o,type:c,color:MA(r,s),unit:l}};return E.createElement(lge,{tooltipEntrySettings:u})});function Gye(t){var{clipPathId:e,points:n,props:r}=t,{needClip:i,dot:s,dataKey:a}=r,o=la(r);return E.createElement(Cge,{points:n,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:a,baseProps:o,needClip:i,clipPathId:e})}function qye(t){var{showLabels:e,children:n,points:r}=t,i=r.map(s=>{var a,o,l={x:(a=s.x)!==null&&a!==void 0?a:0,y:(o=s.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Rf(Rf({},l),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return E.createElement(nge,{value:e?i:void 0},n)}function hV(t){var{points:e,baseLine:n,needClip:r,clipPathId:i,props:s}=t,{layout:a,type:o,stroke:l,connectNulls:c,isRange:u}=s,{id:h}=s,f=f8(s,Fye),m=la(f),g=Yi(f);return E.createElement(E.Fragment,null,(e==null?void 0:e.length)>1&&E.createElement(ca,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},E.createElement(Yb,hd({},g,{id:h,points:e,connectNulls:c,type:o,baseLine:n,layout:a,stroke:"none",className:"recharts-area-area"})),l!=="none"&&E.createElement(Yb,hd({},m,{className:"recharts-area-curve",layout:a,type:o,connectNulls:c,fill:"none",points:e})),l!=="none"&&u&&E.createElement(Yb,hd({},m,{className:"recharts-area-curve",layout:a,type:o,connectNulls:c,fill:"none",points:n}))),E.createElement(Gye,{points:e,props:f,clipPathId:i}))}function Kye(t){var{alpha:e,baseLine:n,points:r,strokeWidth:i}=t,s=r[0].y,a=r[r.length-1].y;if(!St(s)||!St(a))return null;var o=e*Math.abs(s-a),l=Math.max(...r.map(c=>c.x||0));return xe(n)?l=Math.max(n,l):n&&Array.isArray(n)&&n.length&&(l=Math.max(...n.map(c=>c.x||0),l)),xe(l)?E.createElement("rect",{x:0,y:s<a?s:s-o,width:l+(i?parseInt("".concat(i),10):1),height:Math.floor(o)}):null}function Xye(t){var{alpha:e,baseLine:n,points:r,strokeWidth:i}=t,s=r[0].x,a=r[r.length-1].x;if(!St(s)||!St(a))return null;var o=e*Math.abs(s-a),l=Math.max(...r.map(c=>c.y||0));return xe(n)?l=Math.max(n,l):n&&Array.isArray(n)&&n.length&&(l=Math.max(...n.map(c=>c.y||0),l)),xe(l)?E.createElement("rect",{x:s<a?s:s-o,y:0,width:o,height:Math.floor(l+(i?parseInt("".concat(i),10):1))}):null}function Yye(t){var{alpha:e,layout:n,points:r,baseLine:i,strokeWidth:s}=t;return n==="vertical"?E.createElement(Kye,{alpha:e,points:r,baseLine:i,strokeWidth:s}):E.createElement(Xye,{alpha:e,points:r,baseLine:i,strokeWidth:s})}function Qye(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s}=t,{points:a,baseLine:o,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:h,onAnimationStart:f,onAnimationEnd:m}=r,g=E.useMemo(()=>({points:a,baseLine:o}),[a,o]),v=uH(g,"recharts-area-"),y=xoe(),[w,b]=E.useState(!1),A=!w,I=E.useCallback(()=>{typeof m=="function"&&m(),b(!1)},[m]),k=E.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);if(y==null)return null;var M=i.current,P=s.current;return E.createElement(qye,{showLabels:A,points:a},r.children,E.createElement(cH,{animationId:v,begin:c,duration:u,isActive:l,easing:h,onAnimationEnd:I,onAnimationStart:k,key:v},C=>{if(M){var O=M.length/a.length,j=C===1?a:a.map((F,V)=>{var Y=Math.floor(V*O);if(M[Y]){var re=M[Y];return Rf(Rf({},F),{},{x:Fa(re.x,F.x,C),y:Fa(re.y,F.y,C)})}return F}),D;return xe(o)?D=Fa(P,o,C):lr(o)||Qi(o)?D=Fa(P,0,C):D=o.map((F,V)=>{var Y=Math.floor(V*O);if(Array.isArray(P)&&P[Y]){var re=P[Y];return Rf(Rf({},F),{},{x:Fa(re.x,F.x,C),y:Fa(re.y,F.y,C)})}return F}),C>0&&(i.current=j,s.current=D),E.createElement(hV,{points:j,baseLine:D,needClip:e,clipPathId:n,props:r})}return C>0&&(i.current=a,s.current=o),E.createElement(ca,null,l&&E.createElement("defs",null,E.createElement("clipPath",{id:"animationClipPath-".concat(n)},E.createElement(Yye,{alpha:C,points:a,baseLine:o,layout:y,strokeWidth:r.strokeWidth}))),E.createElement(ca,{clipPath:"url(#animationClipPath-".concat(n,")")},E.createElement(hV,{points:a,baseLine:o,needClip:e,clipPathId:n,props:r})))}),E.createElement(sge,{label:r.label}))}function Jye(t){var{needClip:e,clipPathId:n,props:r}=t,i=E.useRef(null),s=E.useRef();return E.createElement(Qye,{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s})}class Zye extends E.PureComponent{render(){var{hide:e,dot:n,points:r,className:i,top:s,left:a,needClip:o,xAxisId:l,yAxisId:c,width:u,height:h,id:f,baseLine:m,zIndex:g}=this.props;if(e)return null;var v=Tt("recharts-area",i),y=f,{r:w,strokeWidth:b}=Oye(n),A=Y9(n),I=w*2+b,k=o?"url(#clipPath-".concat(A?"":"dots-").concat(y,")"):void 0;return E.createElement(no,{zIndex:g},E.createElement(ca,{className:v},o&&E.createElement("defs",null,E.createElement(Qge,{clipPathId:y,xAxisId:l,yAxisId:c}),!A&&E.createElement("clipPath",{id:"clipPath-dots-".concat(y)},E.createElement("rect",{x:a-I/2,y:s-I/2,width:u+I,height:h+I}))),E.createElement(Jye,{needClip:o,clipPathId:y,props:this.props})),E.createElement(eV,{points:r,mainColor:MA(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:k}),this.props.isRange&&Array.isArray(m)&&E.createElement(eV,{points:m,mainColor:MA(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:k}))}}var p8={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Rr.area};function e0e(t){var e,n=_i(t,p8),{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:a,connectNulls:o,dot:l,fill:c,fillOpacity:u,hide:h,isAnimationActive:f,legendType:m,stroke:g,xAxisId:v,yAxisId:y}=n,w=f8(n,Vye),b=vw(),A=x9(),{needClip:I}=t8(v,y),k=ti(),{points:M,isRange:P,baseLine:C}=(e=be(Y=>jye(Y,v,y,k,t.id)))!==null&&e!==void 0?e:{},O=$O();if(b!=="horizontal"&&b!=="vertical"||O==null||A!=="AreaChart"&&A!=="ComposedChart")return null;var{height:j,width:D,x:F,y:V}=O;return!M||!M.length?null:E.createElement(Zye,hd({},w,{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:a,baseLine:C,connectNulls:o,dot:l,fill:c,fillOpacity:u,height:j,hide:h,layout:b,isAnimationActive:f==="auto"?!Om.isSsr:f,isRange:P,legendType:m,needClip:I,points:M,stroke:g,width:D,left:F,top:V,xAxisId:v,yAxisId:y}))}var t0e=(t,e,n,r,i)=>{var s=n??e;if(xe(s))return s;var a=t==="horizontal"?i:r,o=a.scale.domain();if(a.type==="number"){var l=Math.max(o[0],o[1]),c=Math.min(o[0],o[1]);return s==="dataMin"?c:s==="dataMax"||l<0?l:Math.max(Math.min(o[0],o[1]),0)}return s==="dataMin"?o[0]:s==="dataMax"?o[1]:o[0]};function n0e(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:i,layout:s,chartBaseValue:a,xAxis:o,yAxis:l,displayedData:c,dataStartIndex:u,xAxisTicks:h,yAxisTicks:f,bandSize:m}=t,g=i&&i.length,v=t0e(s,a,n,o,l),y=s==="horizontal",w=!1,b=c.map((I,k)=>{var M;g?M=i[u+k]:(M=Nr(I,r),Array.isArray(M)?w=!0:M=[v,M]);var P=M[1]==null||g&&!e&&Nr(I,r)==null;return y?{x:ZL({axis:o,ticks:h,bandSize:m,entry:I,index:k}),y:P?null:l.scale(M[1]),value:M,payload:I}:{x:P?null:o.scale(M[1]),y:ZL({axis:l,ticks:f,bandSize:m,entry:I,index:k}),value:M,payload:I}}),A;return g||w?A=b.map(I=>{var k=Array.isArray(I.value)?I.value[0]:null;return y?{x:I.x,y:k!=null&&I.y!=null?l.scale(k):null,payload:I.payload}:{x:k!=null?o.scale(k):null,y:I.y,payload:I.payload}}):A=y?l.scale(v):o.scale(v),{points:b,baseLine:A,isRange:w}}function r0e(t){var e=_i(t,p8),n=ti();return E.createElement(fge,{id:e.id,type:"area"},r=>E.createElement(E.Fragment,null,E.createElement(cge,{legendPayload:Hye(e)}),E.createElement(Wye,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),E.createElement(_ge,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:zae(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),E.createElement(e0e,hd({},e,{id:r}))))}var Fu=E.memo(r0e,zO);Fu.displayName="Area";var i0e=["domain","range"],s0e=["domain","range"];function dV(t,e){if(t==null)return{};var n,r,i=a0e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function a0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function fV(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function m8(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=dV(t,i0e),{domain:s,range:a}=e,o=dV(e,s0e);return!fV(n,s)||!fV(r,a)?!1:zO(i,o)}var o0e=["dangerouslySetInnerHTML","ticks"],l0e=["id"];function ek(){return ek=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ek.apply(null,arguments)}function pV(t,e){if(t==null)return{};var n,r,i=c0e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function c0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function u0e(t){var e=In(),n=E.useRef(null);return E.useLayoutEffect(()=>{n.current===null?e(Dge(t)):n.current!==t&&e(Mge({prev:n.current,next:t})),n.current=t},[t,e]),E.useLayoutEffect(()=>()=>{n.current&&(e(Lge(n.current)),n.current=null)},[e]),null}var h0e=t=>{var{xAxisId:e,className:n}=t,r=be(B5),i=ti(),s="xAxis",a=be(y=>su(y,s,e,i)),o=be(y=>ZW(y,s,e,i)),l=be(y=>Vde(y,e)),c=be(y=>Wde(y,e)),u=be(y=>wW(y,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:h,ticks:f}=t,m=pV(t,o0e),{id:g}=u,v=pV(u,l0e);return E.createElement(WO,ek({},m,v,{scale:a,x:c.x,y:c.y,width:l.width,height:l.height,className:Tt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:o,axisType:s}))},d0e={allowDataOverflow:Dn.allowDataOverflow,allowDecimals:Dn.allowDecimals,allowDuplicatedCategory:Dn.allowDuplicatedCategory,angle:Dn.angle,axisLine:el.axisLine,height:Dn.height,hide:!1,includeHidden:Dn.includeHidden,interval:Dn.interval,minTickGap:Dn.minTickGap,mirror:Dn.mirror,orientation:Dn.orientation,padding:Dn.padding,reversed:Dn.reversed,scale:Dn.scale,tick:Dn.tick,tickCount:Dn.tickCount,tickLine:el.tickLine,tickSize:el.tickSize,type:Dn.type,xAxisId:0},f0e=t=>{var e=_i(t,d0e);return E.createElement(E.Fragment,null,E.createElement(u0e,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),E.createElement(h0e,e))},Vu=E.memo(f0e,m8);Vu.displayName="XAxis";var p0e=["dangerouslySetInnerHTML","ticks"],m0e=["id"];function tk(){return tk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tk.apply(null,arguments)}function mV(t,e){if(t==null)return{};var n,r,i=g0e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function g0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function v0e(t){var e=In(),n=E.useRef(null);return E.useLayoutEffect(()=>{n.current===null?e(jge(t)):n.current!==t&&e(Fge({prev:n.current,next:t})),n.current=t},[t,e]),E.useLayoutEffect(()=>()=>{n.current&&(e(Vge(n.current)),n.current=null)},[e]),null}var y0e=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,s=E.useRef(null),a=E.useRef(null),o=be(B5),l=ti(),c=In(),u="yAxis",h=be(k=>su(k,u,e,l)),f=be(k=>Kde(k,e)),m=be(k=>qde(k,e)),g=be(k=>ZW(k,u,e,l)),v=be(k=>_W(k,e));if(E.useLayoutEffect(()=>{if(!(r!=="auto"||!f||BO(i)||E.isValidElement(i)||v==null)){var k=s.current;if(k){var M=k.getCalculatedWidth();Math.round(f.width)!==Math.round(M)&&c(Uge({id:e,width:M}))}}},[g,f,c,i,e,r,v]),f==null||m==null||v==null)return null;var{dangerouslySetInnerHTML:y,ticks:w}=t,b=mV(t,p0e),{id:A}=v,I=mV(v,m0e);return E.createElement(WO,tk({},b,I,{ref:s,labelRef:a,scale:h,x:m.x,y:m.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:f.width,height:f.height,className:Tt("recharts-".concat(u," ").concat(u),n),viewBox:o,ticks:g,axisType:u}))},w0e={allowDataOverflow:Mn.allowDataOverflow,allowDecimals:Mn.allowDecimals,allowDuplicatedCategory:Mn.allowDuplicatedCategory,angle:Mn.angle,axisLine:el.axisLine,hide:!1,includeHidden:Mn.includeHidden,interval:Mn.interval,minTickGap:Mn.minTickGap,mirror:Mn.mirror,orientation:Mn.orientation,padding:Mn.padding,reversed:Mn.reversed,scale:Mn.scale,tick:Mn.tick,tickCount:Mn.tickCount,tickLine:el.tickLine,tickSize:el.tickSize,type:Mn.type,width:Mn.width,yAxisId:0},_0e=t=>{var e=_i(t,w0e);return E.createElement(E.Fragment,null,E.createElement(v0e,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),E.createElement(y0e,e))},Uu=E.memo(_0e,m8);Uu.displayName="YAxis";var b0e=(t,e)=>e,GO=z([b0e,Pt,vW,Rn,g9,Sl,lpe,hr],mpe),qO=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},g8=Is("mouseClick"),v8=pw();v8.startListening({actionCreator:g8,effect:(t,e)=>{var n=t.payload,r=GO(e.getState(),qO(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(ofe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var nk=Is("mouseMove"),y8=pw(),K_=null;y8.startListening({actionCreator:nk,effect:(t,e)=>{var n=t.payload;K_!==null&&cancelAnimationFrame(K_);var r=qO(n);K_=requestAnimationFrame(()=>{var i=e.getState(),s=kO(i,i.tooltip.settings.shared);if(s==="axis"){var a=GO(i,r);(a==null?void 0:a.activeIndex)!=null?e.dispatch(l9({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(o9())}K_=null})}});var gV={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},w8=bi({name:"rootProps",initialState:gV,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:gV.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),x0e=w8.reducer,{updateOptions:A0e}=w8.actions,_8=bi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Lwe}=_8.actions,E0e=_8.reducer,b8=Is("keyDown"),x8=Is("focus"),KO=pw();KO.startListening({actionCreator:b8,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=RO(i,Um(n),Sw(n),kw(n)),o=a==null?-1:Number(a);if(!(!Number.isFinite(o)||o<0)){var l=Sl(n);if(s==="Enter"){var c=CA(n,"axis","hover",String(i.index));e.dispatch(KC({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var u=Jde(n),h=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,m=o+f*h;if(!(l==null||m>=l.length||m<0)){var g=CA(n,"axis","hover",String(m));e.dispatch(KC({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}}});KO.startListening({actionCreator:x8,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",a=CA(n,"axis","hover",String(s));e.dispatch(KC({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:a}))}}}});var ss=Is("externalEvent"),A8=pw(),bT=new Map;A8.startListening({actionCreator:ss,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,s=bT.get(i);s!==void 0&&cancelAnimationFrame(s);var a=requestAnimationFrame(()=>{try{var o=e.getState(),l={activeCoordinate:qfe(o),activeDataKey:Wfe(o),activeIndex:gy(o),activeLabel:w9(o),activeTooltipIndex:gy(o),isTooltipActive:Kfe(o)};n(l,r)}finally{bT.delete(i)}});bT.set(i,a)}}});var S0e=z([Vm],t=>t.tooltipItemPayloads),T0e=z([S0e,Iw,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(o=>o.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var a=e(s,n);return a}}}),E8=Is("touchMove"),S8=pw();S8.startListening({actionCreator:E8,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=kO(r,r.tooltip.settings.shared);if(i==="axis"){var s=GO(r,qO({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(l9({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var a,o=n.touches[0];if(document.elementFromPoint==null)return;var l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(Yae),u=(a=l.getAttribute(Qae))!==null&&a!==void 0?a:void 0,h=T0e(e.getState(),c,u);e.dispatch(afe({activeDataKey:u,activeIndex:c,activeCoordinate:h}))}}}});var P0e=l5({brush:Ave,cartesianAxis:Bge,chartData:Gpe,errorBars:Yge,graphicalItems:yge,layout:Oae,legend:Voe,options:Bpe,polarAxis:oge,polarOptions:E0e,referenceElements:Dve,rootProps:x0e,tooltip:lfe,zIndex:Cpe}),I0e=function(e){return iae({reducer:P0e,preloadedState:e,middleware:n=>{var r;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([v8.middleware,y8.middleware,KO.middleware,A8.middleware,S8.middleware])},enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(A5({type:"raf"}))},devTools:Om.devToolsEnabled})};function C0e(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=ti(),s=E.useRef(null);if(i)return n;s.current==null&&(s.current=I0e(e));var a=PN;return E.createElement(wve,{context:a,store:s.current},n)}function k0e(t){var{layout:e,margin:n}=t,r=In(),i=ti();return E.useEffect(()=>{i||(r(kae(e)),r(Cae(n)))},[r,i,e,n]),null}var R0e=E.memo(k0e,zO);function N0e(t){var e=In();return E.useEffect(()=>{e(A0e(t))},[e,t]),null}function vV(t){var{zIndex:e,isPanorama:n}=t,r=n?"recharts-zindex-panorama-":"recharts-zindex-",i=Q9("".concat(r).concat(e)),s=In();return E.useLayoutEffect(()=>(s(Ppe({zIndex:e,elementId:i,isPanorama:n})),()=>{s(Ipe({zIndex:e,isPanorama:n}))}),[s,e,i,n]),E.createElement("g",{tabIndex:-1,id:i})}function yV(t){var{children:e,isPanorama:n}=t,r=be(vpe);if(!r||r.length===0)return e;var i=r.filter(a=>a<0),s=r.filter(a=>a>0);return E.createElement(E.Fragment,null,i.map(a=>E.createElement(vV,{key:a,zIndex:a,isPanorama:n})),e,s.map(a=>E.createElement(vV,{key:a,zIndex:a,isPanorama:n})))}var O0e=["children"];function D0e(t,e){if(t==null)return{};var n,r,i=M0e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function M0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function LA(){return LA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LA.apply(null,arguments)}var L0e={width:"100%",height:"100%",display:"block"},j0e=E.forwardRef((t,e)=>{var n=Y5(),r=Q5(),i=sH();if(!Qa(n)||!Qa(r))return null;var{children:s,otherAttributes:a,title:o,desc:l}=t,c,u;return a!=null&&(typeof a.tabIndex=="number"?c=a.tabIndex:c=i?0:void 0,typeof a.role=="string"?u=a.role:u=i?"application":void 0),E.createElement(f6,LA({},a,{title:o,desc:l,role:u,tabIndex:c,width:n,height:r,style:L0e,ref:e}),s)}),F0e=t=>{var{children:e}=t,n=be(_1);if(!n)return null;var{width:r,height:i,y:s,x:a}=n;return E.createElement(f6,{width:r,height:i,x:a,y:s},e)},wV=E.forwardRef((t,e)=>{var{children:n}=t,r=D0e(t,O0e),i=ti();return i?E.createElement(F0e,null,E.createElement(yV,{isPanorama:!0},n)):E.createElement(j0e,LA({ref:e},r),E.createElement(yV,{isPanorama:!1},n))});function V0e(){var t=In(),[e,n]=E.useState(null),r=be(Xae);return E.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;St(s)&&s!==r&&t(Nae(s))}},[e,t,r]),n}function _V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_V(Object(n),!0).forEach(function(r){B0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_V(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B0e(t,e,n){return(e=$0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $0e(t){var e=z0e(t,"string");return typeof e=="symbol"?e:e+""}function z0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cd(){return Cd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cd.apply(null,arguments)}var H0e=()=>(tme(),null);function jA(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var W0e=E.forwardRef((t,e)=>{var n,r,i=E.useRef(null),[s,a]=E.useState({containerWidth:jA((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:jA((r=t.style)===null||r===void 0?void 0:r.height)}),o=E.useCallback((c,u)=>{a(h=>{var f=Math.round(c),m=Math.round(u);return h.containerWidth===f&&h.containerHeight===m?h:{containerWidth:f,containerHeight:m}})},[]),l=E.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:u,height:h}=c.getBoundingClientRect();o(u,h);var f=g=>{var{width:v,height:y}=g[0].contentRect;o(v,y)},m=new ResizeObserver(f);m.observe(c),i.current=m}},[e,o]);return E.useEffect(()=>()=>{var c=i.current;c!=null&&c.disconnect()},[o]),E.createElement(E.Fragment,null,E.createElement(b1,{width:s.containerWidth,height:s.containerHeight}),E.createElement("div",Cd({ref:l},t)))}),G0e=E.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=E.useState({containerWidth:jA(n),containerHeight:jA(r)}),a=E.useCallback((l,c)=>{s(u=>{var h=Math.round(l),f=Math.round(c);return u.containerWidth===h&&u.containerHeight===f?u:{containerWidth:h,containerHeight:f}})},[]),o=E.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:u}=l.getBoundingClientRect();a(c,u)}},[e,a]);return E.createElement(E.Fragment,null,E.createElement(b1,{width:i.containerWidth,height:i.containerHeight}),E.createElement("div",Cd({ref:o},t)))}),q0e=E.forwardRef((t,e)=>{var{width:n,height:r}=t;return E.createElement(E.Fragment,null,E.createElement(b1,{width:n,height:r}),E.createElement("div",Cd({ref:e},t)))}),K0e=E.forwardRef((t,e)=>{var{width:n,height:r}=t;return dl(n)||dl(r)?E.createElement(G0e,Cd({},t,{ref:e})):E.createElement(q0e,Cd({},t,{ref:e}))});function X0e(t){return t===!0?W0e:K0e}var Y0e=E.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:a,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:h,onMouseUp:f,onTouchEnd:m,onTouchMove:g,onTouchStart:v,style:y,width:w,responsive:b,dispatchTouchEvents:A=!0}=t,I=E.useRef(null),k=In(),[M,P]=E.useState(null),[C,O]=E.useState(null),j=V0e(),D=FN(),F=(D==null?void 0:D.width)>0?D.width:w,V=(D==null?void 0:D.height)>0?D.height:i,Y=E.useCallback(Q=>{j(Q),typeof e=="function"&&e(Q),P(Q),O(Q),Q!=null&&(I.current=Q)},[j,e,P,O]),re=E.useCallback(Q=>{k(g8(Q)),k(ss({handler:s,reactEvent:Q}))},[k,s]),K=E.useCallback(Q=>{k(nk(Q)),k(ss({handler:c,reactEvent:Q}))},[k,c]),q=E.useCallback(Q=>{k(o9()),k(ss({handler:u,reactEvent:Q}))},[k,u]),H=E.useCallback(Q=>{k(nk(Q)),k(ss({handler:h,reactEvent:Q}))},[k,h]),X=E.useCallback(()=>{k(x8())},[k]),te=E.useCallback(Q=>{k(b8(Q.key))},[k]),ce=E.useCallback(Q=>{k(ss({handler:a,reactEvent:Q}))},[k,a]),ue=E.useCallback(Q=>{k(ss({handler:o,reactEvent:Q}))},[k,o]),ve=E.useCallback(Q=>{k(ss({handler:l,reactEvent:Q}))},[k,l]),Ue=E.useCallback(Q=>{k(ss({handler:f,reactEvent:Q}))},[k,f]),et=E.useCallback(Q=>{k(ss({handler:v,reactEvent:Q}))},[k,v]),Ye=E.useCallback(Q=>{A&&k(E8(Q)),k(ss({handler:g,reactEvent:Q}))},[k,A,g]),me=E.useCallback(Q=>{k(ss({handler:m,reactEvent:Q}))},[k,m]),qn=X0e(b);return E.createElement(P9.Provider,{value:M},E.createElement(wie.Provider,{value:C},E.createElement(qn,{width:F??(y==null?void 0:y.width),height:V??(y==null?void 0:y.height),className:Tt("recharts-wrapper",r),style:U0e({position:"relative",cursor:"default",width:F,height:V},y),onClick:re,onContextMenu:ce,onDoubleClick:ue,onFocus:X,onKeyDown:te,onMouseDown:ve,onMouseEnter:K,onMouseLeave:q,onMouseMove:H,onMouseUp:Ue,onTouchEnd:me,onTouchMove:Ye,onTouchStart:et,ref:Y},E.createElement(H0e,null),n)))}),Q0e=["width","height","responsive","children","className","style","compact","title","desc"];function J0e(t,e){if(t==null)return{};var n,r,i=Z0e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Z0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ewe=E.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:a,style:o,compact:l,title:c,desc:u}=t,h=J0e(t,Q0e),f=la(h);return l?E.createElement(E.Fragment,null,E.createElement(b1,{width:n,height:r}),E.createElement(wV,{otherAttributes:f,title:c,desc:u},s)):E.createElement(Y0e,{className:a,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},E.createElement(wV,{otherAttributes:f,title:c,desc:u,ref:e},E.createElement(Mve,null,s)))});function rk(){return rk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rk.apply(null,arguments)}var twe={top:5,right:5,bottom:5,left:5},nwe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:twe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},rwe=E.forwardRef(function(e,n){var r,i=_i(e.categoricalChartProps,nwe),{chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,u={chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return E.createElement(C0e,{preloadedState:{options:u},reduxStoreName:(r=c.id)!==null&&r!==void 0?r:s},E.createElement(xve,{chartData:c.data}),E.createElement(R0e,{layout:i.layout,margin:i.margin}),E.createElement(N0e,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),E.createElement(ewe,rk({},i,{ref:n})))}),iwe=["axis"],rf=E.forwardRef((t,e)=>E.createElement(rwe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:iwe,tooltipPayloadSearcher:Vpe,categoricalChartProps:t,ref:e}));const swe=({onBack:t})=>{var Ww,Gw,rg,ig,qw,pa,ns,Au,Eu,sg,vt,Su,Rl,Nl,Kw;const[c,u]=E.useState("tables"),[h,f]=E.useState("numbers"),[m,g]=E.useState(!1),[v,y]=E.useState([]),[w,b]=E.useState([]),[A,I]=E.useState([]),[k,M]=E.useState(!1),[P,C]=E.useState(null),[O,j]=E.useState([]),[D,F]=E.useState([]),[V,Y]=E.useState("Admin"),[re,K]=E.useState(new Set),[q,H]=E.useState([]),[X,te]=E.useState([]),[ce,ue]=E.useState(""),[ve,Ue]=E.useState([]),[et,Ye]=E.useState("grid"),[me,qn]=E.useState([]),[Q,ne]=E.useState(0),[J,W]=E.useState(null),[Ee,le]=E.useState(!1),[Ce,ct]=E.useState(!1),[tt,Mr]=E.useState(!1),[Tl,vu]=E.useState(!1),[B1,tD]=E.useState(!1),[Bm,Pl]=E.useState(!1),[Bd,mn]=E.useState(""),On=E.useRef(null),[$d,yu]=E.useState(!1),[Ow,$1]=E.useState(""),[wu,Dw]=E.useState(()=>{}),[Rs,Gt]=E.useState(null),[$m,zm]=E.useState(!1),[Mw,Lw]=E.useState(!1),zd=E.useRef(null),Il=E.useRef(null),[gt,Hm]=E.useState(window.innerWidth<900),[ts,Wm]=E.useState(""),[_u,Gm]=E.useState(!1),[ri,jw]=E.useState(""),[gn,qm]=E.useState(!0),[ro,Cl]=E.useState(!0);E.useEffect(()=>{const U=G=>{const ae=G.target;!ae.closest(".options-menu")&&!ae.closest(".btn-icon")&&Gt(null),zd.current&&!zd.current.contains(G.target)&&zm(!1),Il.current&&!Il.current.contains(G.target)&&Lw(!1)};return document.addEventListener("click",U),()=>document.removeEventListener("click",U)},[]),E.useEffect(()=>{Hr(Fe(ke,"Dashboard","Admin")).then(Se=>Se.exists()&&Y(Se.data().Name||"Admin")),Hr(Fe(ke,"Dashboard","Settings")).then(Se=>Se.exists()&&(qm(Se.data()["Quiz-Enabled"]),Cl(Se.data()["PDF-Down"])));const U=Xu($u(ke,"Blocked"),Se=>{const je=Se.docs.map(He=>({id:He.id,number:He.id,name:He.data().Name||"Unknown",reason:He.data().Reason||"Unknown",date:He.data()["Blocked Date"]||"",time:He.data()["Blocked Time"]||""}));b(je),K(new Set(je.map(He=>He.number)))}),G=Xu($u(ke,"Numbers"),Se=>{y(Se.docs.map(je=>({id:je.id,number:je.id,name:je.data().Name,quizTimes:je.data()["Quizi-Times"]||0,quizEnabled:je.data()["Quiz-Enabled"]??!0,pdfDown:je.data()["PDF-Down"]??!0,deviceCount:0,screenedCount:je.data().Screened||0,devices:je.data().Devices})))}),ae=Xu($u(ke,"Snitches"),async Se=>{const je=await Promise.all(Se.docs.map(async He=>{const vn=He.data()["The Snitch"];let rs="Unknown";if(vn){const Ol=Fe(ke,"Numbers",vn),xi=await Hr(Ol);xi.exists()&&(rs=xi.data().Name||"Unknown")}return{id:He.id,loginNumber:He.data()["The Login Number"],snitchNumber:vn,snitchName:rs,date:He.data()["Snitched Date"],time:He.data()["Snitched Time"]}}));I(je)}),Le=Xu($u(ke,"Brokers"),Se=>{F(Se.docs.map(je=>{const He=je.data(),vn=Object.values(He.Attempts||{}),rs=vn.length>0?vn[vn.length-1]:{Date:"",Time:""};return{id:je.id,number:je.id,count:vn.length,date:rs.Date,time:rs.Time,attempts:vn}}))});return()=>{U(),G(),ae(),Le()}},[]),E.useEffect(()=>{const U=()=>Hm(window.innerWidth<900);return window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]),E.useEffect(()=>{(async()=>{var G;try{const Le=await cL(uL,"getFirebaseUsage")();W(Le.data);const Se=Le.data,je=Se.firestore.reads.reduce((Zt,en)=>Zt+en.value,0),He=Se.firestore.writes.reduce((Zt,en)=>Zt+en.value,0),vn=Se.firestore.deletes.reduce((Zt,en)=>Zt+en.value,0),rs=((G=Se.storage.bytesStored[0])==null?void 0:G.value)*1024*1024||0,Ol=Se.storage.bandwidthSent.reduce((Zt,en)=>Zt+en.value,0)*1024*1024,xi=Se.storage.requests.reduce((Zt,en)=>Zt+en.value,0),Kd=je>0||He>0||vn>0||rs>0||Ol>0||xi>1;le(Kd),ct(Kd)}catch(ae){console.error("Failed to check limits:",ae)}})()},[]),E.useEffect(()=>{k&&(P==null?void 0:P.type)==="number"?(async()=>{const G=[],ae=Fe(ke,"Numbers",P.data.number),Le=await Hr(ae);if(Le.exists()){const Se=Le.data();Se&&typeof Se=="object"&&Se.Devices&&typeof Se.Devices=="object"&&Se.Devices.Archived&&typeof Se.Devices.Archived=="object"&&Object.keys(Se.Devices.Archived).forEach(je=>{const He=Se.Devices.Archived[je];He&&typeof He=="object"&&G.push({attemptId:je,deviceId:je,Code:He.Code||"N/A",Date:He.Date||"N/A",Time:He.Time||"N/A"})})}j(G.sort((Se,je)=>parseInt(Se.attemptId||"0")-parseInt(je.attemptId||"0")))})():j([])},[k,P]);const ii=(U,G)=>{$1(U),Dw(()=>G),yu(!0)},z1=async()=>{ii("Logout?",async()=>{await _B(Oc),window.location.reload()})},kl=async()=>{if(!ts||ts.length!==11)return alert("Invalid Number");try{await ja(Fe(ke,"Numbers",ts),{Name:"Unknown","PDF-Down":_u,"Quiz-Enabled":!0,"Quizi-Times":0,Devices:{"Devices Allowed":1},Screened:0}),Mr(!1),Wm(""),Gm(!1)}catch(U){console.error(U)}},H1=async U=>{ii("Delete?",async()=>{try{await jl(Fe(ke,"Numbers",U.trim()))}catch{}finally{Gt(null)}})},W1=async U=>{ii(`Block ${U.name||U.number}?`,async()=>{const G=new Date;try{await ja(Fe(ke,"Blocked",U.number),{"Blocked Date":G.toLocaleDateString("en-GB"),"Blocked Time":G.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),Reason:"Blocked by Admin",Name:U.name}),Gt(null)}catch(ae){console.error(ae)}})},Hd=async U=>{try{await Nc(Fe(ke,"Numbers",U.number),{"Quiz-Enabled":!U.quizEnabled}),Gt(null)}catch(G){console.error(G)}},Fw=async U=>{try{await Nc(Fe(ke,"Numbers",U.number),{"PDF-Down":!U.pdfDown}),Gt(null)}catch(G){console.error(G)}},Km=async U=>{try{await Nc(Fe(ke,"Numbers",U.number),{Screened:0}),Gt(null)}catch(G){console.error(G)}},Wd=async()=>{ii("Clear all screened counts for all users?",async()=>{try{const G=(await $P($u(ke,"Numbers"))).docs.map(ae=>Nc(ae.ref,{Screened:0}));await Promise.all(G)}catch(U){console.error(U)}})},fa=async U=>{ii(`Unblock ${U.number}?`,async()=>{try{await ja(Fe(ke,"Numbers",U.number),{Name:U.name||"Unknown","PDF-Down":!0,"Quiz-Enabled":!0,"Quizi-Times":0,Devices:{"Devices Allowed":1}}),await jl(Fe(ke,"Blocked",U.number)),Gt(null)}catch(G){console.error(G)}})},Vw=async U=>{ii("Delete record?",async()=>{await jl(Fe(ke,"Blocked",U)),Gt(null)})},Uw=async U=>{ii(`Block Snitch ${U.snitchNumber}?`,async()=>{const G=new Date;try{let ae=U.snitchName;if(!ae||ae==="Unknown")try{const Le=await Hr(Fe(ke,"Numbers",U.snitchNumber));Le.exists()&&(ae=Le.data().Name)}catch{}await ja(Fe(ke,"Blocked",U.snitchNumber),{"Blocked Date":G.toLocaleDateString("en-GB"),"Blocked Time":G.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),Reason:`Snitched on ${U.loginNumber}`,Name:ae||"Unknown"});try{await jl(Fe(ke,"Numbers",U.snitchNumber))}catch{}Gt(null)}catch(ae){console.error(ae)}})},Xm=async U=>{ii("Delete record?",async()=>{await jl(Fe(ke,"Snitches",U)),Gt(null)})},Ym=async U=>{ii(`Block Broker ${U.number}?`,async()=>{const G=new Date;try{let ae="Unknown";try{const Le=await Hr(Fe(ke,"Numbers",U.number));Le.exists()&&(ae=Le.data().Name||"Unknown")}catch(Le){console.warn("Failed to get name for broker from Numbers",Le)}await ja(Fe(ke,"Blocked",U.number),{"Blocked Date":G.toLocaleDateString("en-GB"),"Blocked Time":G.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),Reason:"Blocked as Broker",Name:ae}),await jl(Fe(ke,"Brokers",U.id));try{await jl(Fe(ke,"Numbers",U.number))}catch{}Gt(null)}catch(ae){console.error(ae)}})},Bw=v.filter(U=>{var G,ae,Le;return((G=U.number)==null?void 0:G.includes(ri))||((Le=(ae=U.name)==null?void 0:ae.toLowerCase())==null?void 0:Le.includes(ri.toLowerCase()))}),$w=w.filter(U=>{var G,ae,Le;return((G=U.number)==null?void 0:G.includes(ri))||((Le=(ae=U.name)==null?void 0:ae.toLowerCase())==null?void 0:Le.includes(ri.toLowerCase()))}),G1=A.filter(U=>{var G,ae;return((G=U.loginNumber)==null?void 0:G.includes(ri))||((ae=U.snitchNumber)==null?void 0:ae.includes(ri))}),Gd=D.filter(U=>{var G;return(G=U.number)==null?void 0:G.includes(ri)}),bu=async U=>{try{const G=fs(ps,U),ae=await xv(G),Le=ae.prefixes.map(je=>({name:je.name,type:"folder",fullPath:je.fullPath})),Se=await Promise.all(ae.items.map(async je=>({name:je.name,type:"file",fullPath:je.fullPath,url:await sL(je)})));H([...Le,...Se]),te([])}catch{}};E.useEffect(()=>{c==="files"&&bu(ce)},[c,ce]);const qd=U=>{Ue(G=>[...G,ce]),ue(U)},xu=()=>{if(ve.length>0){const U=[...ve],G=U.pop();Ue(U),ue(G||"")}},io=async U=>{try{await WP(fs(ps,`${ce?ce+"/":""}${U}/.placeholder`),new Blob([""])),Pl(!1),mn(""),bu(ce)}catch{}},Qm=async U=>{try{const G=`${ce?ce+"/":""}${U.name}`;await WP(fs(ps,G),U),bu(ce)}catch(G){console.error(G)}},q1=async U=>{var ae;const G=(ae=U.target.files)==null?void 0:ae[0];G&&G.type==="application/pdf"&&(await Qm(G),U.target.value="")},Jm=U=>{te(G=>G.includes(U)?G.filter(ae=>ae!==U):[...G,U])},zw=()=>{X.length===q.length?te([]):te(q.map(U=>U.fullPath))},Zm=async U=>{try{const G=await xv(fs(ps,U));await Promise.all(G.items.map(ae=>$S(ae))),await Promise.all(G.prefixes.map(ae=>Zm(ae.fullPath)))}catch(G){console.error("Recursive delete failed",G)}},eg=async()=>{ii(`Delete ${X.length} items? This cannot be undone.`,async()=>{for(const U of X){const G=q.find(ae=>ae.fullPath===U);if((G==null?void 0:G.type)==="folder")await Zm(U);else try{await $S(fs(ps,U))}catch{}}te([]),bu(ce)})},tg=async()=>{try{const U=await xv(fs(ps,"Captured-Shots")),G=await Promise.all(U.items.map(async Le=>({fullPath:Le.fullPath,url:await sL(Le),name:Le.name}))),ae=await Promise.all(G.map(async Le=>{const Se=Le.name.split("_"),je=Se.length>=2?Se[1]:"Unknown";let He="Unknown";try{const vn=await Hr(Fe(ke,"Numbers",je));vn.exists()&&(He=vn.data().Name||"Unknown")}catch{}return{...Le,ownerNumber:je,ownerName:He}}));qn(ae)}catch(U){console.warn("Load shots failed",U)}};E.useEffect(()=>{c==="shots"&&tg()},[c]),E.useEffect(()=>{c==="firebase"&&(async()=>{var G;try{const Le=await cL(uL,"getFirebaseUsage")();W(Le.data);const Se=Le.data,je=Se.firestore.reads.reduce((Zt,en)=>Zt+en.value,0),He=Se.firestore.writes.reduce((Zt,en)=>Zt+en.value,0),vn=Se.firestore.deletes.reduce((Zt,en)=>Zt+en.value,0),rs=((G=Se.storage.bytesStored[0])==null?void 0:G.value)*1024*1024||0,Ol=Se.storage.bandwidthSent.reduce((Zt,en)=>Zt+en.value,0)*1024*1024,xi=Se.storage.requests.reduce((Zt,en)=>Zt+en.value,0),Kd=je>0||He>0||vn>0||rs>0||Ol>0||xi>1;le(Kd)}catch(ae){console.error("Failed to fetch Firebase usage:",ae)}})()},[c]),E.useEffect(()=>{if(c!=="shots")return;const U=G=>{G.key==="ArrowLeft"?ne(ae=>Math.max(0,ae-1)):G.key==="ArrowRight"&&ne(ae=>Math.min(me.length-1,ae+1))};return window.addEventListener("keydown",U),()=>window.removeEventListener("keydown",U)},[c,me.length]);const Hw=async()=>{ii("Delete?",async()=>{try{await $S(fs(ps,me[Q].fullPath));const U=[...me];U.splice(Q,1),qn(U),Q>=U.length&&ne(Math.max(0,U.length-1))}catch{}})},ng=["numbers","blocked","snitches","brokers"];return Ce?_.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-surface border border-error/20 p-8 rounded-xl max-w-md text-center shadow-2xl",children:[_.jsx("div",{className:"w-16 h-16 bg-error/10 rounded-full flex items-center justify-center mx-auto mb-6",children:_.jsx(zv,{size:32,className:"text-error"})}),_.jsx("h2",{className:"text-2xl font-bold text-error mb-4",children:"Firebase Limits Exceeded"}),_.jsx("p",{className:"text-muted mb-6",children:"You have exceeded your Firebase free tier limits. To continue using the application, please upgrade your Firebase plan."}),_.jsxs("div",{className:"space-y-3",children:[_.jsx("p",{className:"text-sm text-muted",children:"Limits checked:"}),_.jsxs("ul",{className:"text-sm text-muted text-left space-y-1",children:[_.jsx("li",{children:" Firestore: 1.5M reads, 600K writes, 600K deletes per month"}),_.jsx("li",{children:" Storage: 5GB storage, 1GB bandwidth, 50K requests per month"})]})]}),_.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary mt-6 w-full",children:"Refresh Page"})]})}):_.jsxs("div",{className:"flex h-screen overflow-hidden bg-black",children:[_.jsxs("aside",{className:`sidebar z-20 shadow-xl ${m?"mobile-open":""}`,children:[_.jsxs("div",{className:"sidebar-header gap-3",children:[_.jsx("div",{className:"rounded border border-indigo-900/50 flex items-center justify-center text-indigo-500 bg-indigo-500/10",style:{width:"32px",height:"32px"},children:_.jsx(zv,{size:18})}),_.jsx("div",{children:_.jsx("h1",{className:"font-bold text-white text-sm",children:"The State"})})]}),_.jsxs("nav",{className:"flex-1 p-4 flex flex-col gap-2",children:[_.jsxs("button",{onClick:()=>u("tables"),className:`nav-btn admin-nav-btn ${c==="tables"?"active":""}`,children:[_.jsx(gP,{size:18})," Tables"]}),_.jsxs("button",{onClick:()=>u("files"),className:`nav-btn admin-nav-btn ${c==="files"?"active":""}`,children:[_.jsx(Bu,{size:18})," Files"]}),_.jsxs("button",{onClick:()=>u("shots"),className:`nav-btn admin-nav-btn ${c==="shots"?"active":""}`,children:[_.jsx(OM,{size:18})," Shots"]}),_.jsxs("button",{onClick:()=>u("firebase"),className:`nav-btn admin-nav-btn ${c==="firebase"?"active":""}`,children:[_.jsx(MM,{size:18})," Firebase"]})]}),_.jsxs("div",{className:"p-4 border-t border-white/10 flex flex-col gap-2",children:[_.jsxs("button",{onClick:t,className:"nav-btn",children:[_.jsx(TS,{size:16})," Back to User View"]}),_.jsxs("button",{onClick:z1,className:"nav-btn hover:text-error hover:bg-red-500/10",children:[_.jsx(vP,{size:16})," Sign Out"]})]})]}),m&&_.jsx("div",{className:"mobile-backdrop",onClick:()=>g(!1)}),_.jsxs("main",{className:"main-content",children:[_.jsxs("header",{className:"content-header",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{onClick:()=>g(U=>!U),className:"mobile-toggle","aria-label":"Toggle menu",children:""}),_.jsx("div",{className:"rounded-full bg-surface border border-white/10 flex items-center justify-center text-muted font-bold text-xs",style:{width:"36px",height:"36px"},children:V.charAt(0).toUpperCase()}),_.jsxs("div",{children:[_.jsxs("h2",{className:"text-sm font-semibold text-white",children:["Welcome, ",V.split(" ")[0]]}),_.jsx("p",{className:"text-xs text-success",children:"Online"})]})]}),_.jsxs("button",{onClick:()=>vu(!0),className:"btn btn-secondary btn-sm gap-2 text-xs h-9 px-3",children:[_.jsx(xK,{size:14})," Settings"]})]}),_.jsxs("div",{className:"content-body",children:[c==="tables"&&_.jsxs("div",{className:"h-full flex flex-col gap-4",children:[_.jsxs("div",{className:`table-toolbar justify-between gap-3 ${gt?"flex-col":"flex-row"}`,children:[gt?_.jsxs("div",{className:"relative w-full",ref:zd,children:[_.jsxs("button",{onClick:()=>zm(!$m),className:"btn btn-secondary btn-toolbar capitalize flex items-center w-full justify-center",children:[h," ",_.jsx(pK,{size:16,className:`ml-2 transition-transform ${$m?"rotate-180":""}`})]}),$m&&_.jsx("div",{className:"options-menu",style:{top:"100%",right:"auto",left:0,width:"100%",marginTop:"8px",transformOrigin:"top center"},children:ng.map(U=>_.jsxs("button",{onClick:()=>{f(U),zm(!1)},className:`options-item capitalize ${h===U?"bg-white/10 text-white":""}`,children:[h===U&&_.jsx(LU,{size:14}),_.jsx("span",{className:"flex-1",children:U})]},U))})]}):_.jsx("div",{className:"table-nav",children:ng.map(U=>_.jsx("button",{onClick:()=>f(U),className:`table-nav-btn capitalize ${h===U?"active":""}`,children:U},U))}),_.jsxs("div",{className:`flex gap-3 items-center ${gt?"flex-col w-full":"flex-row"}`,children:[_.jsxs("div",{className:`search-container ${gt?"w-full":""}`,children:[_.jsx(bK,{className:"search-icon",size:16}),_.jsx("input",{type:"text",placeholder:"Search...",value:ri,onChange:U=>jw(U.target.value),className:"search-input"})]}),h==="numbers"&&_.jsxs("button",{onClick:()=>Mr(!0),className:`btn btn-primary btn-toolbar ${gt?"w-full":""}`,children:[_.jsx(_K,{size:16})," ",_.jsx("span",{children:gt?"Add New User":"Add"})]})]})]}),_.jsx("div",{className:"flex-1 bg-surface border border-white/10 rounded-xl overflow-hidden shadow-2xl relative",children:_.jsx("div",{className:"absolute inset-0 overflow-auto custom-scrollbar",children:_.jsxs("table",{className:"admin-table",children:[_.jsx("thead",{children:_.jsx("tr",{children:h==="numbers"?_.jsxs(_.Fragment,{children:[_.jsx("th",{children:"Number"}),_.jsx("th",{children:"Name"}),_.jsx("th",{children:"Quiz Times"}),_.jsx("th",{children:"Screened"}),_.jsx("th",{children:"Quiz"}),_.jsx("th",{children:"PDF"}),_.jsx("th",{className:"text-right",children:"Actions"})]}):h==="blocked"?_.jsxs(_.Fragment,{children:[_.jsx("th",{children:"Number"}),_.jsx("th",{children:"Name"}),_.jsx("th",{children:"Reason"}),_.jsx("th",{children:"Date"}),_.jsx("th",{children:"Status"}),_.jsx("th",{className:"text-right",children:"Actions"})]}):h==="snitches"?_.jsxs(_.Fragment,{children:[_.jsx("th",{children:"Login #"}),_.jsx("th",{children:"Snitch #"}),_.jsx("th",{children:"Name"}),_.jsx("th",{children:"Time"}),_.jsx("th",{children:"Status"}),_.jsx("th",{className:"text-right",children:"Actions"})]}):_.jsxs(_.Fragment,{children:[_.jsx("th",{children:"Number"}),_.jsx("th",{children:"Count"}),_.jsx("th",{children:"Date"}),_.jsx("th",{children:"Time"}),_.jsx("th",{children:"Status"}),_.jsx("th",{className:"text-right",children:"Actions"})]})})}),_.jsx("tbody",{children:(h==="numbers"?Bw:h==="blocked"?$w:h==="snitches"?G1:Gd).map(U=>_.jsxs("tr",{children:[h==="numbers"&&_.jsxs(_.Fragment,{children:[_.jsx("td",{className:"font-mono text-muted",children:U.number}),_.jsx("td",{className:"font-medium text-white",children:U.name}),_.jsx("td",{children:_.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold bg-white/5 text-white",children:U.quizTimes})}),_.jsx("td",{children:_.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold bg-white/5 text-white",children:U.screenedCount})}),_.jsx("td",{children:_.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${U.quizEnabled?"text-success bg-success/10":"text-muted bg-white/5"}`,children:U.quizEnabled?"ON":"OFF"})}),_.jsx("td",{children:_.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${U.pdfDown?"text-success bg-success/10":"text-error bg-error/10"}`,children:U.pdfDown?"Allowed":"Blocked"})}),_.jsxs("td",{className:"text-right relative",children:[_.jsx("div",{className:"flex justify-end",children:_.jsx("button",{onClick:G=>{G.stopPropagation(),Gt(Rs===U.id?null:U.id)},className:"btn-icon w-8 h-8",children:_.jsx(__,{size:16})})}),Rs===U.id&&_.jsxs("div",{className:"options-menu",children:[!re.has(U.number)&&_.jsxs("button",{onClick:()=>W1(U),className:"options-item warning",children:[_.jsx(ob,{size:14})," Block Number"]}),_.jsxs("button",{onClick:()=>Hd(U),className:"options-item",children:[_.jsx(yg,{size:14})," Quiz: ",U.quizEnabled?"ON":"OFF"]}),_.jsxs("button",{onClick:()=>Fw(U),className:"options-item",children:[_.jsx(mP,{size:14})," PDF: ",U.pdfDown?"Allowed":"Blocked"]}),_.jsxs("button",{onClick:()=>Km(U),className:"options-item",children:[_.jsx(jU,{size:14})," Clear Screen"]}),_.jsxs("button",{onClick:()=>{C({type:"number",data:U}),M(!0),Gt(null)},className:"options-item",children:[_.jsx(yg,{size:14})," Info"]}),_.jsx("div",{className:"options-divider"}),_.jsxs("button",{onClick:()=>H1(U.id),className:"options-item danger",children:[_.jsx(wg,{size:14})," Delete"]})]})]})]}),h==="blocked"&&_.jsxs(_.Fragment,{children:[_.jsx("td",{className:"font-mono text-muted",children:U.number}),_.jsx("td",{className:"font-medium text-white",children:U.name}),_.jsx("td",{className:"text-sm text-error",children:U.reason}),_.jsxs("td",{className:"text-xs text-muted",children:[U.date," ",U.time]}),_.jsx("td",{children:_.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium text-error bg-error/10",children:"Blocked"})}),_.jsxs("td",{className:"text-right relative",children:[_.jsx("div",{className:"flex justify-end",children:_.jsx("button",{onClick:G=>{G.stopPropagation(),Gt(Rs===U.id?null:U.id)},className:"btn-icon w-8 h-8",children:_.jsx(__,{size:16})})}),Rs===U.id&&_.jsxs("div",{className:"options-menu",style:{width:"160px"},children:[_.jsxs("button",{onClick:()=>fa(U),className:"options-item text-success",children:[_.jsx(wK,{size:14,className:"text-success"})," Unblock"]}),_.jsx("div",{className:"options-divider"}),_.jsxs("button",{onClick:()=>Vw(U.id),className:"options-item danger",children:[_.jsx(wg,{size:14})," Delete"]})]})]})]}),h==="snitches"&&_.jsxs(_.Fragment,{children:[_.jsx("td",{className:"font-mono text-muted",children:U.loginNumber}),_.jsx("td",{className:"font-mono text-error",children:U.snitchNumber}),_.jsx("td",{className:"text-white",children:U.snitchName}),_.jsxs("td",{className:"text-xs text-muted",children:[U.date," ",U.time]}),_.jsx("td",{children:_.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${re.has(U.snitchNumber)?"text-error bg-error/10":"text-success bg-success/10"}`,children:re.has(U.snitchNumber)?"Blocked":"Normal"})}),_.jsxs("td",{className:"text-right relative",children:[_.jsx("div",{className:"flex justify-end",children:_.jsx("button",{onClick:G=>{G.stopPropagation(),Gt(Rs===U.id?null:U.id)},className:"btn-icon w-8 h-8",children:_.jsx(__,{size:16})})}),Rs===U.id&&_.jsxs("div",{className:"options-menu",style:{width:"160px"},children:[!re.has(U.snitchNumber)&&_.jsxs("button",{onClick:()=>Uw(U),className:"options-item warning",children:[_.jsx(ob,{size:14})," Block Snitch"]}),_.jsx("div",{className:"options-divider"}),_.jsxs("button",{onClick:()=>Xm(U.id),className:"options-item danger",children:[_.jsx(wg,{size:14})," Delete"]})]})]})]}),h==="brokers"&&_.jsxs(_.Fragment,{children:[_.jsx("td",{className:"font-mono text-muted",children:U.number}),_.jsx("td",{className:"text-sm text-error",children:U.count}),_.jsx("td",{className:"text-sm text-white",children:U.date}),_.jsx("td",{className:"text-xs text-muted",children:U.time}),_.jsx("td",{children:_.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${re.has(U.number)?"text-error bg-error/10":"text-success bg-success/10"}`,children:re.has(U.number)?"Blocked":"Normal"})}),_.jsxs("td",{className:"text-right relative",children:[_.jsx("div",{className:"flex justify-end",children:_.jsx("button",{onClick:G=>{G.stopPropagation(),Gt(Rs===U.id?null:U.id)},className:"btn-icon w-8 h-8",children:_.jsx(__,{size:16})})}),Rs===U.id&&_.jsxs("div",{className:"options-menu",style:{width:"160px"},children:[_.jsxs("button",{onClick:()=>{C({type:"broker",data:U}),M(!0),Gt(null)},className:"options-item",children:[_.jsx(yg,{size:14})," Info"]}),!re.has(U.number)&&_.jsxs("button",{onClick:()=>Ym(U),className:"options-item warning",children:[_.jsx(ob,{size:14})," Block Broker"]}),_.jsx("div",{className:"options-divider"}),_.jsxs("button",{onClick:()=>ii("Delete record?",async()=>{await jl(Fe(ke,"Brokers",U.id)),Gt(null)}),className:"options-item danger",children:[_.jsx(wg,{size:14})," Delete"]})]})]})]})]},U.id))})]})})})]}),c==="files"&&_.jsxs("div",{className:"h-full flex flex-col gap-4",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:xu,disabled:ve.length===0,className:`btn-icon border border-white/10 bg-surface ${ve.length===0?"opacity-50":""}`,children:_.jsx(TS,{size:16})}),_.jsxs("div",{className:"flex items-center bg-surface border border-white/10 rounded-lg px-3 py-2 text-sm text-muted font-mono",children:[_.jsx("span",{onClick:()=>{ue(""),Ue([])},className:"cursor-pointer hover:text-white",children:"root/"}),ce]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[X.length>0&&_.jsxs("button",{onClick:eg,className:"btn btn-danger btn-toolbar animate-fade-in",children:[_.jsx(wg,{size:16})," Delete (",X.length,")"]}),_.jsxs("div",{className:"view-toggle-group mr-2",children:[_.jsx("button",{onClick:()=>Ye("grid"),className:`view-toggle-btn ${et==="grid"?"active":""}`,children:_.jsx(gP,{size:16})}),_.jsx("button",{onClick:()=>Ye("table"),className:`view-toggle-btn ${et==="table"?"active":""}`,children:_.jsx(yK,{size:16})})]}),_.jsxs("button",{onClick:()=>Pl(!0),className:"btn btn-secondary btn-toolbar",children:[_.jsx(Bu,{size:16})," New Folder"]}),_.jsxs("button",{onClick:()=>{var U;return(U=On.current)==null?void 0:U.click()},className:"btn btn-primary btn-toolbar",children:[_.jsx(AK,{size:16})," Upload"]})]})]}),_.jsx("div",{className:"flex-1 bg-surface border border-white/10 rounded-xl overflow-hidden shadow-2xl relative",children:_.jsx("div",{className:"absolute inset-0 overflow-auto custom-scrollbar p-4",children:et==="grid"?_.jsxs("div",{className:"file-grid-layout",children:[q.map(U=>{const G=X.includes(U.fullPath);return _.jsxs("div",{onClick:()=>U.type==="folder"&&qd(U.fullPath),className:`file-card ${G?"selected":""}`,children:[_.jsx("div",{onClick:ae=>{ae.stopPropagation(),Jm(U.fullPath)},className:"absolute top-2 left-2 p-1 rounded hover:bg-black/50 text-white/50 hover:text-white z-10 cursor-pointer",children:G?_.jsx(PS,{size:18,className:"text-primary"}):_.jsx(IS,{size:18})}),_.jsx("div",{className:"flex-1 flex items-center justify-center",children:U.type==="folder"?_.jsx(Bu,{size:48,className:"text-amber-500 drop-shadow-md"}):_.jsx(Ax,{size:48,className:"text-primary drop-shadow-md"})}),_.jsx("span",{className:"text-xs text-muted truncate w-full text-center px-2 pb-2",children:U.name})]},U.fullPath)}),q.length===0&&_.jsx("div",{className:"col-span-full text-center text-muted py-10 opacity-50",children:"Empty Directory"})]}):_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsxs("div",{className:"file-table-layout px-4 py-3 text-xs font-bold text-muted uppercase border-b border-white/10 items-center bg-white/5 rounded-t-lg",children:[_.jsx("div",{onClick:zw,className:"cursor-pointer hover:text-white flex items-center",children:X.length===q.length&&q.length>0?_.jsx(PS,{size:16}):_.jsx(IS,{size:16})}),_.jsx("div",{className:"flex justify-center",children:_.jsx(Bu,{size:14,className:"opacity-0"})})," ",_.jsx("span",{children:"Name"}),_.jsx("span",{className:"text-right",children:"Action"})]}),_.jsx("div",{className:"flex flex-col",children:q.map(U=>{const G=X.includes(U.fullPath);return _.jsxs("div",{onClick:()=>U.type==="folder"&&qd(U.fullPath),className:`file-table-layout px-4 py-3 items-center rounded-lg cursor-pointer border-b border-white/5 last:border-0 transition-colors ${G?"bg-primary/10 border-primary/20":"hover:bg-white/5"}`,children:[_.jsx("div",{onClick:ae=>{ae.stopPropagation(),Jm(U.fullPath)},className:"cursor-pointer text-muted hover:text-white flex items-center",children:G?_.jsx(PS,{size:16,className:"text-primary"}):_.jsx(IS,{size:16})}),_.jsx("div",{className:"flex justify-center",children:U.type==="folder"?_.jsx(Bu,{size:18,className:"text-amber-500"}):_.jsx(Ax,{size:18,className:"text-primary"})}),_.jsx("span",{className:"text-sm text-white truncate pr-4",children:U.name}),_.jsx("div",{className:"flex justify-end",children:U.type==="file"&&_.jsx("a",{href:U.url,target:"_blank",rel:"noreferrer",onClick:ae=>ae.stopPropagation(),className:"p-2 text-muted hover:text-white",children:_.jsx(mP,{size:14})})})]},U.fullPath)})}),q.length===0&&_.jsx("div",{className:"text-center text-muted py-10 opacity-50",children:"Empty Directory"})]})})})]}),c==="shots"&&_.jsxs("div",{className:"h-full flex flex-col gap-4",children:[_.jsx("div",{className:"flex-1 bg-surface border border-white/10 rounded-xl overflow-hidden shadow-2xl relative",children:_.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4",children:me.length>0?_.jsx("div",{className:"w-full max-w-4xl flex flex-col gap-4",style:{height:"100%"},children:_.jsxs("div",{className:`relative bg-black rounded-xl border border-white/10 overflow-hidden shadow-2xl flex items-center justify-center ${gt?"w-full h-full":"aspect-video"}`,style:gt?{width:"100%",height:"100vh"}:{width:"100%",height:"100%"},children:[_.jsx("img",{src:(Ww=me[Q])==null?void 0:Ww.url,alt:"Shot",className:"max-w-full max-h-full",style:gt?{width:"100%"}:{height:"100%"}}),_.jsx("button",{onClick:()=>ne(U=>Math.max(0,U-1)),disabled:Q===0,className:"absolute left-4 top-1/2 -translate-y-1/2 btn-icon bg-black/50 hover:bg-black text-white rounded-full disabled:opacity-50",children:_.jsx(TS,{})}),_.jsx("button",{onClick:()=>ne(U=>Math.min(me.length-1,U+1)),disabled:Q===me.length-1,className:"absolute right-4 top-1/2 -translate-y-1/2 btn-icon bg-black/50 hover:bg-black text-white rounded-full disabled:opacity-50",children:_.jsx(fK,{})})]})}):_.jsxs("div",{className:"text-muted flex flex-col items-center gap-4",children:[_.jsx(OM,{size:48,className:"opacity-20"}),_.jsx("p",{children:"No screenshots captured"})]})})}),me.length>0&&_.jsxs("div",{className:`flex justify-between items-center bg-surface rounded-xl border border-white/10 ${gt?"p-2 flex-col gap-2":"p-4"}`,children:[_.jsxs("div",{children:[_.jsx("div",{className:`font-mono text-muted ${gt?"text-xs":"text-sm"}`,children:(Gw=me[Q])==null?void 0:Gw.name}),_.jsxs("div",{className:"text-xs text-muted",children:["Owner: ",_.jsx("span",{className:"text-white",children:((rg=me[Q])==null?void 0:rg.ownerName)||"Unknown"})," ",_.jsxs("span",{className:"font-mono text-muted",children:["(",((ig=me[Q])==null?void 0:ig.ownerNumber)||"Unknown",")"]})]})]}),_.jsxs("div",{className:`flex items-center ${gt?"gap-2":"gap-4"}`,children:[_.jsxs("span",{className:`text-muted ${gt?"text-xs":"text-sm"}`,children:[Q+1," / ",me.length]}),_.jsx("button",{onClick:Hw,className:`btn btn-danger ${gt?"h-6 text-xs px-2":"h-8 text-xs px-3"}`,children:"Delete"})]})]})]}),c==="firebase"&&_.jsxs("div",{className:"h-full flex flex-col gap-6",children:[_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-6",children:_.jsxs("div",{className:"bg-surface border border-white/10 rounded-xl p-6 shadow-2xl",children:[_.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[_.jsx(MM,{size:20})," User Count"]}),_.jsx("div",{className:"text-3xl font-bold text-primary",children:v.length}),_.jsx("p",{className:"text-sm text-muted",children:"Total registered users"})]})}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxs("div",{className:"bg-surface border border-white/10 rounded-xl p-6 shadow-2xl",children:[_.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Firestore Reads (",(()=>{var G,ae;const U=((ae=(G=J==null?void 0:J.firestore)==null?void 0:G.reads)==null?void 0:ae.reduce((Le,Se)=>Le+Se.value,0))||0;return U>=1e3?(U/1e3).toFixed(1)+"K":U})(),")"]}),_.jsx(Jd,{width:"100%",height:250,children:_.jsxs(rf,{data:(((qw=J==null?void 0:J.firestore)==null?void 0:qw.reads)||[]).filter((U,G)=>gt?G%5===0:!0),children:[_.jsx("defs",{children:_.jsxs("linearGradient",{id:"readsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[_.jsx("stop",{offset:"0%",stopColor:"#ef476f",stopOpacity:.8}),_.jsx("stop",{offset:"100%",stopColor:"#ef476f",stopOpacity:0})]})}),_.jsx(ju,{strokeDasharray:"3 3",stroke:"#444"}),_.jsx(Vu,{dataKey:"date",stroke:"#ccc"}),_.jsx(Uu,{stroke:"#ccc"}),_.jsx(nf,{contentStyle:{backgroundColor:"#333",border:"none"}}),_.jsx(Fu,{type:"monotone",dataKey:"value",stroke:"#ef476f",fill:"url(#readsGradient)",strokeWidth:2}),_.jsx(Lu,{y:15e5,stroke:"red",strokeDasharray:"5 5",label:"Free Limit (1.5M)"})]})})]}),_.jsxs("div",{className:"bg-surface border border-white/10 rounded-xl p-6 shadow-2xl",children:[_.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Firestore Writes (",(()=>{var G,ae;const U=((ae=(G=J==null?void 0:J.firestore)==null?void 0:G.writes)==null?void 0:ae.reduce((Le,Se)=>Le+Se.value,0))||0;return U>=1e3?(U/1e3).toFixed(1)+"K":U})(),")"]}),_.jsx(Jd,{width:"100%",height:250,children:_.jsxs(rf,{data:(((pa=J==null?void 0:J.firestore)==null?void 0:pa.writes)||[]).filter((U,G)=>gt?G%5===0:!0),children:[_.jsx("defs",{children:_.jsxs("linearGradient",{id:"writesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[_.jsx("stop",{offset:"0%",stopColor:"#ffd166",stopOpacity:.8}),_.jsx("stop",{offset:"100%",stopColor:"#ffd166",stopOpacity:0})]})}),_.jsx(ju,{strokeDasharray:"3 3",stroke:"#444"}),_.jsx(Vu,{dataKey:"date",stroke:"#ccc"}),_.jsx(Uu,{stroke:"#ccc"}),_.jsx(nf,{contentStyle:{backgroundColor:"#333",border:"none"}}),_.jsx(Fu,{type:"monotone",dataKey:"value",stroke:"#ffd166",fill:"url(#writesGradient)",strokeWidth:2}),_.jsx(Lu,{y:6e5,stroke:"red",strokeDasharray:"5 5",label:"Free Limit (600K)"})]})})]})]}),_.jsx("div",{className:"grid grid-cols-1 gap-6",children:_.jsxs("div",{className:"bg-surface border border-white/10 rounded-xl p-6 shadow-2xl",children:[_.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Firestore Deletes (",(()=>{var G,ae;const U=((ae=(G=J==null?void 0:J.firestore)==null?void 0:G.deletes)==null?void 0:ae.reduce((Le,Se)=>Le+Se.value,0))||0;return U>=1e3?(U/1e3).toFixed(1)+"K":U})(),")"]}),_.jsx(Jd,{width:"100%",height:250,children:_.jsxs(rf,{data:(((ns=J==null?void 0:J.firestore)==null?void 0:ns.deletes)||[]).filter((U,G)=>gt?G%5===0:!0),children:[_.jsx("defs",{children:_.jsxs("linearGradient",{id:"deletesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[_.jsx("stop",{offset:"0%",stopColor:"#06d6a0",stopOpacity:.8}),_.jsx("stop",{offset:"100%",stopColor:"#06d6a0",stopOpacity:0})]})}),_.jsx(ju,{strokeDasharray:"3 3",stroke:"#444"}),_.jsx(Vu,{dataKey:"date",stroke:"#ccc"}),_.jsx(Uu,{stroke:"#ccc"}),_.jsx(nf,{contentStyle:{backgroundColor:"#333",border:"none"}}),_.jsx(Fu,{type:"monotone",dataKey:"value",stroke:"#06d6a0",fill:"url(#deletesGradient)",strokeWidth:2}),_.jsx(Lu,{y:6e5,stroke:"red",strokeDasharray:"5 5",label:"Free Limit (600K)"})]})})]})}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxs("div",{className:"bg-surface border border-white/10 rounded-xl p-6 shadow-2xl",children:[_.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Storage Bytes Stored (",(sg=(Eu=(Au=J==null?void 0:J.storage)==null?void 0:Au.bytesStored)==null?void 0:Eu[J.storage.bytesStored.length-1])!=null&&sg.value?J.storage.bytesStored[J.storage.bytesStored.length-1].value.toFixed(2)+" MB":"0 MB",")"]}),_.jsx(Jd,{width:"100%",height:250,children:_.jsxs(rf,{data:(((vt=J==null?void 0:J.storage)==null?void 0:vt.bytesStored)||[]).filter((U,G)=>gt?G%5===0:!0),children:[_.jsx("defs",{children:_.jsxs("linearGradient",{id:"bytesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[_.jsx("stop",{offset:"0%",stopColor:"#118ab2",stopOpacity:.8}),_.jsx("stop",{offset:"100%",stopColor:"#118ab2",stopOpacity:0})]})}),_.jsx(ju,{strokeDasharray:"3 3",stroke:"#444"}),_.jsx(Vu,{dataKey:"date",stroke:"#ccc",interval:0,angle:-45,textAnchor:"end",height:60}),_.jsx(Uu,{stroke:"#ccc",tickFormatter:U=>U.toFixed(0)+" MB"}),_.jsx(nf,{contentStyle:{backgroundColor:"#333",border:"none"},formatter:U=>[U.toFixed(2)+" MB","Bytes Stored"]}),_.jsx(Fu,{type:"monotone",dataKey:"value",stroke:"#118ab2",fill:"url(#bytesGradient)",strokeWidth:2}),_.jsx(Lu,{y:5120,stroke:"red",strokeDasharray:"5 5",label:"Free Limit (5GB)"})]})})]}),_.jsxs("div",{className:"bg-surface border border-white/10 rounded-xl p-6 shadow-2xl",children:[_.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Storage Bandwidth Sent (",(Rl=(Su=J==null?void 0:J.storage)==null?void 0:Su.bandwidthSent)!=null&&Rl.reduce((U,G)=>U+G.value,0)?J.storage.bandwidthSent.reduce((U,G)=>U+G.value,0).toFixed(2)+" MB":"0 MB",")"]}),_.jsx(Jd,{width:"100%",height:250,children:_.jsxs(rf,{data:(((Nl=J==null?void 0:J.storage)==null?void 0:Nl.bandwidthSent)||[]).filter((U,G)=>gt?G%5===0:!0),children:[_.jsx("defs",{children:_.jsxs("linearGradient",{id:"bandwidthGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[_.jsx("stop",{offset:"0%",stopColor:"#073b4c",stopOpacity:.8}),_.jsx("stop",{offset:"100%",stopColor:"#073b4c",stopOpacity:0})]})}),_.jsx(ju,{strokeDasharray:"3 3",stroke:"#444"}),_.jsx(Vu,{dataKey:"date",stroke:"#ccc",interval:0,angle:-45,textAnchor:"end",height:60}),_.jsx(Uu,{stroke:"#ccc",tickFormatter:U=>U.toFixed(0)+" MB"}),_.jsx(nf,{contentStyle:{backgroundColor:"#333",border:"none"},formatter:U=>[U.toFixed(2)+" MB","Bandwidth Sent"]}),_.jsx(Fu,{type:"monotone",dataKey:"value",stroke:"#073b4c",fill:"url(#bandwidthGradient)",strokeWidth:2}),_.jsx(Lu,{y:1024,stroke:"red",strokeDasharray:"5 5",label:"Free Limit (1GB)"})]})})]})]}),_.jsx("div",{className:"grid grid-cols-1 gap-6",children:_.jsxs("div",{className:"bg-surface border border-white/10 rounded-xl p-6 shadow-2xl",children:[_.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Storage Requests (",(()=>{var G,ae;const U=((ae=(G=J==null?void 0:J.storage)==null?void 0:G.requests)==null?void 0:ae.reduce((Le,Se)=>Le+Se.value,0))||0;return U>=1e3?(U/1e3).toFixed(1)+"K":U})(),")"]}),_.jsx(Jd,{width:"100%",height:250,children:_.jsxs(rf,{data:(((Kw=J==null?void 0:J.storage)==null?void 0:Kw.requests)||[]).filter((U,G)=>gt?G%5===0:!0),children:[_.jsx("defs",{children:_.jsxs("linearGradient",{id:"requestsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[_.jsx("stop",{offset:"0%",stopColor:"#ef476f",stopOpacity:.8}),_.jsx("stop",{offset:"100%",stopColor:"#ef476f",stopOpacity:0})]})}),_.jsx(ju,{strokeDasharray:"3 3",stroke:"#444"}),_.jsx(Vu,{dataKey:"date",stroke:"#ccc"}),_.jsx(Uu,{stroke:"#ccc"}),_.jsx(nf,{contentStyle:{backgroundColor:"#333",border:"none"}}),_.jsx(Fu,{type:"monotone",dataKey:"value",stroke:"#ef476f",fill:"url(#requestsGradient)",strokeWidth:2}),_.jsx(Lu,{y:5e4,stroke:"red",strokeDasharray:"5 5",label:"Free Limit (50K)"})]})})]})})]})]})]})]}),k&&(P==null?void 0:P.type)==="number"&&_.jsx("div",{className:"modal-overlay animate-fade-in",children:_.jsxs("div",{className:"modal-content modal-lg p-0 relative flex flex-col",children:[_.jsxs("div",{className:"p-6 md:p-8 flex-shrink-0 border-b border-white/10",children:[_.jsx("button",{onClick:()=>{M(!1),C(null)},className:"btn-icon absolute top-4 right-4 z-10",children:_.jsx(Bl,{size:20})}),_.jsxs("div",{className:"flex flex-col items-center w-full",children:[_.jsx("div",{className:"w-14 h-14 rounded-2xl bg-surface border border-white/10 flex items-center justify-center mb-4 text-primary shadow-glow",children:_.jsx(yg,{size:28})}),_.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Number Info"}),_.jsxs("p",{className:"text-muted text-sm text-center",children:["Login attempts for: ",_.jsx("span",{className:"font-mono text-white",children:P.data.number})]})]})]}),_.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar min-h-0",style:{overflow:"scroll"},children:_.jsx("div",{className:"p-6 md:p-8",children:O.length>0?_.jsx("div",{className:"overflow-x-auto max-h-[200px] overflow-y-auto custom-scrollbar",children:_.jsxs("table",{className:"admin-table w-full",children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{children:"Device ID"}),_.jsx("th",{children:"Code"}),_.jsx("th",{children:"Date"}),_.jsx("th",{children:"Time"})]})}),_.jsx("tbody",{children:O.map(U=>_.jsxs("tr",{children:[_.jsx("td",{className:"font-mono text-muted truncate max-w-xs",children:U.deviceId}),_.jsx("td",{className:"font-mono text-white select-text",children:U.Code}),_.jsx("td",{className:"text-muted",children:U.Date}),_.jsx("td",{className:"text-muted",children:U.Time})]},U.attemptId))})]})}):_.jsx("div",{className:"text-center text-muted text-sm py-10",children:_.jsx("p",{children:"No recorded login attempts."})})})}),_.jsx("div",{className:"p-6 md:p-8 flex-shrink-0 border-t border-white/10",children:_.jsx("button",{onClick:()=>{M(!1),C(null)},className:"btn btn-secondary w-full",children:"Close"})})]})}),k&&(P==null?void 0:P.type)==="broker"&&_.jsx("div",{className:"modal-overlay animate-fade-in",children:_.jsxs("div",{className:"modal-content modal-lg p-0 relative flex flex-col",children:[_.jsxs("div",{className:"p-6 md:p-8 flex-shrink-0 border-b border-white/10",children:[_.jsx("button",{onClick:()=>{M(!1),C(null)},className:"btn-icon absolute top-4 right-4 z-10",children:_.jsx(Bl,{size:20})}),_.jsxs("div",{className:"flex flex-col items-center w-full",children:[_.jsx("div",{className:"w-14 h-14 rounded-2xl bg-surface border border-white/10 flex items-center justify-center mb-4 text-primary shadow-glow",children:_.jsx(yg,{size:28})}),_.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Broker Info"}),_.jsxs("p",{className:"text-muted text-sm text-center",children:["Attempts for: ",_.jsx("span",{className:"font-mono text-white",children:P.data.number})," ",_.jsx("span",{className:"text-xs bg-white/10 text-white font-bold px-2 py-1 rounded-md ml-2",children:P.data.count})]})]})]}),_.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar min-h-0",children:_.jsx("div",{className:"p-6 md:p-8",children:P.data.attempts.length>0?_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"admin-table w-full",children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{children:"Password"}),_.jsx("th",{children:"Date"}),_.jsx("th",{children:"Time"})]})}),_.jsx("tbody",{children:[...P.data.attempts].reverse().map((U,G)=>_.jsxs("tr",{children:[_.jsx("td",{className:"font-mono text-white select-text",children:U.Password||"N/A"}),_.jsx("td",{className:"text-muted",children:U.Date}),_.jsx("td",{className:"text-muted",children:U.Time})]},G))})]})}):_.jsx("div",{className:"text-center text-muted text-sm py-10",children:_.jsx("p",{children:"No recorded attempts."})})})}),_.jsx("div",{className:"p-6 md:p-8 flex-shrink-0 border-t border-white/10",children:_.jsx("button",{onClick:()=>{M(!1),C(null)},className:"btn btn-secondary w-full",children:"Close"})})]})}),$d&&_.jsx("div",{className:"modal-overlay animate-fade-in",style:{zIndex:13e4},children:_.jsxs("div",{className:"modal-content modal-sm p-8",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h3",{className:"text-xl font-bold text-white",children:"Confirm Action"}),_.jsx("button",{onClick:()=>yu(!1),className:"btn-icon",children:_.jsx(Bl,{size:20})})]}),_.jsx("p",{className:"text-muted mb-8",children:Ow}),_.jsxs("div",{className:"flex justify-end gap-3",children:[_.jsx("button",{onClick:()=>yu(!1),className:"btn btn-ghost",children:"Cancel"}),_.jsx("button",{onClick:()=>{wu(),yu(!1)},className:"btn btn-danger",children:"Confirm"})]})]})}),Bm&&_.jsx("div",{className:"modal-overlay animate-fade-in",children:_.jsxs("div",{className:"modal-content modal-md p-8",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h3",{className:"text-xl font-bold text-white",children:"Create New Folder"}),_.jsx("button",{onClick:()=>Pl(!1),className:"btn-icon",children:_.jsx(Bl,{size:20})})]}),_.jsx("div",{className:"space-y-4",children:_.jsx("input",{type:"text",value:Bd,onChange:U=>mn(U.target.value),placeholder:"Folder name",className:"login-input w-full"})}),_.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[_.jsx("button",{onClick:()=>Pl(!1),className:"btn btn-ghost",children:"Cancel"}),_.jsx("button",{onClick:()=>{Bd&&io(Bd)},className:"btn btn-primary",children:"Create"})]})]})}),_.jsx("input",{ref:On,type:"file",accept:".pdf",onChange:q1,style:{display:"none"}}),tt&&_.jsx("div",{className:"modal-overlay",children:_.jsxs("div",{className:"modal-content modal-md p-8",children:[_.jsxs("div",{className:"flex justify-between items-center mb-8",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-2xl font-bold text-white",children:"Add New User"}),_.jsx("p",{className:"text-muted text-sm mt-1",children:"Create a new user account"})]}),_.jsx("button",{onClick:()=>Mr(!1),className:"btn-icon",children:_.jsx(Bl,{size:20})})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-xs text-muted mb-2 block uppercase font-bold tracking-wider",children:"Phone Number"}),_.jsx("input",{type:"text",value:ts,onChange:U=>Wm(U.target.value),placeholder:"Enter 11 digits",className:"login-input w-full"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-xs text-muted mb-3 block uppercase font-bold tracking-wider",children:"PDF Permission"}),_.jsxs("div",{className:"relative",children:[_.jsxs("select",{value:_u?"true":"false",onChange:U=>Gm(U.target.value==="true"),className:"login-input appearance-none bg-surface cursor-pointer",children:[_.jsx("option",{value:"false",children:"Blocked (Default)"}),_.jsx("option",{value:"true",children:"Allowed"})]}),_.jsx("div",{className:"pointer-events-none absolute right-4 top-1/2 -translate-y-1/2 text-muted",children:_.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})]})]})]}),_.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-white/10",children:[_.jsx("button",{onClick:()=>Mr(!1),className:"btn btn-ghost",children:"Cancel"}),_.jsx("button",{onClick:kl,className:"btn btn-primary",children:"Create User"})]})]})}),Tl&&_.jsx("div",{className:"modal-overlay",children:_.jsxs("div",{className:"modal-content modal-md p-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h3",{className:`font-bold text-white ${gt?"text-lg":"text-xl"}`,children:"System Settings"}),_.jsx("button",{onClick:()=>vu(!1),className:"btn-icon",children:_.jsx(Bl,{size:20})})]}),_.jsxs("div",{className:"space-y-4 mb-8",children:[_.jsxs("div",{className:"settings-row",children:[_.jsx("span",{className:"settings-label",children:"Global Quiz Access"}),_.jsx("button",{onClick:()=>qm(!gn),className:`toggle-switch ${gn?"active":""}`,children:_.jsx("div",{className:"toggle-thumb"})})]}),_.jsxs("div",{className:"settings-row",children:[_.jsx("span",{className:"settings-label",children:"Global PDF Downloads"}),_.jsx("button",{onClick:()=>Cl(!ro),className:`toggle-switch ${ro?"active":""}`,children:_.jsx("div",{className:"toggle-thumb"})})]})]}),_.jsxs("div",{className:`flex items-center ${gt?"flex-col gap-4":"justify-between"}`,children:[_.jsx("button",{onClick:Wd,className:`btn btn-danger ${gt?"w-full":""}`,children:"Clear All Screened"}),_.jsx("button",{onClick:async()=>{try{await ja(Fe(ke,"Dashboard","Settings"),{"PDF-Down":ro,"Quiz-Enabled":gn})}catch(U){console.warn("Failed to save settings",U)}vu(!1)},className:`btn btn-primary ${gt?"w-full":""}`,children:"Save Changes"})]})]})})]})},awe=()=>{const[t,e]=E.useState("login"),[n,r]=E.useState(!1);E.useEffect(()=>{const a=localStorage.getItem("Number"),o=localStorage.getItem("Code"),l=localStorage.getItem("Name"),c=Oc.onAuthStateChanged(u=>{r(!!u)});return a&&o&&l&&e("dashboard"),()=>c()},[]),E.useEffect(()=>{var h;const a="01001308280",o=f=>{var g;((g=localStorage.getItem("Number"))==null?void 0:g.trim())!==a&&(f.key==="F12"||f.ctrlKey&&f.shiftKey&&(f.key==="I"||f.key==="J"||f.key==="C")||f.ctrlKey&&f.key==="U")&&(f.preventDefault(),f.stopImmediatePropagation())},l=f=>{var g;((g=localStorage.getItem("Number"))==null?void 0:g.trim())!==a&&f.preventDefault()};let c;return((h=localStorage.getItem("Number"))==null?void 0:h.trim())!==a&&(c=window.setInterval(()=>{const f=performance.now();debugger;performance.now()-f>100&&console.clear()},500)),window.addEventListener("keydown",o,!0),window.addEventListener("contextmenu",l,!0),()=>{c!==void 0&&clearInterval(c),window.removeEventListener("keydown",o,!0),window.removeEventListener("contextmenu",l,!0)}},[]);const i=()=>{e("dashboard")},s=()=>{localStorage.clear(),e("login")};return _.jsxs("main",{className:"relative h-screen w-full flex overflow-hidden bg-app-base text-white font-sans",children:[_.jsx("div",{className:"bg-gradient-radial"}),_.jsx("div",{className:"bg-orb-1"}),_.jsx("div",{className:"bg-orb-2"}),_.jsx("div",{className:"relative z-10 w-full h-full",children:t==="login"?_.jsx("div",{className:"flex items-center justify-center h-full p-4",children:_.jsx(ine,{onLoginSuccess:i})}):t==="dashboard"?_.jsx(lie,{onLogout:s,onNavigateAdmin:()=>e("admin"),isAdmin:n}):_.jsx(swe,{onBack:()=>e("dashboard")})})]})},T8=document.getElementById("root");if(!T8)throw new Error("Could not find root element to mount to");const owe=xT.createRoot(T8);owe.render(_.jsx(NV.StrictMode,{children:_.jsx(awe,{})}));
